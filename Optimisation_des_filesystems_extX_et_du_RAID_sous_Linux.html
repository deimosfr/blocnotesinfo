<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Optimisation des filesystems extX et du RAID sous Linux - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.cite.styles|mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux","wgTitle":"Optimisation des filesystems extX et du RAID sous Linux","wgCurRevisionId":12179,"wgRevisionId":12179,"wgArticleId":3444,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux","wgRelevantArticleId":3444,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Optimisation des filesystems extX et du RAID sous Linux</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#mw-navigation">navigation</a>, 					<a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#ExtX"><span class="tocnumber">2</span> <span class="toctext">ExtX</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#La_fragmentation"><span class="tocnumber">3</span> <span class="toctext">La fragmentation</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Obtenir_les_informations_de_fragmentation"><span class="tocnumber">3.1</span> <span class="toctext">Obtenir les informations de fragmentation</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Tuning_de_fragmentation"><span class="tocnumber">3.2</span> <span class="toctext">Tuning de fragmentation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Les_Journaux"><span class="tocnumber">4</span> <span class="toctext">Les Journaux</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Tuning_de_journaux"><span class="tocnumber">4.1</span> <span class="toctext">Tuning de journaux</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Partition_s.C3.A9par.C3.A9e"><span class="tocnumber">4.1.1</span> <span class="toctext">Partition séparée</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Augmenter_les_p.C3.A9riodes_d.27.C3.A9criture_des_journaux"><span class="tocnumber">4.1.2</span> <span class="toctext">Augmenter les périodes d'écriture des journaux</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#noatime"><span class="tocnumber">5</span> <span class="toctext">noatime</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Les_locks_contentions"><span class="tocnumber">6</span> <span class="toctext">Les locks contentions</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#RAID"><span class="tocnumber">7</span> <span class="toctext">RAID</span></a>
<ul>
<li class="toclevel-2"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Chunk_size"><span class="tocnumber">7.1</span> <span class="toctext">Chunk size</span></a></li>
<li class="toclevel-2"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Stride"><span class="tocnumber">7.2</span> <span class="toctext">Stride</span></a></li>
<li class="toclevel-2"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Le_Round_Robin"><span class="tocnumber">7.3</span> <span class="toctext">Le Round Robin</span></a></li>
<li class="toclevel-2"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Les_RAIDs_.C3.A0_parit.C3.A9"><span class="tocnumber">7.4</span> <span class="toctext">Les RAIDs à parité</span></a></li>
<li class="toclevel-2"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#Le_RAID_1"><span class="tocnumber">7.5</span> <span class="toctext">Le RAID 1</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#References"><span class="tocnumber">8</span> <span class="toctext">References</span></a></li>
</ul>
</div>

<table class="config_array" align="right" style="width:20em; font-size:90%; text-align:left; border: 1px #d0e7ff solid; margin-left:10px;">
   <tr>
      <td class="config_subarray" colspan="2" style="text-align:center;"><a href="./File:Poweredbylinux.jpg.html" class="image" title="Linux"><img alt="Linux" src="images/2/2f/Poweredbylinux.jpg" width="100" height="150" /></a></td>
   </tr><tr><td colspan="2" style="text-align:center;"><hr class="gradient" /></td></tr><tr>
      <th>Software version</th>
      <td>Kernel 2.6.32+</td>
   </tr><tr>
      <th>Operating System</th>
      <td>Red Hat 6.3<br />Debian 7</td>
   </tr><tr>
      <th>Website</th>
      <td><a rel="nofollow" class="external text" href="http://www.kernel.org">Kernel Website</a></td>
   </tr><tr>
      <th>Last Update</th>
      <td>13/02/2013</td>
   </tr><tr>
      <th>Others</th>
      <td></td>
   </tr>
</table>
<h1><span class="mw-headline" id="Introduction"><span class="mw-headline-number">1</span> Introduction</span></h1>
<p>Toutes les opérations de fichiers sur Linux est géré par VFS. La couche VFS est une interface kernel commune pour les applications afin d'accéder à des fichiers. VFS lui s'occupe du dialogue avec les différents drivers. L'inode et dentry cache est gérer par VFS également. VFS est donc capable de gérer via une interface commune différents type de filesystems, même réseaux.
</p><p><a href="./File:Vfs.png.html" class="image"><img alt="Vfs.png" src="images/e/e1/Vfs.png" width="392" height="329" /></a>
</p><p>Pour voir la liste des drivers filesystems chargés et donc utilisable par VFS&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> cat</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; cat /proc/filesystems 
nodev	sysfs
nodev	rootfs
nodev	bdev
nodev	proc
nodev	cgroup
nodev	cpuset
nodev	tmpfs
nodev	devtmpfs
nodev	debugfs
nodev	securityfs
nodev	sockfs
nodev	pipefs
nodev	anon_inodefs
nodev	devpts
nodev	ramfs
nodev	hugetlbfs
nodev	pstore
nodev	mqueue
nodev	usbfs
	ext4
nodev	binfmt_misc
	vfat</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="ExtX"><span class="mw-headline-number">2</span> ExtX</span></h1>
<p><a href="./File:Ext2fs_struct.jpg.html" class="image"><img alt="Ext2fs struct.jpg" src="images/5/50/Ext2fs_struct.jpg" width="537" height="296" /></a>
<sup id="cite_ref-1" class="reference"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_note-1">[1]</a></sup>
</p><p>Les filesystems extX sont découpés en groupes de blocks qui ont tous la même structure et leur permettent de limiter la fragmentation. Chaque groupe de block a sa propre table d'inodes. Le fait que chaque groupe gère sa propre table, permet de réduire considérablement les temps d'accès. Lorsque le kernel veut allouer des blocks de données sur un fichier, il essayera de les allouer sur le même groupe de blocks.
</p><p>Pour expliquer un peu le schema ci dessus&#160;:
</p>
<ul><li> Superblock&#160;: groupe de block 0, il contient le superblock primaire, tandis que les autres groupes contiennent une sauvegarde de ce superblock</li>
<li> FS/Group descriptor&#160;: donnes les informations sur la structure du groupe de blocks</li>
<li> Block Bitmap&#160;: permet de mettre ou enlever des bits pour chaque block libre ou en cours d'utilisation. Par exemple, avec un filesystem ayant des blocks de 4K, la taille du groupe de blocks est limité à 4096*8 blocks.</li>
<li> Inode Bitmap&#160;: permet de mettre ou enlever des bits pour chaque inode libre ou en cours d'utilisation.</li>
<li> Inode Table&#160;: L'espace ou sont stockés les inodes. Chaque inode corresponds à 128 bytes sur 8 inodes/K.</li></ul>
<p>Comme pour tout filesystem, le premier block correspond au secteur de boot.
</p>
<h1><span class="mw-headline" id="La_fragmentation"><span class="mw-headline-number">3</span> La fragmentation</span></h1>
<p>La fragmentation est source de gros ralentissement sur des filesystems tel que fat32, mais ne l'est pas pour extX. Bien que des utilitaires de défragmentation existent sur extX, il ne sont normalement pas nécessaire dû à la nature de ce filesystem. La fragmentation ralenti les performances sur les lectures séquentielles du fait que la tête de lecture du disque doit se déplacer énormément. Le kernel s'occupe de réarranger les données pour minimiser les fragmentations.
</p><p>Lorsque qu'il y a une allocation de fichier sur de l'extX, le filesystem va pré-allouer de l'espace supplémentaire jusqu'à 8 blocks de plus pour limiter la fragmentation. dans le cas ou ce n'est pas possible, une allocation sur le même groupe de blocks sera faite et donc il n'y aura qu'une minime fragmentation.
</p>
<h2><span class="mw-headline" id="Obtenir_les_informations_de_fragmentation"><span class="mw-headline-number">3.1</span> Obtenir les informations de fragmentation</span></h2>
<p>Pour voir s'il y a de la fragmentation sur un filesystem monté&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> dumpe2fs</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; dumpe2fs /dev/sda1
Groupe 1 : (Blocs 8193-16384) [ITABLE_ZEROED]
  Checksum 0x6346, i-noeuds non utilisés 2007
 superbloc Secours à 8193, Descripteurs de groupes à 8194-8194
  Blocs réservés GDT à 8195-8450
 Bitmap de blocs à 260 (bg #0 + 259), Bitmap d'i-noeuds à 276 (bg #0 + 275)
 Table d'i-noeuds à 542-792 (bg #0 + 541)
  5872 blocs libres, 2007 i-noeuds libres, 1 répertoires, 2007 i-noeuds non utilisés
<span class="xtra ln-xtra"> Blocs libres : 8577-8702, 8706-9216, 10043-10044, 10235-12288, 12293-12997, 13176, 13200, 13284, 13912-16382</span> I-noeuds libres : 2010-4016
Groupe 2 : (Blocs 16385-24576) [INODE_UNINIT, ITABLE_ZEROED]
  Checksum 0x8215, i-noeuds non utilisés 2008
 Bitmap de blocs à 261 (bg #0 + 260), Bitmap d'i-noeuds à 277 (bg #0 + 276)
 Table d'i-noeuds à 793-1043 (bg #0 + 792)
  3971 blocs libres, 2008 i-noeuds libres, 0 répertoires, 2008 i-noeuds non utilisés
<span class="xtra ln-xtra"> Blocs libres : 20481-20608</span> I-noeuds libres : 4017-6024</pre></div></div>
</td></tr></table><br />
<ul><li> A la ligne 8&#160;: il y a de la fragmentation car il y a quelques blocks non contigus sur le groupe de blocks</li>
<li> A la ligne 15&#160;: il n'y a pas de fragmentation sur le groupe de blocks</li></ul>
<p>Vous pouvez utiliser la commande filefrag pour voir la fragmentation sur un fichier&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> filefrag</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; filefrag -v /etc/passwd
Filesystem type is: ef53
File size of /etc/passwd is 1405 (1 block, blocksize 4096)
 ext logical physical expected length flags
   0       0  3219179               1 eof
/etc/passwd: 1 extent found</pre></div></div>
</td></tr></table><br />
<p>Et pour un filesystem démonté, vous connaissez la commande fsck.
</p>
<h2><span class="mw-headline" id="Tuning_de_fragmentation"><span class="mw-headline-number">3.2</span> Tuning de fragmentation</span></h2>
<p>Par défaut, lorsque vous formattez une partition en extX, 5% de la capacité de celle ci est réservée à la gestion du FS afin d'éviter la fragmentation. Il existe une option lors du mkfs pour spécifier le pourcentage souhaité pour cette gestion&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mke2fs</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mke2fs -m &lt;pourcentage_reserve&gt;</pre></div></div>
</td></tr></table><br />
<p>Si votre filesystem est déjà créer, vous pouvez changer la taille de cette allocation&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> tune2fs</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">tune2fs -m &lt;pourcentage_reserve&gt;</pre></div></div>
</td></tr></table><br />
<table width="100%" class="notes_array">
<tr>
<td class="notes_subarray"> <font size="-1"><a href="./File:Notes_file.png.html" class="image" title="Notes"><img alt="Notes" src="images/2/20/Notes_file.png" width="31" height="32" /></a> Notes</font>
</td></tr>
<tr>
<td>Si vous n'utilisez pas assez d'espace réservé, vous aurez une dégradation des performances, si vous en utilisez trop, vous perdrez de l'espace disque inutilement.
</td></tr></table><br />
<h1><span class="mw-headline" id="Les_Journaux"><span class="mw-headline-number">4</span> Les Journaux</span></h1>
<p>Un des facteurs les plus important sur la baisse des performances en ext3 est le journal. Je précise qu'il n'y a pas de journaux en ext2. Il existe 3 type de journaux&#160;:
</p>
<ul><li> Ordered&#160;: les metadatas sont journalisées</li>
<li> Journal&#160;: les données et les métadatas sont journalisées</li>
<li> Writeback&#160;: les metadatas sont journalisées sans garantie</li></ul>
<p>Lors d'une demande écriture, des données qui doivent être écrites correspondent aux données elles même et aux journaux. Il y a donc 2 écritures pour une demande.
</p><p>Pour monter une partition en choisissant le journal&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mount</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mount -o data=&lt;journal_type&gt;</pre></div></div>
</td></tr></table><br />
<p>Sur la plus part des Linux, c'est le mode ordered qui est utilisé. Dans ce mode, les données devant être écrites le seront de telle sorte que les blocks de données liées aux metadatas sont écrite sur le disque avant que les metadatas soient écrites dans le journal. Cela permet d'avoir une consistance entre les journauux et les données. Toutes données listées présente dans le journal se trouvent donc sur le disque.<br />
Là ou l'on perd le moins de performances en extX, c'est le writeback. Dans ce mode le filesystem ne fait pas d'efforts pour mettre en ordre les données sur le disque. Les données sont d'abord écrites sur le journal avant d'être écrites sur le disque.
</p><p>Lorsque le journal est activé, les metadatas et les données sont journalisées. Ceci double le compteur de visites lorsqu'un journal interne est utilisé. Cependant, lorsque 'data=journal', pleins de petites écritures sont jointes pour l'écriture sur disque afin d'avoir une écriture sur disque linéaire, qui améliorera les performances et arrangera correctement les données.
</p><p>L'avantage du journal est de réduire le temps de check disque après un crash de la machine. Et 'data=journal' évite les lenteurs sur les écritures aléatoires. Le mode journal est donc le mode recommandé.
</p>
<h2><span class="mw-headline" id="Tuning_de_journaux"><span class="mw-headline-number">4.1</span> Tuning de journaux</span></h2>
<h3><span class="mw-headline" id="Partition_s.C3.A9par.C3.A9e"><span class="mw-headline-number">4.1.1</span> Partition séparée</span></h3>
<p>Afin d'avoir de meilleures performances sur le journal, il est possible de l'agrandir et de choisir la taille des blocks (qui peuvent aller de 1024 à 102400). Par exemple, voici comment spécifier une taille&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mke2fs</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mke2fs -b 4096 -J size=16 /dev/sda1</pre></div></div>
</td></tr></table><br />
<p>La taille du journal dépends de la taille du filesystem et du taux d'écriture. Si vous souhaitez gagner des performances, il faut mettre le journal sur une partition à part&#160;:
</p>
<ul><li> Le Data journaling est une option de montage, donc <b>le journal et le filesystem doivent avoir la même taille de blocks</b></li>
<li> La partition entière doit être dédiée au journal</li></ul>
<p>Pour créer un journal sur une autre partition, voici comment faire&#160;:
</p>
<ul><li> Démontage du filesystem&#160;:</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> umount</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">umount /mnt/datas</pre></div></div>
</td></tr></table><br />
<ul><li> On récupère la taille du journal&#160;:</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> dumpe2fs</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; dumpe2fs /dev/sda1 | grep -i 'journal size'
dumpe2fs 1.42.5 (29-Jul-2012)
<span class="xtra ln-xtra">Journal size:             128M</span></pre></div></div>
</td></tr></table><br />
<p>On peut voir que la taille du journal est de 128M.
</p>
<ul><li> On supprime le journal actuel de la partition&#160;:</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> tune2fs</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">tune2fs -f -O ^has_journal /dev/sda1</pre></div></div>
</td></tr></table><br />
<ul><li> On créer un nouveau journal sur une autre partition, qu'il faudra créer au préalable (donc 128M)&#160;:</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mke2fs</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mke2fs -O journal_dev -b 4096 /dev/sdb1</pre></div></div>
</td></tr></table><br />
<ul><li> On met à jour le filesystem de la première partition pour lui informer du nouveau journal&#160;:</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> tune2fs</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">tune2fs -j -J device=/dev/sdb1 /dev/sda1</pre></div></div>
</td></tr></table><br />
<h3><span class="mw-headline" id="Augmenter_les_p.C3.A9riodes_d.27.C3.A9criture_des_journaux"><span class="mw-headline-number">4.1.2</span> Augmenter les périodes d'écriture des journaux</span></h3>
<p>Il existe une option permettant de dire au driver ext3/4 tout les combien de temps il doit écrire dans le journal. Par défaut c'est 5 secondes, mais il est possible d'augmenter cette valeur, sous peine de perdre des données. Plus la valeur est basse, plus on garanti l'intégrité des données, mais on réduit les performances. Si la valeur passée est à 0, se sera alors les 5 secondes par défaut qui seront prises, mais si vous souhaitez changer cette valeur&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mount</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mount -o commit=15 /dev/sda1 /mnt/datas</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="noatime"><span class="mw-headline-number">5</span> noatime</span></h1>
<p>Il est possible de désactiver les temps d'accès sur les fichiers. C'est à dire que par défaut, à chaque fois que vous faites un accès à un fichier, il est enregistré la date d'accès sur ce dernier. S'il y a beaucoup d'accès concurrent sur une partition, ça finit par se sentir énormément. C'est pourquoi vous pouvez le désactiver si cette fonctionnalité ne vous est pas utile. Dans votre fstab, rajoutez l'option noatime&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/fstab</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">/dev/mapper/vg-home /home           ext4    defaults,noatime        0       2</pre></div></div>
</td></tr></table><br />
<p>Il est possible d'utiliser la même fonctionnalité pour les dossiers&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/fstab</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">/dev/mapper/vg-home /home           ext4    defaults,noatime,nodiratime        0       2</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="Les_locks_contentions"><span class="mw-headline-number">6</span> Les locks contentions</span></h1>
<p>Les applications nécessitant les accès exclusifs à un fichier font généralement une demande de lock, afin de savoir s'il est déjà utilisé ou non. C'est généralement le cas pour les partages réseaux pour être sur qu'il n'y aura pas de modifications à 2 endroits simultanément. Lorsqu'une application en a fini avec un fichier, elle libère le lock, ce qui permettra à d'autres applications d'y avoir de nouveau accès. Les mécanismes de lock sont largement utilisés par les bases de données par exemple.
</p><p>Il existe 3 types de locks&#160;:
</p>
<ul><li> Applicative&#160;: Les applicatives sont gérées par l'application et correspondent à un fichier situé quelque part sur le système. C'est à l'application de gérer le système de lock.</li>
<li> Advisory&#160;: Si l'on souhaites que ce soit le kernel qui gère le système de lock, c'est possible. Cependant en mode advisory, il est possible de coder un soft pour passer au travers de ce lock.</li>
<li> Mandatory&#160;: Si l'on veut aller plus loin et que n'importe quelle application ai la contrainte du lock sans que ce soit codé dans le programme, on va alors demander au kernel de le gérer.</li></ul>
<p>Pour le lock mandatory sur un fichier, il va falloir utiliser les SGID bit sur le group&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> chmod</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">chmod g+s-x fichier</pre></div></div>
</td></tr></table><br />
<p>Pour que cela fonctionne, il faudra également que la partition en question ai l'option d'activée&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mount</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mount -oremount,mand /mnt/datas</pre></div></div>
</td></tr></table><br />
<p>Vous pouvez obtenir les informations surl es locks kernel comme ceci&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> cat</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; cat /proc/locks 
1: POSIX  ADVISORY  WRITE 24473 00:0e:250393 0 EOF
2: POSIX  ADVISORY  READ  23603 fd:02:1704266 128 128
3: POSIX  ADVISORY  READ  23603 fd:02:1704249 1073741826 1073742335
4: POSIX  ADVISORY  READ  23603 fd:02:1704823 1073741826 1073742335
5: POSIX  ADVISORY  READ  23603 fd:02:1704243 1073741826 1073742335
6: POSIX  ADVISORY  READ  23603 fd:02:1704259 128 128
7: POSIX  ADVISORY  READ  23603 fd:02:1704217 1073741826 1073742335
8: POSIX  ADVISORY  WRITE 23603 fd:02:1704846 0 EOF
9: POSIX  ADVISORY  WRITE 10347 fd:02:3015193 1073741824 1073742335
10: POSIX  ADVISORY  WRITE 10347 fd:02:3015194 1073741824 1073742335
11: POSIX  ADVISORY  READ  10347 fd:02:3015933 128 128
12: POSIX  ADVISORY  READ  10347 fd:02:3015252 1073741826 1073742335
13: POSIX  ADVISORY  READ  10347 fd:02:3015922 128 128
14: POSIX  ADVISORY  READ  10347 fd:02:3015240 1073741826 1073742335
15: POSIX  ADVISORY  WRITE 10347 fd:02:3015192 0 EOF
16: FLOCK  ADVISORY  WRITE 3376 fd:02:2359374 0 EOF
17: FLOCK  ADVISORY  WRITE 3376 fd:02:2359366 0 EOF
18: FLOCK  ADVISORY  WRITE 3376 fd:02:2359348 0 EOF
19: FLOCK  ADVISORY  WRITE 3376 fd:02:2359339 0 EOF
20: FLOCK  ADVISORY  WRITE 3376 fd:02:2228383 0 EOF
21: FLOCK  ADVISORY  WRITE 3376 fd:02:2228252 0 EOF
22: POSIX  ADVISORY  WRITE 3376 00:11:11525 0 EOF
[...]</pre></div></div>
</td></tr></table><br />
<p>La 6ème colonne se lit de la façon suivante&#160;: MAJOR-DEVICE:MINOR-DEVICE:INODE-NUMBER. Grace au numero de PID, il est facile de retrouver le processus qui fait de la contention sur un fichier (5ème colonne). Si vous avez besoin de connaitre l'inode d'un fichier&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> ls</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; ls --inode fichier 
1704256 fichier</pre></div></div>
</td></tr></table><br />
<p>Et inversement, si vous avez besoin de trouver un fichier depuis un inode&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> find</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">find / -inum &lt;inode_number&gt; -print</pre></div></div>
</td></tr></table><br />
<p>Pour plus d'informations, consultez la documentation officielle<sup id="cite_ref-2" class="reference"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_note-2">[2]</a></sup>.
</p>
<h1><span class="mw-headline" id="RAID"><span class="mw-headline-number">7</span> RAID</span></h1>
<p>Je ne parlerais des différents Raid, mais vous laisserais plutôt Wikipedia pour cela<sup id="cite_ref-3" class="reference"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_note-3">[3]</a></sup>. Pour l'utilisation d'un RAID software sous Linux, <a href="Configuration_d'un_Raid_logiciel.html" title="Configuration d'un Raid logiciel">je vous recommande cette documentation</a><sup id="cite_ref-4" class="reference"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_note-4">[4]</a></sup>. Nous parlerons plutôt des performances puisque c'est le sujet ici. Le RAID 0 est le plus performant de tous les raid, mais il connait évidement ses problèmes de sécurité des données lors de la perte d'un disque.
</p><p>Le MTBF (Mean Time Between Failure) est également important sur les RAID. C'est une estimation du bon fonctionnement du RAID avant qu'un disque soit détecté comme défaillant.
</p>
<h2><span class="mw-headline" id="Chunk_size"><span class="mw-headline-number">7.1</span> Chunk size</span></h2>
<p>La "Chunck size" (ou taille du stripe ou encore element size pour certains revendeurs) est le nombre (en taille de segments (KiB)) de données écrites ou lues pour chaque périphérique avant le déplacement sur un autre segment. L'algorithme de déplacement utilisé est le Round Robin. La chunk size doit être un entier, multiple de la taille d'un block. Plus la taille des chunk est grande, plus la vitesse d'écriture est rapide sur les données de très grosse capacité, mais inversement est lente sur les petites données. Si la taille moyenne est requêtes IO est plus petite que la taille d'un chunck, la requête sera alors placée sur un seul disque du RAID, annulant tout les avantages du RAID. Réduire la taille de la chunck size, découpera les gros fichiers en plus petits qui seront répartis sur plusieurs disques ce qui améliorera les performances. Cependant le temps de positionnement des chunk sera réduit. Certains matériels ne permettent pas l'écriture tant qu'un stripe n'est pas complet, annulant cet effet de latence de positionnement.
</p><p>Une bonne règle pour définir la chunk size est de diviser environ la taille des opération IO par le nombre de disques sur le RAID (enlevez les disques de parités si RAID5 ou 6).
</p>
<table width="100%" class="notes_array">
<tr>
<td class="notes_subarray"> <font size="-1"><a href="./File:Notes_file.png.html" class="image" title="Notes"><img alt="Notes" src="images/2/20/Notes_file.png" width="31" height="32" /></a> Notes</font>
</td></tr>
<tr>
<td>Petit rappel&#160;:
<ul><li> Raid 0&#160;: Pas de parité</li>
<li> Raid 1&#160;: Pas de parité</li>
<li> Raid 5&#160;: 1 disque de parité</li>
<li> Raid 6&#160;: 2 disque de parité</li>
<li> Raid 10&#160;: Pas de disques de parité</li></ul>
</td></tr></table><br />
<p>Si vous n'avez aucunes idées de vos IO, prenez une valeur entre 32KB et 128KB en prenant un multiple de 2KB (ou 4KB si vous avez des tailles de blocks plus grandes). La chunk size (taille du stripe) est un facteur important sur les performances de votre RAID. Si le stripe est trop large, le raid peut avoir un "hot spot" qui sera le disque qui recevra le plus d'IO et réduira les performances de votre RAID. Il est évident que les meilleures performances sont lorsque les données sont éclatées sur tous les disques. La bonne formule est donc&#160;:
</p>
<dl><dd>Chunk size = average request IO size (avgrq-sz) / number of disks</dd></dl>
<p>Pour obtenir la taille des requêtes moyennes, je vous invite à faire un tour sur la documentation sur Systat<sup id="cite_ref-5" class="reference"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_note-5">[5]</a></sup> ou l'on parle d'<a href="./Sysstat_:_Des_outils_indispensable_pour_analyser_des_problèmes_de_performances.html#iostat" title="Sysstat : Des outils indispensable pour analyser des problèmes de performances">Iostat</a> et de <a href="./Sysstat_:_Des_outils_indispensable_pour_analyser_des_problèmes_de_performances.html#sar" title="Sysstat : Des outils indispensable pour analyser des problèmes de performances">Sar</a>.
</p>
<ul><li> Pour voir la chunk size sur un RAID (ici md0)&#160;:</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; cat /sys/block/md0/md/chunk_size 
131072</pre></div></div>
</td></tr></table><br />
<p>Il est donc ici de 128KB.
</p><p>Voici une autre façon de le voir&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> cat</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; cat /proc/mdstat 
Personalities&#160;: [raid10] 
md0&#160;: active raid10 sdc2[3] sda2[1] sdb2[0] sdd2[2]
<span class="xtra ln-xtra">      1949426688 blocks super 1.0 128K chunks 2 near-copies [4/4] [UUUU]</span>&#160;
unused devices: &lt;none&gt;</pre></div></div>
</td></tr></table><br />
<p>Ou bien encore&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mdadm</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; mdadm --detail /dev/md0 
/dev/md0:
        Version&#160;: 1.0
  Creation Time&#160;: Sat May 12 09:35:34 2012
     Raid Level&#160;: raid10
     Array Size&#160;: 1949426688 (1859.12 GiB 1996.21 GB)
  Used Dev Size&#160;: 974713344 (929.56 GiB 998.11 GB)
   Raid Devices&#160;: 4
  Total Devices&#160;: 4
    Persistence&#160;: Superblock is persistent
&#160;
    Update Time&#160;: Thu Aug 30 12:53:20 2012
          State&#160;: clean 
 Active Devices&#160;: 4
Working Devices&#160;: 4
 Failed Devices&#160;: 0
  Spare Devices&#160;: 0
&#160;
         Layout&#160;: near=2
<span class="xtra ln-xtra">     Chunk Size&#160;: 128K</span>&#160;
           Name&#160;: N7700:2
           UUID&#160;: 1a83e7dc:daa7d822:15a1de4d:e4f6fd19
         Events&#160;: 64
&#160;
    Number   Major   Minor   RaidDevice State
       0       8       18        0      active sync   /dev/sdb2
       1       8        2        1      active sync   /dev/sda2
       2       8       50        2      active sync   /dev/sdd2
       3       8       34        3      active sync   /dev/sdc2</pre></div></div>
</td></tr></table><br />
<ul><li> Il est possible de définir la chunk size à la création du RAID avec l'argument -c ou --chunk. Nous allons également voir comment le calculer au mieux. Utilisons d'abord iostat pour récupérer la valeur avgrq-sz&#160;:</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> iostat</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; iostat -x sda 1 5
&#160;
<span class="xtra ln-xtra">avg-cpu: &#160;%user  &#160;%nice&#160;%system&#160;%iowait &#160;%steal  &#160;%idle</span><span class="xtra ln-xtra">           0,21    0,00    0,29    0,05    0,00   99,45</span><span class="xtra ln-xtra">&#160;</span><span class="xtra ln-xtra">Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s avgrq-sz avgqu-sz   await  svctm &#160;%util</span><span class="xtra ln-xtra">sda               0,71     1,25    1,23    0,76    79,29    15,22    47,55     0,01    2,84   0,73   0,14</span>&#160;
avg-cpu: &#160;%user  &#160;%nice&#160;%system&#160;%iowait &#160;%steal  &#160;%idle
           0,00    0,00    0,00    0,00    0,00  100,00
&#160;
Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s avgrq-sz avgqu-sz   await  svctm &#160;%util
sda               0,00     0,00    1,00    0,00    16,00     0,00    16,00     0,00    1,00   1,00   0,10
&#160;
avg-cpu: &#160;%user  &#160;%nice&#160;%system&#160;%iowait &#160;%steal  &#160;%idle
           0,00    0,00    0,00    0,00    0,00  100,00</pre></div></div>
</td></tr></table><br />
<p>Faisons ensuite le calcul pour obtenir la chunk size en KiB&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> echo</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; echo &quot;47.55*512/1024&quot; | bc -l
23.77500000000000000000</pre></div></div>
</td></tr></table><br />
<p>Nous devons ensuite diviser cette valeur par le nombre de disques (admettons 2) et l'arrondir au multiple de 2 plus proche&#160;:
</p>
<dl><dd>Chunk Size(KB) = 23.775/2 = 11.88&#160;? 8</dd></dl>
<p>Ici la chunk size à mettre est de 8, puisque c'est le multiple de 2 qui se rapproche le plus de 11.88.
</p>
<table width="100%" class="warning_array">
<tr>
<td class="warning_subarray"> <font size="-1"><a href="./File:Warning_file.png.html" class="image" title="Warning"><img alt="Warning" src="images/0/09/Warning_file.png" width="39" height="32" /></a> <b>WARNING</b></font>
</td></tr>
<tr>
<td>Rappelez vous qu'il n'est pas conseillé de descendre en dessous de 32K&#160;!
</td></tr></table><br />
<p>Pour créer un raid 0 en définissant la chunk size&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mdadm -C /dev/md0 -l 0 -n 2 --chunk-size=32 /dev/sd[ab]1</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Stride"><span class="mw-headline-number">7.2</span> Stride</span></h2>
<p>Le Stride est un paramètre que l'on passe lors de la construction d'un RAID qui permet d'optimiser la façon dont le filesystem va placer ses blocks données sur les disques avant de passer aux suivants. Avec de l'extXn on peut optimiser en utilisant l'option -E qui correspond au nombre de filesystems blocks dans un chunk. Pour calculer le stride&#160;:
</p>
<dl><dd>Stride =  chunk size / block size</dd></dl>
<p>Pour un raid 0 ayant un chunk size de 64KiB (64 KiB / 4KiB = 16) par exemple&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mkfs.ext4</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mkfs.ext4 -b 4096 -E stride=16 /dev/mapper/vg1-lv0</pre></div></div>
</td></tr></table><br />
<p>Certains contrôleurs disques font une abstraction physique des groupes de blocks rendant impossible au kernel de les connaitre. Voici un exemple pour voir la taille d'un stride&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> dumpe2fs</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; dumpe2fs /dev/mapper/vg1-lv0 | grep -i stride        
dumpe2fs 1.42 (29-Nov-2011)
<span class="xtra ln-xtra">RAID stride:              16</span></pre></div></div>
</td></tr></table><br />
<p>Ici, la taille est 16 KiB.
</p><p>Pour calculer le stride, il existe un site web également&#160;: <a rel="nofollow" class="external free" href="http://busybox.net/~aldot/mkfs_stride.html">http://busybox.net/~aldot/mkfs_stride.html</a>
</p>
<h2><span class="mw-headline" id="Le_Round_Robin"><span class="mw-headline-number">7.3</span> Le Round Robin</span></h2>
<p>Les RAID sans parités permettent de segmenter les données à travers de multiple disques pour augmenter les performances en utilisant l'algorithme Round Robin. La taille des segments est définit à la création du RAID et fait référence à la chunk size.<br />
La taille d'un RAID est définit par le disque le plus petit lors de la création du RAID. La taille peut varier dans le futur si tous les disques sont remplacés par des disques de plus grosse capacité. Une resynchronisation des disques se fera et le filesystem pourra être étendu.
</p><p>Donc pour le tuning du Round Robin, il vous faut correctement tuner la chunk size et le stride pour que l'utilisation de l'algorithme soit optimale&#160;! C'est tout&#160;:-)
</p>
<h2><span class="mw-headline" id="Les_RAIDs_.C3.A0_parit.C3.A9"><span class="mw-headline-number">7.4</span> Les RAIDs à parité</span></h2>
<p>Une des grosses contraintes de performances des RAID 5 et 6 est le calcul des parités. Pour que les données y soient écrites, il faut que le calcul de parité soit effectué sur le raid au préalable. et ce n'est seulement ensuite que la parité et les données peuvent y être écrites.
</p>
<table width="100%" class="warning_array">
<tr>
<td class="warning_subarray"> <font size="-1"><a href="./File:Warning_file.png.html" class="image" title="Warning"><img alt="Warning" src="images/0/09/Warning_file.png" width="39" height="32" /></a> <b>WARNING</b></font>
</td></tr>
<tr>
<td>Evitez les RAID 5 et 6 si l'écriture de vos données représentent <b>+ de 20% de l'activité</b>
</td></tr></table><br />
<p>Chaque mise à jour de données requiert 4 opérations de type IO&#160;:
</p>
<ol><li> Les données à mettre à jour sont d'abord lues des disques</li>
<li> Mise à jour des nouvelles données (mais la parité n'est pas encore correcte)</li>
<li> Lecture des blocks du même stripe et calcul de parité</li>
<li> Écriture définitive des nouvelles données sur disques et de la parité</li></ol>
<p>En RAID 5, il est conseillé d'utiliser le cache du stripe&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> echo</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">echo 256 &gt; /sys/block/md0/md/stripe_cache_size</pre></div></div>
</td></tr></table><br />
<p>Pour plus d'informations sur les optimisations des RAID&#160;: <a rel="nofollow" class="external free" href="http://kernel.org/doc/Documentation/md.txt">http://kernel.org/doc/Documentation/md.txt</a><sup id="cite_ref-6" class="reference"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_note-6">[6]</a></sup><sup id="cite_ref-7" class="reference"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_note-7">[7]</a></sup>. Pour la partie optimisation, regardez les paramètres suivants&#160;: 
</p>
<ul><li> chunk_size</li>
<li> component_size</li>
<li> new_dev</li>
<li> safe_mode_delay</li>
<li> sync_speed_{min,max}</li>
<li> sync_action</li>
<li> stripe_cache_size</li></ul>
<h2><span class="mw-headline" id="Le_RAID_1"><span class="mw-headline-number">7.5</span> Le RAID 1</span></h2>
<p>Le driver RAID effectue une écriture dans le bitmap lorsque des changements ont été détectés depuis la dernière synchronisation. Un inconvénient majeure du RAID 1 est lors d'une coupure de courant, puisque celui ci doit se reconstruire intégralement. Avec la 'write-intent' bitmap,seul les parties qui ont changées auront à être synchroniser, ce qui réduit grandement le temps de reconstruction.
</p><p>Si un disque tombe en panne et est retiré du RAID, md arrête l'effacement des bits dans la bitmap. Si ce même disque est de nouveau introduit dans le RAID, md n'aura qu'à resynchroniser la différence. Lors de la création du RAID, si l'option '--write-intent' bitmap est combinée avec '--write-behind', les requêtes d'écritures vers des périphériques ayant l'option '--write-mostly' n'attendront pas que les requêtes soient complète avant d'écrire sur le disque. L'option '--write-behind' peut être utiliser pour les RAID1 avec liaisons lentes.
</p><p>Les nouvelles matrices mdraid prennent en charge l'utilisation de write intent bitmaps. Ceci aide le système à identifier les parties problématiques d'une matrice&#160;; ainsi, au cas où il se produirait un arrêt incorrect, les parties problématiques devront être resynchronisées, et non le disque entier. Cela permet de réduire de manière drastique le temps requis pour effectuer une resynchronisation. Des matrices nouvellement créées auront automatiquement un write intent bitmap ajouté lorsque possible. Par exemple, les matrices utilisées comme swap et les matrices de très petite taille (telles que les matrices /boot) ne bénéficieront pas de l'obtention de write intent bitmaps. Il est possible d'ajouter write intent bitmap aux matrices existant précédemment une fois que la mise à jour sur le périphérique est terminée via la commande mdadm --grow. Cependant, write intent bitmaps n'encourt pas d'impact sur la performance (environ 3-5% sur un bitmap d'une taille de 65536, mais peut augmenter jusqu'à 10% ou plus sur des bitmaps de plus petite taille, tels que 8192). Cela signifie que si write intent bitmap est ajouté à une matrice, il est préférable de conserver la taille relativement grande. La taille recommandée est 65536.<sup id="cite_ref-8" class="reference"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_note-8">[8]</a></sup>
</p><p>Pour voir si un RAID est bien persistant&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mdadm</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; mdadm --detail /dev/md0 
/dev/md0:
        Version&#160;: 1.0
  Creation Time&#160;: Sat May 12 09:35:34 2012
     Raid Level&#160;: raid10
     Array Size&#160;: 1949426688 (1859.12 GiB 1996.21 GB)
  Used Dev Size&#160;: 974713344 (929.56 GiB 998.11 GB)
   Raid Devices&#160;: 4
  Total Devices&#160;: 4
<span class="xtra ln-xtra">    Persistence&#160;: Superblock is persistent</span>&#160;
    Update Time&#160;: Thu Aug 30 16:43:17 2012
          State&#160;: clean 
 Active Devices&#160;: 4
Working Devices&#160;: 4
 Failed Devices&#160;: 0
  Spare Devices&#160;: 0
&#160;
         Layout&#160;: near=2
     Chunk Size&#160;: 128K
&#160;
           Name&#160;: N7700:2
           UUID&#160;: 1a83e7dc:daa7d822:15a1de4d:e4f6fd19
         Events&#160;: 64
&#160;
    Number   Major   Minor   RaidDevice State
       0       8       18        0      active sync   /dev/sdb2
       1       8        2        1      active sync   /dev/sda2
       2       8       50        2      active sync   /dev/sdd2
       3       8       34        3      active sync   /dev/sdc2</pre></div></div>
</td></tr></table><br />
<p>Pour ajouter le write intent bitmap (interne)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mdadm</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mdadm /dev/md0 --grow --bitmap=internal</pre></div></div>
</td></tr></table><br />
<p>Pour ajouter le write intent bitmap (externe)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mdadm</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mdadm /dev/md0 --grow --bitmap=/mnt/mon_fichier</pre></div></div>
</td></tr></table><br />
<p>Et pour le retirer&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mdadm</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mdadm /dev/md0 --grow --bitmap=none</pre></div></div>
</td></tr></table><br />
<p>Pour définir le disque lent et celui le plus rapide&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mdadm</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mdadm -C /dev/md0 -l1 -n2 -b /tmp/md0 --write-behind=256 /dev/sdal --write-mostly /dev/sdbl</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="References"><span class="mw-headline-number">8</span> References</span></h1>
<ol class="references">
<li id="cite_note-1"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_ref-1">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://www.apprenti-developpeur.net/unix-et-os/systeme-de-fichiers-sous-linux/">http://www.apprenti-developpeur.net/unix-et-os/systeme-de-fichiers-sous-linux/</a></span>
</li>
<li id="cite_note-2"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_ref-2">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://kernel.org/doc/Documentation/filesystems/mandatory-locking.txt">http://kernel.org/doc/Documentation/filesystems/mandatory-locking.txt</a></span>
</li>
<li id="cite_note-3"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_ref-3">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://fr.wikipedia.org/wiki/RAID_%28informatique%29">http://fr.wikipedia.org/wiki/RAID_%28informatique%29</a></span>
</li>
<li id="cite_note-4"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_ref-4">^</a> <span class="reference-text"><a href="Configuration_d'un_Raid_logiciel.html" title="Configuration d'un Raid logiciel">Configuration d'un Raid logiciel</a></span>
</li>
<li id="cite_note-5"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_ref-5">^</a> <span class="reference-text"><a href="./Sysstat_:_Des_outils_indispensable_pour_analyser_des_problèmes_de_performances.html" title="Sysstat : Des outils indispensable pour analyser des problèmes de performances">Sysstat : Des outils indispensable pour analyser des problèmes de performances</a></span>
</li>
<li id="cite_note-6"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_ref-6">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://kernel.org/doc/Documentation/md.txt">http://kernel.org/doc/Documentation/md.txt</a></span>
</li>
<li id="cite_note-7"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_ref-7">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://makarevitch.org/rant/raid/">http://makarevitch.org/rant/raid/</a></span>
</li>
<li id="cite_note-8"><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#cite_ref-8">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="https://access.redhat.com/knowledge/docs/fr-FR/Red_Hat_Enterprise_Linux/6/html/Migration_Planning_Guide/chap-Migration_Guide-File_Systems.html">https://access.redhat.com/knowledge/docs/fr-FR/Red_Hat_Enterprise_Linux/6/html/Migration_Planning_Guide/chap-Migration_Guide-File_Systems.html</a></span>
</li>
</ol>

<!-- 
NewPP limit report
CPU time usage: 0.108 seconds
Real time usage: 0.110 seconds
Preprocessor visited node count: 723/1000000
Preprocessor generated node count: 2203/1000000
Post‐expand include size: 22095/2097152 bytes
Template argument size: 2563/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   38.653      1 - -total
 44.26%   17.107      1 - Template:Linux_RAID_performances
 39.25%   15.171     32 - Template:Command
  7.80%    3.016      1 - Template:ExtX_optimization
  5.08%    1.963      1 - Template:Infobox
  3.96%    1.529      1 - Template:Iostat_cmd_output
  3.88%    1.500      2 - Template:Config
  2.99%    1.154      2 - Template:Warning
  2.65%    1.025      2 - Template:Notes
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:3444-0!*!0!1!en!5!* and timestamp 20181111230631 and revision id 12179
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux&amp;oldid=12179">https://wiki.deimos.fr/index.php?title=Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux&amp;oldid=12179</a>"					</div>
													<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=Optimisation+des+filesystems+extX+et+du+RAID+sous+Linux" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux&amp;oldid=12179" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=Optimisation_des_filesystems_extX_et_du_RAID_sous_Linux&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 13 February 2013, at 13:13.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["ext.cite.a11y","mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":31});
}</script>
	</body>
</html>
	