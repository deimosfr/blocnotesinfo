<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Ansible: a powerful agentless configuration management and orchestrator solution - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.cite.styles|mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution","wgTitle":"Ansible: a powerful agentless configuration management and orchestrator solution","wgCurRevisionId":13464,"wgRevisionId":13464,"wgArticleId":3709,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution","wgRelevantArticleId":3709,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-yaml {line-height: normal;}
.source-yaml li, .source-yaml pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for yaml
 * CSS class: source-yaml, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.yaml.source-yaml .de1, .yaml.source-yaml .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.yaml.source-yaml  {font-family:monospace;}
.yaml.source-yaml .imp {font-weight: bold; color: red;}
.yaml.source-yaml li, .yaml.source-yaml .li1 {font-weight: normal; vertical-align:top;}
.yaml.source-yaml .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.yaml.source-yaml .li2 {font-weight: bold; vertical-align:top;}
.yaml.source-yaml .kw1 {font-weight: bold;}
.yaml.source-yaml .co0 {color: #303050;background-color: #F5F5F5}
.yaml.source-yaml .co1 {color: blue;}
.yaml.source-yaml .co2 {font-weight: bold; color: red;}
.yaml.source-yaml .co3 {color: green;}
.yaml.source-yaml .co4 {color: #007F45;}
.yaml.source-yaml .co5 {color: #7f7fFF;}
.yaml.source-yaml .co6 {color: #FF7000;}
.yaml.source-yaml .co7 {color: #FF45C0;}
.yaml.source-yaml .co8 {font-weight: bold; color: #005F5F;}
.yaml.source-yaml .sy1 {color: cyan;}
.yaml.source-yaml .sy2 {font-weight: bold; color: brown;}
.yaml.source-yaml .st0 {color: #CF00CF;}
.yaml.source-yaml .ln-xtra, .yaml.source-yaml li.ln-xtra, .yaml.source-yaml div.ln-xtra {background-color: #ffc;}
.yaml.source-yaml span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-bash {line-height: normal;}
.source-bash li, .source-bash pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for bash
 * CSS class: source-bash, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.bash.source-bash .de1, .bash.source-bash .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.bash.source-bash  {font-family:monospace;}
.bash.source-bash .imp {font-weight: bold; color: red;}
.bash.source-bash li, .bash.source-bash .li1 {font-weight: normal; vertical-align:top;}
.bash.source-bash .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.bash.source-bash .li2 {font-weight: bold; vertical-align:top;}
.bash.source-bash .kw1 {color: #000000; font-weight: bold;}
.bash.source-bash .kw2 {color: #c20cb9; font-weight: bold;}
.bash.source-bash .kw3 {color: #7a0874; font-weight: bold;}
.bash.source-bash .co0 {color: #666666; font-style: italic;}
.bash.source-bash .co1 {color: #800000;}
.bash.source-bash .co2 {color: #cc0000; font-style: italic;}
.bash.source-bash .co3 {color: #000000; font-weight: bold;}
.bash.source-bash .co4 {color: #666666;}
.bash.source-bash .es1 {color: #000099; font-weight: bold;}
.bash.source-bash .es2 {color: #007800;}
.bash.source-bash .es3 {color: #007800;}
.bash.source-bash .es4 {color: #007800;}
.bash.source-bash .es5 {color: #780078;}
.bash.source-bash .es_h {color: #000099; font-weight: bold;}
.bash.source-bash .br0 {color: #7a0874; font-weight: bold;}
.bash.source-bash .sy0 {color: #000000; font-weight: bold;}
.bash.source-bash .st0 {color: #ff0000;}
.bash.source-bash .st_h {color: #ff0000;}
.bash.source-bash .nu0 {color: #000000;}
.bash.source-bash .re0 {color: #007800;}
.bash.source-bash .re1 {color: #007800;}
.bash.source-bash .re2 {color: #007800;}
.bash.source-bash .re4 {color: #007800;}
.bash.source-bash .re5 {color: #660033;}
.bash.source-bash .ln-xtra, .bash.source-bash li.ln-xtra, .bash.source-bash div.ln-xtra {background-color: #ffc;}
.bash.source-bash span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Ansible_a_powerful_agentless_configuration_management_and_orchestrator_solution skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Ansible: a powerful agentless configuration management and orchestrator solution</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#mw-navigation">navigation</a>, 					<a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#Usage"><span class="tocnumber">3</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#Multiple_conditions"><span class="tocnumber">3.1</span> <span class="toctext">Multiple conditions</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#Debugging_vars"><span class="tocnumber">3.2</span> <span class="toctext">Debugging vars</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#Do_not_notify_on_changes"><span class="tocnumber">3.3</span> <span class="toctext">Do not notify on changes</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#Force_handler_to_apply"><span class="tocnumber">3.4</span> <span class="toctext">Force handler to apply</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#Check_syntax_and_list_tasks"><span class="tocnumber">3.5</span> <span class="toctext">Check syntax and list tasks</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#References"><span class="tocnumber">4</span> <span class="toctext">References</span></a></li>
</ul>
</div>

<table class="config_array" align="right" style="width:20em; font-size:90%; text-align:left; border: 1px #d0e7ff solid; margin-left:10px;">
   <tr>
      <td class="config_subarray" colspan="2" style="text-align:center;"><a href="./File:Ansible_logo.png.html" class="image" title="Ansible"><img alt="Ansible" src="images/4/4b/Ansible_logo.png" width="220" height="221" /></a></td>
   </tr><tr><td colspan="2" style="text-align:center;"><hr class="gradient" /></td></tr><tr>
      <th>Software version</th>
      <td>1.6.2</td>
   </tr><tr>
      <th>Operating System</th>
      <td>Debian 8</td>
   </tr><tr>
      <th>Website</th>
      <td><a rel="nofollow" class="external text" href="http://www.ansible.com">Ansible Website</a></td>
   </tr><tr>
      <th>Last Update</th>
      <td>26/02/2015</td>
   </tr><tr>
      <th>Others</th>
      <td></td>
   </tr>
</table>
<h1><span class="mw-headline" id="Introduction"><span class="mw-headline-number">1</span> Introduction</span></h1>
<p>Ansible is an IT automation tool. It can configure systems, deploy software, and orchestrate more advanced IT tasks such as continuous deployments or zero downtime rolling updates.
</p><p>Ansible’s goals are foremost those of simplicity and maximum ease of use. It also has a strong focus on security and reliability, featuring a minimum of moving parts, usage of OpenSSH for transport (with an accelerated socket mode and pull modes as alternatives), and a language that is designed around auditability by humans – even those not familiar with the program.
</p><p>We believe simplicity is relevant to all sizes of environments and design for busy users of all types – whether this means developers, sysadmins, release engineers, IT managers, and everywhere in between. Ansible is appropriate for managing small setups with a handful of instances as well as enterprise environments with many thousands.
</p><p>Ansible manages machines in an agentless manner. There is never a question of how to upgrade remote daemons or the problem of not being able to manage systems because daemons are uninstalled. As OpenSSH is one of the most peer reviewed open source components, the security exposure of using the tool is greatly reduced. Ansible is decentralized – it relies on your existing OS credentials to control access to remote machines; if needed it can easily connect with Kerberos, LDAP, and other centralized authentication management systems.<sup id="cite_ref-1" class="reference"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#cite_note-1">[1]</a></sup>
</p><p>The documentation is enough complete and well done to avoid rewriting things here. However some tricky things can be done and that's what I'm trying to cover here.
</p>
<h1><span class="mw-headline" id="Installation"><span class="mw-headline-number">2</span> Installation</span></h1>
<p>To install Ansible, you have 2 choices:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">aptitude install ansible</pre></div></div>
</td></tr></table><br />
<p>Or with pip (require python-pip):
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> pip</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">pip install ansible</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="Usage"><span class="mw-headline-number">3</span> Usage</span></h1>
<h2><span class="mw-headline" id="Multiple_conditions"><span class="mw-headline-number">3.1</span> Multiple conditions</span></h2>
<p>If you want to set multiple condition, it can sometimes be complicated. Here is an example with 'or' and 'and':
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="yaml source-yaml"><pre class="de1"><span class="co3">- name</span><span class="sy2">: </span>remove systemd<span class="co3">
  apt</span><span class="sy2">: </span>name=systemd state=absent update_cache=<span class="kw1">yes</span> force=<span class="kw1">yes</span><span class="co3">
  when</span><span class="sy2">: </span>ansible_virtualization_type not in <span class="br0">&#91;</span> 'lxc', 'kvm', 'virtualbox' <span class="br0">&#93;</span> and <span class="br0">&#40;</span>ansible_virtualization_role&#160;!= 'host'<span class="br0">&#41;</span><span class="co3">
  tags</span><span class="sy2">: </span><span class="br0">&#91;</span>common, common_packages, common_services<span class="br0">&#93;</span></pre></div></div>
</td></tr></table><br />
<p>Here we're do not want to remove systemd package if we're not in a host (ansible_virtualization_role) and if the ansible_virtualization_type variable is not lxc,kvm or virtualbox.
</p>
<h2><span class="mw-headline" id="Debugging_vars"><span class="mw-headline-number">3.2</span> Debugging vars</span></h2>
<p>You can take a look at a current variable status:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">- debug: var=kibana_current</pre></div></div>
</td></tr></table><br />
<p>And see the result:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="yaml source-yaml"><pre class="de1"><span class="co3">TASK</span><span class="sy2">: </span><span class="br0">&#91;</span>kibana | debug var=kibana_current<span class="br0">&#93;</span> ************************************* <span class="co3">
&lt;kibana.deimos.lan&gt; ESTABLISH CONNECTION FOR USER</span><span class="sy2">: </span>root<span class="co3">
ok</span><span class="sy2">: </span><span class="br0">&#91;</span>kibana.deimos.lan<span class="br0">&#93;</span> =&gt; <span class="br0">&#123;</span><span class="co3">
    &quot;item&quot;</span><span class="sy2">: </span><span class="st0">&quot;&quot;</span>, <span class="co3">
    &quot;kibana_current&quot;</span><span class="sy2">: </span><span class="br0">&#123;</span><span class="co3">
        &quot;changed&quot;</span><span class="sy2">: </span>true, <span class="co3">
        &quot;cmd&quot;</span><span class="sy2">: </span><span class="st0">&quot;cd /usr/share/nginx/www/kibana&#160;; /usr/bin/git describe --tags &quot;</span>, <span class="co3">
        &quot;delta&quot;</span><span class="sy2">: </span><span class="st0">&quot;0:00:00.004179&quot;</span>, <span class="co3">
        &quot;end&quot;</span><span class="sy2">: </span><span class="st0">&quot;2014-06-10 12:10:51.797805&quot;</span>, <span class="co3">
        &quot;invocation&quot;</span><span class="sy2">: </span><span class="br0">&#123;</span><span class="co3">
            &quot;module_args&quot;</span><span class="sy2">: </span><span class="st0">&quot;cd /usr/share/nginx/www/kibana&#160;; /usr/bin/git describe --tags&quot;</span>, <span class="co3">
            &quot;module_name&quot;</span><span class="sy2">: </span><span class="st0">&quot;shell&quot;</span>
        <span class="br0">&#125;</span>, <span class="co3">
        &quot;item&quot;</span><span class="sy2">: </span><span class="st0">&quot;&quot;</span>, <span class="co3">
        &quot;rc&quot;</span><span class="sy2">: </span><span class="nu0">0</span>, <span class="co3">
        &quot;start&quot;</span><span class="sy2">: </span><span class="st0">&quot;2014-06-10 12:10:51.793626&quot;</span>, <span class="co3">
        &quot;stderr&quot;</span><span class="sy2">: </span><span class="st0">&quot;&quot;</span>, <span class="co3">
        &quot;stdout&quot;</span><span class="sy2">: </span><span class="st0">&quot;v3.1.0&quot;</span>, <span class="co3">
        &quot;stdout_lines&quot;</span><span class="sy2">: </span><span class="br0">&#91;</span>
            <span class="st0">&quot;v3.1.0&quot;</span>
        <span class="br0">&#93;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>You can now select a specific item, for example:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">- debug: var=kibana_current.stdout</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Do_not_notify_on_changes"><span class="mw-headline-number">3.3</span> Do not notify on changes</span></h2>
<p>To ignore changed=1 for a specific action that will run each time, you can add the change_when statement:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">- shell: git --git-dir={{kibana_path}}/.git/ describe --tags
  register: kibana_current
  changed_when: false</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Force_handler_to_apply"><span class="mw-headline-number">3.4</span> Force handler to apply</span></h2>
<p>Ansible handlers are defined in a handlers section or file and are called at the end of each play1) if they have been triggered. This is useful as it means you can have multiple tasks trigger another action, but ensure that the triggered action only runs once:<sup id="cite_ref-2" class="reference"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#cite_note-2">[2]</a></sup>
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="yaml source-yaml"><pre class="de1"><span class="co3">- name</span><span class="sy2">: </span>Add symlink for systemd<span class="co3">
  file</span><span class="sy2">: </span>src=/lib/systemd/system/mongodb.service dest=/etc/systemd/system/multi-user.target.wants/mongodb.service state=link<span class="co3">
  notify</span><span class="sy2">: </span>reload systemd
<span class="co3">
- meta</span><span class="sy2">: </span>flush_handlers
&#160;
<span class="sy1">...</span></pre></div></div>
</td></tr></table><br />
<p>This will here force 'reload systemd' handler to be applied without waiting the end of the playbook.
</p>
<h2><span class="mw-headline" id="Check_syntax_and_list_tasks"><span class="mw-headline-number">3.5</span> Check syntax and list tasks</span></h2>
<p>Here is an example to check all your playbook syntax and list tasks at the same time:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> ansible-playbook</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="bash source-bash"><pre class="de1"><span class="sy0">&gt;</span> ansible-playbook <span class="re5">-i</span> hosts <span class="re5">--syntax-check</span> <span class="re5">--list-tasks</span> <span class="re5">-e</span> <span class="re2">set_env</span>=prod <span class="re5">-D</span> <span class="re5">--limit</span> server01 site.yml 
&#160;
playbook: site.yml
&#160;
  play <span class="co0">#1 (physical):</span>
    Ensure iptables is installed <span class="br0">&#40;</span>debian<span class="br0">&#41;</span>
    Ensure iptables is installed <span class="br0">&#40;</span>redhat<span class="br0">&#41;</span>
    Prepare iptables rules
    Autoload the rules
    installing docker registry dependencies
    adding jenkins user to docker group
    configure docker
    ensure docker started
&#160;
  play <span class="co0">#2 (common):</span>
    Set <span class="kw2">hostname</span> to the current machine
    Use Debian CDN <span class="kw1">in</span> sources.list
    user root
    creating user
    deploy authorized_keys <span class="kw1">for</span> root
    deploy authorized_keys <span class="kw1">for</span> <span class="kw2">users</span>
    generate locales</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="References"><span class="mw-headline-number">4</span> References</span></h1>
<ol class="references">
<li id="cite_note-1"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#cite_ref-1">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://docs.ansible.com/">http://docs.ansible.com/</a></span>
</li>
<li id="cite_note-2"><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#cite_ref-2">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://wherenow.org/ansible-handlers/">http://wherenow.org/ansible-handlers/</a></span>
</li>
</ol>

<!-- 
NewPP limit report
CPU time usage: 0.040 seconds
Real time usage: 0.044 seconds
Preprocessor visited node count: 248/1000000
Preprocessor generated node count: 764/1000000
Post‐expand include size: 2350/2097152 bytes
Template argument size: 536/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   20.243      1 - -total
 40.38%    8.175      3 - Template:Command
 16.99%    3.439      5 - Template:Config
 10.42%    2.110      1 - Template:Infobox
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:3709-0!*!*!1!en!5!* and timestamp 20181111230705 and revision id 13464
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution&amp;oldid=13464">https://wiki.deimos.fr/index.php?title=Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution&amp;oldid=13464</a>"					</div>
													<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=Ansible%3A+a+powerful+agentless+configuration+management+and+orchestrator+solution" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="./Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution&amp;oldid=13464" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=Ansible:_a_powerful_agentless_configuration_management_and_orchestrator_solution&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 26 February 2015, at 07:09.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["ext.cite.a11y","mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":32});
}</script>
	</body>
</html>
	