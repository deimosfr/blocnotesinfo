<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Nginx : Installation et configuration d'une alternative d'Apache - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.cite.styles|mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache","wgTitle":"Nginx : Installation et configuration d'une alternative d'Apache","wgCurRevisionId":13431,"wgRevisionId":13431,"wgArticleId":2276,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache","wgRelevantArticleId":2276,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-ini {line-height: normal;}
.source-ini li, .source-ini pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for ini
 * CSS class: source-ini, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.ini.source-ini .de1, .ini.source-ini .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.ini.source-ini  {font-family:monospace;}
.ini.source-ini .imp {font-weight: bold; color: red;}
.ini.source-ini li, .ini.source-ini .li1 {font-weight: normal; vertical-align:top;}
.ini.source-ini .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.ini.source-ini .li2 {font-weight: bold; vertical-align:top;}
.ini.source-ini .co0 {color: #666666; font-style: italic;}
.ini.source-ini .sy0 {color: #000066; font-weight:bold;}
.ini.source-ini .st0 {color: #933;}
.ini.source-ini .re0 {color: #000066; font-weight:bold;}
.ini.source-ini .re1 {color: #000099;}
.ini.source-ini .re2 {color: #660066;}
.ini.source-ini .ln-xtra, .ini.source-ini li.ln-xtra, .ini.source-ini div.ln-xtra {background-color: #ffc;}
.ini.source-ini span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-bash {line-height: normal;}
.source-bash li, .source-bash pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for bash
 * CSS class: source-bash, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.bash.source-bash .de1, .bash.source-bash .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.bash.source-bash  {font-family:monospace;}
.bash.source-bash .imp {font-weight: bold; color: red;}
.bash.source-bash li, .bash.source-bash .li1 {font-weight: normal; vertical-align:top;}
.bash.source-bash .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.bash.source-bash .li2 {font-weight: bold; vertical-align:top;}
.bash.source-bash .kw1 {color: #000000; font-weight: bold;}
.bash.source-bash .kw2 {color: #c20cb9; font-weight: bold;}
.bash.source-bash .kw3 {color: #7a0874; font-weight: bold;}
.bash.source-bash .co0 {color: #666666; font-style: italic;}
.bash.source-bash .co1 {color: #800000;}
.bash.source-bash .co2 {color: #cc0000; font-style: italic;}
.bash.source-bash .co3 {color: #000000; font-weight: bold;}
.bash.source-bash .co4 {color: #666666;}
.bash.source-bash .es1 {color: #000099; font-weight: bold;}
.bash.source-bash .es2 {color: #007800;}
.bash.source-bash .es3 {color: #007800;}
.bash.source-bash .es4 {color: #007800;}
.bash.source-bash .es5 {color: #780078;}
.bash.source-bash .es_h {color: #000099; font-weight: bold;}
.bash.source-bash .br0 {color: #7a0874; font-weight: bold;}
.bash.source-bash .sy0 {color: #000000; font-weight: bold;}
.bash.source-bash .st0 {color: #ff0000;}
.bash.source-bash .st_h {color: #ff0000;}
.bash.source-bash .nu0 {color: #000000;}
.bash.source-bash .re0 {color: #007800;}
.bash.source-bash .re1 {color: #007800;}
.bash.source-bash .re2 {color: #007800;}
.bash.source-bash .re4 {color: #007800;}
.bash.source-bash .re5 {color: #660033;}
.bash.source-bash .ln-xtra, .bash.source-bash li.ln-xtra, .bash.source-bash div.ln-xtra {background-color: #ffc;}
.bash.source-bash span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-php {line-height: normal;}
.source-php li, .source-php pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for php
 * CSS class: source-php, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.php.source-php .de1, .php.source-php .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.php.source-php  {font-family:monospace;}
.php.source-php .imp {font-weight: bold; color: red;}
.php.source-php li, .php.source-php .li1 {font-weight: normal; vertical-align:top;}
.php.source-php .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.php.source-php .li2 {font-weight: bold; vertical-align:top;}
.php.source-php .kw1 {color: #b1b100;}
.php.source-php .kw2 {color: #000000; font-weight: bold;}
.php.source-php .kw3 {color: #990000;}
.php.source-php .kw4 {color: #009900; font-weight: bold;}
.php.source-php .co1 {color: #666666; font-style: italic;}
.php.source-php .co2 {color: #666666; font-style: italic;}
.php.source-php .co3 {color: #0000cc; font-style: italic;}
.php.source-php .co4 {color: #009933; font-style: italic;}
.php.source-php .coMULTI {color: #666666; font-style: italic;}
.php.source-php .es0 {color: #000099; font-weight: bold;}
.php.source-php .es1 {color: #000099; font-weight: bold;}
.php.source-php .es2 {color: #660099; font-weight: bold;}
.php.source-php .es3 {color: #660099; font-weight: bold;}
.php.source-php .es4 {color: #006699; font-weight: bold;}
.php.source-php .es5 {color: #006699; font-weight: bold; font-style: italic;}
.php.source-php .es6 {color: #009933; font-weight: bold;}
.php.source-php .es_h {color: #000099; font-weight: bold;}
.php.source-php .br0 {color: #009900;}
.php.source-php .sy0 {color: #339933;}
.php.source-php .sy1 {color: #000000; font-weight: bold;}
.php.source-php .st0 {color: #0000ff;}
.php.source-php .st_h {color: #0000ff;}
.php.source-php .nu0 {color: #cc66cc;}
.php.source-php .nu8 {color: #208080;}
.php.source-php .nu12 {color: #208080;}
.php.source-php .nu19 {color:#800080;}
.php.source-php .me1 {color: #004000;}
.php.source-php .me2 {color: #004000;}
.php.source-php .re0 {color: #000088;}
.php.source-php .ln-xtra, .php.source-php li.ln-xtra, .php.source-php div.ln-xtra {background-color: #ffc;}
.php.source-php span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Nginx_Installation_et_configuration_d_une_alternative_d_Apache skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Nginx : Installation et configuration d'une alternative d'Apache</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#mw-navigation">navigation</a>, 					<a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Configuration"><span class="tocnumber">3</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#php-fpm"><span class="tocnumber">3.1</span> <span class="toctext">php-fpm</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Installation_2"><span class="tocnumber">3.1.1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Configuration_2"><span class="tocnumber">3.1.2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-4 tocsection-7"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#PHP-FPM_Status"><span class="tocnumber">3.1.2.1</span> <span class="toctext">PHP-FPM Status</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#PHP_Fast_CGI"><span class="tocnumber">3.2</span> <span class="toctext">PHP Fast CGI</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Installation_3"><span class="tocnumber">3.2.1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Configuration_3"><span class="tocnumber">3.2.2</span> <span class="toctext">Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#nginx.conf"><span class="tocnumber">3.3</span> <span class="toctext">nginx.conf</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#drop.conf"><span class="tocnumber">3.4</span> <span class="toctext">drop.conf</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Les_VirtualHosts"><span class="tocnumber">3.5</span> <span class="toctext">Les VirtualHosts</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Les_htaccess"><span class="tocnumber">3.6</span> <span class="toctext">Les htaccess</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Le_port_par_d.C3.A9faut"><span class="tocnumber">3.7</span> <span class="toctext">Le port par défaut</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#SSL"><span class="tocnumber">3.8</span> <span class="toctext">SSL</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Installation_4"><span class="tocnumber">3.8.1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Configuration_4"><span class="tocnumber">3.8.2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-4 tocsection-19"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Forcer_une_connexion_en_SSL"><span class="tocnumber">3.8.2.1</span> <span class="toctext">Forcer une connexion en SSL</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-20"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Le_cache_FastCGI"><span class="tocnumber">3.9</span> <span class="toctext">Le cache FastCGI</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Page_de_maintenance"><span class="tocnumber">3.10</span> <span class="toctext">Page de maintenance</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Limiter_le_flood_et_les_sniffers"><span class="tocnumber">3.11</span> <span class="toctext">Limiter le flood et les sniffers</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Configuration_d.27applications"><span class="tocnumber">4</span> <span class="toctext">Configuration d'applications</span></a>
<ul>
<li class="toclevel-2 tocsection-24"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Server_status"><span class="tocnumber">4.1</span> <span class="toctext">Server status</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Wordpress"><span class="tocnumber">4.2</span> <span class="toctext">Wordpress</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Mediawiki"><span class="tocnumber">4.3</span> <span class="toctext">Mediawiki</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Gitweb"><span class="tocnumber">4.4</span> <span class="toctext">Gitweb</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Git"><span class="tocnumber">4.5</span> <span class="toctext">Git</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Piwik"><span class="tocnumber">4.6</span> <span class="toctext">Piwik</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#ownCloud"><span class="tocnumber">4.7</span> <span class="toctext">ownCloud</span></a>
<ul>
<li class="toclevel-3"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#ownCloud_4.X"><span class="tocnumber">4.7.1</span> <span class="toctext">ownCloud 4.X</span></a></li>
<li class="toclevel-3"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#ownCloud_5.X"><span class="tocnumber">4.7.2</span> <span class="toctext">ownCloud 5.X</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Firefox_Sync_Server"><span class="tocnumber">4.8</span> <span class="toctext">Firefox Sync Server</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Selfoss"><span class="tocnumber">4.9</span> <span class="toctext">Selfoss</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Seafile"><span class="tocnumber">4.10</span> <span class="toctext">Seafile</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Gogs"><span class="tocnumber">4.11</span> <span class="toctext">Gogs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-35"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#FAQ"><span class="tocnumber">5</span> <span class="toctext">FAQ</span></a>
<ul>
<li class="toclevel-2 tocsection-36"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Comment_analyser_les_r.C3.A8gles_qui_passent"><span class="tocnumber">5.1</span> <span class="toctext">Comment analyser les règles qui passent</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#client_intended_to_send_too_large_body"><span class="tocnumber">5.2</span> <span class="toctext">client intended to send too large body</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Access_denied."><span class="tocnumber">5.3</span> <span class="toctext">Access denied.</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-39"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Ressources"><span class="tocnumber">6</span> <span class="toctext">Ressources</span></a></li>
</ul>
</div>

<p><br />
</p>
<table class="config_array" align="right" style="width:20em; font-size:90%; text-align:left; border: 1px #d0e7ff solid; margin-left:10px;">
   <tr>
      <td class="config_subarray" colspan="2" style="text-align:center;"><a href="./File:Nginx-logo.png.html" class="image" title="Nginx Logo"><img alt="Nginx Logo" src="images/a/a1/Nginx-logo.png" width="136" height="36" /></a></td>
   </tr><tr><td colspan="2" style="text-align:center;"><hr class="gradient" /></td></tr><tr>
      <th>Software version</th>
      <td>1.2.1</td>
   </tr><tr>
      <th>Operating System</th>
      <td>Debian 7</td>
   </tr><tr>
      <th>Website</th>
      <td><a rel="nofollow" class="external text" href="http://nginx.org/">Nginx Website</a></td>
   </tr><tr>
      <th>Last Update</th>
      <td>29/08/2014</td>
   </tr><tr>
      <th>Others</th>
      <td></td>
   </tr>
</table>
<h1><span class="mw-headline" id="Introduction"><span class="mw-headline-number">1</span> Introduction</span></h1>
<p><a rel="nofollow" class="external text" href="http://fr.wikipedia.org/wiki/Nginx">Nginx</a> [engine x] est un logiciel de serveur Web (ou HTTP) écrit par Igor Sysoev, dont le développement a débuté en 2002 pour les besoins d'un site russe à très fort trafic.
</p><p>J'ai cherché pendant quelques temps une alternative à Apache car un peu trop gourmant. En découvrant lighttpd je m’étais rendu compte que d’autre serveur existait derrière Apache et IIS. Il était temps de creuser la question.
</p>
<h1><span class="mw-headline" id="Installation"><span class="mw-headline-number">2</span> Installation</span></h1>
<p>Pour l'installation, on est sur Debian donc c'est toujours aussi simple&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td>
<pre>aptitude install nginx
</pre>
</td></tr></table><br />
<p>Puis on va le démarrer&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td>
<pre>/etc/init.d/nginx start
</pre>
</td></tr></table><br />
<h1><span class="mw-headline" id="Configuration"><span class="mw-headline-number">3</span> Configuration</span></h1>
<h2><span class="mw-headline" id="php-fpm"><span class="mw-headline-number">3.1</span> php-fpm</span></h2>
<p>Ceci est la solution la plus optimale pour les machines multi threadées (plusieurs coeurs donc).
</p>
<h3><span class="mw-headline" id="Installation_2"><span class="mw-headline-number">3.1.1</span> Installation</span></h3>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">aptitude install php5-fpm</pre></div></div>
</td></tr></table><br />
<h3><span class="mw-headline" id="Configuration_2"><span class="mw-headline-number">3.1.2</span> Configuration</span></h3>
<p>Pour la configuration nous allons créer une configuration basique (supprimez ci possible la configuration de base) (nous la changerons plus tard, mais ça vous donne une idée d'une configuration minimale qui fonctionne)&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/www.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    listen       80;
    server_name  www.deimos.fr;
    root   /var/www/deimos.fr;
    index  index.html index.htm index.php;
&#160;
    location ~ \.php$ {
        fastcgi_index  index.php;
        fastcgi_pass   unix:/var/run/php5-fpm.sock;
        # fastcgi_pass    127.0.0.1:9000;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
}</pre></div></div>
</td></tr></table><br />
<p>Nous allons changer le type d'écoute de TCP en socks&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/php5/fpm/pool.d/www.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="ini source-ini"><pre class="de1"><span class="co0">; The address on which to accept FastCGI requests.</span>
<span class="co0">; Valid syntaxes are:</span>
<span class="co0">;   'ip.add.re.ss:port'    - to listen on a TCP socket to a specific address on</span>
<span class="co0">;                            a specific port;</span>
<span class="co0">;   'port'                 - to listen on a TCP socket to all addresses on a</span>
<span class="co0">;                            specific port;</span>
<span class="co0">;   '/path/to/unix/socket' - to listen on a unix socket.</span>
<span class="co0">; Note: This value is mandatory.</span>
<span class="re1">listen</span> <span class="sy0">=</span><span class="re2"> /var/run/php5-fpm.sock</span></pre></div></div>
</td></tr></table><br />
<p>Appliquez ensuite la configuration&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">ln -s /etc/nginx/sites-available/www.deimos.fr /etc/nginx/sites-enabled/www.deimos.fr</pre></div></div>
</td></tr></table><br />
<p>Ensuite redémarrez php-fpm et nginx&#160;!
</p>
<h4><span class="mw-headline" id="PHP-FPM_Status"><span class="mw-headline-number">3.1.2.1</span> PHP-FPM Status</span></h4>
<p>Si vous avez besoin de monitorer PHP-FPM, vous aurez certainement besoin d'avoir les informations sur votre PHP-FPM. Pour cela, il faut éditer le fichier suivant et décommenter ces lignes&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/php5/fpm/pool.d/www.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">[...]
pm.status_path = /fpm-status
[...]</pre></div></div>
</td></tr></table><br />
<p>Editez ensuite votre configuration d'Nginx et placez y ceci&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-enabled/default</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">[...]
    # PHP-FPM Status
    location /fpm-status {
        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        # User access
        auth_basic &quot;Please logon&quot;; 
        auth_basic_user_file /etc/nginx/access/htaccess;
    }
[...]</pre></div></div>
</td></tr></table><br />
<p>Afin d'éviter que n'importe qui y est accès, j'y ai placé un htaccess, mais à vous de voir la sécurité que vous préférez.
</p><p>Redémarrez PHP-FPM et Nginx, puis accédez à votre serveur comme ceci&#160;:
</p>
<ul><li> <a rel="nofollow" class="external free" href="http://server/fpm-status">http://server/fpm-status</a>&#160;: informations générale</li>
<li> <a rel="nofollow" class="external free" href="http://server/fpm-status?full">http://server/fpm-status?full</a>&#160;: informations générale détaillées</li>
<li> <a rel="nofollow" class="external free" href="http://server/fpm-status?json&amp;full">http://server/fpm-status?json&amp;full</a>&#160;: export en json</li>
<li> <a rel="nofollow" class="external free" href="http://server/fpm-status?html&amp;full">http://server/fpm-status?html&amp;full</a>&#160;: export html</li>
<li> <a rel="nofollow" class="external free" href="http://server/fpm-status?xml&amp;full">http://server/fpm-status?xml&amp;full</a>&#160;: export xml</li></ul>
<p>Ce qui vous donnera quelque chose comme ceci dans la version non détaillée&#160;:
</p>
<pre>
pool:                 www
process manager:      dynamic
start time:           18/Dec/2013:19:00:41 +0100
start since:          52972
accepted conn:        5268
listen queue:         0
max listen queue:     0
listen queue len:     0
idle processes:       3
active processes:     1
total processes:      4
max active processes: 4
max children reached: 0
</pre>
<h2><span class="mw-headline" id="PHP_Fast_CGI"><span class="mw-headline-number">3.2</span> PHP Fast CGI</span></h2>
<p>Cette méthode est fonctionnelle mais pas l'optimale. Optez pour <a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#php-fpm">php-fpm</a> si vous pouvez.
</p>
<h3><span class="mw-headline" id="Installation_3"><span class="mw-headline-number">3.2.1</span> Installation</span></h3>
<p>Pour qu'Nginx supporte le php, nous allons installer ceci&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td>
<pre>aptitude install php5-cgi
</pre>
</td></tr></table><br />
<p>Puis nous allons créer un service init pour ce fast cgi&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/init.d/php-fcgi</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="bash source-bash"><pre class="de1"><span class="co0">#! /bin/sh</span>
<span class="co0">### BEGIN INIT INFO</span>
<span class="co0"># Provides:          php-fcgi</span>
<span class="co0"># Required-Start:    $all</span>
<span class="co0"># Required-Stop:     $all</span>
<span class="co0"># Default-Start:     2 3 4 5</span>
<span class="co0"># Default-Stop:      0 1 6</span>
<span class="co0"># Short-Description: Start and stop php-cgi in external FASTCGI mode</span>
<span class="co0"># Description:       Start and stop php-cgi in external FASTCGI mode</span>
<span class="co0">### END INIT INFO</span>
&#160;
<span class="co0"># Author: Kurt Zankl &lt;kz@xon.uni.cc&gt;</span>
<span class="co0"># Modified by Deimos &lt;deimos@deimos.fr&gt;</span>
&#160;
<span class="co0"># Do NOT &quot;set -e&quot;</span>
&#160;
<span class="re2">BIND</span>=127.0.0.1:<span class="nu0">9000</span>
<span class="re2">USER</span>=www-data
<span class="re2">PHP_FCGI_CHILDREN</span>=<span class="nu0">15</span>
<span class="re2">PHP_FCGI_MAX_REQUESTS</span>=<span class="nu0">1000</span>
&#160;
<span class="re2">PATH</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>bin:<span class="sy0">/</span>sbin:<span class="sy0">/</span>usr<span class="sy0">/</span>sbin:<span class="sy0">/</span>bin
<span class="re2">PHP_CGI</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span>php-cgi
<span class="re2">PHP_CGI_NAME</span>=<span class="sy0">`</span><span class="kw2">basename</span> <span class="re1">$PHP_CGI</span><span class="sy0">`</span>
<span class="re2">PHP_CGI_ARGS</span>=<span class="st0">&quot;- USER=<span class="es2">$USER</span> PATH=<span class="es2">$PATH</span> PHP_FCGI_CHILDREN=<span class="es2">$PHP_FCGI_CHILDREN</span> PHP_FCGI_MAX_REQUESTS=<span class="es2">$PHP_FCGI_MAX_REQUESTS</span> <span class="es2">$PHP_CGI</span> -b <span class="es2">$BIND</span>&quot;</span>
<span class="re2">RETVAL</span>=<span class="nu0">0</span>
&#160;
<span class="co0"># Load the VERBOSE setting and other rcS variables</span>
. <span class="sy0">/</span>lib<span class="sy0">/</span>init<span class="sy0">/</span>vars.sh
&#160;
<span class="co0"># Define LSB log_* functions.</span>
<span class="co0"># Depend on lsb-base (&gt;= 3.0-6) to ensure that this file is present.</span>
. <span class="sy0">/</span>lib<span class="sy0">/</span>lsb<span class="sy0">/</span>init-functions
&#160;
do_start<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
        <span class="kw3">echo</span> <span class="re5">-n</span> <span class="st0">&quot;Starting PHP FastCGI&#160;: &quot;</span>
        start-stop-daemon <span class="re5">--start</span> <span class="re5">--quiet</span> <span class="re5">--background</span> <span class="re5">--chuid</span> <span class="st0">&quot;<span class="es2">$USER</span>&quot;</span> <span class="re5">--exec</span> <span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span><span class="kw2">env</span> <span class="re5">--</span> <span class="re1">$PHP_CGI_ARGS</span>
        <span class="re2">RETVAL</span>=<span class="re4">$?</span>
        <span class="kw3">echo</span> <span class="st0">&quot;<span class="es2">$PHP_CGI_NAME</span>.&quot;</span>
<span class="br0">&#125;</span>
&#160;
do_stop<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
        <span class="kw3">echo</span> <span class="re5">-n</span> <span class="st0">&quot;Stopping PHP FastCGI&#160;: &quot;</span>
        <span class="kw2">killall</span> <span class="re5">-q</span> <span class="re5">-w</span> <span class="re5">-u</span> <span class="re1">$USER</span> <span class="re1">$PHP_CGI</span>
        <span class="re2">RETVAL</span>=<span class="st0">&quot;$?&quot;</span>
        <span class="kw3">echo</span> <span class="st0">&quot;<span class="es2">$PHP_CGI_NAME</span>.&quot;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw1">case</span> <span class="st0">&quot;$1&quot;</span> <span class="kw1">in</span>
   start<span class="br0">&#41;</span>
      do_start
   <span class="sy0">;;</span>
   stop<span class="br0">&#41;</span>
      do_stop
   <span class="sy0">;;</span>
   restart<span class="br0">&#41;</span>
      do_stop
      do_start
   <span class="sy0">;;</span>
   <span class="sy0">*</span><span class="br0">&#41;</span>
      <span class="kw3">echo</span> <span class="st0">&quot;Usage: php-fcgi {start|stop|restart}&quot;</span>
      <span class="kw3">exit</span> <span class="nu0">3</span>
    <span class="sy0">;;</span>
<span class="kw1">esac</span>
<span class="kw3">exit</span> <span class="re1">$RETVAL</span></pre></div></div>
</td></tr></table><br />
<p>Puis nous allons mettre à jours dans les RC par défaut et démarrer le tout&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>cd /etc/init.d
chmod 755 /etc/init.d/php-fcgi
update-rc.d php-fcgi defaults
/etc/init.d/php-fcgi start
</pre>
</td></tr></table><br />
<h3><span class="mw-headline" id="Configuration_3"><span class="mw-headline-number">3.2.2</span> Configuration</span></h3>
<p>Pour configurer le support du PHP, éditez le fichier de base d'Nginx et adaptez&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/default</font>
</td></tr>
<tr>
<td>
<pre>server {
       listen   80;
       server_name  localhost;

       access_log  /var/log/nginx/localhost.access.log;

       location / {
               root   /var/www/nginx-default;
               index  index.html index.htm index.php;
       }

       location /doc {
               root   /usr/share;
               autoindex on;
               allow 127.0.0.1;
               deny all;
       }

       location /images {
               root   /usr/share;
               autoindex on;
       }

       #error_page  404  /404.html;

       # redirect server error pages to the static page /50x.html
       #
       error_page   500 502 503 504  /50x.html;
       location = /50x.html {
               root   /var/www/nginx-default;
       }

       # proxy the PHP scripts to Apache listening on 127.0.0.1:80
       #
       #location ~ \.php$ {
               #proxy_pass   <a rel="nofollow" class="external free" href="http://127.0.0.1">http://127.0.0.1</a>;
       #}

       # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
       #
       <b>location ~ \.php$ {</b>
       <b>        root /var/www/nginx-default;</b>
       <b>        include /etc/nginx/fastcgi_params;</b>
       <b>        fastcgi_pass   127.0.0.1:9000;</b>
       <b>        fastcgi_index  index.php;</b>
       <b>        fastcgi_param  SCRIPT_FILENAME  /var/www/nginx-default/$fastcgi_script_name;</b>
       <b>}</b>

       # deny access to .htaccess files, if Apache's document root
       # concurs with nginx's one
       #
       #location ~ /\.ht {
               #deny  all;
       #}
}
</pre>
</td></tr></table><br />
<h2><span class="mw-headline" id="nginx.conf"><span class="mw-headline-number">3.3</span> nginx.conf</span></h2>
<p>Voici la configuration du serveur globale. J'ai mis des commentaires sur les lignes importantes&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/nginx.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">user www-data;
<span class="xtra ln-xtra"># Number of working process</span><span class="xtra ln-xtra">worker_processes 2;</span><span class="xtra ln-xtra">worker_rlimit_nofile    2000;</span>pid /var/run/nginx.pid;
&#160;
events {
<span class="xtra ln-xtra">    # Maximum connection number</span><span class="xtra ln-xtra">    worker_connections 2048;</span>    use epoll;
    # multi_accept on;
}
&#160;
http {
	##
	# Basic Settings
	##
&#160;
	sendfile on;
	tcp_nopush on;
	tcp_nodelay on;
	keepalive_timeout 65;
	types_hash_max_size 2048;
        map_hash_bucket_size 64;
<span class="xtra ln-xtra">        # Security to hide version</span><span class="xtra ln-xtra">	server_tokens off;</span>&#160;
	server_names_hash_bucket_size 64;
	# server_name_in_redirect off;
&#160;
<span class="xtra ln-xtra">        # Grow this 2 values if you get 502 error message</span><span class="xtra ln-xtra">        fastcgi_buffers 256 16k;</span><span class="xtra ln-xtra">        fastcgi_buffer_size 32k;</span><span class="xtra ln-xtra">        # Nginx cache to boost performances</span><span class="xtra ln-xtra">        fastcgi_cache_path /usr/share/nginx/cache levels=1:2</span><span class="xtra ln-xtra">            keys_zone=mycache:10m</span><span class="xtra ln-xtra">            inactive=1h max_size=256m;</span>&#160;
	include /etc/nginx/mime.types;
	default_type application/octet-stream;
&#160;
	##
	# Logging Settings
	##
&#160;
	access_log /var/log/nginx/access.log;
	error_log /var/log/nginx/error.log;
&#160;
	##
	# Gzip Settings
	##
&#160;
<span class="xtra ln-xtra">	gzip on;</span><span class="xtra ln-xtra">	gzip_disable &quot;msie6&quot;;</span><span class="xtra ln-xtra">        gzip_static on;</span><span class="xtra ln-xtra">	gzip_vary on;</span><span class="xtra ln-xtra">	gzip_proxied any;</span><span class="xtra ln-xtra">	gzip_comp_level 6;</span><span class="xtra ln-xtra">	gzip_buffers 16 8k;</span><span class="xtra ln-xtra">	gzip_http_version 1.1;</span><span class="xtra ln-xtra">	gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;</span>&#160;
	##
	# nginx-naxsi config
	##
	# Uncomment it if you installed nginx-naxsi
	##
&#160;
	#include /etc/nginx/naxsi_core.rules;
&#160;
	##
	# nginx-passenger config
	##
	# Uncomment it if you installed nginx-passenger
	##
&#160;
	#passenger_root /usr;
	#passenger_ruby /usr/bin/ruby;
&#160;
	##
	# Virtual Host Configs
	##
&#160;
	include /etc/nginx/conf.d/*.conf;
	include /etc/nginx/sites-enabled/*;
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="drop.conf"><span class="mw-headline-number">3.4</span> drop.conf</span></h2>
<p>Ce fichier va nous permettre de ne pas logger des informations non indispensable et empêcher de donner accès à des fichiers pouvant être sensible&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/drop.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"># Do not log robots.txt if not found
location = /robots.txt  { access_log off; log_not_found off; }
# Do not log favicon.ico if not found
location = /favicon.ico { access_log off; log_not_found off; }  
# Do not give access to hidden files
location ~ /\.          { access_log off; log_not_found off; deny all; }
# Do not give access to vim backuped files
location ~ ~$           { access_log off; log_not_found off; deny all; }</pre></div></div>
</td></tr></table><br />
<p>Ensuite dans vos fichiers de configuration, il suffira de rajouter ces 2 lignes&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-enabled/*</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
[...]
<span class="xtra ln-xtra">    # Drop config</span><span class="xtra ln-xtra">    include drop.conf;</span>}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Les_VirtualHosts"><span class="mw-headline-number">3.5</span> Les VirtualHosts</span></h2>
<p>On peut tout comme sur Apache faire des virtualhost. On va créer par exemple le blog deimos.fr&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/site-available/blog</font>
</td></tr>
<tr>
<td>
<pre>server {
       <b>listen   80;</b>
       <b>server_name  blog.deimos.fr;</b>

       access_log  /var/log/nginx/localhost.access.log;

       location / {
               <b>root   /var/www/nginx-default/blog;</b>
               index  index.html index.htm index.php;
       }

       location /doc {
               root   /usr/share;
               autoindex on;
               allow 127.0.0.1;
               deny all;
       }

       location /images {
               root   /usr/share;
               autoindex on;
       }
}
</pre>
</td></tr></table><br />
<p>Ici, sur le port 80, sera accessible blog.deimos.fr.
</p><p>On va activer cette conf&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> ln</font>
</td></tr>
<tr>
<td>
<pre>ln -s /etc/nginx/sites-available/blog /etc/nginx/sites-enabled/blog
</pre>
</td></tr></table><br />
<p>Il ne reste plus qu'a reloader le serveur et ça fonctionne&#160;:-)
</p>
<h2><span class="mw-headline" id="Les_htaccess"><span class="mw-headline-number">3.6</span> Les htaccess</span></h2>
<p>Pour faire des restrictions sur certains des sites, voici une des solutions les plus vieilles mais efficace, les htaccess&#160;! Pour les activer, nous allons avoir besoin du binaire htpasswd&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td>
<pre>aptitude install apache2-utils
</pre>
</td></tr></table><br />
<p>Nous allons maintenant générer un fichier contenant les logins et mot de passe avec un premier utilisateur&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> htpasswd</font>
</td></tr>
<tr>
<td>
<pre>htpasswd -c /etc/nginx/htaccess deimos
</pre>
</td></tr></table><br />
<p>On rentre le mot de passe et ça roule. On va le déclarer dans la conf, dans mon virtalhost précédemment créer 
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/site-available/blog</font>
</td></tr>
<tr>
<td>
<pre>server {
       listen   80;
       server_name  blog.deimos.fr;

       access_log  /var/log/nginx/localhost.access.log;

       location / {
               root   /var/www/nginx-default/blog;
               index  index.html index.htm index.php;
               <b>auth_basic "Restricted";</b>
               <b>auth_basic_user_file /etc/nginx/htaccess;</b>
       }

       location /doc {
               root   /usr/share;
               autoindex on;
               allow 127.0.0.1;
               deny all;
       }

       location /images {
               root   /usr/share;
               autoindex on;
       }
}
</pre>
</td></tr></table><br />
<p>Il ne reste plus qu'a reloader le serveur et ça fonctionne&#160;:-)
</p>
<h2><span class="mw-headline" id="Le_port_par_d.C3.A9faut"><span class="mw-headline-number">3.7</span> Le port par défaut</span></h2>
<p>Pour stipuler le port par défaut, vous pouvez utiliser un include dans vos fichiers de configuration qui feront appel à un fichier comprenant le port. De la sorte il sera très facile de modifier d'un coup le port par défaut&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/listen_port.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">listen 80;</pre></div></div>
</td></tr></table><br />
<p>Et donc dans les fichiers de configuration&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/*.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
[...]</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="SSL"><span class="mw-headline-number">3.8</span> SSL</span></h2>
<h3><span class="mw-headline" id="Installation_4"><span class="mw-headline-number">3.8.1</span> Installation</span></h3>
<p>Pour l'installation du SSL, par rapport à Apache qui ne permet pas nativement et simplement de faire du SSL sur des VirtalHost, c'est beaucoup plus simple avec Nginx&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td>
<pre>aptitude install openssl
</pre>
</td></tr></table><br />
<h3><span class="mw-headline" id="Configuration_4"><span class="mw-headline-number">3.8.2</span> Configuration</span></h3>
<p>Dans un premier temps, on va générer des clefs SSL&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>mkdir -p /etc/nginx/ssl
cd /etc/nginx/ssl
openssl req -new -x509 -nodes -out server.crt -keyout server.key
</pre>
</td></tr></table><br />
<p>Bon là, je l'ai mis dans un dossier ssl avec la conf nginx, mais vu que l'on peut avoir plusieurs certificats, je vous encourage à faire une arborescence&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/webmail</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"> server {
<span class="xtra ln-xtra">        listen   443 ssl;</span>        server_name  localhost;
&#160;
<span class="xtra ln-xtra">        ssl_certificate /etc/nginx/ssl/server.crt;</span><span class="xtra ln-xtra">        ssl_certificate_key /etc/nginx/ssl/server.key;</span><span class="xtra ln-xtra">        # Resumption</span><span class="xtra ln-xtra">        ssl_session_cache shared:SSL:10m;</span><span class="xtra ln-xtra">        # Timeout</span><span class="xtra ln-xtra">        ssl_session_timeout 10m;</span><span class="xtra ln-xtra">&#160;</span><span class="xtra ln-xtra">        # Security options</span><span class="xtra ln-xtra">        ssl_ciphers ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-RC4-SHA:ECDHE-RSA-RC4-SHA:ECDH-ECDSA-RC4-SHA:ECDH-RSA-RC4-SHA:ECDHE-RSA-AES256-SHA:RC4-SHA;</span><span class="xtra ln-xtra">        ssl_prefer_server_ciphers on;</span>&#160;
        # HSTS (force users to come in SSL if they've already been once)
        add_header Strict-Transport-Security &quot;max-age=31536000; includeSubdomains&quot;;
&#160;
        access_log  /var/log/nginx/localhost.access.log;
&#160;
        location / {
                root   /var/www/nginx-default/webmail;
                index  index.html index.htm index.php;
        }
&#160;
        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        location ~ \.php$ {
                root /var/www/nginx-default;
                include /etc/nginx/fastcgi_params;
                fastcgi_pass   unix:/var/run/php5-fpm.sock;
                fastcgi_index  index.php;
                fastcgi_param  SCRIPT_FILENAME  /var/www/nginx-default/$fastcgi_script_name;
        }
 }</pre></div></div>
</td></tr></table><br />
<p>On va activer cette conf&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> ln</font>
</td></tr>
<tr>
<td>
<pre>ln -s /etc/nginx/sites-available/webmail /etc/nginx/sites-enabled/webmail
</pre>
</td></tr></table><br />
<p>Et on redémarre le serveur Nginx pour que ce soit pris en compte.
</p><p>Vous pouvez tester la sécurité de votre serveur SSL&#160;: <a rel="nofollow" class="external free" href="https://www.ssllabs.com/ssltest/index.html">https://www.ssllabs.com/ssltest/index.html</a>
</p>
<h4><span class="mw-headline" id="Forcer_une_connexion_en_SSL"><span class="mw-headline-number">3.8.2.1</span> Forcer une connexion en SSL</span></h4>
<p>Il est possible de configurer son virtualhost de façon classique mais de vouloir absolument une redirection vers du SSL. Pour cela, c'est très simple il suffit simplement de rajouter ceci&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/www.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    listen      80;
    server_name www.deimos.fr;
    rewrite     ^   https://$server_name$request_uri? permanent;
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Le_cache_FastCGI"><span class="mw-headline-number">3.9</span> Le cache FastCGI</span></h2>
<p>Le cache FastCGI est utile pour augmenter la rapidité de votre site web. On va donc mettre quelques Mb pour le cache et le mettre dans un tmpfs histoire d'accélérer encore plus le tout. Dans la configuration principale, nous allons créer ce cache&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/nginx.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">[...]
http {
    [...]
    fastcgi_cache_path /usr/share/nginx/cache levels=1:2
        keys_zone=mycache:10m
        inactive=1h max_size=256m;
    [...]
}
[...]</pre></div></div>
</td></tr></table><br />
<p>Ici je créer un cache appelé "mycache" d'une taille de 256Mb.
</p><p>Dans vos configurations de VirtualHost, ajoutez ces lignes&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-enabled/www.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">[...]
        location ~ \.php$ {
<span class="xtra ln-xtra">                fastcgi_cache mycache;</span><span class="xtra ln-xtra">                fastcgi_cache_key $request_method$host$request_uri;</span><span class="xtra ln-xtra">                fastcgi_cache_valid any 1h;</span>                include fastcgi_params;
                fastcgi_pass unix:/var/run/php5-fpm.sock;
                fastcgi_intercept_errors on;
        }
[...]</pre></div></div>
</td></tr></table><br />
<p>Ensuite nous allons créer un dossier de cache tmpfs (<a href="./Tmpfs_:_un_filesystem_en_ram_ou_comment_écrire_en_ram.html" title="Tmpfs : un filesystem en ram ou comment écrire en ram">lisez cette doc pour plus d'infos</a>)&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/fstab</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">[...]
tmpfs /usr/share/nginx/cache    tmpfs   defaults,size=256m   0   0
[...]</pre></div></div>
</td></tr></table><br />
<p>Puis nous allons créer le dossier de cache, le monter et ensuite redémarrer nginx&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mkdir /usr/share/nginx/cache
mount /usr/share/nginx/cache
/etc/init.d/nginx restart</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Page_de_maintenance"><span class="mw-headline-number">3.10</span> Page de maintenance</span></h2>
<p>Voici une manière élégante de créer une page de maintenance&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-enabled/www.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
[...]
   location / {
      try_files /maintenance.html $uri $uri/ @maintenance;
   }
&#160;
   location @maintenance {
      return 503;
   }
}</pre></div></div>
</td></tr></table><br />
<p>Il ne vous reste plus qu'à insérer une page maintenance.html à la racine de votre site et cette page s'affichera le temps que vous fassiez vos modifications. Sinon vous pouvez toujours utiliser cette méthode&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-enabled/www.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
[...]
    location / {
        if (-f $document_root/maintenance.html) {
             return 503;
        }
        [...]
    }
&#160;
    error_page 503 @maintenance;
    location @maintenance {
        rewrite ^(.*)$ /maintenance.html break;
    }
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Limiter_le_flood_et_les_sniffers"><span class="mw-headline-number">3.11</span> Limiter le flood et les sniffers</span></h2>
<p>Il peut arriver qu'une personne malveillante tente de mettre à genoux votre serveur en faisant beaucoup de requêtes qui saturent généralement les processus PHP et fait monter vos CPU à 100%. Afin d'éviter cela, il est possible de limiter le nombre de requêtes par IP en utilisant le module limit_req<sup id="cite_ref-1" class="reference"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#cite_note-1">[1]</a></sup>. Pour activer ce module, insérez cette ligne dans votre configuration core (globale) d'Nginx:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/nginx.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">http {
[...]
    # Flood/DoS protection
    limit_req_zone $binary_remote_addr zone=limit:10m rate=5r/s;
    limit_req_log_level notice;
[...]
}</pre></div></div>
</td></tr></table><br />
<p>Voici les options utilisées ici:
</p>
<ul><li> zone=limit: les IP seront stockées dans une zone appelée limit de 10M. Prévoyez assez d'espace sur cette zone pour éviter des erreurs 503 s'il n'y a plus d'espace. Une zone d'1M peut contenir 16 000 entrées de type binary_remote_addr.</li>
<li> rate: on autorise 5 requêtes par secondes. </li>
<li> log_level: vous pouvez supprimer cette ligne si vous ne souhaitez pas savoir dans les logs si les limites sont atteintes. Ici je souhaites tracer ce genre d'événements.</li></ul>
<p>Ensuite, il faut informer sur quel virtualhost ou location, nous souhaitons appliquer cette mesure de sécurité:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-enabled/</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">    location ~ \.php$ {
<span class="xtra ln-xtra">        limit_req zone=limit burst=5 nodelay;</span>        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_intercept_errors on;
    }</pre></div></div>
</td></tr></table><br />
<p>Là encore on retrouve des options:
</p>
<ul><li> zone: j'utilise la zone limit précédemment déclarée dans la configuration http (core)</li>
<li> burst: j'autorise le burst à 5 connexions maximum</li>
<li> nodelay: si vous souhaitez que les requêtes soient tout de même servies mêmes si elles sont ralenties, utilisez le paramètre nodelay.</li></ul>
<p>Il ne reste plus qu'à redémarrer nginx.
</p>
<h1><span class="mw-headline" id="Configuration_d.27applications"><span class="mw-headline-number">4</span> Configuration d'applications</span></h1>
<p>Par défaut, j'utilise www.deimos.fr pour faire des redirections vers d'autres VirtualHost&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/www.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    listen 443 ssl;
&#160;
    server_name www.deimos.fr;
&#160;
    access_log /var/log/nginx/www.deimos.fr_access.log;
    error_log /var/log/nginx/www.deimos.fr_error.log;
&#160;
    # Blog redirect
    rewrite ^/$ $scheme://blog.deimos.fr permanent;
    rewrite ^/blog(/.*)?$ $scheme://blog.deimos.fr$1 permanent;
&#160;
    # Blocnotesinfo redirect
    rewrite ^/blocnotesinfo(/.*)?$ $scheme://wiki.deimos.fr$1 permanent;
&#160;
    # Piwik
    rewrite ^/piwik(/.*)?$ $scheme://piwik.deimos.fr$1 permanent;
&#160;
    # Gitweb
    rewrite ^/gitweb(/.*)?$ $scheme://git.deimos.fr$1 permanent;
&#160;
    # Drop config
    include drop.conf;
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Server_status"><span class="mw-headline-number">4.1</span> Server status</span></h2>
<p>Il est possible de base d'avoir des informations sur l'état du serveur, de ce type&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/www.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    listen 443 ssl;
&#160;
    server_name www.deimos.fr;
&#160;
    access_log /var/log/nginx/www.deimos.fr_access.log;
    error_log /var/log/nginx/www.deimos.fr_error.log;
&#160;
<span class="xtra ln-xtra">    # Nginx status</span><span class="xtra ln-xtra">    location /server-status {</span><span class="xtra ln-xtra">        # Turn on nginx stats</span><span class="xtra ln-xtra">        stub_status on;</span><span class="xtra ln-xtra">        # I do not need logs for stats</span><span class="xtra ln-xtra">        access_log off;</span><span class="xtra ln-xtra">        # Allow from localhost</span><span class="xtra ln-xtra">        allow 127.0.0.1;</span><span class="xtra ln-xtra">        # Deny others</span><span class="xtra ln-xtra">        deny all;</span><span class="xtra ln-xtra">    }</span><span class="xtra ln-xtra">&#160;</span><span class="xtra ln-xtra">    # PHP-FPM status</span><span class="xtra ln-xtra">    location /php-fpm_status {</span><span class="xtra ln-xtra">        include fastcgi_params;</span><span class="xtra ln-xtra">        fastcgi_pass unix:/var/run/php5-fpm.sock;</span><span class="xtra ln-xtra">        # I do not need logs for stats</span><span class="xtra ln-xtra">        access_log off;</span><span class="xtra ln-xtra">        # Allow from localhost</span><span class="xtra ln-xtra">        allow 127.0.0.1;</span><span class="xtra ln-xtra">        # Deny others</span><span class="xtra ln-xtra">        deny all;</span><span class="xtra ln-xtra">    }</span><span class="xtra ln-xtra">&#160;</span><span class="xtra ln-xtra">    # Cache APC</span><span class="xtra ln-xtra">    location /apc-cache {</span><span class="xtra ln-xtra">        root /usr/share/doc/php-apc;</span><span class="xtra ln-xtra">    }</span><span class="xtra ln-xtra">&#160;</span><span class="xtra ln-xtra">    location ~ \.php$ {</span><span class="xtra ln-xtra">        include fastcgi_params;</span><span class="xtra ln-xtra">        fastcgi_pass unix:/var/run/php5-fpm.sock;</span><span class="xtra ln-xtra">        fastcgi_intercept_errors on;</span><span class="xtra ln-xtra">        # I do not need logs for stats</span><span class="xtra ln-xtra">        access_log off;</span><span class="xtra ln-xtra">        # Allow from localhost</span><span class="xtra ln-xtra">        allow 127.0.0.1;</span><span class="xtra ln-xtra">        # Deny others</span><span class="xtra ln-xtra">        deny all;</span><span class="xtra ln-xtra">    }</span>&#160;
    # Blog redirect
    rewrite ^/$ $scheme://blog.deimos.fr permanent;
    rewrite ^/blog(/.*)?$ $scheme://blog.deimos.fr$1 permanent;
&#160;
    # Blocnotesinfo redirect
    rewrite ^/blocnotesinfo(/.*)?$ $scheme://wiki.deimos.fr$1 permanent;
&#160;
    # Piwik
    rewrite ^/piwik(/.*)?$ $scheme://piwik.deimos.fr$1 permanent;
&#160;
    # Gitweb
    rewrite ^/gitweb(/.*)?$ $scheme://git.deimos.fr$1 permanent;
&#160;
    # Drop config
    include drop.conf;
}</pre></div></div>
</td></tr></table><br />
<p>Configurez convenablement les adresses autorisées ou bien placez une <a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#Les_htaccess">authentification classique via htpasswd</a>.
</p><p>Voici le résultat donné lorsqu'on accède à la page (<a rel="nofollow" class="external free" href="http://www.deimos.fr/server-status">http://www.deimos.fr/server-status</a>)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">Active connections: 11 
server accepts handled requests
 8109 8109 58657 
Reading: 0 Writing: 1 Waiting: 10</pre></div></div>
<h2><span class="mw-headline" id="Wordpress"><span class="mw-headline-number">4.2</span> Wordpress</span></h2>
<p>Pour la configuration de Wordpress sous Nginx, voici un exemple&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/blog.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    listen 443 ssl;
&#160;
    ssl_certificate /etc/nginx/ssl/deimos.fr/server-unified.crt;
    ssl_certificate_key /etc/nginx/ssl/deimos.fr/server.key;
    ssl_session_timeout 5m;
&#160;
    server_name blog.deimos.fr;
    root /usr/share/nginx/www/deimos.fr/blog;
    index index.php;
&#160;
    access_log /var/log/nginx/blog.deimos.fr_access.log;
    error_log /var/log/nginx/blog.deimos.fr_error.log;
&#160;
    location / {
        try_files $uri $uri/ /index.php?$args;
    }
&#160;
    location ~ \.php$ {
        fastcgi_cache mycache;
        fastcgi_cache_key $request_method$host$request_uri;
        fastcgi_cache_valid any 1h;
        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_intercept_errors on;
    }
&#160;
    # Drop config
    include drop.conf;
&#160;
    # BEGIN W3TC Browser Cache
    gzip on;
    gzip_types text/css application/x-javascript text/x-component text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon;
    location ~ \.(css|js|htc)$ {
        expires 31536000s;
        add_header Pragma &quot;public&quot;;
        add_header Cache-Control &quot;public, must-revalidate, proxy-revalidate&quot;;
        add_header X-Powered-By &quot;W3 Total Cache/0.9.2.4&quot;;
    }
&#160;
    location ~ \.(html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml)$ {
        expires 3600s;
        add_header Pragma &quot;public&quot;;
        add_header Cache-Control &quot;public, must-revalidate, proxy-revalidate&quot;;
        add_header X-Powered-By &quot;W3 Total Cache/0.9.2.4&quot;;
    }
&#160;
    location ~ \.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip)$ {
        expires 31536000s;
        add_header Pragma &quot;public&quot;;
        add_header Cache-Control &quot;public, must-revalidate, proxy-revalidate&quot;;
        add_header X-Powered-By &quot;W3 Total Cache/0.9.2.4&quot;;
    }
    # END W3TC Browser Cache
&#160;
    # BEGIN W3TC Minify core
    rewrite ^/wp-content/w3tc/min/w3tc_rewrite_test$ /wp-content/w3tc/min/index.php?w3tc_rewrite_test=1 last;
    rewrite ^/wp-content/w3tc/min/(.+\.(css|js))$ /wp-content/w3tc/min/index.php?file=$1 last;
    # END W3TC Minify core
}
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Mediawiki"><span class="mw-headline-number">4.3</span> Mediawiki</span></h2>
<p>Pour une mise en place de Mediawiki avec Nginx et les URL courtes, voici la configuration à adopter. J'ai également mis du SSL et forcé les redirections de la page de login vers du SSL&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/wiki.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    listen 443 ssl;
&#160;
    ssl_certificate /etc/nginx/ssl/deimos.fr/server-unified.crt;
    ssl_certificate_key /etc/nginx/ssl/deimos.fr/server.key;
    ssl_session_timeout 5m;
&#160;
    server_name wiki.deimos.fr wiki.m.deimos.fr;
    root /usr/share/nginx/www/deimos.fr/blocnotesinfo;
&#160;
    client_max_body_size 5m;
    client_body_timeout 60;
&#160;
    access_log /var/log/nginx/wiki.deimos.fr_access.log;
    error_log /var/log/nginx/wiki.deimos.fr_error.log;
&#160;
    location / {
        rewrite ^/$ $scheme://$host/index.php permanent;
        # Short URL redirect
        try_files $uri $uri/ @rewrite;
    }
&#160;
    location @rewrite {
        if (!-f $request_filename){
            rewrite ^/(.*)$ /index.php?title=$1&amp;$args;
        }
    }
&#160;
    # Force SSL Login
    set $ssl_requested 0;
    if ($arg_title ~ Sp%C3%A9cial:Connexion) {
        set $ssl_requested 1;
    }
    if ($scheme = https) {
        set $ssl_requested 0;
    }
    if ($ssl_requested = 1) {
        return 301 https://$host$request_uri;
    }
&#160;
    # Drop config
    include drop.conf;
&#160;
    # Deny direct access to specific folders
    location ^~ /(maintenance|images)/ {
        return 403;
    }
&#160;
    location ~ \.php$ {
        fastcgi_cache mycache;
        fastcgi_cache_key $request_method$host$request_uri;
        fastcgi_cache_valid any 1h;
        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
    }
&#160;
    location = /_.gif {
        expires max;
        empty_gif;
    }
&#160;
    location ^~ /cache/ {
        deny all;
    }
&#160;
    location /dumps {
        root /usr/share/nginx/www/deimos.fr/blocnotesinfo/local;
        autoindex on;
    }
&#160;
    # BEGIN W3TC Browser Cache
    gzip on;
    gzip_types text/css application/x-javascript text/x-component text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon;
    location ~ \.(css|js|htc)$ {
        expires 31536000s;
        add_header Pragma &quot;public&quot;;
        add_header Cache-Control &quot;public, must-revalidate, proxy-revalidate&quot;;
        add_header X-Powered-By &quot;W3 Total Cache/0.9.2.4&quot;;
    }
&#160;
    location ~ \.(html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml)$ {
        expires 3600s;
        add_header Pragma &quot;public&quot;;
        add_header Cache-Control &quot;public, must-revalidate, proxy-revalidate&quot;;
        add_header X-Powered-By &quot;W3 Total Cache/0.9.2.4&quot;;
    }
&#160;
    location ~ \.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip)$ {
        expires 31536000s;
        add_header Pragma &quot;public&quot;;
        add_header Cache-Control &quot;public, must-revalidate, proxy-revalidate&quot;;
        add_header X-Powered-By &quot;W3 Total Cache/0.9.2.4&quot;;
        try_files $uri $uri/ @rewrite;
    }
    # END W3TC Browser Cache
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Gitweb"><span class="mw-headline-number">4.4</span> Gitweb</span></h2>
<p>Sous Nginx, il va falloir autoriser certaines extensions dans php-fpm&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/php5/fpm/pool.d/www.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">[...]
security.limit_extensions = .php .php3 .php4 .php5 .cgi
[...]</pre></div></div>
</td></tr></table><br />
<p>Et voici un exemple de configuration à adapter à vos besoins&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/git.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    listen 80;
    listen 443 ssl;
&#160;
    ssl_certificate /etc/nginx/ssl/deimos.fr/server-unified.crt;
    ssl_certificate_key /etc/nginx/ssl/deimos.fr/server.key;
    ssl_session_timeout 5m;
&#160;
    server_name git.deimos.fr;
    root /usr/share/gitweb/;
&#160;
    access_log /var/log/nginx/git.deimos.fr_access.log;
    error_log /var/log/nginx/git.deimos.fr_error.log;
&#160;
    index gitweb.cgi;
&#160;
    location /gitweb.cgi {
        fastcgi_cache mycache;
        fastcgi_cache_key $request_method$host$request_uri;
        fastcgi_cache_valid any 1h;
        include fastcgi_params;
        fastcgi_pass  unix:/run/fcgiwrap.socket;
    } 
}</pre></div></div>
</td></tr></table><br />
<p>Ensuite nous allons avoir besoin d'un wrapper cgi&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">aptitude install fcgiwrap</pre></div></div>
</td></tr></table><br />
<p>Créez le lien, puis reloadez la configuration&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">cd /etc/nginx/sites-enabled
ln -s /etc/nginx/sites-available/git.deimos.fr .
/etc/init.d/nginx reload
/etc/init.d/fcgiwrap restart
/etc/init.d/php5-fpm reload</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Git"><span class="mw-headline-number">4.5</span> Git</span></h2>
<p>J'ai passé pas mal de temps à faire cohabiter Git over http(s) et Gitweb, mais ça y est ça fonctionne.
</p>
<table width="100%" class="notes_array">
<tr>
<td class="notes_subarray"> <font size="-1"><a href="./File:Notes_file.png.html" class="image" title="Notes"><img alt="Notes" src="images/2/20/Notes_file.png" width="31" height="32" /></a> Notes</font>
</td></tr>
<tr>
<td>Préférez la méthode <a href="./Gitweb_:_Installation_et_configuration_d'une_interface_web_pour_git.html#Nginx" title="Gitweb : Installation et configuration d'une interface web pour git">Gitweb</a> uniquement si vous n'avez pas besoin de de git over http(s)
</td></tr></table><br />
<p>Voici la méthode que j'ai utilisé&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/git.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    listen 80;
    listen 443 ssl;
&#160;
    ssl_certificate /etc/nginx/ssl/deimos.fr/server-unified.crt;
    ssl_certificate_key /etc/nginx/ssl/deimos.fr/server.key;
    ssl_session_timeout 5m;
&#160;
    server_name git.deimos.fr;
    root /usr/share/gitweb/;
&#160;
    access_log /var/log/nginx/git.deimos.fr_access.log;
    error_log /var/log/nginx/git.deimos.fr_error.log;
&#160;
    index gitweb.cgi;
&#160;
    # Drop config
    include drop.conf;
&#160;
    # Git over https
    location /git/ {
        alias /var/cache/git/;
        if ($scheme = http) {
            rewrite ^ https://$host$request_uri permanent;
        }
    } 
&#160;
    # Gitweb
    location ~ gitweb\.cgi {
        fastcgi_cache mycache;
        fastcgi_cache_key $request_method$host$request_uri;
        fastcgi_cache_valid any 1h;
        include fastcgi_params;
        fastcgi_pass  unix:/run/fcgiwrap.socket;
    } 
}</pre></div></div>
</td></tr></table><br />
<p>Ici j'ai mon git over https qui fonctionne (le http est redirigé vers https) et mon gitweb également puisque tout ce qui est gitweb.cgi est matché. Maintenant, pour la partie git, nous allons devoir autoriser les repository que nous voulons. Pour celà, il va falloir renommer un fichier dans notre repository et lancer une commande&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">cd /var/cache/git/myrepo.git
hooks/post-update{.sample,}
su - www-data -c 'cd /var/cache/git/myrepo.git &amp;&amp; /usr/lib/git-core/git-update-server-info'</pre></div></div>
</td></tr></table><br />
<p>Remplacez www-data par l'utilisateur qui a les droits sur le repository. Utilisez www-data pour que ce soit nginx qui ait les droits. Ensuite, vous avez les droits pour cloner&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> git</font>
</td></tr>
<tr>
<td>
<pre>git clone <a rel="nofollow" class="external free" href="http://www.deimos.fr/git/deimosfr.git">http://www.deimos.fr/git/deimosfr.git</a> deimosfr
</pre>
</td></tr></table><br />
<h2><span class="mw-headline" id="Piwik"><span class="mw-headline-number">4.6</span> Piwik</span></h2>
<p>Pour Piwik, voici la configuration&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/piwik.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    listen 443 ssl;
&#160;
    ssl_certificate /etc/nginx/ssl/deimos.fr/server-unified.crt;
    ssl_certificate_key /etc/nginx/ssl/deimos.fr/server.key;
    ssl_session_timeout 5m;
&#160;
    server_name piwik.deimos.fr;
    root /usr/share/nginx/www/deimos.fr/piwik;
    index index.php;
&#160;
    access_log /var/log/nginx/piwik.deimos.fr_access.log;
    error_log /var/log/nginx/piwik.deimos.fr_error.log;
&#160;
    # Drop config
    include drop.conf; 
&#160;
    location / {
        try_files $uri $uri/ /index.php?$args;
    }
&#160;
    location ~ \.php$ {
        fastcgi_cache mycache;
        fastcgi_cache_key $request_method$host$request_uri;
        fastcgi_cache_valid any 1h;
        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_intercept_errors on;
    }
&#160;
    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires max;
        log_not_found off;
    }
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="ownCloud"><span class="mw-headline-number">4.7</span> ownCloud</span></h2>
<h3><span class="mw-headline" id="ownCloud_4.X"><span class="mw-headline-number">4.7.1</span> ownCloud 4.X</span></h3>
<p>Voici la configuration d'ownCloud 4.X pour Nginx&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/owncloud.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    listen 443 default ssl;
    ssl on;
&#160;
    ssl_certificate /etc/nginx/ssl/deimos.fr/server-unified.crt;
    ssl_certificate_key /etc/nginx/ssl/deimos.fr/server.key;
&#160;
    server_name owncloud.deimos.fr;
    root /usr/share/nginx/www/deimos.fr/owncloud;
    index index.php;
    client_max_body_size 1024M;
&#160;
    access_log /var/log/nginx/cloud.deimos.fr_access.log;
    error_log /var/log/nginx/cloud.deimos.fr_error.log;
&#160;
    # Force SSL
    if ($scheme = http) {
        return 301 https://$host$request_uri;
    }   
&#160;
    # deny direct access
    location ~ ^/(data|config|\.ht|db_structure\.xml|README) {
        deny all;
    }
&#160;
    # default try order
    location / {
        try_files $uri $uri/ @webdav;
    }
&#160;
    # owncloud WebDAV
    location @webdav {
        fastcgi_cache mycache;
        fastcgi_cache_key $request_method$host$request_uri;
        fastcgi_cache_valid any 1h;
        fastcgi_split_path_info ^(.+\.php)(/.*)$;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param HTTPS on;
        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_intercept_errors on;
    }
&#160;
    location ~ \.php$ {
        try_files $uri = 404;
        fastcgi_cache mycache;
        fastcgi_cache_key $request_method$host$request_uri;
        fastcgi_cache_valid any 1h;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param HTTPS on;
        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_intercept_errors on;
    }
&#160;
    # Drop config
    include drop.conf;
}</pre></div></div>
</td></tr></table><br />
<h3><span class="mw-headline" id="ownCloud_5.X"><span class="mw-headline-number">4.7.2</span> ownCloud 5.X</span></h3>
<p>Et pour la version 5&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/owncloud.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    listen 443 default ssl;
    ssl on; 
&#160;
    ssl_certificate /etc/nginx/ssl/deimos.fr/server-unified.crt;
    ssl_certificate_key /etc/nginx/ssl/deimos.fr/server.key;
&#160;
    server_name cloud.deimos.fr;
    root /usr/share/nginx/www/deimos.fr/owncloud;
    index index.php;
    client_max_body_size 1024M;
&#160;
    access_log /var/log/nginx/cloud.deimos.fr_access.log;
    error_log /var/log/nginx/cloud.deimos.fr_error.log;
&#160;
    # Force SSL 
    if ($scheme = http) {
        return 301 https://$host$request_uri;
    }   
&#160;
    rewrite ^/caldav((/|$).*)$ /remote.php/caldav$1 last;
    rewrite ^/carddav((/|$).*)$ /remote.php/carddav$1 last;
    rewrite ^/webdav((/|$).*)$ /remote.php/webdav$1 last;
&#160;
    error_page 403 = /core/templates/403.php;
    error_page 404 = /core/templates/404.php;
&#160;
    location ~ ^/(data|config|\.ht|db_structure\.xml|README) {
            deny all;
    }   
&#160;
    location / { 
        rewrite ^/.well-known/host-meta /public.php?service=host-meta last;
        rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;
        rewrite ^/.well-known/carddav /remote.php/carddav/ redirect;
        rewrite ^/.well-known/caldav /remote.php/caldav/ redirect;
        rewrite ^(/core/doc/[^\/]+/)$ $1/index.html;
        try_files $uri $uri/ index.php;
    }   
&#160;
    location ~ ^(?&lt;script_name&gt;.+?\.php)(?&lt;path_info&gt;/.*)?$ {
        try_files $script_name = 404;
        fastcgi_cache_valid any 1h; 
        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
    }   
&#160;
    location ~* ^.+.(jpg|jpeg|gif|bmp|ico|png|css|js|swf)$ {
        expires 30d;
        # Optional: Don't log access to assets
        access_log off;
    }   
&#160;
    # Drop config
    include drop.conf;
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Firefox_Sync_Server"><span class="mw-headline-number">4.8</span> Firefox Sync Server</span></h2>
<p>Pour Firefox Server Sync, c'est de la proxyfication. On transfert les requêtes vers un autre service&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/firefoxsync.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    listen 443 ssl;
&#160;
<span class="xtra ln-xtra">    ssl_certificate /etc/nginx/ssl/server.crt;</span><span class="xtra ln-xtra">    ssl_certificate_key /etc/nginx/ssl/server.key;</span>    ssl_session_timeout 5m; 
&#160;
    # Force SSL 
    if ($scheme = http) {
        return 301 https://$host$request_uri;
    }   
&#160;
<span class="xtra ln-xtra">    server_name firefoxsync.deimos.fr;</span>&#160;
<span class="xtra ln-xtra">    access_log /var/log/nginx/firefoxsync.deimos.fr_access.log;</span><span class="xtra ln-xtra">    error_log /var/log/nginx/firefoxsync.deimos.fr_error.log;</span>&#160;
    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://localhost:5000/;
    }
&#160;
    # Drop config
    include drop.conf;
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Selfoss"><span class="mw-headline-number">4.9</span> Selfoss</span></h2>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/feed.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
&#160;
    server_name feed.deimos.fr;
    root /usr/share/nginx/www/selfoss;
    index index.php;
&#160;
    access_log /var/log/nginx/feed.deimos.fr_access.log;
    error_log /var/log/nginx/feed.deimos.fr_error.log;
&#160;
    location ~* \ (gif|jpg|png) {
        expires 30d;
    }
&#160;
    location ~ ^/favicons/.*$ {
        try_files $uri /data/$uri;
    }
&#160;
    location ~* ^/(data\/logs|data\/sqlite|config\.ini|\.ht) {
        deny all;
    }
&#160;
    location / {
        try_files $uri /public/$uri /index.php$is_args$args;
    }
&#160;
    location ~ \.php$ {
        client_body_timeout 360;
        send_timeout 360;
        include fastcgi_params;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_intercept_errors on;
    }
&#160;
    # Drop config
    include drop.conf;
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Seafile"><span class="mw-headline-number">4.10</span> Seafile</span></h2>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-available/seafile.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    server_name seafile.deimos.fr;
    # Force redirect http to https
    rewrite ^ https://$http_host$request_uri? permanent;
}
&#160;
server {
    include ssl/deimos.fr_ssl.conf;
&#160;
    include pagespeed.conf;
    server_name seafile.deimos.fr;
&#160;
    root /usr/share/nginx/www/deimos.fr/seafile;
&#160;
    access_log /var/log/nginx/seafile.deimos.fr_access.log;
    error_log /var/log/nginx/seafile.deimos.fr_error.log;
&#160;
    # Max upload size
    client_max_body_size 1G;
&#160;
    location / {
        fastcgi_pass    127.0.0.1:8090;
        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;
        fastcgi_param   PATH_INFO           $fastcgi_script_name;
        fastcgi_param   SERVER_PROTOCOL     $server_protocol;
        fastcgi_param   QUERY_STRING        $query_string;
        fastcgi_param   REQUEST_METHOD      $request_method;
        fastcgi_param   CONTENT_TYPE        $content_type;
        fastcgi_param   CONTENT_LENGTH      $content_length;
        fastcgi_param   SERVER_ADDR         $server_addr;
        fastcgi_param   SERVER_PORT         $server_port;
        fastcgi_param   SERVER_NAME         $server_name;
        fastcgi_param   REMOTE_ADDR         $remote_addr;
        fastcgi_param   HTTPS               on;
        fastcgi_param   HTTP_SCHEME         https;
    }
&#160;
    # Webdav
    location /seafdav {
        fastcgi_pass    127.0.0.1:8080;
        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;
        fastcgi_param   PATH_INFO           $fastcgi_script_name;
&#160;
        fastcgi_param   SERVER_PROTOCOL     $server_protocol;
        fastcgi_param   QUERY_STRING        $query_string;
        fastcgi_param   REQUEST_METHOD      $request_method;
        fastcgi_param   CONTENT_TYPE        $content_type;
        fastcgi_param   CONTENT_LENGTH      $content_length;
        fastcgi_param   SERVER_ADDR         $server_addr;
        fastcgi_param   SERVER_PORT         $server_port;
        fastcgi_param   SERVER_NAME         $server_name;
&#160;
        fastcgi_param   HTTPS               on;
    }
&#160;
    location /seafhttp {
        rewrite ^/seafhttp(.*)$ $1 break;
        proxy_pass http://127.0.0.1:8082;
        client_max_body_size 0;
    }
&#160;
    location /media {
        root /var/www/deimos.fr/seafile/seafile-server-latest/seahub;
    }
}</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Gogs"><span class="mw-headline-number">4.11</span> Gogs</span></h2>
<p>Regarding Gogs, this is simple because all you need to set is a proxy pass:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/nginx/sites-enabled/git.deimos.fr</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">server {
    include listen_port.conf;
    server_name git.deimos.fr;
    # Force redirect http to https
    rewrite ^ https://$http_host$request_uri? permanent;
}
&#160;
server {
    include ssl/deimos.fr_ssl.conf;
&#160;
    server_name git.deimos.fr;
&#160;
    access_log /var/log/nginx/git.deimos.fr_access.log;
    error_log /var/log/nginx/git.deimos.fr_error.log;
&#160;
    location / {
        proxy_pass    http://127.0.0.1:3000;
    }
}</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="FAQ"><span class="mw-headline-number">5</span> FAQ</span></h1>
<h2><span class="mw-headline" id="Comment_analyser_les_r.C3.A8gles_qui_passent"><span class="mw-headline-number">5.1</span> Comment analyser les règles qui passent</span></h2>
<p>Vous pouvez voir le comportement de vos règles (redirect 301 par exemple) en utilisant curl&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> curl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; curl -I &quot;http://wiki.deimos.fr&quot; 
HTTP/1.1 301 Moved Permanently
Server: nginx
Content-Type: text/html
Location: http://wiki.deimos.fr/index.php
Content-Length: 178
Accept-Ranges: bytes
Date: Wed, 16 Jan 2013 22:17:05 GMT
X-Varnish: 2038764987
Age: 0
Via: 1.1 varnish
Connection: keep-alive</pre></div></div>
</td></tr></table><br />
<p>Cela vous permet d'analyser comment fonctionne celui ci et détecter d'éventuels problèmes.
</p>
<h2><span class="mw-headline" id="client_intended_to_send_too_large_body"><span class="mw-headline-number">5.2</span> client intended to send too large body</span></h2>
<p>Si vous avez ce genre de messages dans vos logs&#160;:
</p>
<pre>nginx client intended to send too large body
</pre>
<p>C'est tout simplement qu'Nginx ne vous autorise pas à envoyer des fichiers d'une taille aussi grande que vous le souhaitez. Pour cela il va falloir utiliser cette variable dans la partie 'server'&#160;:
</p>
<pre>client_max_body_size 10M;
</pre>
<p>Remplacez 10M par la valeur maximale que vous souhaitez autoriser.
</p>
<h2><span class="mw-headline" id="Access_denied."><span class="mw-headline-number">5.3</span> Access denied.</span></h2>
<p>Si vous obtenez ce type de message d'erreur, c'est du à PHP-FPM qui rencontre des problèmes sur la gestion des extensions. Vous avez le choix de rajouter l'extension en question&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/php5/fpm/pool.d/www.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">security<span class="sy0">.</span>limit_extensions <span class="sy0">=</span> <span class="sy0">.</span>php <span class="sy0">.</span>php3 <span class="sy0">.</span>php4 <span class="sy0">.</span>php5 <span class="sy0">.</span>cgi</pre></div></div>
</td></tr></table><br />
<p>ou bien de désactiver cette sécurité (non recommandé)&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/php5/fpm/pool.d/www.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">security<span class="sy0">.</span>limit_extensions <span class="sy0">=</span> <span class="kw4">false</span></pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="Ressources"><span class="mw-headline-number">6</span> Ressources</span></h1>
<p><a href="./File:Nginx_HTTP_Server_+_PHP5_(With_fast-cgi_And_xcache).pdf.html" title="File:Nginx HTTP Server + PHP5 (With fast-cgi And xcache).pdf">Documentation on installing Nginx HTTP Server</a><br />
<a rel="nofollow" class="external free" href="http://www.if-not-true-then-false.com/2011/nginx-and-php-fpm-configuration-and-optimizing-tips-and-tricks/">http://www.if-not-true-then-false.com/2011/nginx-and-php-fpm-configuration-and-optimizing-tips-and-tricks/</a><br />
</p>
<a rel="nofollow" class="external text" href="https://github.com/regilero/check_phpfpm_status">Nagios check php-fpm</a><ol class="references">
<li id="cite_note-1"><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#cite_ref-1">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://nginx.org/en/docs/http/ngx_http_limit_req_module.html">http://nginx.org/en/docs/http/ngx_http_limit_req_module.html</a></span>
</li>
</ol>

<!-- 
NewPP limit report
CPU time usage: 0.196 seconds
Real time usage: 0.198 seconds
Preprocessor visited node count: 1027/1000000
Preprocessor generated node count: 2727/1000000
Post‐expand include size: 23495/2097152 bytes
Template argument size: 7155/2097152 bytes
Highest expansion depth: 4/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   99.084      1 - -total
 68.28%   67.652     38 - Template:Config
  5.32%    5.272     18 - Template:Command
  3.62%    3.584      1 - Template:PHP-FPM_config
  3.17%    3.145      1 - Template:Nginx_Git_et_Gitweb
  2.96%    2.936      1 - Template:Nginx_owncloud
  2.93%    2.904      1 - Template:Nginx_Gitweb
  2.52%    2.497      1 - Template:Nginx_mediawiki
  2.47%    2.446      1 - Template:Nginx_wordpress
  2.06%    2.039      1 - Template:Infobox
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:2276-0!*!0!1!en!5!* and timestamp 20181111230822 and revision id 13431
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=Nginx_:_Installation_et_configuration_d%27une_alternative_d%27Apache&amp;oldid=13431">https://wiki.deimos.fr/index.php?title=Nginx_:_Installation_et_configuration_d%27une_alternative_d%27Apache&amp;oldid=13431</a>"					</div>
													<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=Nginx+%3A+Installation+et+configuration+d%27une+alternative+d%27Apache" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=Nginx_:_Installation_et_configuration_d%27une_alternative_d%27Apache&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=Nginx_:_Installation_et_configuration_d%27une_alternative_d%27Apache&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="./Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/Nginx_:_Installation_et_configuration_d'une_alternative_d'Apache.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/Nginx_:_Installation_et_configuration_d%27une_alternative_d%27Apache" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=Nginx_:_Installation_et_configuration_d%27une_alternative_d%27Apache&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=Nginx_:_Installation_et_configuration_d%27une_alternative_d%27Apache&amp;oldid=13431" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=Nginx_:_Installation_et_configuration_d%27une_alternative_d%27Apache&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 29 August 2014, at 15:33.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["ext.cite.a11y","mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":234});
}</script>
	</body>
</html>
	