<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Smartmontool : Surveillance des disques dur - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="./Smartmontool_:_Surveillance_des_disques_dur.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Smartmontool_:_Surveillance_des_disques_dur","wgTitle":"Smartmontool : Surveillance des disques dur","wgCurRevisionId":9450,"wgRevisionId":9450,"wgArticleId":1024,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Smartmontool_:_Surveillance_des_disques_dur","wgRelevantArticleId":1024,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Smartmontool_Surveillance_des_disques_dur skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Smartmontool : Surveillance des disques dur</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="./Smartmontool_:_Surveillance_des_disques_dur.html#mw-navigation">navigation</a>, 					<a href="./Smartmontool_:_Surveillance_des_disques_dur.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Activation_.2F_Installation_de_smartmontool"><span class="tocnumber">2</span> <span class="toctext">Activation / Installation de smartmontool</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Debian"><span class="tocnumber">2.1</span> <span class="toctext">Debian</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#FreeBSD"><span class="tocnumber">2.2</span> <span class="toctext">FreeBSD</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#R.C3.A9glages_fin"><span class="tocnumber">3</span> <span class="toctext">Réglages fin</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Debian_2"><span class="tocnumber">3.1</span> <span class="toctext">Debian</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#FreeBSD_2"><span class="tocnumber">3.2</span> <span class="toctext">FreeBSD</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Diagnostique_et_recherche_d.E2.80.99erreur"><span class="tocnumber">4</span> <span class="toctext">Diagnostique et recherche d’erreur</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Conclusion"><span class="tocnumber">5</span> <span class="toctext">Conclusion</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Faq"><span class="tocnumber">6</span> <span class="toctext">Faq</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Probl.C3.A8me_lors_de_mises_.C3.A0_jours"><span class="tocnumber">6.1</span> <span class="toctext">Problème lors de mises à jours</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Le_service_ne_veut_pas_se_lancer"><span class="tocnumber">6.2</span> <span class="toctext">Le service ne veut pas se lancer</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#Ressources"><span class="tocnumber">7</span> <span class="toctext">Ressources</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><span class="mw-headline-number">1</span> Introduction</span></h1>
<p>Smartmontools est un outil d’analyse de disque dur et de leurs caractéristiques physiques les plus critiques. Il se compose de deux parties&#160;: smartd le daemon, qui verifie par périodes de 30 minutes les paramètres en écrivant le résultat dans /var/log/syslog, et la commande smartctl qui nécessite les droits root et qui sert à afficher toutes les informations.
</p>
<h1><span class="mw-headline" id="Activation_.2F_Installation_de_smartmontool"><span class="mw-headline-number">2</span> Activation / Installation de smartmontool</span></h1>
<h2><span class="mw-headline" id="Debian"><span class="mw-headline-number">2.1</span> Debian</span></h2>
<p>L’installation nécessite également les privilèges root&#160;: Le nom du package varie selon votre version de debian. L’exemple si dessous concerne une sarge .
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td>
<pre>&gt; aptitude install smartmontools
Lecture des listes de paquets... Fait
Construction de l'arbre des dependances... Fait
Les NOUVEAUX paquets suivants seront installes&#160;:
 smartmontools
0 mis a jour, 1 nouvellement installes, 0 a enlever et 60 non mis a jour.
Il est necessaire de prendre 222ko dans les archives.
Apres depaquetage, 508ko d'espace disque supplementaires seront utilises.
Reception de&#160;: 1 <a rel="nofollow" class="external free" href="http://ftp.fr.debian.org">http://ftp.fr.debian.org</a> unstable/main smartmontools 5.32-3 [222kB]
222ko receptionnes en 0s (272ko/s)
Selection du paquet smartmontools precedemment deselectionne.
(Lecture de la base de donn&#233;es... 67466 fichiers et repertoires deja installes.)
Depaquetage de smartmontools (a partir de .../smartmontools_5.32-3_i386.deb) ...
Parametrage de smartmontools (5.32-3) ...
Not starting S.M.A.R.T. daemon smartd, disabled via /etc/default/smartmontools
</pre>
</td></tr></table><br />
<p>Comme vous pouvez voir, le daemon n’as pas été lancé de suite, il faut encore éditer /etc/default/smartmontools et de-commanter les lignes start_smartd=yes et smartd_opts="—interval=1800"&#160;:
</p><p><br />
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/default/smartmontools</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"> Defaults for smartmontools initscript (/etc/init.d/smartmontools)
 # This is a POSIX shell fragment
&#160;
 # list of devices you want to explicitly enable S.M.A.R.T. for
 # not needed if the device is monitored by smartd
 # enable_smart=&quot;/dev/hda /dev/hdb&quot;
&#160;
 # uncomment to start smartd on system startup
 start_smartd=yes
&#160;
 # uncomment to pass additional options to smartd on startup
 smartd_opts=&quot;--interval=1800&quot;</pre></div></div>
</td></tr></table><br />
<p><br /> 
Les changements validés, lancez le daemon&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>/etc/init.d/smartmontools start
Enabling S.M.A.R.T. for: /dev/hda /dev/hdb.
Starting S.M.A.R.T. daemon: smartd.
23:21 root@revolution /# smartctl -a /dev/hda
smartctl version 5.32 Copyright (C) 2002-4 Bruce Allen
</pre>
</td></tr></table><br />
<p>Le daemon smartd contrôlera maintenant à un rythme régulier les informations de votre disque et les inscrit dans vos logs&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> cat</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"> cat /var/log/syslog | grep smartd
 Mar 17 10:48:34 slut smartd[990]: Configuration file /etc/smartd.conf was parsed, found DEVICESCAN, scanning devices</pre></div></div>
</td></tr></table><br />
<p>Et voilà c’est prêt.
</p>
<h2><span class="mw-headline" id="FreeBSD"><span class="mw-headline-number">2.2</span> FreeBSD</span></h2>
<p>Pour installer smartmontool&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> pkg_add</font>
</td></tr>
<tr>
<td>
<pre>pkg_add -r smartmontool
</pre>
</td></tr></table><br />
<p>Puis démarrez le comme ceci&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>/usr/local/etc/rc.d/smartd start
</pre>
</td></tr></table><br />
<p>Editez la configuration /usr/local/etc/smartd.conf et ajoutez cette ligne (en adaptant à votre email)&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /usr/local/etc/smartd.conf</font>
</td></tr>
<tr>
<td>
<pre> DEVICESCAN -a -m my@mail.com
</pre>
</td></tr></table><br />
<p>Ensuite, si nous voulons que smartd démarre à tous les boot, ajoutez cette ligne&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/rc.conf</font>
</td></tr>
<tr>
<td>
<pre>smartd_enable="YES"
</pre>
</td></tr></table><br />
<h1><span class="mw-headline" id="R.C3.A9glages_fin"><span class="mw-headline-number">3</span> Réglages fin</span></h1>
<h2><span class="mw-headline" id="Debian_2"><span class="mw-headline-number">3.1</span> Debian</span></h2>
<p>Pour régler finement la configuration de smartmontools il vous faut éditer le fichier /etc/smartd.conf et rechercher la ligne DEVICESCAN ajouter vos propre réglage comme sur cet exemple&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/smartd.conf</font>
</td></tr>
<tr>
<td>
<pre>DEVICESCAN -H -l error -l selftest -t -f -m admin@webank.fr -M exec /usr/bin/mail -s (S/../.././02|L/../../6/03)
</pre>
</td></tr></table><br />
<p>La directive DEVICESCAN indique que l’on souhaite appliquer cette configuration à tous les disques dur détectés comme compatible SMART sur le système. Elle peut-être remplacée par le nom d’un périphérique /dev/hdx ou /dev/sdx.
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/smartd.conf</font>
</td></tr>
<tr>
<td>
<pre> /dev/hda -H -l error -l selftest -t -f -m admin@webank.fr -M exec /usr/bin/mail -s (S/../.././02|L/../../6/03)
 /dev/hdc -H -l error -l selftest -t -f -m admin@webank.fr -M exec /usr/bin/mail -s (S/../.././02|L/../../6/03)
</pre>
</td></tr></table><br />
<p>L’ajout de cette ligne dans le fichier de configuration permet d’émettre un email à admin@domain.com en utilisant la commande mail de votre système. L’option -t indique que nous souhaitons être informé au cas où l’attribut «&#160;Pre-Fail&#160;» ou «&#160;Old-age&#160;» présente des erreurs, si le test de santé (option -H) échoue ou si les journaux d’erreurs error et selftest évoluent (-l). On peut choisir parmi un panel d’options afin d’ajuster au mieux en fonction de ses besoins. On peut par exemple décider d’ignorer volontairement un attribut à l’aide de l’option -I. L’ajout de l’option -I 194 indique que nous souhaitons recevoir un mail en cas de panne mais en ignorant l’attribut numéro 194 (la température). L’option -s permet de définir la périodicité des tests à réaliser ( version &gt;5.30 nécessaire). Dans cet exemple, nous réalisons un test court (S/) tous les jours à 2 heures du matin, et un test long tous les samedi à 3 heures du matin. Il est également possible de modifier le mail qui sera envoyé par smartd en cas de panne. Il suffit de créer un script qui sera appelé à la place de /bin/mail.
</p>
<h2><span class="mw-headline" id="FreeBSD_2"><span class="mw-headline-number">3.2</span> FreeBSD</span></h2>
<p>Pour recevoir des mails tous les jours pour vous indiquer l'état de vos disques, ajoutez ceci dans le fichier /etc/periodic.conf&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/periodic.conf</font>
</td></tr>
<tr>
<td>
<pre>daily_status_smart_devices="/dev/ad4 /dev/ad6 /dev/ad8 /dev/ad10 /dev/ad12"
</pre>
</td></tr></table><br />
<p>Evidemment, mettez vos devices à vous.
</p>
<h1><span class="mw-headline" id="Diagnostique_et_recherche_d.E2.80.99erreur"><span class="mw-headline-number">4</span> Diagnostique et recherche d’erreur</span></h1>
<p>Comme smartd écrit dans /var/log/syslog il est facile de rechercher avec une commande grep un message comme dans l’exemple suivant&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> grep</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"> &gt; grep smartd /var/log/syslog
 Mar 17 10:48:34 slut smartd[990]: Configuration file /etc/smartd.conf was parsed, found DEVICESCAN, scanning devices
 Mar 17 10:48:34 slut smartd[990]: Device: /dev/hda, opened
 Mar 17 10:48:34 slut smartd[990]: Device: /dev/hda, found in smartd database.
 Mar 17 10:48:35 slut smartd[990]: Device: /dev/hda, is SMART capable. Adding to &quot;monitor&quot; list.
 Mar 17 10:48:35 slut smartd[990]: Device: /dev/hdb, opened
 Mar 17 10:48:35 slut smartd[990]: Device: /dev/hdb, not ATA, no IDENTIFY DEVICE Structure
 Mar 17 10:48:35 slut smartd[990]: Monitoring 1 ATA and 0 SCSI devices
 Mar 17 10:48:35 slut smartd: Lancement smartd succeeded
 Mar 17 10:48:35 slut smartd[2421]: smartd has fork()ed into background mode. New PID=2421.
 Mar 17 13:48:35 slut smartd[2421]: Device: /dev/hda, SMART Prefailure Attribute: 8 Seek_Time_Performance changed from 246 to 247
 Mar 17 15:48:35 slut smartd[2421]: Device: /dev/hda, SMART Prefailure Attribute: 8 Seek_Time_Performance changed from 247 to 246
 Mar 17 17:18:35 slut smartd[2421]: Device: /dev/hda, SMART Prefailure Attribute: 8 Seek_Time_Performance changed from 246 to 247</pre></div></div>
</td></tr></table><br />
<p>Comment interpréter ces lignes&#160;? Le disque montre une valeur constante qui varie entre 246 et 247. Si la valeur change de brutalement de 247 à 500, il s’agit d’un comportement anormal.
</p><p>L’utilisation de la commande smartctl nécessite les droits root. Voyons les différents attributs de la commande.
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> smarctl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"> smarctl -h
&#160;
 smartctl version 5.33 [i386-redhat-linux-gnu] Copyright (C) 2002-4 Bruce Allen
 Home page is http://smartmontools.sourceforge.net/[1]
 Usage: smartctl [options] device
 h, --help, --usage
 Display this help and exit
 i, --info
 Show identity information for device
 a, --all
 Show all SMART information for device</pre></div></div>
</td></tr></table><br />
<p><br />
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> smarctl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"> smartctl -i /dev/hda
&#160;
 === START OF INFORMATION SECTION ===
 Device Model:     Maxtor 6E040L0
 Serial Number:    E1KTPXFE
 Firmware Version: NAR61590
 User Capacity:    41,110,142,976 bytes
 Device is:        In smartctl database [for details use: -P show]
 ATA Version is:   7
 ATA Standard is:  ATA/ATAPI-7 T13 1532D revision 0
 Local Time is:    Thu Mar 17 22:21:52 2005 CET
 SMART support is: Available - device has SMART capability.
 SMART support is: Enabled</pre></div></div>
</td></tr></table><br />
<p><br />
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> smarctl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"> smartctl -a /dev/hda
&#160;
 === START OF READ SMART DATA SECTION ===
 SMART overall-health self-assessment test result: PASSED
&#160;
 General SMART Values:
 Offline data collection status:  (0x82) Offline data collection activity
                                       was completed without error.
                                       Auto Offline Data Collection: Enabled.
 Self-test execution status:      (   0) The previous self-test routine completed
                                       without error or no self-test has ever
                                       been run.
 Total time to complete Offline
 data collection:                 (1021) seconds.
 Offline data collection
 capabilities:                    (0x5b) SMART execute Offline immediate.
                                       Auto Offline data collection on/off support.
                                       Suspend Offline collection upon new
                                       command.
                                       Offline surface scan supported.
                                       Self-test supported.
                                       No Conveyance Self-test supported.
                                       Selective Self-test supported.
 SMART capabilities:            (0x0003) Saves SMART data before entering
                                       power-saving mode.
                                       Supports SMART auto save timer.
 Error logging capability:        (0x01) Error logging supported.
                                       No General Purpose Logging support.
 Short self-test routine
 recommended polling time:        (   2) minutes.
 Extended self-test routine
 recommended polling time:        (  17) minutes.
&#160;
 SMART Attributes Data Structure revision number: 16
 Vendor Specific SMART Attributes with Thresholds:
 ID# ATTRIBUTE_NAME          FLAG     VALUE WORST THRESH TYPE      UPDATED  WHEN_FAILED RAW_VALUE
 3 Spin_Up_Time            0x0027   252   252   063    Pre-fail  Always       -       2463
 4 Start_Stop_Count        0x0032   253   253   000    Old_age   Always       -       18
 5 Reallocated_Sector_Ct   0x0033   253   253   063    Pre-fail  Always       -       0
 6 Read_Channel_Margin     0x0001   253   253   100    Pre-fail  Offline      -       0
 7 Seek_Error_Rate         0x000a   253   252   000    Old_age   Always       -       0
 8 Seek_Time_Performance   0x0027   247   238   187    Pre-fail  Always       -       46214
 9 Power_On_Minutes        0x0032   241   241   000    Old_age   Always       -       950h+09m
 10 Spin_Retry_Count        0x002b   252   252   157    Pre-fail  Always       -       0
 11 Calibration_Retry_Count 0x002b   253   252   223    Pre-fail  Always       -       0
 12 Power_Cycle_Count       0x0032   253   253   000    Old_age   Always       -       22
 192 Power-Off_Retract_Count 0x0032   253   253   000    Old_age   Always       -       13
 193 Load_Cycle_Count        0x0032   253   253   000    Old_age   Always       -       72
 194 Temperature_Celsius     0x0032   253   253   000    Old_age   Always       -       31
 195 Hardware_ECC_Recovered  0x000a   253   252   000    Old_age   Always       -       25095
 196 Reallocated_Event_Count 0x0008   253   253   000    Old_age   Offline      -       0
 197 Current_Pending_Sector  0x0008   253   253   000    Old_age   Offline      -       0
 198 Offline_Uncorrectable   0x0008   253   253   000    Old_age   Offline      -       0
 199 UDMA_CRC_Error_Count    0x0008   199   199   000    Old_age   Offline      -       0
 200 Multi_Zone_Error_Rate   0x000a   253   252   000    Old_age   Always       -       0
 201 Soft_Read_Error_Rate    0x000a   251   138   000    Old_age   Always       -       1746
 202 TA_Increase_Count       0x000a   253   252   000    Old_age   Always       -       0
 203 Run_Out_Cancel          0x000b   253   252   180    Pre-fail  Always       -       137
 204 Shock_Count_Write_Opern 0x000a   253   252   000    Old_age   Always       -       0
 205 Shock_Rate_Write_Opern  0x000a   253   252   000    Old_age   Always       -       0
 207 Spin_High_Current       0x002a   252   252   000    Old_age   Always       -       0
 208 Spin_Buzz               0x002a   252   252   000    Old_age   Always       -       0
 209 Offline_Seek_Performnce 0x0024   187   183   000    Old_age   Offline      -       0
 99 Unknown_Attribute       0x0004   253   253   000    Old_age   Offline      -       0
 100 Unknown_Attribute       0x0004   253   253   000    Old_age   Offline      -       0
 101 Unknown_Attribute       0x0004   253   253   000    Old_age   Offline      -       0
&#160;
 SMART Error Log Version: 1
 No Errors Logged
&#160;
 SMART Self-test log structure revision number 1
 No self-tests have been logged.  [To run self-tests, use: smartctl -t]
&#160;
 SMART Selective self-test log data structure revision number 1
 SPAN  MIN_LBA  MAX_LBA  CURRENT_TEST_STATUS
   1        0        0  Not_testing
   2        0        0  Not_testing
   3        0        0  Not_testing
   4        0        0  Not_testing
   5        0        0  Not_testing
 Selective self-test flags (0x0):
 After scanning selected spans, do NOT read-scan remainder of disk.
 If Selective self-test is pending on power-up, resume after 0 minute delay.</pre></div></div>
</td></tr></table><br />
<p>Maintenant il reste l’interprétation des informations tel que l’uptime du disque, la température et, pour nous le plus intéressant, les erreurs. Pour cela nous observons surtout les deux dernières colonnes&#160;: WHEN_FAILED et RAW_VALUE et la section juste en dessous&#160;: SMART Error Log Version&#160;: 1 No Errors Logged.
</p><p>Un exemple&#160;:
</p>
<pre>5 Reallocated_Sector_Ct 0x0033 016 016 063 Pre-fail Always FAILING_NOW 598
</pre>
<p>Ici on voit que la réallocation des secteurs à échoué. Il faut donc surveiller cette partie. Si le nombre indiqué passe rapidement à des chiffres supérieurs, prenez les mesures nécessaires&#160;: faites le backup de vos données et contactez éventuellement le support.
</p>
<h1><span class="mw-headline" id="Conclusion"><span class="mw-headline-number">5</span> Conclusion</span></h1>
<p>Smartmontool est simple d’usage et trés complet. Notez que toutefois un tel outil ne remplace pas le plus important&#160;: le backup régulier de vos données.
</p>
<h1><span class="mw-headline" id="Faq"><span class="mw-headline-number">6</span> Faq</span></h1>
<h2><span class="mw-headline" id="Probl.C3.A8me_lors_de_mises_.C3.A0_jours"><span class="mw-headline-number">6.1</span> Problème lors de mises à jours</span></h2>
<p>Il peut arriver lors d'une mise à jour de vos packages que la mise à jour se passe mal et que vous na sachiez pas pourquoi. Le problèmes est en fait assez simple. Il suffit de stopper le service&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>/etc/init.d/smartmontool stop
</pre>
</td></tr></table><br />
<p>puis de nouveau relancez la mise à jour.
</p>
<h2><span class="mw-headline" id="Le_service_ne_veut_pas_se_lancer"><span class="mw-headline-number">6.2</span> Le service ne veut pas se lancer</span></h2>
<p>Ce problème peut arriver lorsque le SMART n'est tout simplement pas activé. Pour l'activer, il suffit pour ça de taper cette commande&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> smartctl</font>
</td></tr>
<tr>
<td>
<pre>smartctl -s on <b>/dev/sda</b>
</pre>
</td></tr></table><br />
<p>Essayez ensuite de démarrer smartmontools&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>/etc/init.d/smartmontools start
</pre>
</td></tr></table><br />
<h1><span class="mw-headline" id="Ressources"><span class="mw-headline-number">7</span> Ressources</span></h1>
<p><a href="./File:Checking_Hard_Disk_Sanity_With_Smartmontools.pdf.html" title="File:Checking Hard Disk Sanity With Smartmontools.pdf">Checking Hard Disk Sanity With Smartmontools</a><br />
<a rel="nofollow" class="external free" href="http://www.davidandrzejewski.com/2009/03/15/freebsd-monitor-your-disks-health-with-smartmontools/">http://www.davidandrzejewski.com/2009/03/15/freebsd-monitor-your-disks-health-with-smartmontools/</a>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.048 seconds
Real time usage: 0.046 seconds
Preprocessor visited node count: 309/1000000
Preprocessor generated node count: 874/1000000
Post‐expand include size: 4992/2097152 bytes
Template argument size: 2412/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   10.598      1 - -total
 55.63%    5.896     12 - Template:Command
 25.35%    2.687      6 - Template:Config
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:1024-0!*!*!1!en!5!* and timestamp 20181111230715 and revision id 9450
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=Smartmontool_:_Surveillance_des_disques_dur&amp;oldid=9450">https://wiki.deimos.fr/index.php?title=Smartmontool_:_Surveillance_des_disques_dur&amp;oldid=9450</a>"					</div>
													<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=Smartmontool+%3A+Surveillance+des+disques+dur" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="./Smartmontool_:_Surveillance_des_disques_dur.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="./Smartmontool_:_Surveillance_des_disques_dur.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=Smartmontool_:_Surveillance_des_disques_dur&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=Smartmontool_:_Surveillance_des_disques_dur&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="./Smartmontool_:_Surveillance_des_disques_dur.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/Smartmontool_:_Surveillance_des_disques_dur.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/Smartmontool_:_Surveillance_des_disques_dur" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=Smartmontool_:_Surveillance_des_disques_dur&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=Smartmontool_:_Surveillance_des_disques_dur&amp;oldid=9450" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=Smartmontool_:_Surveillance_des_disques_dur&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 14 January 2011, at 20:24.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":31});
}</script>
	</body>
</html>
	