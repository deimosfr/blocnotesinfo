<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Installation et configuration de Postfix et Courrier - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Installation_et_configuration_de_Postfix_et_Courrier.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Installation_et_configuration_de_Postfix_et_Courrier","wgTitle":"Installation et configuration de Postfix et Courrier","wgCurRevisionId":12465,"wgRevisionId":12465,"wgArticleId":1658,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Linux","Debian","OpenBSD","Mails","Postfix"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Installation_et_configuration_de_Postfix_et_Courrier","wgRelevantArticleId":1658,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Installation_et_configuration_de_Postfix_et_Courrier skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Installation et configuration de Postfix et Courrier</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="Installation_et_configuration_de_Postfix_et_Courrier.html#mw-navigation">navigation</a>, 					<a href="Installation_et_configuration_de_Postfix_et_Courrier.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#Debian"><span class="tocnumber">2.1</span> <span class="toctext">Debian</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#OpenBSD"><span class="tocnumber">2.2</span> <span class="toctext">OpenBSD</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#FreeBSD"><span class="tocnumber">2.3</span> <span class="toctext">FreeBSD</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#Configuration"><span class="tocnumber">3</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#OpenBSD_2"><span class="tocnumber">3.1</span> <span class="toctext">OpenBSD</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#Lancer_Postfix"><span class="tocnumber">4</span> <span class="toctext">Lancer Postfix</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#Debian_2"><span class="tocnumber">4.1</span> <span class="toctext">Debian</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#OpenBSD_3"><span class="tocnumber">4.2</span> <span class="toctext">OpenBSD</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#FreeBSD_2"><span class="tocnumber">4.3</span> <span class="toctext">FreeBSD</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#Cr.C3.A9ation_de_boites_aux_lettres"><span class="tocnumber">5</span> <span class="toctext">Création de boites aux lettres</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#Se_prot.C3.A9ger_encore_plus_du_spam"><span class="tocnumber">6</span> <span class="toctext">Se protéger encore plus du spam</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#Ressources"><span class="tocnumber">7</span> <span class="toctext">Ressources</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><span class="mw-headline-number">1</span> Introduction</span></h1>
<p><a rel="nofollow" class="external text" href="http://www.postfix.org/">Postfix</a> est un serveur de messagerie électronique et un logiciel libre développé par Wietse Venema. Il se charge de la livraison de messages électroniques. Il a été conçu comme une alternative plus rapide, plus facile à administrer et plus sécurisée que l'historique Sendmail.
</p><p>Ce logiciel permet de gérer presque tous les cas d'une utilisation professionnelle. Utilisé avec les regexp dans un fichier junk et une liste publique antispam, il permet d'éviter bon nombre de spams sans même devoir scanner les contenus de message. Il remplace idéalement toutes sortes de solutions moins libres. On trouve quelques howto sur le site officiel de Postfix. Afin d'optimiser l'analyse de courriels, Postfix permet de déléguer la gestion de ceux-ci à un processus externe, qui se chargera de déterminer si le courriel est accepté ou refusé (très utile dans les systèmes anti-pourriel).
</p><p>Le schéma suivant décrit l'architecture interne de postfix&#160;:
</p><p><a href="./File:Postfix.png.html" class="image"><img alt="Postfix.png" src="images/6/6c/Postfix.png" width="800" height="277" /></a>
</p>
<h1><span class="mw-headline" id="Installation"><span class="mw-headline-number">2</span> Installation</span></h1>
<h2><span class="mw-headline" id="Debian"><span class="mw-headline-number">2.1</span> Debian</span></h2>
<p>Pour installer un serveur Postifx, voici le minimum à installer&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> apt-get</font>
</td></tr>
<tr>
<td>
<pre>apt-get install postfix courier-imap-ssl procmail spamc
</pre>
</td></tr></table><br />
<h2><span class="mw-headline" id="OpenBSD"><span class="mw-headline-number">2.2</span> OpenBSD</span></h2>
<p>Sous OpenBSD, nous allons prendre la version packagée simple&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> pkg_add</font>
</td></tr>
<tr>
<td>
<pre>pkg_add -iv postfix
</pre>
</td></tr></table><br />
<p>Après l'installation, il faut remplacer postfix à la place de sendmail. Il suffit de suivre les instructions données à la fin de l'installation de Postfix. Notamment, il faut supprimer les tâches cron de sendmail et configurer le système pour qu'il utilise postfix à la place de Sendmail.
</p><p><b>C'est ce que fait le script postfix_enable&#160;!</b>
</p>
<h2><span class="mw-headline" id="FreeBSD"><span class="mw-headline-number">2.3</span> FreeBSD</span></h2>
<p>Sous FreeBSD, nous allons prendre la version packagée&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> pkg_add</font>
</td></tr>
<tr>
<td>
<pre>pkg_add -vr postfix
</pre>
</td></tr></table><br />
<p>Après l'installation, il faut remplacer postfix à la place de sendmail. Il suffit de suivre les instructions données à la fin de l'installation de Postfix. Nous allons continuer ici en rajoutant cette ligne dans rc.conf&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> rc.conf</font>
</td></tr>
<tr>
<td>
<pre>...
<b>postfix_enable="YES"</b>
</pre>
</td></tr></table><br />
<p>Désactivons sendmail en rajoutant ces lignes&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> rc.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">sendmail_enable=&quot;NO&quot;
sendmail_submit_enable=&quot;NO&quot;
sendmail_outbound_enable=&quot;NO&quot;
sendmail_msp_queue_enable=&quot;NO&quot;</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="Configuration"><span class="mw-headline-number">3</span> Configuration</span></h1>
<p>Pour la configuration, il va falloir éditer puis adapter le fichier de configuration&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/postfix/main.cf</font>
</td></tr>
<tr>
<td>
<pre># See /usr/share/postfix/main.cf.dist for a commented, more complete version

# Security
smtpd_banner = <b>fire.deimos.fr</b> - Microsoft Exchange (5.5)
biff = no
disable_vrfy_command = yes 
smtpd_helo_required = yes

# Reject unknow domain
reject_unknown_recipient_domain = yes 

# appending .domain is the MUA's job.
append_dot_mydomain = no

# Uncomment the next line to generate "delayed mail" warnings
#delay_warning_time = 4h

myhostname = <b>fire.deimos.fr</b>
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases.db
myorigin = /etc/mailname
mydestination = <b>deimos.fr, fire, localhost</b>
relayhost = 
mynetworks = <b>127.0.0.0/8, 192.168.0.0/24, 10.8.0.0</b>
home_mailbox = Maildir/
mailbox_size_limit = 0 
recipient_delimiter = + 
inet_interfaces = all 
mailbox_command = procmail -a "$EXTENSION"

# Masquerade_domains hides hostnames from addresses
masquerade_domains = deimos.fr

# Virtual Domains
# virtual_alias_domains = mavrocordato.com mavro.fr deimos.servehttp.com
# virtual_alias_maps = hash:/etc/postfix/virtual

# Protection against Open Relay
smtpd_client_restrictions = reject_rbl_client bl.spamcop.net 

# Protection against Spam
smtpd_recipient_restrictions =  permit_sasl_authenticated,
                                permit_mynetworks,
                                reject_unauth_destination,
                                reject_invalid_hostname,
                                reject_non_fqdn_sender,
                                reject_unknown_sender_domain,
                                reject_non_fqdn_recipient,
                                reject_unknown_recipient_domain,
                                reject_rhsbl_client blackhole.securitysage.com,
                                reject_rhsbl_sender blackhole.securitysage.com,
                                reject_rbl_client relays.ordb.org,
                                reject_rbl_client opm.blitzed.org,
                                reject_rbl_client list.dsbl.org,
                                reject_rbl_client cbl.abuseat.org,
                                reject_rbl_client dul.dnsbl.sorbs.net,
                                permit
smtpd_data_restrictions = reject_unauth_pipelining
mime_header_checks = regexp:/etc/postfix/mime_header_checks.regexp

# Use Amavis
content_filter = amavis:[127.0.0.1]:10024
receive_override_options = no_address_mappings
</pre>
</td></tr></table><br />
<p>Comme vous pouvez le voir, la ligne "smtpd_recipient_restrictions" est assez longue. C'est parceque des RBL y sont intégrés. Voici une petite description&#160;:<br />
Les RBLs ont comme mandat de fournir une liste de serveurs réputés comme grands envoyeurs de courriels, et de lister les grands pollupsteurs.  Il s'agit en fait d'une grande liste noire généralisée.  Le principe d'utilisation est fort simple&#160;: lorsqu'un filtre reçoit une courriel, il vérifie si le serveur d'envoi est contenu dans un RBL.  Si oui, le courriel est catégorisé comme pourriel.  Les RBLs qu'un filtre utilise comme sources de serveurs est habituellement déterminée par l'administrateur système.  Cette méthode contient donc son lot de controverse, puisque certains RBLs sont réputés pour être plus efficaces que d'autres.  Le choix des RBLs influence donc directement l'efficacité du système anti-pourriel.  De plus, certains RBL ont des règles plus souples que d'autres quant à l'ajout d'un serveur dans leur liste, compliquant encore plus la situation.  Parmi les RBLs connus, notons, entre autres, <a rel="nofollow" class="external text" href="http://www.spamhaus.org/">SpamHaus</a>, <a rel="nofollow" class="external text" href="http://www.njabl.org/dynablock.html">DynaBlock</a>, <a rel="nofollow" class="external text" href="http://www.sorbs.net/">Sorbs</a>, et <a rel="nofollow" class="external text" href="http://www.dsbl.org/">DSBL</a>.  Il est également possible d'associer <a rel="nofollow" class="external text" href="http://www.spamhaus.org/rokso/index.lasso">ROKSO</a> aux RBLs.  ROKSO (<i>Register of Known Spam Operations</i>) est une liste des polluposteurs les plus actifs.  En fait, les membres de ROKSO sont responsables de près de 80% du pourriel sur le Net.
</p><p>L'option "disable_dns_lookups = yes" sert a désactiver les requetes vers le DNS. lorsque le "relayhost" est entre "[ ]" cela implique que postfix n’essaiera pas de resoudre le MX.
</p><p>Ensuite créez un fichier /etc/postfix/mime_header_checks.regexp&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/postfix/mime_header_checks.regexp</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"> /filename=\&quot;?(.*)\.(bat|chm|cmd|com|cpl|do|exe|hta|jse|rm|scr|pif|vbe|vbs|vxd|xl)\&quot;?$/
   REJECT For security reasons attachments of this type are rejected.
 /^\s*Content-(Disposition|Type).*name\s*=\s*&quot;?(.+\.(lnk|cpl|asd|hlp|ocx|reg|bat|c[ho]m|cmd|exe|dll|vxd|pif|scr|hta|jse?|sh[mbs]|vb[esx]|ws[fh]|wav|mov|wmf|xl))&quot;?\s*$/
      REJECT Attachment type not allowed. File &quot;$2&quot; has the unacceptable extension &quot;$3&quot;</pre></div></div>
</td></tr></table><br />
<p>Si certaines pièces jointes ne passent pas à l'envoie ou la réception, c'est ici qu'il faut faire des modifs (au niveau des extentions).
</p><p>Editez le fichier /etc/mailname et mettez votre DNS&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/mailname</font>
</td></tr>
<tr>
<td>
<pre>deimos.fr
</pre>
</td></tr></table><br />
<h2><span class="mw-headline" id="OpenBSD_2"><span class="mw-headline-number">3.1</span> OpenBSD</span></h2>
<p>Pour OpenBSD, il y a ces lignes en plus&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> main.cf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"> mail_owner = _postfix
 inet_protocols = all
 unknown_local_recipient_reject_code = 550
 debug_peer_level = 2
 debugger_command =
          PATH=/bin:/usr/bin:/usr/local/bin:/usr/X11R6/bin
          xxgdb $daemon_directory/$process_name $process_id &amp; sleep 5
 sendmail_path = /usr/local/sbin/sendmail
 newaliases_path = /usr/local/sbin/newaliases
 mailq_path = /usr/local/sbin/mailq
 setgid_group = _postdrop
 html_directory = /usr/local/share/doc/postfix/html
 manpage_directory = /usr/local/man
 sample_directory = /etc/postfix
 readme_directory = /usr/local/share/doc/postfix/readme</pre></div></div>
</td></tr></table><br />
<p>Editez le fichier /etc/mailname et mettez votre DNS&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/mailname</font>
</td></tr>
<tr>
<td>
<pre>deimos.fr
</pre>
</td></tr></table><br />
<h1><span class="mw-headline" id="Lancer_Postfix"><span class="mw-headline-number">4</span> Lancer Postfix</span></h1>
<h2><span class="mw-headline" id="Debian_2"><span class="mw-headline-number">4.1</span> Debian</span></h2>
<p>Une fois que tout ceci est terminé, il ne vous reste plus qu'à lancer la commande de redémarrage du service&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>/etc/init.d/postfix restart
</pre>
</td></tr></table><br />
<h2><span class="mw-headline" id="OpenBSD_3"><span class="mw-headline-number">4.2</span> OpenBSD</span></h2>
<p>Postfix se lance avec la commande postfix start, mais d'abord il va falloir activer Postfix à la place de Sendmail&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>postfix-enable
</pre>
</td></tr></table><br />
<p>Regarder dans les fichiers /var/log/messages et /var/log/maillog pour voir si tout s'est bien passé.
</p><p>Arrêt et démarrage de Postfix, vérification de la configuration&#160;:
</p>
<ul><li> postfix check&#160;: vérification élémentaire de la configuration</li>
<li> postfix reload&#160;: rechargement des fichiers de configuration</li>
<li> postfix start&#160;: démarrage de postfix</li>
<li> postfix stop&#160;: arrêt de postfix</li></ul>
<p>Gestion des files d'attente&#160;:
</p>
<ul><li> mailq&#160;: affichage du contenu des files</li>
<li> postqueue -p&#160;: affichage du contenu des files</li>
<li> postqueue -f&#160;: forcer le traiment des files</li>
<li> postfix flush&#160;: forcer le traiment des files</li></ul>
<h2><span class="mw-headline" id="FreeBSD_2"><span class="mw-headline-number">4.3</span> FreeBSD</span></h2>
<p>Nous allons donc killer sendmail et démarrer postfix&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>pkill sendmail
postfix start
</pre>
</td></tr></table><br />
<p>Postfix est maintenant démarré
</p>
<h1><span class="mw-headline" id="Cr.C3.A9ation_de_boites_aux_lettres"><span class="mw-headline-number">5</span> Création de boites aux lettres</span></h1>
<p>Pour créer ensuite une boite aux lettres, il suffit de se placer dans son home et de taper&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> maildirmake</font>
</td></tr>
<tr>
<td>
<pre>maildirmake Maildir
</pre>
</td></tr></table><br />
<p>Ensuite, pour que les mails arrivent à destination, il faut placer dans un fichier ".procmailrc" ces quelques lignes&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> ~/.procmailrc</font>
</td></tr>
<tr>
<td>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">VERBOSE=ON
DROPPRIVS=YES
SHELL=/bin/sh
PATH=/usr/local/bin:/usr/bin:/bin
MAILDIR=$HOME/Maildir/
DEFAULT=$MAILDIR/new
LOGFILE=/var/log/procmail.log
&#160;
:0fw
* &lt; 256000
        | /usr/bin/spamc -f
       &#160;:0e
        {   
                EXITCODE=$?
        }</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="Se_prot.C3.A9ger_encore_plus_du_spam"><span class="mw-headline-number">6</span> Se protéger encore plus du spam</span></h1>
<p>Je vous conseil un site qui répertorie toutes les adresses intéressantes. Faites en bon usage, mais attention à ne pas trop en mettre&#160;!
</p><p><a rel="nofollow" class="external free" href="http://spamlinks.net/filter-dnsbl-lists.htm">http://spamlinks.net/filter-dnsbl-lists.htm</a>
</p>
<h1><span class="mw-headline" id="Ressources"><span class="mw-headline-number">7</span> Ressources</span></h1>
<p><a rel="nofollow" class="external text" href="http://www.postfix.org">Site officiel de Postfix</a><br />
<a rel="nofollow" class="external text" href="http://www.formation.ssi.gouv.fr/stages/documentation/architecture_securisee/postfix.html">Documentation sur la mise en place de Postfix sur OpenBSD</a><br />
<a rel="nofollow" class="external text" href="http://www.postfix.org/POSTSCREEN_README.html">Postscreen&#160;: lutter un peu plus contre les spams</a><br />
<a rel="nofollow" class="external text" href="http://feedproxy.google.com/~r/BlogInformatiqueByColundrum/~3/bhKbAPMbEPA/installation-rapide-serveur-mail-securise">Installation rapide d'un serveur mail sécurisé</a><br />
<a href="./File:Configuration_avancée_de_Postfix.pdf.html" title="File:Configuration avancée de Postfix.pdf">Configuration avancée de Postfix</a><br />
<a href="./File:Lutter_contre_le_spam_avec_Postfix.pdf.html" title="File:Lutter contre le spam avec Postfix.pdf">Lutter contre le spam avec Postfix</a><br />
<a href="./File:Serveur_SMTP_Routage_des_mails_avec_Postfix.pdf.html" title="File:Serveur SMTP Routage des mails avec Postfix.pdf">Serveur SMTP Routage des mails avec Postfix</a><br />
<a href="./File:Antispam_Practices.pdf.html" title="File:Antispam Practices.pdf">Les pratiques antispams</a><br />
<a href="./File:273_UNIX_Garden.pdf.html" title="File:273 UNIX Garden.pdf">SMTP reject 554&#160;: Eliminez le spam à la racine</a><br />
<a href="./File:How_To_Configure_Custom_Postfix_Bounce_Messages.pdf.html" title="File:How To Configure Custom Postfix Bounce Messages.pdf">Documentation sur la configuration du bounce mail sur Postfix</a><br />
<a href="./File:Antispam_OpenBSD.pdf.html" title="File:Antispam OpenBSD.pdf">Anti-spam adaptable et performant avec OpenBSD et Spamd</a><br />
<a href="./File:Virtual_Users_And_Domains_With_Postfix_Courier_MySQL_And_SquirrelMail.pdf.html" title="File:Virtual Users And Domains With Postfix Courier MySQL And SquirrelMail.pdf">Virtual Users And Domains With Postfix Courier MySQL And SquirrelMail</a><br />
<a href="./File:How_To_Whitelist_Hosts_IP_Addresses_In_Postfix.pdf.html" title="File:How To Whitelist Hosts IP Addresses In Postfix.pdf">How To Whitelist Hosts IP Addresses In Postfix</a><br />
<a href="./File:Installation_d’un_serveur_mail_brique_par_brique.pdf.html" title="File:Installation d’un serveur mail brique par brique.pdf">Installation d’un serveur mail brique par brique</a>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.048 seconds
Real time usage: 0.049 seconds
Preprocessor visited node count: 450/1000000
Preprocessor generated node count: 1248/1000000
Post‐expand include size: 6490/2097152 bytes
Template argument size: 4283/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    8.556      1 - -total
 61.40%    5.253      8 - Template:Config
 19.28%    1.650      7 - Template:Command
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:1658-0!*!*!1!en!5!* and timestamp 20181111230712 and revision id 12465
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=Installation_et_configuration_de_Postfix_et_Courrier&amp;oldid=12465">https://wiki.deimos.fr/index.php?title=Installation_et_configuration_de_Postfix_et_Courrier&amp;oldid=12465</a>"					</div>
													<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://wiki.deimos.fr/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="./Category:Linux.html" title="Category:Linux">Linux</a></li><li><a href="./Category:Debian.html" title="Category:Debian">Debian</a></li><li><a href="./Category:OpenBSD.html" title="Category:OpenBSD">OpenBSD</a></li><li><a href="./Category:Mails.html" title="Category:Mails">Mails</a></li><li><a href="./Category:Postfix.html" title="Category:Postfix">Postfix</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=Installation+et+configuration+de+Postfix+et+Courrier" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="Installation_et_configuration_de_Postfix_et_Courrier.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="Installation_et_configuration_de_Postfix_et_Courrier.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=Installation_et_configuration_de_Postfix_et_Courrier&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=Installation_et_configuration_de_Postfix_et_Courrier&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="Installation_et_configuration_de_Postfix_et_Courrier.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/Installation_et_configuration_de_Postfix_et_Courrier.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/Installation_et_configuration_de_Postfix_et_Courrier" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=Installation_et_configuration_de_Postfix_et_Courrier&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=Installation_et_configuration_de_Postfix_et_Courrier&amp;oldid=12465" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=Installation_et_configuration_de_Postfix_et_Courrier&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 7 May 2013, at 07:43.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":32});
}</script>
	</body>
</html>
	