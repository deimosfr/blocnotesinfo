<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Etude de cas IDX-PKI GPL - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Etude_de_cas_IDX-PKI_GPL.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Etude_de_cas_IDX-PKI_GPL","wgTitle":"Etude de cas IDX-PKI GPL","wgCurRevisionId":5998,"wgRevisionId":5998,"wgArticleId":2533,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Etude_de_cas_IDX-PKI_GPL","wgRelevantArticleId":2533,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Etude_de_cas_IDX-PKI_GPL skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Etude de cas IDX-PKI GPL</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="Etude_de_cas_IDX-PKI_GPL.html#mw-navigation">navigation</a>, 					<a href="Etude_de_cas_IDX-PKI_GPL.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Etude_de_cas_IDX-PKI_GPL.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Etude_de_cas_IDX-PKI_GPL.html#Les_principaux_points_forts_de_la_solution_IDX-PKI"><span class="tocnumber">1.1</span> <span class="toctext">Les principaux points forts de la solution IDX-PKI</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="Etude_de_cas_IDX-PKI_GPL.html#Les_principales_fonctionnalit.C3.A9s_d.27IDX-PKI"><span class="tocnumber">1.2</span> <span class="toctext">Les principales fonctionnalités d'IDX-PKI</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="Etude_de_cas_IDX-PKI_GPL.html#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="Etude_de_cas_IDX-PKI_GPL.html#Configuration"><span class="tocnumber">3</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="Etude_de_cas_IDX-PKI_GPL.html#Conclusion"><span class="tocnumber">4</span> <span class="toctext">Conclusion</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><span class="mw-headline-number">1</span> Introduction</span></h1>
<p>Pour informations, ce dossier a été réalisé avec l'ancienne version d'IDX-PKI qui a contribué à sa popularité, les versions des logiciels tiers étaient les versions les plus récentes à date de rédaction.
</p><p>La démocratisation des outils de sniffing (écoute passive du réseau), l'augmentation des risques liés à l'utilisation des nouvelles technologies justifient l'emploi quasi systématique de solutions fiables de chiffrement.
</p><p>Entre utilisateurs, et plus généralement sur de larges infrastructures, seuls les moyens utilisant des algorithmes de chiffrement asymétrique sont envisageables. Chaque utilisateur, entité, ou quelque «&#160;objet&#160;» que ce soit, dispose alors d'une paire de clefs avec&#160;:
</p>
<ul><li> Une clef privée, dont le contenu doit être stocké en «&#160;lieu&#160;» sûr.</li>
<li> Une clef publique, pouvant être diffusée largement (et généralement stockée dans un serveur central sur la PKI).</li></ul>
<p>Il est en effet inconcevable d'utiliser des moyens de chiffrement symétrique pour des échanges entre utilisateurs.
</p><p>Aucun système fiable, hormis un déplacement physique avec identification de l'interlocuteur (carte d'identité, passeport, etc.) n'existe actuellement pour échanger des clefs privées dans des systèmes asymétriques.
</p><p>L'utilisation, souvent lourde en termes de performances, des moyens asymétriques est compensée avec une utilisation symétrique complémentaire.
</p><p>Des clefs symétriques (algorithmes AES, DES, triple DES, etc.) peuvent alors être échangées via des canaux sécurisés par des moyens de chiffrement asymétrique.
</p><p>C'est notamment le cas pour plusieurs systèmes de Voix sur IP (VoIP – Voice Over IP), de réseaux Peer to Peer (P2P)...
</p><p>Il existe une contre partie lourde à l'utilisation des moyens de chiffrement généralisés&#160;: le sentiment de sécurité. Avec l'utilisation massive de moyens cryptographiques, les utilisateurs acquièrent un faux sentiment de sécurité.
</p><p>Le chiffrement ne saurait en aucun cas assurer une sécurité suffisante&#160;: les failles logicielles, problèmes de design, de topologie réseau, de configuration seront toujours présents.
</p><p>La compromission d'une clef privée, trop souvent négligée dans les études de risques mais également dans les esprits des utilisateurs, rendra complètement inefficace les meilleures implémentations cryptographiques.
</p><p>Il n'est pas rare, lors de tests d'intrusion (pentests) par exemple, de trouver des moyens forts de chiffrement sur des serveur HTTPS avec des clefs privées accessibles en lecture pour tous les utilisateurs du système...
</p><p>Une sensibilisation auprès des utilisateurs est, dans tous les cas, toujours nécessaire dans l'accompagnement du déploiement de telles solutions.
</p><p>L'exemple typique du popup d'alerte émis par un navigateur Internet lors de la réception d'un certificat ne correspondant pas au site visité est bien souvent négligé par les utilisateurs «&#160;lambdas&#160;» dont l'habitude est devenue de cliquer sur le bouton «&#160;Accepter&#160;».
</p><p>L'emploi massif, sous certains systèmes d'exploitation, il est vrai, rend la tâche presque intuitive.
</p><p>La gestion des révocations est également un élément important dans une PKI. Une clef compromise, interdite, doit être systématiquement révoquée. Des CRL, listes des certificats révoqués, doivent également être utilisées.
</p><p>Les principes fondamentaux sous-jacents aux PKI sont nombreux&#160;: autorités de certification (CA), hiérarchisation et héritages des liens de confiance, certificats, clefs...
</p><p>La littérature disponible sur Internet à ce sujet et abondante. Quelques prérequis sont nécessaires sur le sujet à la bonne compréhension de cet article.
</p><p>IDX-PKI est une solution open source d'infrastructure à clef publique développée par la société OpenTrust IdealX. Elle permet de gérer de façon simple et décentralisée l'ensemble d'une PKI sur de larges infrastructures.
</p><p>Un des principaux 'avantages est le type de licence libre dont bénéficie IDX-PKI (GPL - General Public Licence), qui permet de déployer à moindre coût cette solution.
</p><p>Les technologies retenues en amont constituent également un point fort de cette offre avec leur fiabilité, robustesse et facilité d'utilisation.
</p>
<h2><span class="mw-headline" id="Les_principaux_points_forts_de_la_solution_IDX-PKI"><span class="mw-headline-number">1.1</span> Les principaux points forts de la solution IDX-PKI</span></h2>
<ul><li> Un mode centralisé dans lequel un serveur relaye les informations pour les utilisateurs. Les administrateurs disposent, eux aussi, d'une interface simplifiée permettant d'effectuer la totalité des tâches d'une PKI.</li>
<li> Un mode décentralisé permettant la génération simple des clefs et des certificats pour les navigateurs (Microsoft Internet Explorer, Netscape, Mozilla, Firefox ...), les jetons de sécurité pour les cartes à puce, dongles USB ou les équipements réseau (VPN, Serveur HTTPs). Un objet au sens d'IDX-PKI n'est plus forcément un utilisateur mais peut être un équipement, une entité, etc.</li>
<li> La génération des certificats de serveurs avec le support des signatures de certificats pour les serveurs et/ou équipements tiers (formats standards).</li>
<li> Le support d'officiers de sécurité multiples (SO – Security Officers) afin de répartir la charge des demandes de signatures de certificats (CSR), charge importante notamment lors du déploiement initial de la solution. Le support du module SCEP (Simple Certificate Enrollment Protocol) permettant aux équipements et clients de réseaux virtuels (VPN – Virtual Private Network) de s'intégrer automatiquement dans l'infrastructure à clef publique.</li>
<li> Le support d'une API de Web development permettant d'intégrer rapidement la PKI au sein d'applications Web futures ou existantes (authentification...).</li></ul>
<h2><span class="mw-headline" id="Les_principales_fonctionnalit.C3.A9s_d.27IDX-PKI"><span class="mw-headline-number">1.2</span> Les principales fonctionnalités d'IDX-PKI</span></h2>
<ul><li> Accès SSL sécurisé à la plate forme Web (et authentification par certificat).</li>
<li> Gestion des autorités de certification racines (CA – Certificate Authority) et subalternes.</li>
<li> Possibilité d'utilisation de multiples CA.</li>
<li> Possibilité d'interopérabilité de la PKI sur les systèmes compatibles (OpenVPN, signatures SMIME...).</li>
<li> Gestion des séquestres de clefs.</li>
<li> Module OCSP (Online Certificate Status Protocol), permettant d'effectuer, en ligne, des vérifications sur la validité de certificats.</li>
<li> Gestion des logs et des remontées d'alertes.</li>
<li> Différents modes de fonctionnement (cf. ci-dessus)&#160;: décentralisé, centralisé et synchrone.</li>
<li> Gestion des profils pour les certificats.</li>
<li> Création des certificats de serveurs (HTTPs, IMAPs, POPs, SMTPs...).</li>
<li> Installation et configuration aisées via des scripts Perl disponibles.</li>
<li> Support de formats propriétaires&#160;: SafeNet, Bull, nCipher.</li>
<li> Haute disponibilité grâce aux serveurs retenus (Apache, OpenLDAP).</li>
<li> Compatibilité des formats Microsoft (DER, PKCS 12...).</li></ul>
<p>Le code ouvert permet également l'audit de cette solution, propriété particulièrement intéressante dans certains contextes d'utilisation (safety, normes, etc.).
</p><p>Plusieurs grands groupes et organismes publics se sont déjà tournés vers cette solution, gage de fiabilité. 
L'installation d'IDX-PKI est ici présentée avec la distribution Linux Debian. Il s'agit en effet d'une des distributions les plus utilisées et permet d'être, en outre, très représentative en termes de packages nécessaires (dépendances) et de configuration.
</p>
<h1><span class="mw-headline" id="Installation"><span class="mw-headline-number">2</span> Installation</span></h1>
<p>Merci de prendre note que ce document a été réalisé en 2006 et qu'une nouvelle version d'IDX-PKI apportant son lot de corrections et d'améliorations est disponible sur <a rel="nofollow" class="external text" href="http://sourceforge.net/project/showfiles.php?group_id=110403">Sourceforge</a>; cette nouvelle version connue sous le nom de <a rel="nofollow" class="external text" href="http://www.opentrust.com/content/view/135/142/lang,fr/">Cryptonit</a> est à mettre au crédit d'<a rel="nofollow" class="external text" href="http://www.opentrust.com/">OpenTrust IdealX</a>. 
</p><p>Pour informations, ce dossier a été réalisé avec l'ancienne version d'IDX-PKI qui a contribué à sa popularité, les versions des logiciels tiers étaient les versions les plus récentes à date de rédaction.
</p><p>Les paquets (logiciels et librairies) nécessaires avant l'installation sont les suivants&#160;:
</p>
<ul><li> apache (1.3.27)</li>
<li> curl</li>
<li> expat</li>
<li> gd</li>
<li> gmp</li>
<li> libjpeg</li>
<li> libpng</li>
<li> libtool- lib</li>
<li> libxml2</li>
<li> make (3.79.1)</li>
<li> mm</li>
<li> mod_perl (1.26)</li>
<li> mod_ssl (2.8.12)</li>
<li> openldap (2.0.27)</li>
<li> openldap- clients (2.0.27)</li>
<li> openldap- servers (2.0.27)</li>
<li> openssl (0.9.6b)</li>
<li> perl (5.6.1)</li>
<li> perl- CGI (2.752)</li>
<li> perl- Digest- MD5</li>
<li> perl- libwww- perl (5.63)</li>
<li> perl- MIME- Base64 (2.12)</li>
<li> perl- URI</li>
<li> perl- suidperl (5.6.1)</li>
<li> php (4.1.2)</li>
<li> pspell</li>
<li> stunnel (3.22)</li></ul>
<p>Plusieurs modules Perl sont également requis. Debian les propose en package, inutile donc de les installer manuellement depuis une source extérieure&#160;:
</p>
<ul><li> perl-Config-IniFiles (2.37)</li>
<li> perl-Convert-ASN1 (0.17)</li>
<li> perl-Data-Compare (0.02)</li>
<li> perl-Error (0.14)</li>
<li> perl-File-Sync (0.09)</li>
<li> perl-IO-Socket-SSL (0.93)</li>
<li> perl-IO-stringy (2.109)</li>
<li> perl-Net-SSLeay (1.22)</li>
<li> perl-perl-ldap (0.26)</li>
<li> perl-Taint (0.07)</li>
<li> perl-Tie-IxHash (1.21)</li>
<li> perl-XML-SAX-Base (1.02)</li></ul>
<p>Les commandes Debian suivantes, lancées par l'utilisateur root, vous permettront d'effectuer les installations de ces modules&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> apt-cache</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">apt-cache search perl [nom du module]
apt-get install [module renvoyé par la commande précédente]</pre></div></div>
</td></tr></table><br />
<p>Après désarchivage de la dernière version d'IDX-PKI récupérée ( IDX-PKI est depuis devenu Cryptonit disponible sur SourceForge - lien http externe url:[click] ), la procédure suivante ne concerne que l'ancienne version IDX-PKI.
</p><p>Lancez le script ./configure.pl. Suit alors une série de questions auxquelles vous devrez répondre avec précision (attention, cette phase de configuration est déterminante)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"># ./configure.pl
&#160;
Reconfiguration starting from the previous answers given to &quot;./configure.pl&quot;.
To suppress this behaviour, remove the config.status file.
&#160;
Install all IDX-PKI entities on this machine (y/n) [y]?
&#160;
Target distribution [debian stable]?
Test setup options (y/n) [y]?
Unprivileged installation (y/n) [y]?
Use testing small-size keys (y/n) [y]?
Hostname to use for the webserver [lapt41p]?
Hostname to use for the repository LDAP [lapt41p]?
Installation prefix [/home/tests/idxpki-v1.9.0/install_image]?
Port for IDX-PKI's secure WWW server [11256]?
Port for IDX-PKI's insecure WWW server (used for publication purposes) [11257]?
Port for the IDX-PKI's repository LDAP server [11258]?
&#160;
Done
&#160;
&#160;
Looking for file paths:
-----------------------
* slappasswd... /usr/sbin/slappasswd
* stunnel... /usr/bin/stunnel
* openssl... /usr/bin/openssl
* openssl-root... /usr
* slapadd... /usr/sbin/slapadd
* ldapmodify... /usr/bin/ldapmodify
* openssl-include... /usr/include/openssl
* openldap-root... /usr
* schemadir... /etc/ldap/schema
* apache... /usr/sbin/apache
* slapd... /usr/sbin/slapd
Done</pre></div></div>
</td></tr></table><br />
<p>Il est fréquent de ne pas avoir tous les modules Perl requis&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">* Net::LDAP (0.26)... ==&gt; not OK &lt;==
Net::LDAP doesn't appear to be installed on the system.</pre></div></div>
</td></tr></table><br />
<p>C'est notamment le cas pour le module Perl-Taint, non disponible sur la distribution Debian de base, qu'il faudra installer manuellement en récupérant l'archive sur le moteur de recherche de CPAN (Comprehensive Perl Active Network) <a rel="nofollow" class="external text" href="http://search.cpan.org/~phoenix/Taint-0.09/Taint.pm">à l'adresse suivante</a>&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">wget search.cpan.org/CPAN/authors/id/P/PH/PHOENIX/Taint-0.09.tar.gz
tar -zxvf Taint-0.09.tar.gz
perl Makefile.pl
make
make install</pre></div></div>
</td></tr></table><br />
<p>Pour tous les autres paquets Perl, la démarche est alors la suivante (recherche du nom du paquet, puis installation)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"># apt-cache search perl ldap net
libnet-ldap-perl - A Client interface to LDAP servers
# apt-get install libnet-ldap-perl</pre></div></div>
</td></tr></table><br />
<p>Puis finalement, une fois l'ensemble des modules Perl récupérés, nous relançons le script de configuration&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"># ./configure.pl
(...)
Done
&#160;
The configuration values have been written in ./config.status.
You can now build IDX-PKI by typing `make`.</pre></div></div>
</td></tr></table><br />
<p>Enfin, pour finir, la compilation s'effectue avec&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">make
make install</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="Configuration"><span class="mw-headline-number">3</span> Configuration</span></h1>
<p>Les fichiers de configuration d'IDX-PKI sont placés dans le répertoire /opt/idxpki/etc/idxpki/conf. Il s'agit de fichiers de configuration tiers, tels que ceux d'Apache (idxpki-httpd.conf), PHP (php.ini) ou encore des messages de renouvellement de certificats en français et anglais.
</p><p>Pour informations, ce dossier a été réalisé avec l'ancienne version d'IDX-PKI qui a contribué à sa popularité, les versions des logiciels tiers étaient les versions les plus récentes à date de rédaction.
</p><p>Le répertoire /opt/idxpki/etc/idxpki/conf&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">/opt/idxpki/etc/idxpki/conf$ ls
idxpki-httpd.conf renewal_message-1.conf renewal_message-3.conf
php.ini renewal_message-2.conf schema</pre></div></div>
</td></tr></table><br />
<p>Les modifications directes sur ces fichiers ne sont normalement que minimes. Voici les parties susceptibles d'être modifiées&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"># Lignes relatives à la charge, aux connexions multiples et aux clients
Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 15
MinSpareServers 5
MaxSpareServers 20
StartServers 5
MaxClients 150
&#160;
# Personnalisation du serveur apache sous-jacent&#160;:
&#160;
ServerName lapt41p
ServerAdmin webmaster@domaine.com
&#160;
# Configuration de l'accès non sécurisé (port 80 en particulier):
&#160;
Listen 80
&#160;
&lt;VirtualHost _default_:80&gt;
DocumentRoot /opt/idxpki/var/idxpki/crl
CustomLog /opt/idxpki/var/idxpki/log/httpd_plain_HTTP_access_log combined
&lt;/VirtualHost&gt;
&#160;
# Configuration de l'accès sécurisé (port 443 en particulier)
&#160;
Listen 443
&#160;
&lt;VirtualHost _default_:443&gt;
DocumentRoot /opt/idxpki/var/idxpki/www
SSLLogLevel warn
SSLLog /opt/idxpki/var/idxpki/log/httpd_ssl_log
(...)
&#160;
# Définitions SSL
&#160;
SSLEngine on
SSLOptions +StdEnvVars +ExportCertData +StrictRequire
SSLCertificateFile /opt/idxpki/var/idxpki/secure/WWW/webserver.pem
SSLCertificateKeyFile /opt/idxpki/var/idxpki/secure/WWW/webserver.key
SSLCACertificatePath /opt/idxpki/etc/idxpki/ca
SSLVerifyClient optional
SSLVerifyDepth 2
&#160;
&lt;LocationMatch ^/(RA|CA|escrow|config|logs)&gt;
SSLRequire (&#160;%{SSL_CLIENT_VERIFY} eq &quot;SUCCESS&quot; )
&lt;/LocationMatch&gt;
&#160;
&lt;/VirtualHost&gt;</pre></div></div>
<p>En dehors des modifications de configuration, il sera également nécessaire de créer le certificat et la clef privée associés au serveur HTTPs (cf. lignes ci-dessus)&#160;:
</p>
<ul><li> Création du CA (clef et certificat)</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> openssl</font>
</td></tr>
<tr>
<td>
<p>openssl req -nodes -new -x509 -keyout root.key -out root.crt -days 365
</p>
</td></tr></table><br />
<ul><li> Création de le clef privée du serveur et de la demande de signature pour le certificat</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> openssl</font>
</td></tr>
<tr>
<td>
<p>openssl req -nodes -new -keyout webserver.key -out webserver.csr -days 354
</p>
</td></tr></table><br />
<ul><li> Signature du certificat</li></ul>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> openssl</font>
</td></tr>
<tr>
<td>
<p>echo "02" &gt; root.srl
openssl x509 -req -in webserver.csr -out webserver.pem -CAkey root.key -CA root.crt -days 365
</p>
</td></tr></table><br />
<p>La solution IDX-PKI est désormais fonctionnelle au niveau du serveur. Les éléments de configuration suivants sont effectués directement via l'interface Web, depuis un navigateur classique vers l'URL en https.
</p><p>Il s'agit d'une authentification par certificat (et non classique par login/mot de passe).
</p><p>Il faudra pour ce faire importer au préalable dans le navigateur d'administration le certificat au format PKCS12.
</p><p>Il est placé, après l'installation, dans /tmp/idxpki-ceremony/admin.p12 ou [CHEMIN DEFINI]/var/idxpki/tmp/idxpki-ceremony/admin.p12 selon le mode d'installation retenu précédemment.
</p><p>Le certificat administrateur n'est pas protégé par mot de passe, l'interface est donc directement accessible de façon transparente.
</p>
<h1><span class="mw-headline" id="Conclusion"><span class="mw-headline-number">4</span> Conclusion</span></h1>
<p>IDX-PKI démocratise les solutions de PKI pour tous. Cette technologie étant jusqu'alors destinée presque exclusivement aux grandes sociétés de par la compléxité de mise en oeuvre et l'appel à des SSII pour en effectuer le déploiement. 
</p><p>Pour informations, ce dossier a été réalisé avec l'ancienne version d'IDX-PKI qui a contribué à sa popularité, les versions des logiciels tiers étaient les versions les plus récentes à date de rédaction.
</p><p><br />
La solution IDX-PKI ouvre donc la voie vers la démocratisation des solutions de PKI pour tous.
</p><p>Cette technologie, aux bases pourtant robustes et éprouvées, était jusqu'à maintenant réservée quasi-exclusivement aux grandes sociétés pouvant faire appel à des SSII spécialisées pour développer des interfaces de PKI, sans lesquelles les principes théoriques de cette technologie pouvaient difficilement être utilisés.
</p><p>Il est inimaginable aujourd'hui d'utiliser une infrastructure de PKI uniquement en ligne de commande avec OpenSSL et un serveur d'annuaire LDAP.
</p><p>Les interfaces de ce type, encore trop rares dans le domaine des logiciels libres, répondent tout à fait au besoin de sécurité, notamment dans le domaine de la cryptologie.
</p><p>D'anciens protocoles, n'intégrant pas de sécurité nativement (citons entre autres SMTP, POP, etc.) peuvent ainsi être renforcés grâce à l'utilisation de moyens de chiffrement asymétriques, et surtout grâce à une distribution intuitive de certificats.
</p><p>Concernant la solution retenue, certains bémols restent cependant encore à noter. Nous regrettons en effet un certain manque de maturité dans la version accessible au public avec&#160;:
</p>
<ul><li> Plusieurs problèmes, en pratique, lors de l installation et de la configuration de la solution, nécessitant des modifications de scripts, fichiers de configuration, etc.</li>
<li> Un manque de documentation (un bref fichier PDF était accessible sur le site d'OpenTrust IdealX), souvent floue et incomplète.</li>
<li> Aucun manuel didactique «&#160;pas à pas&#160;» d'installation (hormis le fichier INSTALL placé à la racine de l'archive). De solides bases techniques sont alors nécessaires pour arriver à obtenir un système entièrement fonctionnel.</li></ul>
<p>Une fois installée, la solution dispose d'une interface intuitive et ergonomique permettant d'oublier les déboires précédents lors de l'installation.
</p><p>Des bases de cryptologie permettront de mettre en place la base du système en vue d'une automatisation des processus de livraison des certificats, des listes de révocation, et de vérifications.
</p><p>Cryponit, la dernière version OpenTrust IdealX de IDX-PKI, devrait normalement palier les problèmes rencontrés avec la précédente version qui a été utilisée pour la rédaction de ce document.
</p><p>Quoi qu'il en soit, l'initiative de mise à disposition sous licence GPL de ces versions par la société OpenTrust IdealX est remarquable et permet de contribuer activement au développement à la fois des logiciels libres dans le domaine de la PKI mais également de ce domaine au sein d'un panel d'entreprises plus larges.
</p>
<!-- 
NewPP limit report
CPU time usage: 0.032 seconds
Real time usage: 0.034 seconds
Preprocessor visited node count: 198/1000000
Preprocessor generated node count: 570/1000000
Post‐expand include size: 2217/2097152 bytes
Template argument size: 710/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    6.723      1 - -total
 73.66%    4.952     11 - Template:Command
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:2533-0!*!*!1!en!5!* and timestamp 20181111230722 and revision id 5998
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=Etude_de_cas_IDX-PKI_GPL&amp;oldid=5998">https://wiki.deimos.fr/index.php?title=Etude_de_cas_IDX-PKI_GPL&amp;oldid=5998</a>"					</div>
													<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=Etude+de+cas+IDX-PKI+GPL" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="Etude_de_cas_IDX-PKI_GPL.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="Etude_de_cas_IDX-PKI_GPL.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="Etude_de_cas_IDX-PKI_GPL.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=Etude_de_cas_IDX-PKI_GPL&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=Etude_de_cas_IDX-PKI_GPL&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="Etude_de_cas_IDX-PKI_GPL.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/Etude_de_cas_IDX-PKI_GPL.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/Etude_de_cas_IDX-PKI_GPL" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=Etude_de_cas_IDX-PKI_GPL&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=Etude_de_cas_IDX-PKI_GPL&amp;oldid=5998" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=Etude_de_cas_IDX-PKI_GPL&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 9 May 2008, at 17:33.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":32});
}</script>
	</body>
</html>
	