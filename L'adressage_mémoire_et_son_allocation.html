<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>L'adressage mémoire et son allocation - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="L'adressage_mémoire_et_son_allocation.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.cite.styles|mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"L'adressage_mémoire_et_son_allocation","wgTitle":"L'adressage mémoire et son allocation","wgCurRevisionId":11630,"wgRevisionId":11630,"wgArticleId":3460,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"L'adressage_mémoire_et_son_allocation","wgRelevantArticleId":3460,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-L_adressage_mémoire_et_son_allocation skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">L'adressage mémoire et son allocation</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="L'adressage_mémoire_et_son_allocation.html#mw-navigation">navigation</a>, 					<a href="L'adressage_mémoire_et_son_allocation.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="L'adressage_mémoire_et_son_allocation.html#L.27adressage_m.C3.A9moire"><span class="tocnumber">1</span> <span class="toctext">L'adressage mémoire</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="L'adressage_mémoire_et_son_allocation.html#L.27espace_virtuel_d.27adressage"><span class="tocnumber">2</span> <span class="toctext">L'espace virtuel d'adressage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="L'adressage_mémoire_et_son_allocation.html#Ulimits"><span class="tocnumber">3</span> <span class="toctext">Ulimits</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="L'adressage_mémoire_et_son_allocation.html#L.27espace_physique_d.27adressage"><span class="tocnumber">4</span> <span class="toctext">L'espace physique d'adressage</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="L'adressage_mémoire_et_son_allocation.html#Le_mapping_d.E2.80.99adresses_virtuelles"><span class="tocnumber">5</span> <span class="toctext">Le mapping d’adresses virtuelles</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="L'adressage_mémoire_et_son_allocation.html#UMA"><span class="tocnumber">6</span> <span class="toctext">UMA</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="L'adressage_mémoire_et_son_allocation.html#L.27allocation_m.C3.A9moire"><span class="tocnumber">7</span> <span class="toctext">L'allocation mémoire</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="L'adressage_mémoire_et_son_allocation.html#Les_diff.C3.A9rentes_RAM"><span class="tocnumber">8</span> <span class="toctext">Les différentes RAM</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="L'adressage_mémoire_et_son_allocation.html#NUMA"><span class="tocnumber">9</span> <span class="toctext">NUMA</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="L'adressage_mémoire_et_son_allocation.html#numactl"><span class="tocnumber">9.1</span> <span class="toctext">numactl</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="L'adressage_mémoire_et_son_allocation.html#Allouer_un_PID_.C3.A0_certains_processeurs"><span class="tocnumber">9.1.1</span> <span class="toctext">Allouer un PID à certains processeurs</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="L'adressage_mémoire_et_son_allocation.html#D.C3.A9sactivation"><span class="tocnumber">9.2</span> <span class="toctext">Désactivation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="L'adressage_mémoire_et_son_allocation.html#Am.C3.A9liorer_les_performances_du_TLB"><span class="tocnumber">10</span> <span class="toctext">Améliorer les performances du TLB</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="L'adressage_mémoire_et_son_allocation.html#References"><span class="tocnumber">11</span> <span class="toctext">References</span></a></li>
</ul>
</div>

<table class="config_array" align="right" style="width:20em; font-size:90%; text-align:left; border: 1px #d0e7ff solid; margin-left:10px;">
   <tr>
      <td class="config_subarray" colspan="2" style="text-align:center;"><a href="./File:Poweredbylinux.jpg.html" class="image" title="Linux"><img alt="Linux" src="images/2/2f/Poweredbylinux.jpg" width="100" height="150" /></a></td>
   </tr><tr><td colspan="2" style="text-align:center;"><hr class="gradient" /></td></tr><tr>
      <th>Software version</th>
      <td>Kernel 2.6.32+</td>
   </tr><tr>
      <th>Operating System</th>
      <td>Red Hat 6.3<br />Debian 7</td>
   </tr><tr>
      <th>Website</th>
      <td><a rel="nofollow" class="external text" href="http://www.kernel.org">Kernel Website</a></td>
   </tr><tr>
      <th>Last Update</th>
      <td>11/09/2012</td>
   </tr><tr>
      <th>Others</th>
      <td></td>
   </tr>
</table>
<h1><span class="mw-headline" id="L.27adressage_m.C3.A9moire"><span class="mw-headline-number">1</span> L'adressage mémoire</span></h1>
<p>Pour plus d'efficacité, la mémoire d'un ordinateur est découpé en blocks (chunks) appelé pages. La taille des pages peut varier en fonction de l'architecture du processeur (32 ou 64 bits). La RAM est découpée en page frames. 1 page frame peut contenir 1 page. Lorsqu'un process souhaites accéder à une adresse mémoire, une translation de la page vers la page frame doit être faite. Si ces informations ne sont pas déjà en mémoire, alors le kernel doit faire une recherche afin de charger manuellement cette page dans la page frame.
</p><p>Lorsqu'un programme a besoin d'utiliser de la mémoire, il utilise ne fait une 'linear address'. Sur les systèmes 32 bits, on peut adresser que 4G de RAM. Il est possible de faire sauter cette limite avec une option kernel appelée <a rel="nofollow" class="external text" href="http://fr.wikipedia.org/wiki/Extension_d%27adresse_physique">PAE</a><sup id="cite_ref-PAE_1-0" class="reference"><a href="L'adressage_mémoire_et_son_allocation.html#cite_note-PAE-1">[1]</a></sup> permettant de monter jusqu'à 64G de RAM. Si vous souhaitez en mettre plus, il faut obligatoirement passer sur un système 64 bits qui vous permettra de monter jusqu'à 1T.
</p><p>Chaque process a sa propre table de pages. Chaque PTE (Page Table Entry ou entrée de page) contient des informations sur la page frame qui est assignée à un process.
</p>
<h1><span class="mw-headline" id="L.27espace_virtuel_d.27adressage"><span class="mw-headline-number">2</span> L'espace virtuel d'adressage</span></h1>
<p>La mémoire d'un processus sous Linux est découpé en plusieurs secteurs&#160;:
</p><p><a href="./File:Virtual_address_space_and_physical_address_space_relationship.png.html" class="image"><img alt="Virtual address space and physical address space relationship.png" src="images/d/d6/Virtual_address_space_and_physical_address_space_relationship.png" width="773" height="789" /></a><sup id="cite_ref-2" class="reference"><a href="L'adressage_mémoire_et_son_allocation.html#cite_note-2">[2]</a></sup>
</p>
<ul><li> text&#160;: c'est le code du process qui est en cours d'exécution, aussi connu sous le nom de 'text area'</li>
<li> data&#160;: les données utilisées par le programme. Les données initialisées seront en tête, suivit de celles qui ne le sont pas</li>
<li> arguments&#160;: les arguments qui sont passés au programme</li>
<li> environment&#160;: les variables d'environnements dont le programme bénéficie</li>
<li> heap&#160;: utilisé pour l'allocation dynamique de mémoire (connu aussi sous le nom de brk)</li>
<li> stack&#160;: utilisé pour le passage d'arguments entre les procédures et la mémoire dynamique</li></ul>
<p>Certains process ne gèrent pas directement leur adressage mémoire laissant 2 solutions possibles&#160;:
</p>
<ul><li> La heap et la stack peuvent grandir l'une dans l'autre</li>
<li> Pus d'espace disponible, le process n'arrive pas à libérer de la mémoire qui a été allouée (Memory leaks)</li></ul>
<p>La mémoire virtuelle (VMA) des process peut être vue de cette façon (ici le PID 1)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> cat</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; cat /proc/1/statm 
5361 386 306 35 0 104 0</pre></div></div>
</td></tr></table><br />
<p>Voici une autre vue encore un peu plus détaillée (ici le PID 1)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> cat</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; cat /proc/1/status 
Name:	init
State:	S (sleeping)
Tgid:	1
Pid:	1
PPid:	0
TracerPid:	0
Uid:	0	0	0	0
Gid:	0	0	0	0
Utrace:	0
FDSize:	64
Groups:	
VmPeak:	   21452 kB
VmSize:	   21444 kB
VmLck:	       0 kB
VmHWM:	    1544 kB
VmRSS:	    1544 kB
VmData:	     328 kB
VmStk:	      88 kB
VmExe:	     140 kB
VmLib:	    2384 kB
VmPTE:	      60 kB
VmSwap:	       0 kB
Threads:	1
SigQ:	1/11005
SigPnd:	0000000000000000
ShdPnd:	0000000000000000
SigBlk:	0000000000000000
SigIgn:	0000000000001000
SigCgt:	00000001a0016623
CapInh:	0000000000000000
CapPrm:	ffffffffffffffff
CapEff:	fffffffffffffeff
CapBnd:	ffffffffffffffff
Cpus_allowed:	1
Cpus_allowed_list:	0
Mems_allowed:	00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001
Mems_allowed_list:	0
voluntary_ctxt_switches:	1332
nonvoluntary_ctxt_switches:	42</pre></div></div>
</td></tr></table><br />
<p>Vous pouvez également avoir une vue de la VMA avec pmap encore plus détaillée (ici le PID 1)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; pmap 1
1:   /sbin/init
00007f319151d000     44K r-x--  /lib64/libnss_ldap.so.2
00007f3191528000   2044K -----  /lib64/libnss_ldap.so.2
00007f3191727000      4K rw---  /lib64/libnss_ldap.so.2
00007f3191728000     48K r-x--  /lib64/libnss_files-2.12.so
00007f3191734000   2048K -----  /lib64/libnss_files-2.12.so
00007f3191934000      4K r----  /lib64/libnss_files-2.12.so
00007f3191935000      4K rw---  /lib64/libnss_files-2.12.so
00007f3191936000   1572K r-x--  /lib64/libc-2.12.so
00007f3191abf000   2044K -----  /lib64/libc-2.12.so
00007f3191cbe000     16K r----  /lib64/libc-2.12.so
00007f3191cc2000      4K rw---  /lib64/libc-2.12.so
00007f3191cc3000     20K rw---    [ anon ]
00007f3191cc8000     88K r-x--  /lib64/libgcc_s-4.4.6-20120305.so.1.#prelink#.31mBid (deleted)
00007f3191cde000   2044K -----  /lib64/libgcc_s-4.4.6-20120305.so.1.#prelink#.31mBid (deleted)
00007f3191edd000      4K rw---  /lib64/libgcc_s-4.4.6-20120305.so.1.#prelink#.31mBid (deleted)
00007f3191ede000     28K r-x--  /lib64/librt-2.12.so
00007f3191ee5000   2044K -----  /lib64/librt-2.12.so
00007f31920e4000      4K r----  /lib64/librt-2.12.so
00007f31920e5000      4K rw---  /lib64/librt-2.12.so
00007f31920e6000     92K r-x--  /lib64/libpthread-2.12.so
00007f31920fd000   2048K -----  /lib64/libpthread-2.12.so
00007f31922fd000      4K r----  /lib64/libpthread-2.12.so
00007f31922fe000      4K rw---  /lib64/libpthread-2.12.so
00007f31922ff000     16K rw---    [ anon ]
00007f3192303000    252K r-x--  /lib64/libdbus-1.so.3.4.0
00007f3192342000   2048K -----  /lib64/libdbus-1.so.3.4.0
00007f3192542000      4K r----  /lib64/libdbus-1.so.3.4.0
00007f3192543000      4K rw---  /lib64/libdbus-1.so.3.4.0
00007f3192544000     36K r-x--  /lib64/libnih-dbus.so.1.0.0
00007f319254d000   2044K -----  /lib64/libnih-dbus.so.1.0.0
00007f319274c000      4K r----  /lib64/libnih-dbus.so.1.0.0
00007f319274d000      4K rw---  /lib64/libnih-dbus.so.1.0.0
00007f319274e000     96K r-x--  /lib64/libnih.so.1.0.0
00007f3192766000   2044K -----  /lib64/libnih.so.1.0.0
00007f3192965000      4K r----  /lib64/libnih.so.1.0.0
00007f3192966000      4K rw---  /lib64/libnih.so.1.0.0
00007f3192967000    128K r-x--  /lib64/ld-2.12.so
00007f3192b79000     20K rw---    [ anon ]
00007f3192b85000      4K rw---    [ anon ]
00007f3192b86000      4K r----  /lib64/ld-2.12.so
00007f3192b87000      4K rw---  /lib64/ld-2.12.so
00007f3192b88000      4K rw---    [ anon ]
00007f3192b89000    140K r-x--  /sbin/init
00007f3192dab000      8K r----  /sbin/init
00007f3192dad000      4K rw---  /sbin/init
00007f31946b1000    260K rw---    [ anon ]
00007fffa18c1000     84K rw---    [ stack ]
00007fffa18f1000      4K r-x--    [ anon ]
ffffffffff600000      4K r-x--    [ anon ]
 total            21444K</pre></div></div>
</td></tr></table><br />
<p>Les working set de process correspondent à un groupe de pages d'un process en mémoire. Le working set d'un process change continuellement tout du long de la vie du programme du fait que l'attribution des espaces mémoire varie tout le temps. Pour l'attribution en mémoire des pages, le kernel s'assure en permanence des pages qui ne sont pas utilisées dans le working set. Si des pages contiennent des données modifiées, ses pages seront écrites sur le disque. S'il n'y a pas de données dans les pages, elles seront réallouées à d'autres process dont le besoin de mémoire est plus urgent.
</p><p>Le vidage mémoire apparait lorsque le système passe plus de temps à déplacer des pages à l'intérieur et en dehors du working set d'un process, que de travailler avec tout simplement.
</p>
<h1><span class="mw-headline" id="Ulimits"><span class="mw-headline-number">3</span> Ulimits</span></h1>
<p>Il existe des limitations sur un système. j'ai déjà fait <a href="./Ulimit_:_Utiliser_les_limites_systèmes.html" title="Ulimit : Utiliser les limites systèmes">un article dessus</a><sup id="cite_ref-3" class="reference"><a href="L'adressage_mémoire_et_son_allocation.html#cite_note-3">[3]</a></sup>. Il est possible de limiter l'utilisation de la mémoire avec les ulimits. On peut par exemple définir la limite maximum d'espace d'adressage.
</p>
<h1><span class="mw-headline" id="L.27espace_physique_d.27adressage"><span class="mw-headline-number">4</span> L'espace physique d'adressage</span></h1>
<p>La plus part des architectures processeurs supportent différentes tailles de pages. Par exemple&#160;:
</p>
<ul><li> IA-32&#160;: 4Kib, 2MiB et 4MiB.</li>
<li> IA-64&#160;: 4KiB, 8KiB, 64KiB, 256KiB, 1MiB, 4MiB, 16MiB et 256MiB.</li></ul>
<p>Le nombre d'entrées TLB est fixe mais peut être agrandit en modifiant la taille des pages. 
</p>
<h1><span class="mw-headline" id="Le_mapping_d.E2.80.99adresses_virtuelles"><span class="mw-headline-number">5</span> Le mapping d’adresses virtuelles</span></h1>
<p>Lorsque le kernel a besoin d'accéder à un espace mémoire particulier dans une page frame, il fait référence à une adresse virtuelle. Celle ci sera envoyée au MMU (Memory Managment Unit) sur le processeur faisant référence à une table de pages du processus. Cette adresse virtuelle va pointer à un PTE dans la table des pages. Le MMU utilise les informations transmises par le PTE pour localiser la page mémoire physique sur laquelle la virtuelle pointe. Chaque PTE contient un bit pour indiquer si la page est actullement en mémoire ou a été swappée sur le disque.
</p><p><a href="./File:TLB.png.html" class="image"><img alt="TLB.png" src="images/f/f4/TLB.png" width="527" height="342" /></a><sup id="cite_ref-4" class="reference"><a href="L'adressage_mémoire_et_son_allocation.html#cite_note-4">[4]</a></sup>
</p><p>Une table de pages peut être assimilée à un dossier de pages. Le paging se fait en découpant les 32 bits d'adresses linéaires qui sont utilisées comme référence à des positions mémoires dans plusieurs endroits également connu sous le nom de 'page branching structure'. Les derniers 12 bits référencent l'offset mémoire dans laquelle se trouve la page mémoire. Les bits restant sont utilisés pour spécifier les tables de pages. Sur un système 32 bts, les 20 bits demanderont une large table de pages. L'adresse linéaire sera alors découpée en 4 segments&#160;:
</p>
<ul><li> PGD&#160;: La Page Global Directory</li>
<li> PMD&#160;: La Page Middle Directory</li>
<li> La page table</li>
<li> L'offset</li></ul>
<p>La PGD et la PMD peuvent être vues comme des tables de pages qui pointent vers d'autres tables de pages.
</p><p>Pour transformer des adresses linéaires en physiques, cela peut prendre un peu de temps, c'est pour cela que les processeurs sont dotés de petits cache aussi connu sous le nom de TLB (Translation lookaside buffer) qui stockent les adresses physiques récemment associées aux virtuelles. La taille d'un cache TLB est le produit du nombre de TLB et de la taille d'une page d'un processeur. Par exemple pour un processeur de 64 TLB et des pages de 4KiB, le cache TLB sera de 256KiB (64*4).
</p>
<h1><span class="mw-headline" id="UMA"><span class="mw-headline-number">6</span> UMA</span></h1>
<p><a href="./File:UMA.png.html" class="image"><img alt="UMA.png" src="images/8/83/UMA.png" width="392" height="302" /></a><sup id="cite_ref-frankdenneman.nl_5-0" class="reference"><a href="L'adressage_mémoire_et_son_allocation.html#cite_note-frankdenneman.nl-5">[5]</a></sup>
</p><p>Sur un système 32 bits, le kernel map toute la mémoire jusqu'à 896MiB sur les 4GiB d'espace d'adressage linéaire. Cela permet au kernel d'avoir un accès directe en mémoire en dessous de 896MiB en regardant l'adressage linéaire présent dans les tables de pages kernel. Le kernel map directement toute la mémoire jusqu'à 869KiB sauf pour certaines régions réservées&#160;:
</p>
<ol><li> 0KiB -&gt; 4KiB&#160;: région réservée pour le BIOS (ZONE_DMA)</li>
<li> 4KiB -&gt; 640KiB&#160;: région mappées dans les tables de pages kernel (ZONE_DMA)</li>
<li> 640KiB -&gt; 1MiB&#160;: région réservée pour le BIOS et les périphériques de type IO (ZONE_DMA)</li>
<li> 1MiB -&gt; fin de la structure de données du kernel&#160;: pour le kernel et ses structures de données (ZONE_DMA)</li>
<li> fin de la structure de données du kernel -&gt; 869MiB&#160;: région mappées dans les tables de pages kernel (ZONE_NORMAL)</li>
<li> 896MiB -&gt; 1GiB&#160;: pour que le kernel puisse faire son mapping d'adressées linéaires réservées en ZONE_HIGHMEM (PAE)<sup id="cite_ref-PAE_1-1" class="reference"><a href="L'adressage_mémoire_et_son_allocation.html#cite_note-PAE-1">[1]</a></sup></li></ol>
<p><a href="./File:Uma_zones.gif.html" class="image"><img alt="Uma zones.gif" src="images/9/9c/Uma_zones.gif" width="650" height="415" /></a><sup id="cite_ref-6" class="reference"><a href="L'adressage_mémoire_et_son_allocation.html#cite_note-6">[6]</a></sup>
</p><p>Sur un système 64 bits, c'est cependant beaucoup plus simple comme vous pouvez le voir&#160;!
</p>
<h1><span class="mw-headline" id="L.27allocation_m.C3.A9moire"><span class="mw-headline-number">7</span> L'allocation mémoire</span></h1>
<p>Le COW (Copy on Write) est une forme de demande de pagination. Lorsqu'un process fork un enfant, le processus enfant hérite de l'adressage mémoire du parent. Au lieu de perdre du temps sur des cycles CPU à copier les espaces d'adressage du parent au fils, COW sait faire en sorte que le parent et l'enfant partagent le même espace d'adressage. COW est appelé de la sorte car à partir du moment où le fils ou l'enfant essaye d'écrire dans une page, le kernel va créer une copie de cette page et l'assigner à l’espace d'adressage du processus qui essaye d'écrire. Cette technologie permet de gagner beaucoup de temps.
</p><p>Lorsqu'un processus fait référence à une adresse virtuelle, plusieurs choses se font avant l'approbation d'accès à l'espace mémoire demandé&#160;:
</p>
<ol><li> Vérification que l'adresse mémoire est valide</li>
<li> Chaque référence qu'un process fait pour une page en mémoire, ne donne pas nécessairement un access immédiat à une page frame. Cette vérification et également faite</li>
<li> Chaque PTE d'un process dans une table de pages qui contient le drapeau de bit qui spécifie si la page est présente en mémoire ou non est vérifié</li>
<li> L'accès aux pages non résidentes en mémoire génèrera des pages faults</li>
<li> Ces pages faults peuvent être due aux erreurs de programmation (comme dans bien des cas) et représenteront des accès en mémoire qui n'ont pas encore été allouées par un process ou déjà swappée sur disque.</li></ol>
<p>Il est important de savoir que&#160;:
</p>
<ul><li> A partir du moment ou un process requiert une page qui n'est pas présente en mémoire, il recevra une erreur 'page fault'.</li>
<li> Lorsque la mémoire virtuelle doit allouer une nouvelle page page frame pour un process, un 'minor page fault' arrivera (avec l'aide du MMU).</li>
<li> Lorsque le kernel devra bloquer un process lorsqu'il est en cours de lecture sur disque, un 'major page fault' arrivera</li></ul>
<p>Vous pouvez voir les pages fault actuels (ici le PID est 1)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> ps</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; ps -o minflt,majflt 1
MINFLT MAJFLT
  1297      7</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="Les_diff.C3.A9rentes_RAM"><span class="mw-headline-number">8</span> Les différentes RAM</span></h1>
<p>Le cache mémoire est composé d'accès statiques aléatoires (SRAM). La SRAM est la mémoire la plus rapide de toutes les RAM. L'avantage de la SRAM (statique) par rapport à la dynamique (DRAM) et qu'elle a des cycles de temps plus court et elle n'a pas besoin d'être rafraichie après qu'elle vienne d'être lue. Cependant, la SRAM reste très cher.
</p><p>Il existe également&#160;:
</p>
<ol><li> La SDRAM (Synchronous Dynamic) utilise l'horloge du processeur pour synchroniser les signaux IO. En coordonnant les accès mémoires, le temps de réponse est réduit. En gros, une SDRAM de 100Mhz équivaut à 10ns de temps d'accès.<br /></li>
<li> La DDR (Double Data Rate) est une variante de la SDRAM et permet de lire dès qu'elle reçoit des signaux montant/descendant de l'horloge.<br /></li>
<li> La RDRAM (Rambus Dynamic) utilisent des bus étroits pour allez très vite et augmenter les débits.</li>
<li> La SRAM que nous vennons de voir</li></ol>
<p>Les RAM décrites ci dessus vont de la plus lente à la plus rapide.
</p>
<h1><span class="mw-headline" id="NUMA"><span class="mw-headline-number">9</span> NUMA</span></h1>
<p><a href="./File:NUMA.png.html" class="image"><img alt="NUMA.png" src="images/4/4d/NUMA.png" width="409" height="302" /></a><sup id="cite_ref-frankdenneman.nl_5-1" class="reference"><a href="L'adressage_mémoire_et_son_allocation.html#cite_note-frankdenneman.nl-5">[5]</a></sup>
</p><p>La technologie NUMA permet d'augmenter les performances du MMU. Il faut obligatoirement un processeur 64 bits pour pouvoir utiliser cette technologie. Vous pouvez vérifier que c'est présent au niveau de votre kernel&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> grep</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; grep -i numa /boot/config-`uname -r`    
CONFIG_NUMA=y
CONFIG_AMD_NUMA=y
CONFIG_X86_64_ACPI_NUMA=y
CONFIG_NUMA_EMU=y
CONFIG_USE_PERCPU_NUMA_NODE_ID=y
CONFIG_ACPI_NUMA=y</pre></div></div>
</td></tr></table><br />
<p>Suivant les fondeurs, la technologie NUMA peut être différente. C'est par exemple le cas entre AMD et Intel. Intel a par exemple un HUB controleur (MCH) où tous les accès mémoires sont routés. Cela simplifie la gestion du cache snooping mais peut potentiellement provoquer des goulets d'étranglements pour les accès mémoires. La latence varie également en fonction de la fréquence et l'utilisation. Par contre AMD met des ports mémoires différents directement au niveau de ces CPUs, ce qui surpasse toute autre technologie SMP. Avec cette solution, pas de goulets d'étranglements mais cela complexifie la gestion du cache snooping qui doit être géré par tous les CPU.
</p><p>Il est possible d'avoir plus d'information sur la gestion du NUMA sur un PID (ici 1)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> cat</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; cat /proc/1/numa_maps 
00400000 default file=/sbin/init mapped=8 N0=8
00608000 default file=/sbin/init anon=1 dirty=1 active=0 N0=1
00609000 default file=/sbin/init anon=1 dirty=1 active=0 N0=1
025c7000 default heap anon=5 dirty=5 active=0 N0=5
7f86cc3c6000 default file=/lib/x86_64-linux-gnu/libdl-2.13.so mapped=2 mapmax=61 N0=2
7f86cc3c8000 default file=/lib/x86_64-linux-gnu/libdl-2.13.so
7f86cc5c8000 default file=/lib/x86_64-linux-gnu/libdl-2.13.so anon=1 dirty=1 active=0 N0=1
7f86cc5c9000 default file=/lib/x86_64-linux-gnu/libdl-2.13.so anon=1 dirty=1 active=0 N0=1
7f86cc5ca000 default file=/lib/x86_64-linux-gnu/libc-2.13.so mapped=121 mapmax=102 N0=121
7f86cc747000 default file=/lib/x86_64-linux-gnu/libc-2.13.so
7f86cc947000 default file=/lib/x86_64-linux-gnu/libc-2.13.so anon=4 dirty=4 active=0 N0=4
7f86cc94b000 default file=/lib/x86_64-linux-gnu/libc-2.13.so anon=1 dirty=1 active=0 N0=1
7f86cc94c000 default anon=4 dirty=4 active=0 N0=4
7f86cc951000 default file=/lib/x86_64-linux-gnu/libselinux.so.1 mapped=14 mapmax=55 N0=14
7f86cc96f000 default file=/lib/x86_64-linux-gnu/libselinux.so.1
7f86ccb6e000 default file=/lib/x86_64-linux-gnu/libselinux.so.1 anon=1 dirty=1 active=0 N0=1
7f86ccb6f000 default file=/lib/x86_64-linux-gnu/libselinux.so.1 anon=1 dirty=1 active=0 N0=1
7f86ccb70000 default anon=1 dirty=1 active=0 N0=1
7f86ccb71000 default file=/lib/x86_64-linux-gnu/libsepol.so.1 mapped=6 N0=6
7f86ccbb0000 default file=/lib/x86_64-linux-gnu/libsepol.so.1
7f86ccdaf000 default file=/lib/x86_64-linux-gnu/libsepol.so.1 anon=1 dirty=1 active=0 N0=1
7f86ccdb0000 default file=/lib/x86_64-linux-gnu/libsepol.so.1 anon=1 dirty=1 active=0 N0=1
7f86ccdb1000 default file=/lib/x86_64-linux-gnu/ld-2.13.so mapped=27 mapmax=101 N0=27
7f86ccfb2000 default anon=4 dirty=4 active=0 N0=4
7f86ccfce000 default anon=2 dirty=2 active=0 N0=2
7f86ccfd0000 default file=/lib/x86_64-linux-gnu/ld-2.13.so anon=1 dirty=1 active=0 N0=1
7f86ccfd1000 default file=/lib/x86_64-linux-gnu/ld-2.13.so anon=1 dirty=1 active=0 N0=1
7f86ccfd2000 default anon=1 dirty=1 active=0 N0=1
7fff85c91000 default stack anon=3 dirty=3 active=1 N0=3
7fff85d22000 default</pre></div></div>
</td></tr></table><br />
<p>Si vous souhaitez avoir une utilisation plus fine de NUMA et décider des assignations sur les processeurs, <a href="Latence_des_process_et_kernel_timing.html#cpuset" title="Latence des process et kernel timing">il faut regarder cpuset</a><sup id="cite_ref-7" class="reference"><a href="L'adressage_mémoire_et_son_allocation.html#cite_note-7">[7]</a></sup>. C'est très utilisé pour les applications qui ont besoin de faible latence.
</p>
<h2><span class="mw-headline" id="numactl"><span class="mw-headline-number">9.1</span> numactl</span></h2>
<p>Vous pouvez également utiliser la commande numactl pour forcer certains cpu à utiliser une certaine mémoire afin de gagner des performances. Pour l'installer sous Red Hat&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> yum</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">yum install numactl</pre></div></div>
</td></tr></table><br />
<p>Sous Debian&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">aptitude install numactl</pre></div></div>
</td></tr></table><br />
<p>Pour récupérer les informations d'une machine&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> numactl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; numactl --hardware
available: 4 nodes (0-3)
node 0 size: 8058 MB
node 0 free: 7656 MB
node 1 size: 8080 MB
node 1 free: 7930 MB
node 2 size: 8080 MB
node 2 free: 8051 MB
node 3 size: 8080 MB
node 3 free: 8062 MB
node distances:
node   0   1   2   3 
 0:  10  20  20  20 
 1:  20  10  20  20 
 2:  20  20  10  20 
 3:  20  20  20  10</pre></div></div>
</td></tr></table><br />
<p>et&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> numactl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; numactl --show
policy: default
preferred node: current
physcpubind: 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 
cpubind: 0 1 2 3 
nodebind: 0 1 2 3 
membind: 0 1 2 3</pre></div></div>
</td></tr></table><br />
<h3><span class="mw-headline" id="Allouer_un_PID_.C3.A0_certains_processeurs"><span class="mw-headline-number">9.1.1</span> Allouer un PID à certains processeurs</span></h3>
<p>Vous pouvez binder un processur à un CPU&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> numactl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">numactl --physcpubind=0,1,2,3 &lt;PID&gt;</pre></div></div>
</td></tr></table><br />
<p>Pour allouer la mémoire sur le même noeud NUMA que le processeur&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> numactl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">numactl --physcpubind=0 --localalloc &lt;PID&gt;</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="D.C3.A9sactivation"><span class="mw-headline-number">9.2</span> Désactivation</span></h2>
<p>Si vous ne souhaitez désactiver NUMA il faut activer le "Node Interleaving" au niveau du BIOS. Sinon au niveau de grub ajoutez (numa=off)&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/grub.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1"># grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/mapper/vgos-root
#          initrd /initrd-[generic-]version.img
#boot=/dev/sda
default=0
timeout=5
splashimage=(hd0,0)/grub/splash.xpm.gz
hiddenmenu
title Red Hat Enterprise Linux Server (2.6.32-279.2.1.el6.x86_64)
	root (hd0,0)
<span class="xtra ln-xtra">	kernel /vmlinuz-2.6.32-279.2.1.el6.x86_64 ro root=/dev/mapper/vgos-root rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=fr LANG=en_US.UTF-8 rd_LVM_LV=vgos/root rd_NO_MD rd_LVM_LV=vgos/swap SYSFONT=latarcyrheb-sun16 crashkernel=128M biosdevname=0 rd_NO_DM numa=off</span>	initrd /initramfs-2.6.32-279.2.1.el6.x86_64.img
title Red Hat Enterprise Linux (2.6.32-279.el6.x86_64)</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="Am.C3.A9liorer_les_performances_du_TLB"><span class="mw-headline-number">10</span> Améliorer les performances du TLB</span></h1>
<p>Le kernel alloue et vide sa mémoire en utilisant l'algorithme "Buddy System". Le but de cet algorithme est d'éviter les fragmentations externes de la mémoire. Ces fragmentations arrivent lorsqu'il y a de multiples allocations et désallocation de différentes tailles des pages frame. La mémoire devient alors fragmentée en petits blocks de pages libre entrecoupés par des blocks de mémoire alloués. Lorsque le kernel reçoit une demande l'allocation de blocks d'une page frame d'une taille N, il va d'abord regarder les blocks disponible qui peuvent contenir cette taille. S'il n'y en a pas de disponible, il essayera de trouver N/2 blocks disponible.
</p><p>L'algorithme "Buddy System" essaye de réordonner de façon le plus contigu possible. Il est possible de voir la mémoire disponible comme ceci&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> cat</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; cat /proc/buddyinfo 
Node 0, zone      DMA      5      2      2      2      2      2      2      1      2      2      2 
Node 0, zone    DMA32   4326  15892   6613   1219    554    188    109      7      0      1      1 
Node 0, zone   Normal   2688      0      0      0      0      0      0      0      0      0      1</pre></div></div>
</td></tr></table><br />
<p>Le kernel supporte également les 'larges pages' grâce au mechanisme de 'hugepages' (aussi connu sous le nom de bigpages, largepages ou hugetlbfs). A chaque context switch rencontré, le kernel vide les entrées du TLB pour le process qui sort.
</p><p>Pour déterminer la taille des hugepages&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> grep</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; grep -i huge /proc/meminfo      
AnonHugePages:         0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB</pre></div></div>
</td></tr></table><br />
<p>Pour choisir la taille des hugepages, il y a 2 solutions&#160;:
</p>
<ul><li> Avec le sysctl&#160;:</li></ul>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/sysctl.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">vm.nr_hugepages=&lt;value&gt;</pre></div></div>
</td></tr></table><br />
<ul><li> Avec grub en ajoutant ce paramètre&#160;:</li></ul>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/grub.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">[...]
kernel /vmlinuz-2.6.32-279.2.1.el6.....hugepages=&lt;value&gt;
[...]</pre></div></div>
</td></tr></table><br />
<table width="100%" class="warning_array">
<tr>
<td class="warning_subarray"> <font size="-1"><a href="./File:Warning_file.png.html" class="image" title="Warning"><img alt="Warning" src="images/0/09/Warning_file.png" width="39" height="32" /></a> <b>WARNING</b></font>
</td></tr>
<tr>
<td>Faire une demande d'allocation au delà de ce que la machine peut fournir aboutira par un kernel panic
</td></tr></table><br />
<p>Pour que les applications puissent utiliser ces espaces, elles doivent utiliser les appels système de type mmap, shmat et shmget. Dans le cas de mmap, les large pages doivent être disponible en utilisant le filesystem hugetlbfs&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">mkdir /mnt/largepage
mount -t hugetlbfs none /mnt/largepage</pre></div></div>
</td></tr></table><br />
<h1><span class="mw-headline" id="References"><span class="mw-headline-number">11</span> References</span></h1>
<ol class="references">
<li id="cite_note-PAE-1">^ <a href="L'adressage_mémoire_et_son_allocation.html#cite_ref-PAE_1-0"><sup>a</sup></a> <a href="L'adressage_mémoire_et_son_allocation.html#cite_ref-PAE_1-1"><sup>b</sup></a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://fr.wikipedia.org/wiki/Extension_d%27adresse_physique">http://fr.wikipedia.org/wiki/Extension_d%27adresse_physique</a></span>
</li>
<li id="cite_note-2"><a href="L'adressage_mémoire_et_son_allocation.html#cite_ref-2">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://en.wikipedia.org/wiki/Virtual_address_space">http://en.wikipedia.org/wiki/Virtual_address_space</a></span>
</li>
<li id="cite_note-3"><a href="L'adressage_mémoire_et_son_allocation.html#cite_ref-3">^</a> <span class="reference-text"><a href="./Ulimit_:_Utiliser_les_limites_systèmes.html" title="Ulimit : Utiliser les limites systèmes">Ulimit : Utiliser les limites systèmes</a></span>
</li>
<li id="cite_note-4"><a href="L'adressage_mémoire_et_son_allocation.html#cite_ref-4">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://www.liafa.jussieu.fr/~carton/Enseignement/Architecture/Cours/Virtual/">http://www.liafa.jussieu.fr/~carton/Enseignement/Architecture/Cours/Virtual/</a></span>
</li>
<li id="cite_note-frankdenneman.nl-5">^ <a href="L'adressage_mémoire_et_son_allocation.html#cite_ref-frankdenneman.nl_5-0"><sup>a</sup></a> <a href="L'adressage_mémoire_et_son_allocation.html#cite_ref-frankdenneman.nl_5-1"><sup>b</sup></a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://frankdenneman.nl/2010/12/node-interleaving-enable-or-disable/">http://frankdenneman.nl/2010/12/node-interleaving-enable-or-disable/</a></span>
</li>
<li id="cite_note-6"><a href="L'adressage_mémoire_et_son_allocation.html#cite_ref-6">^</a> <span class="reference-text"><a rel="nofollow" class="external free" href="http://www.myexception.cn/linux-unix/515530.html">http://www.myexception.cn/linux-unix/515530.html</a></span>
</li>
<li id="cite_note-7"><a href="L'adressage_mémoire_et_son_allocation.html#cite_ref-7">^</a> <span class="reference-text"><a href="Latence_des_process_et_kernel_timing.html#cpuset" title="Latence des process et kernel timing">Latence des process et kernel timing#cpuset</a></span>
</li>
</ol>

<!-- 
NewPP limit report
CPU time usage: 0.080 seconds
Real time usage: 0.082 seconds
Preprocessor visited node count: 563/1000000
Preprocessor generated node count: 1784/1000000
Post‐expand include size: 4554/2097152 bytes
Template argument size: 1254/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   26.361      1 - -total
 33.16%    8.742     15 - Template:Command
  8.57%    2.260      3 - Template:Config
  7.27%    1.916      1 - Template:Infobox
  2.97%    0.784      1 - Template:Warning
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:3460-0!*!0!1!en!5!* and timestamp 20181111230639 and revision id 11630
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=L%27adressage_mémoire_et_son_allocation&amp;oldid=11630">https://wiki.deimos.fr/index.php?title=L%27adressage_mémoire_et_son_allocation&amp;oldid=11630</a>"					</div>
													<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=L%27adressage+m%C3%A9moire+et+son+allocation" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="L'adressage_mémoire_et_son_allocation.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="L'adressage_mémoire_et_son_allocation.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="L'adressage_mémoire_et_son_allocation.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=L%27adressage_m%C3%A9moire_et_son_allocation&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=L%27adressage_m%C3%A9moire_et_son_allocation&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="L'adressage_mémoire_et_son_allocation.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/L'adressage_mémoire_et_son_allocation.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/L%27adressage_m%C3%A9moire_et_son_allocation" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=L%27adressage_m%C3%A9moire_et_son_allocation&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=L%27adressage_m%C3%A9moire_et_son_allocation&amp;oldid=11630" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=L%27adressage_m%C3%A9moire_et_son_allocation&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 11 September 2012, at 16:53.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["ext.cite.a11y","mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":31});
}</script>
	</body>
</html>
	