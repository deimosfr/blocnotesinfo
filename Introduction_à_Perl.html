<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Introduction à Perl - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Introduction_à_Perl.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Introduction_à_Perl","wgTitle":"Introduction à Perl","wgCurRevisionId":12978,"wgRevisionId":12978,"wgArticleId":2020,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Perl","Développement"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Introduction_à_Perl","wgRelevantArticleId":2020,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-perl {line-height: normal;}
.source-perl li, .source-perl pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for perl
 * CSS class: source-perl, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.perl.source-perl .de1, .perl.source-perl .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.perl.source-perl  {font-family:monospace;}
.perl.source-perl .imp {font-weight: bold; color: red;}
.perl.source-perl li, .perl.source-perl .li1 {font-weight: normal; vertical-align:top;}
.perl.source-perl .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.perl.source-perl .li2 {font-weight: bold; vertical-align:top;}
.perl.source-perl .kw1 {color: #b1b100;}
.perl.source-perl .kw2 {color: #000000; font-weight: bold;}
.perl.source-perl .kw3 {color: #000066;}
.perl.source-perl .co1 {color: #666666; font-style: italic;}
.perl.source-perl .co2 {color: #009966; font-style: italic;}
.perl.source-perl .co3 {color: #0000ff;}
.perl.source-perl .co4 {color: #cc0000; font-style: italic;}
.perl.source-perl .co5 {color: #0000ff;}
.perl.source-perl .coMULTI {color: #666666; font-style: italic;}
.perl.source-perl .es0 {color: #000099; font-weight: bold;}
.perl.source-perl .es_h {color: #000099; font-weight: bold;}
.perl.source-perl .br0 {color: #009900;}
.perl.source-perl .sy0 {color: #339933;}
.perl.source-perl .st0 {color: #ff0000;}
.perl.source-perl .st_h {color: #ff0000;}
.perl.source-perl .nu0 {color: #cc66cc;}
.perl.source-perl .me1 {color: #006600;}
.perl.source-perl .me2 {color: #006600;}
.perl.source-perl .re0 {color: #0000ff;}
.perl.source-perl .re4 {color: #009999;}
.perl.source-perl .ln-xtra, .perl.source-perl li.ln-xtra, .perl.source-perl div.ln-xtra {background-color: #ffc;}
.perl.source-perl span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-xml {line-height: normal;}
.source-xml li, .source-xml pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for xml
 * CSS class: source-xml, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.xml.source-xml .de1, .xml.source-xml .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.xml.source-xml  {font-family:monospace;}
.xml.source-xml .imp {font-weight: bold; color: red;}
.xml.source-xml li, .xml.source-xml .li1 {font-weight: normal; vertical-align:top;}
.xml.source-xml .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.xml.source-xml .li2 {font-weight: bold; vertical-align:top;}
.xml.source-xml .es0 {color: #000099; font-weight: bold;}
.xml.source-xml .br0 {color: #66cc66;}
.xml.source-xml .sy0 {color: #66cc66;}
.xml.source-xml .st0 {color: #ff0000;}
.xml.source-xml .nu0 {color: #cc66cc;}
.xml.source-xml .sc-1 {color: #808080; font-style: italic;}
.xml.source-xml .sc0 {color: #00bbdd;}
.xml.source-xml .sc1 {color: #ddbb00;}
.xml.source-xml .sc2 {color: #339933;}
.xml.source-xml .sc3 {color: #009900;}
.xml.source-xml .re0 {color: #000066;}
.xml.source-xml .re1 {color: #000000; font-weight: bold;}
.xml.source-xml .re2 {color: #000000; font-weight: bold;}
.xml.source-xml .ln-xtra, .xml.source-xml li.ln-xtra, .xml.source-xml div.ln-xtra {background-color: #ffc;}
.xml.source-xml span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Introduction_à_Perl skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Introduction à Perl</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="Introduction_à_Perl.html#mw-navigation">navigation</a>, 					<a href="Introduction_à_Perl.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Introduction_à_Perl.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Introduction_à_Perl.html#Bases"><span class="tocnumber">2</span> <span class="toctext">Bases</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Introduction_à_Perl.html#Boucles"><span class="tocnumber">3</span> <span class="toctext">Boucles</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Introduction_à_Perl.html#If"><span class="tocnumber">3.1</span> <span class="toctext">If</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Introduction_à_Perl.html#while"><span class="tocnumber">3.2</span> <span class="toctext">while</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="Introduction_à_Perl.html#Fonctions_utiles"><span class="tocnumber">4</span> <span class="toctext">Fonctions utiles</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="Introduction_à_Perl.html#Defined"><span class="tocnumber">4.1</span> <span class="toctext">Defined</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Introduction_à_Perl.html#Chomp"><span class="tocnumber">4.2</span> <span class="toctext">Chomp</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="Introduction_à_Perl.html#Tableaux"><span class="tocnumber">5</span> <span class="toctext">Tableaux</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="Introduction_à_Perl.html#Listes"><span class="tocnumber">5.1</span> <span class="toctext">Listes</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="Introduction_à_Perl.html#qw"><span class="tocnumber">5.1.1</span> <span class="toctext">qw</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="Introduction_à_Perl.html#Affectations_de_listes"><span class="tocnumber">5.1.2</span> <span class="toctext">Affectations de listes</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="Introduction_à_Perl.html#pop"><span class="tocnumber">5.2</span> <span class="toctext">pop</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="Introduction_à_Perl.html#push"><span class="tocnumber">5.3</span> <span class="toctext">push</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="Introduction_à_Perl.html#shift"><span class="tocnumber">5.4</span> <span class="toctext">shift</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="Introduction_à_Perl.html#unshift"><span class="tocnumber">5.5</span> <span class="toctext">unshift</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="Introduction_à_Perl.html#foreach"><span class="tocnumber">5.6</span> <span class="toctext">foreach</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="Introduction_à_Perl.html#.24"><span class="tocnumber">5.7</span> <span class="toctext">$_</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="Introduction_à_Perl.html#reverse"><span class="tocnumber">5.8</span> <span class="toctext">reverse</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="Introduction_à_Perl.html#sort"><span class="tocnumber">5.9</span> <span class="toctext">sort</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="Introduction_à_Perl.html#Contexte_de_liste_et_de_scalaire"><span class="tocnumber">5.10</span> <span class="toctext">Contexte de liste et de scalaire</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="Introduction_à_Perl.html#Fonctions"><span class="tocnumber">6</span> <span class="toctext">Fonctions</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="Introduction_à_Perl.html#Arguments_de_fonctions"><span class="tocnumber">6.1</span> <span class="toctext">Arguments de fonctions</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="Introduction_à_Perl.html#my"><span class="tocnumber">6.2</span> <span class="toctext">my</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="Introduction_à_Perl.html#local"><span class="tocnumber">6.3</span> <span class="toctext">local</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="Introduction_à_Perl.html#return"><span class="tocnumber">6.4</span> <span class="toctext">return</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27"><a href="Introduction_à_Perl.html#use_strict"><span class="tocnumber">7</span> <span class="toctext">use strict</span></a></li>
<li class="toclevel-1 tocsection-28"><a href="Introduction_à_Perl.html#Hachages"><span class="tocnumber">8</span> <span class="toctext">Hachages</span></a>
<ul>
<li class="toclevel-2 tocsection-29"><a href="Introduction_à_Perl.html#Liste"><span class="tocnumber">8.1</span> <span class="toctext">Liste</span></a>
<ul>
<li class="toclevel-3 tocsection-30"><a href="Introduction_à_Perl.html#reverse_2"><span class="tocnumber">8.1.1</span> <span class="toctext">reverse</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31"><a href="Introduction_à_Perl.html#Fonctions_de_hashage"><span class="tocnumber">8.2</span> <span class="toctext">Fonctions de hashage</span></a>
<ul>
<li class="toclevel-3 tocsection-32"><a href="Introduction_à_Perl.html#Keys_et_values"><span class="tocnumber">8.2.1</span> <span class="toctext">Keys et values</span></a></li>
<li class="toclevel-3 tocsection-33"><a href="Introduction_à_Perl.html#each"><span class="tocnumber">8.2.2</span> <span class="toctext">each</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="Introduction_à_Perl.html#exists"><span class="tocnumber">8.2.3</span> <span class="toctext">exists</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="Introduction_à_Perl.html#delete"><span class="tocnumber">8.2.4</span> <span class="toctext">delete</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="Introduction_à_Perl.html#R.C3.A9f.C3.A9rences"><span class="tocnumber">8.2.5</span> <span class="toctext">Références</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-37"><a href="Introduction_à_Perl.html#Entr.C3.A9es.2FSorties"><span class="tocnumber">9</span> <span class="toctext">Entrées/Sorties</span></a>
<ul>
<li class="toclevel-2 tocsection-38"><a href="Introduction_à_Perl.html#L.27op.C3.A9rateur_Diamant"><span class="tocnumber">9.1</span> <span class="toctext">L'opérateur Diamant</span></a>
<ul>
<li class="toclevel-3 tocsection-39"><a href="Introduction_à_Perl.html#.40ARGV"><span class="tocnumber">9.1.1</span> <span class="toctext">@ARGV</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-40"><a href="Introduction_à_Perl.html#Sortie_standard"><span class="tocnumber">9.2</span> <span class="toctext">Sortie standard</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="Introduction_à_Perl.html#printf"><span class="tocnumber">9.3</span> <span class="toctext">printf</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-42"><a href="Introduction_à_Perl.html#Regex"><span class="tocnumber">10</span> <span class="toctext">Regex</span></a>
<ul>
<li class="toclevel-2 tocsection-43"><a href="Introduction_à_Perl.html#M.C3.A9tacaract.C3.A8res"><span class="tocnumber">10.1</span> <span class="toctext">Métacaractères</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="Introduction_à_Perl.html#Quantificateurs"><span class="tocnumber">10.2</span> <span class="toctext">Quantificateurs</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="Introduction_à_Perl.html#Regroupements"><span class="tocnumber">10.3</span> <span class="toctext">Regroupements</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="Introduction_à_Perl.html#Pipe"><span class="tocnumber">10.4</span> <span class="toctext">Pipe</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="Introduction_à_Perl.html#Classes_de_caract.C3.A8res"><span class="tocnumber">10.5</span> <span class="toctext">Classes de caractères</span></a></li>
<li class="toclevel-2 tocsection-48"><a href="Introduction_à_Perl.html#Quantificateurs_g.C3.A9n.C3.A9raux"><span class="tocnumber">10.6</span> <span class="toctext">Quantificateurs généraux</span></a></li>
<li class="toclevel-2 tocsection-49"><a href="Introduction_à_Perl.html#Ancres"><span class="tocnumber">10.7</span> <span class="toctext">Ancres</span></a>
<ul>
<li class="toclevel-3 tocsection-50"><a href="Introduction_à_Perl.html#Ancres_de_mot"><span class="tocnumber">10.7.1</span> <span class="toctext">Ancres de mot</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-51"><a href="Introduction_à_Perl.html#Paranth.C3.A8ses_de_m.C3.A9morisation"><span class="tocnumber">10.8</span> <span class="toctext">Paranthèses de mémorisation</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="Introduction_à_Perl.html#Paranth.C3.A8ses_de_non_m.C3.A9morisation"><span class="tocnumber">10.9</span> <span class="toctext">Paranthèses de non mémorisation</span></a></li>
<li class="toclevel-2 tocsection-53"><a href="Introduction_à_Perl.html#Utilisation_des_regex"><span class="tocnumber">10.10</span> <span class="toctext">Utilisation des regex</span></a>
<ul>
<li class="toclevel-3 tocsection-54"><a href="Introduction_à_Perl.html#Ignorer_la_casse"><span class="tocnumber">10.10.1</span> <span class="toctext">Ignorer la casse</span></a></li>
<li class="toclevel-3 tocsection-55"><a href="Introduction_à_Perl.html#Ignorer_les_espaces_et_commentaires"><span class="tocnumber">10.10.2</span> <span class="toctext">Ignorer les espaces et commentaires</span></a></li>
<li class="toclevel-3 tocsection-56"><a href="Introduction_à_Perl.html#Correspondance_de_n.27importe_quel_caract.C3.A8re"><span class="tocnumber">10.10.3</span> <span class="toctext">Correspondance de n'importe quel caractère</span></a></li>
<li class="toclevel-3 tocsection-57"><a href="Introduction_à_Perl.html#Recherche_jusqu.27.C3.A0_un_caract.C3.A8re_pr.C3.A9cis"><span class="tocnumber">10.10.4</span> <span class="toctext">Recherche jusqu'à un caractère précis</span></a></li>
<li class="toclevel-3 tocsection-58"><a href="Introduction_à_Perl.html#L.27op.C3.A9rateur_de_liaison_.3D.7E"><span class="tocnumber">10.10.5</span> <span class="toctext">L'opérateur de liaison =~</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-59"><a href="Introduction_à_Perl.html#Substitution"><span class="tocnumber">10.11</span> <span class="toctext">Substitution</span></a></li>
<li class="toclevel-2 tocsection-60"><a href="Introduction_à_Perl.html#split"><span class="tocnumber">10.12</span> <span class="toctext">split</span></a></li>
<li class="toclevel-2 tocsection-61"><a href="Introduction_à_Perl.html#join"><span class="tocnumber">10.13</span> <span class="toctext">join</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-62"><a href="Introduction_à_Perl.html#Structures_de_contr.C3.B4les_plus_complexe"><span class="tocnumber">11</span> <span class="toctext">Structures de contrôles plus complexe</span></a>
<ul>
<li class="toclevel-2 tocsection-63"><a href="Introduction_à_Perl.html#unless"><span class="tocnumber">11.1</span> <span class="toctext">unless</span></a></li>
<li class="toclevel-2 tocsection-64"><a href="Introduction_à_Perl.html#until"><span class="tocnumber">11.2</span> <span class="toctext">until</span></a></li>
<li class="toclevel-2 tocsection-65"><a href="Introduction_à_Perl.html#Modificateurs_d.27expression"><span class="tocnumber">11.3</span> <span class="toctext">Modificateurs d'expression</span></a></li>
<li class="toclevel-2 tocsection-66"><a href="Introduction_à_Perl.html#Bloc_nu"><span class="tocnumber">11.4</span> <span class="toctext">Bloc nu</span></a></li>
<li class="toclevel-2 tocsection-67"><a href="Introduction_à_Perl.html#elsif"><span class="tocnumber">11.5</span> <span class="toctext">elsif</span></a></li>
<li class="toclevel-2 tocsection-68"><a href="Introduction_à_Perl.html#Auto_Incr.C3.A9mentation.2FD.C3.A9cr.C3.A9mentation"><span class="tocnumber">11.6</span> <span class="toctext">Auto Incrémentation/Décrémentation</span></a></li>
<li class="toclevel-2 tocsection-69"><a href="Introduction_à_Perl.html#for"><span class="tocnumber">11.7</span> <span class="toctext">for</span></a></li>
<li class="toclevel-2 tocsection-70"><a href="Introduction_à_Perl.html#foreach_2"><span class="tocnumber">11.8</span> <span class="toctext">foreach</span></a></li>
<li class="toclevel-2 tocsection-71"><a href="Introduction_à_Perl.html#Contr.C3.B4les_de_boucle"><span class="tocnumber">11.9</span> <span class="toctext">Contrôles de boucle</span></a></li>
<li class="toclevel-2 tocsection-72"><a href="Introduction_à_Perl.html#next"><span class="tocnumber">11.10</span> <span class="toctext">next</span></a></li>
<li class="toclevel-2 tocsection-73"><a href="Introduction_à_Perl.html#redo"><span class="tocnumber">11.11</span> <span class="toctext">redo</span></a></li>
<li class="toclevel-2 tocsection-74"><a href="Introduction_à_Perl.html#Blocs_libell.C3.A9s"><span class="tocnumber">11.12</span> <span class="toctext">Blocs libellés</span></a></li>
<li class="toclevel-2 tocsection-75"><a href="Introduction_à_Perl.html#Op.C3.A9rateurs_logiques"><span class="tocnumber">11.13</span> <span class="toctext">Opérateurs logiques</span></a></li>
<li class="toclevel-2 tocsection-76"><a href="Introduction_à_Perl.html#Op.C3.A9rateur_ternaire"><span class="tocnumber">11.14</span> <span class="toctext">Opérateur ternaire</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-77"><a href="Introduction_à_Perl.html#Handles_et_tests_de_fichiers"><span class="tocnumber">12</span> <span class="toctext">Handles et tests de fichiers</span></a>
<ul>
<li class="toclevel-2 tocsection-78"><a href="Introduction_à_Perl.html#Lancements_de_programmes"><span class="tocnumber">12.1</span> <span class="toctext">Lancements de programmes</span></a></li>
<li class="toclevel-2 tocsection-79"><a href="Introduction_à_Perl.html#Ouverture_d.27un_handle"><span class="tocnumber">12.2</span> <span class="toctext">Ouverture d'un handle</span></a></li>
<li class="toclevel-2 tocsection-80"><a href="Introduction_à_Perl.html#Fermeture_d.27un_handle"><span class="tocnumber">12.3</span> <span class="toctext">Fermeture d'un handle</span></a></li>
<li class="toclevel-2 tocsection-81"><a href="Introduction_à_Perl.html#Probl.C3.A8mes_de_handle"><span class="tocnumber">12.4</span> <span class="toctext">Problèmes de handle</span></a></li>
<li class="toclevel-2 tocsection-82"><a href="Introduction_à_Perl.html#Lecture_d.27un_bloc_de_texte"><span class="tocnumber">12.5</span> <span class="toctext">Lecture d'un bloc de texte</span></a></li>
<li class="toclevel-2 tocsection-83"><a href="Introduction_à_Perl.html#Avertissements_avec_warn"><span class="tocnumber">12.6</span> <span class="toctext">Avertissements avec warn</span></a></li>
<li class="toclevel-2 tocsection-84"><a href="Introduction_à_Perl.html#Utilisation_des_handles_de_fichiers"><span class="tocnumber">12.7</span> <span class="toctext">Utilisation des handles de fichiers</span></a></li>
<li class="toclevel-2 tocsection-85"><a href="Introduction_à_Perl.html#Les_HEREDOC"><span class="tocnumber">12.8</span> <span class="toctext">Les HEREDOC</span></a></li>
<li class="toclevel-2 tocsection-86"><a href="Introduction_à_Perl.html#Remplacement_du_handle_de_fichier_de_sortie_par_d.C3.A9faut"><span class="tocnumber">12.9</span> <span class="toctext">Remplacement du handle de fichier de sortie par défaut</span></a></li>
<li class="toclevel-2 tocsection-87"><a href="Introduction_à_Perl.html#R.C3.A9ouvertre_d.27un_handle_de_fichier_standart"><span class="tocnumber">12.10</span> <span class="toctext">Réouvertre d'un handle de fichier standart</span></a></li>
<li class="toclevel-2 tocsection-88"><a href="Introduction_à_Perl.html#Tests_de_fichiers"><span class="tocnumber">12.11</span> <span class="toctext">Tests de fichiers</span></a></li>
<li class="toclevel-2 tocsection-89"><a href="Introduction_à_Perl.html#Les_fonctions_stat_et_lstat"><span class="tocnumber">12.12</span> <span class="toctext">Les fonctions stat et lstat</span></a></li>
<li class="toclevel-2 tocsection-90"><a href="Introduction_à_Perl.html#Localtime"><span class="tocnumber">12.13</span> <span class="toctext">Localtime</span></a></li>
<li class="toclevel-2 tocsection-91"><a href="Introduction_à_Perl.html#Op.C3.A9rateurs_bits_.C3.A0_bits"><span class="tocnumber">12.14</span> <span class="toctext">Opérateurs bits à bits</span></a></li>
<li class="toclevel-2 tocsection-92"><a href="Introduction_à_Perl.html#Utilisation_du_handle_de_fichier_sp.C3.A9ciale_.22_.22"><span class="tocnumber">12.15</span> <span class="toctext">Utilisation du handle de fichier spéciale "_"</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-93"><a href="Introduction_à_Perl.html#Op.C3.A9rations_sur_les_r.C3.A9pertoires"><span class="tocnumber">13</span> <span class="toctext">Opérations sur les répertoires</span></a>
<ul>
<li class="toclevel-2 tocsection-94"><a href="Introduction_à_Perl.html#D.C3.A9placement_dans_l.27arborescence_des_r.C3.A9pertoires"><span class="tocnumber">13.1</span> <span class="toctext">Déplacement dans l'arborescence des répertoires</span></a></li>
<li class="toclevel-2 tocsection-95"><a href="Introduction_à_Perl.html#Globalisation"><span class="tocnumber">13.2</span> <span class="toctext">Globalisation</span></a></li>
<li class="toclevel-2 tocsection-96"><a href="Introduction_à_Perl.html#Handles_de_r.C3.A9pertoires"><span class="tocnumber">13.3</span> <span class="toctext">Handles de répertoires</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-97"><a href="Introduction_à_Perl.html#Manipulation_des_fichiers_et_des_r.C3.A9pertoires"><span class="tocnumber">14</span> <span class="toctext">Manipulation des fichiers et des répertoires</span></a>
<ul>
<li class="toclevel-2 tocsection-98"><a href="Introduction_à_Perl.html#Supression_de_fichiers"><span class="tocnumber">14.1</span> <span class="toctext">Supression de fichiers</span></a></li>
<li class="toclevel-2 tocsection-99"><a href="Introduction_à_Perl.html#Renommer_des_fichiers"><span class="tocnumber">14.2</span> <span class="toctext">Renommer des fichiers</span></a></li>
<li class="toclevel-2 tocsection-100"><a href="Introduction_à_Perl.html#Liens_et_fichiers"><span class="tocnumber">14.3</span> <span class="toctext">Liens et fichiers</span></a></li>
<li class="toclevel-2 tocsection-101"><a href="Introduction_à_Perl.html#Cr.C3.A9ation_et_suppression_des_r.C3.A9pertoires"><span class="tocnumber">14.4</span> <span class="toctext">Création et suppression des répertoires</span></a></li>
<li class="toclevel-2 tocsection-102"><a href="Introduction_à_Perl.html#D.C3.A9terminer_le_processus"><span class="tocnumber">14.5</span> <span class="toctext">Déterminer le processus</span></a></li>
<li class="toclevel-2 tocsection-103"><a href="Introduction_à_Perl.html#Modification_des_permissions"><span class="tocnumber">14.6</span> <span class="toctext">Modification des permissions</span></a></li>
<li class="toclevel-2 tocsection-104"><a href="Introduction_à_Perl.html#Changement_du_propri.C3.A9taire"><span class="tocnumber">14.7</span> <span class="toctext">Changement du propriétaire</span></a></li>
<li class="toclevel-2 tocsection-105"><a href="Introduction_à_Perl.html#Modification_de_la_date_et_de_l.27heure"><span class="tocnumber">14.8</span> <span class="toctext">Modification de la date et de l'heure</span></a></li>
<li class="toclevel-2 tocsection-106"><a href="Introduction_à_Perl.html#Le_module_File::Basename"><span class="tocnumber">14.9</span> <span class="toctext">Le module File::Basename</span></a></li>
<li class="toclevel-2 tocsection-107"><a href="Introduction_à_Perl.html#N.27utiliser_que_certaines_fonctions_d.27un_module"><span class="tocnumber">14.10</span> <span class="toctext">N'utiliser que certaines fonctions d'un module</span></a></li>
<li class="toclevel-2 tocsection-108"><a href="Introduction_à_Perl.html#Le_module_File::Spec"><span class="tocnumber">14.11</span> <span class="toctext">Le module File::Spec</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-109"><a href="Introduction_à_Perl.html#Gestion_des_processus"><span class="tocnumber">15</span> <span class="toctext">Gestion des processus</span></a>
<ul>
<li class="toclevel-2 tocsection-110"><a href="Introduction_à_Perl.html#System"><span class="tocnumber">15.1</span> <span class="toctext">System</span></a>
<ul>
<li class="toclevel-3 tocsection-111"><a href="Introduction_à_Perl.html#Eviter_le_shell"><span class="tocnumber">15.1.1</span> <span class="toctext">Eviter le shell</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-112"><a href="Introduction_à_Perl.html#Exec"><span class="tocnumber">15.2</span> <span class="toctext">Exec</span></a></li>
<li class="toclevel-2 tocsection-113"><a href="Introduction_à_Perl.html#Variables_d.27environnements"><span class="tocnumber">15.3</span> <span class="toctext">Variables d'environnements</span></a></li>
<li class="toclevel-2 tocsection-114"><a href="Introduction_à_Perl.html#Utilisation_de_.60_pour_capturer_la_sortie"><span class="tocnumber">15.4</span> <span class="toctext">Utilisation de ` pour capturer la sortie</span></a></li>
<li class="toclevel-2 tocsection-115"><a href="Introduction_à_Perl.html#Utilisation_de_.60_dans_un_contexte_de_liste"><span class="tocnumber">15.5</span> <span class="toctext">Utilisation de ` dans un contexte de liste</span></a></li>
<li class="toclevel-2 tocsection-116"><a href="Introduction_à_Perl.html#Processus_en_tant_que_handles_de_fichiers"><span class="tocnumber">15.6</span> <span class="toctext">Processus en tant que handles de fichiers</span></a></li>
<li class="toclevel-2 tocsection-117"><a href="Introduction_à_Perl.html#Utilisation_de_fork"><span class="tocnumber">15.7</span> <span class="toctext">Utilisation de fork</span></a></li>
<li class="toclevel-2 tocsection-118"><a href="Introduction_à_Perl.html#Emissions_et_r.C3.A9ceptions_de_signaux"><span class="tocnumber">15.8</span> <span class="toctext">Emissions et réceptions de signaux</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-119"><a href="Introduction_à_Perl.html#Cha.C3.AEnes_et_tris"><span class="tocnumber">16</span> <span class="toctext">Chaînes et tris</span></a>
<ul>
<li class="toclevel-2 tocsection-120"><a href="Introduction_à_Perl.html#Localisation_d.27une_sous-cha.C3.AEne_avec_index"><span class="tocnumber">16.1</span> <span class="toctext">Localisation d'une sous-chaîne avec index</span></a></li>
<li class="toclevel-2 tocsection-121"><a href="Introduction_à_Perl.html#Manipulation_des_sous_cha.C3.AEnes_avec_substr"><span class="tocnumber">16.2</span> <span class="toctext">Manipulation des sous chaînes avec substr</span></a></li>
<li class="toclevel-2 tocsection-122"><a href="Introduction_à_Perl.html#Mise_en_forme_des_donn.C3.A9es_avec_sprintf"><span class="tocnumber">16.3</span> <span class="toctext">Mise en forme des données avec sprintf</span></a></li>
<li class="toclevel-2 tocsection-123"><a href="Introduction_à_Perl.html#Utilisation_de_sprintf_avec_des_nombres_mon.C3.A9taire"><span class="tocnumber">16.4</span> <span class="toctext">Utilisation de sprintf avec des nombres monétaire</span></a></li>
<li class="toclevel-2 tocsection-124"><a href="Introduction_à_Perl.html#Tri_.C3.A9volu.C3.A9"><span class="tocnumber">16.5</span> <span class="toctext">Tri évolué</span></a></li>
<li class="toclevel-2 tocsection-125"><a href="Introduction_à_Perl.html#Tri_par_cl.C3.A9_multiple"><span class="tocnumber">16.6</span> <span class="toctext">Tri par clé multiple</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-126"><a href="Introduction_à_Perl.html#Bases_de_donn.C3.A9es_simples"><span class="tocnumber">17</span> <span class="toctext">Bases de données simples</span></a>
<ul>
<li class="toclevel-2 tocsection-127"><a href="Introduction_à_Perl.html#Ouvertures_et_fermeture_de_hachages_DBM"><span class="tocnumber">17.1</span> <span class="toctext">Ouvertures et fermeture de hachages DBM</span></a></li>
<li class="toclevel-2 tocsection-128"><a href="Introduction_à_Perl.html#Utilisation_d.27un_hashage_DBM"><span class="tocnumber">17.2</span> <span class="toctext">Utilisation d'un hashage DBM</span></a></li>
<li class="toclevel-2 tocsection-129"><a href="Introduction_à_Perl.html#Manipulation_des_donn.C3.A9es_avec_pack_et_unpack"><span class="tocnumber">17.3</span> <span class="toctext">Manipulation des données avec pack et unpack</span></a></li>
<li class="toclevel-2 tocsection-130"><a href="Introduction_à_Perl.html#Bases_de_donn.C3.A9es_.C3.A0_acc.C3.A8s_al.C3.A9atoire_de_longueur_fixe"><span class="tocnumber">17.4</span> <span class="toctext">Bases de données à accès aléatoire de longueur fixe</span></a></li>
<li class="toclevel-2 tocsection-131"><a href="Introduction_à_Perl.html#Bases_de_donn.C3.A9es_.28texte.29_de_longueur_variable"><span class="tocnumber">17.5</span> <span class="toctext">Bases de données (texte) de longueur variable</span></a></li>
<li class="toclevel-2 tocsection-132"><a href="Introduction_à_Perl.html#Edition_sur_place_.C3.A0_partir_de_la_ligne_de_commande"><span class="tocnumber">17.6</span> <span class="toctext">Edition sur place à partir de la ligne de commande</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-133"><a href="Introduction_à_Perl.html#Quelques_techniques_Perl_avanc.C3.A9es"><span class="tocnumber">18</span> <span class="toctext">Quelques techniques Perl avancées</span></a>
<ul>
<li class="toclevel-2 tocsection-134"><a href="Introduction_à_Perl.html#Interception_des_erreurs_avec_eval"><span class="tocnumber">18.1</span> <span class="toctext">Interception des erreurs avec eval</span></a></li>
<li class="toclevel-2 tocsection-135"><a href="Introduction_à_Perl.html#Choix_des_.C3.A9l.C3.A9ments_d.27une_liste_avec_grep"><span class="tocnumber">18.2</span> <span class="toctext">Choix des éléments d'une liste avec grep</span></a></li>
<li class="toclevel-2 tocsection-136"><a href="Introduction_à_Perl.html#Transformation_des_.C3.A9l.C3.A9ments_d.27une_liste_avec_map"><span class="tocnumber">18.3</span> <span class="toctext">Transformation des éléments d'une liste avec map</span></a></li>
<li class="toclevel-2 tocsection-137"><a href="Introduction_à_Perl.html#Cl.C3.A9s_de_hachage_sans_guillemets"><span class="tocnumber">18.4</span> <span class="toctext">Clés de hachage sans guillemets</span></a></li>
<li class="toclevel-2 tocsection-138"><a href="Introduction_à_Perl.html#Expressions_r.C3.A9guli.C3.A8res_plus_puissantes"><span class="tocnumber">18.5</span> <span class="toctext">Expressions régulières plus puissantes</span></a>
<ul>
<li class="toclevel-3 tocsection-139"><a href="Introduction_à_Perl.html#Quantificateurs_non_avides"><span class="tocnumber">18.5.1</span> <span class="toctext">Quantificateurs non avides</span></a></li>
<li class="toclevel-3 tocsection-140"><a href="Introduction_à_Perl.html#Reconnaissance_de_texte_multiligne"><span class="tocnumber">18.5.2</span> <span class="toctext">Reconnaissance de texte multiligne</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-141"><a href="Introduction_à_Perl.html#Tranches"><span class="tocnumber">18.6</span> <span class="toctext">Tranches</span></a>
<ul>
<li class="toclevel-3 tocsection-142"><a href="Introduction_à_Perl.html#Tranche_de_tableau"><span class="tocnumber">18.6.1</span> <span class="toctext">Tranche de tableau</span></a></li>
<li class="toclevel-3 tocsection-143"><a href="Introduction_à_Perl.html#Tranche_de_hachage"><span class="tocnumber">18.6.2</span> <span class="toctext">Tranche de hachage</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-144"><a href="Introduction_à_Perl.html#Cr.C3.A9er_un_D.C3.A9mon"><span class="tocnumber">18.7</span> <span class="toctext">Créer un Démon</span></a></li>
<li class="toclevel-2 tocsection-145"><a href="Introduction_à_Perl.html#Cr.C3.A9er_des_sockets"><span class="tocnumber">18.8</span> <span class="toctext">Créer des sockets</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-146"><a href="Introduction_à_Perl.html#Plus_loin_dans_Perl"><span class="tocnumber">19</span> <span class="toctext">Plus loin dans Perl</span></a>
<ul>
<li class="toclevel-2 tocsection-147"><a href="Introduction_à_Perl.html#Modules"><span class="tocnumber">19.1</span> <span class="toctext">Modules</span></a>
<ul>
<li class="toclevel-3 tocsection-148"><a href="Introduction_à_Perl.html#Lister_les_modules_install.C3.A9s"><span class="tocnumber">19.1.1</span> <span class="toctext">Lister les modules installés</span></a></li>
<li class="toclevel-3 tocsection-149"><a href="Introduction_à_Perl.html#Savoir_si_un_module_est_int.C3.A9gr.C3.A9e_de_base_dans_Perl"><span class="tocnumber">19.1.2</span> <span class="toctext">Savoir si un module est intégrée de base dans Perl</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-150"><a href="Introduction_à_Perl.html#Quelques_modules_importants"><span class="tocnumber">19.2</span> <span class="toctext">Quelques modules importants</span></a>
<ul>
<li class="toclevel-3 tocsection-151"><a href="Introduction_à_Perl.html#Cwd"><span class="tocnumber">19.2.1</span> <span class="toctext">Cwd</span></a></li>
<li class="toclevel-3 tocsection-152"><a href="Introduction_à_Perl.html#Fatal"><span class="tocnumber">19.2.2</span> <span class="toctext">Fatal</span></a></li>
<li class="toclevel-3 tocsection-153"><a href="Introduction_à_Perl.html#Sys::Hostname"><span class="tocnumber">19.2.3</span> <span class="toctext">Sys::Hostname</span></a></li>
<li class="toclevel-3 tocsection-154"><a href="Introduction_à_Perl.html#Time::Local"><span class="tocnumber">19.2.4</span> <span class="toctext">Time::Local</span></a></li>
<li class="toclevel-3 tocsection-155"><a href="Introduction_à_Perl.html#diagnonstics"><span class="tocnumber">19.2.5</span> <span class="toctext">diagnonstics</span></a></li>
<li class="toclevel-3 tocsection-156"><a href="Introduction_à_Perl.html#Grands_nombres"><span class="tocnumber">19.2.6</span> <span class="toctext">Grands nombres</span></a></li>
<li class="toclevel-3 tocsection-157"><a href="Introduction_à_Perl.html#splice"><span class="tocnumber">19.2.7</span> <span class="toctext">splice</span></a></li>
<li class="toclevel-3 tocsection-158"><a href="Introduction_à_Perl.html#S.C3.A9curit.C3.A9"><span class="tocnumber">19.2.8</span> <span class="toctext">Sécurité</span></a></li>
<li class="toclevel-3 tocsection-159"><a href="Introduction_à_Perl.html#D.C3.A9bogage"><span class="tocnumber">19.2.9</span> <span class="toctext">Débogage</span></a></li>
<li class="toclevel-3 tocsection-160"><a href="Introduction_à_Perl.html#Conversion_d.27autres_languages"><span class="tocnumber">19.2.10</span> <span class="toctext">Conversion d'autres languages</span></a></li>
<li class="toclevel-3 tocsection-161"><a href="Introduction_à_Perl.html#find"><span class="tocnumber">19.2.11</span> <span class="toctext">find</span></a></li>
<li class="toclevel-3 tocsection-162"><a href="Introduction_à_Perl.html#Socket"><span class="tocnumber">19.2.12</span> <span class="toctext">Socket</span></a></li>
<li class="toclevel-3 tocsection-163"><a href="Introduction_à_Perl.html#Getopt::Long_et_Getopt::Std"><span class="tocnumber">19.2.13</span> <span class="toctext">Getopt::Long et Getopt::Std</span></a></li>
<li class="toclevel-3 tocsection-164"><a href="Introduction_à_Perl.html#Term::ANSIColor"><span class="tocnumber">19.2.14</span> <span class="toctext">Term::ANSIColor</span></a></li>
<li class="toclevel-3 tocsection-165"><a href="Introduction_à_Perl.html#Term::ReadKey"><span class="tocnumber">19.2.15</span> <span class="toctext">Term::ReadKey</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-166"><a href="Introduction_à_Perl.html#Cr.C3.A9er_un_module"><span class="tocnumber">19.3</span> <span class="toctext">Créer un module</span></a></li>
<li class="toclevel-2 tocsection-167"><a href="Introduction_à_Perl.html#Cr.C3.A9ation_d.27un_binaire"><span class="tocnumber">19.4</span> <span class="toctext">Création d'un binaire</span></a></li>
<li class="toclevel-2 tocsection-168"><a href="Introduction_à_Perl.html#Cr.C3.A9ation_d.27un_exe_sous_Windows"><span class="tocnumber">19.5</span> <span class="toctext">Création d'un exe sous Windows</span></a>
<ul>
<li class="toclevel-3 tocsection-169"><a href="Introduction_à_Perl.html#Avec_Strawberry"><span class="tocnumber">19.5.1</span> <span class="toctext">Avec Strawberry</span></a></li>
<li class="toclevel-3 tocsection-170"><a href="Introduction_à_Perl.html#Avec_ActivePerl"><span class="tocnumber">19.5.2</span> <span class="toctext">Avec ActivePerl</span></a></li>
<li class="toclevel-3 tocsection-171"><a href="Introduction_à_Perl.html#G.C3.A9n.C3.A9rer_l.27exe"><span class="tocnumber">19.5.3</span> <span class="toctext">Générer l'exe</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-172"><a href="Introduction_à_Perl.html#M.C3.A9mos"><span class="tocnumber">20</span> <span class="toctext">Mémos</span></a>
<ul>
<li class="toclevel-2 tocsection-173"><a href="Introduction_à_Perl.html#clear"><span class="tocnumber">20.1</span> <span class="toctext">clear</span></a></li>
<li class="toclevel-2 tocsection-174"><a href="Introduction_à_Perl.html#Afficher_les_paths_de_ses_librairies_Perl"><span class="tocnumber">20.2</span> <span class="toctext">Afficher les paths de ses librairies Perl</span></a></li>
<li class="toclevel-2 tocsection-175"><a href="Introduction_à_Perl.html#R.C3.A9cup.C3.A9rer_le_PID_de_son_programme"><span class="tocnumber">20.3</span> <span class="toctext">Récupérer le PID de son programme</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-176"><a href="Introduction_à_Perl.html#Ressources"><span class="tocnumber">21</span> <span class="toctext">Ressources</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><span class="mw-headline-number">1</span> Introduction</span></h1>
<p>Cette documentation est vraiment faite pour des personnes ayant de bonnes connaissances en développement, puisque ce sont simplement des notes des syntaxes de Perl, et sur le fonctionnement de celles-ci.
</p><p><b>Perl</b> est un langage de programmation créé par Larry Wall en 1987 et reprenant des fonctionnalités du langage C et des langages de scripts sed, awk et shell. 
</p><p>Larry Wall donne deux interprétations de l'acronyme "PERL":
</p>
<ul><li> <i>Practical Extraction and Report Language</i> ou <i>langage pratique d'extraction et de génération de rapports</i></li>
<li> <i>Pathetically Eclectic Rubbish Lister</i> ou <i>collectionneur de déchets pathétiquement éclectiques</i></li></ul>
<p>Ces noms sont des rétro-acronymes.
</p><p>L'association en charge du développement et de la promotion de Perl est The Perl Foundation. En France, les Mongueurs de Perl promeuvent ce
langage, notamment via les Journées Perl.
</p>
<h1><span class="mw-headline" id="Bases"><span class="mw-headline-number">2</span> Bases</span></h1>
<p>Les exposants&#160;:
</p>
<pre>7.5e-24 # donne 7.5 exposant 10 x -24
</pre>
<p>Ecriture simplifiée des litéraux entiers&#160;:
</p>
<pre>123456789 # On peut écrire aussi 123_45678_9
</pre>
<p>Voici les chaines de caractère d'échappement&#160;:<br />
<a href="./File:Perl_esc_char.jpg.html" class="image"><img alt="Perl esc char.jpg" src="images/f/f2/Perl_esc_char.jpg" width="847" height="400" /></a>
</p><p>Opérateurs de chaine (concaténation)&#160;:
</p>
<pre>"hello" . "world" # équivaut à "helloworld"
"hello" . ' ' . "world" # équivaut à 'hello world'
'hello world' . "\n" # équivaut à "helloworld\n"
"fred" x 3 # équivaut à "fredfredfred"
"5 * 3" # équivaut à 15
</pre>
<p>Attenttion au opérateurs de chaine pour les nombres&#160;:
</p>
<pre>"5" x 4 # équivaut à "5555"
</pre>
<p>Opérateur d'affectation binaire&#160;:
</p>
<pre>$fred = $fred + 5 # Peut s'écrire $fred += 5
</pre>
<p>A éviter&#160;:
</p>
<pre>print "$fred" -&gt; print $fred
</pre>
<p>Précédence et associativité des opérateurs&#160;:<br />
<a href="./File:Perl_asso_op.jpg.html" class="image"><img alt="Perl asso op.jpg" src="images/f/fb/Perl_asso_op.jpg" width="847" height="524" /></a>
</p><p>Opérateurs de comparaison&#160;:<br />
<a href="./File:Perl_num_string_comp.jpg.html" class="image"><img alt="Perl num string comp.jpg" src="images/f/f3/Perl_num_string_comp.jpg" width="847" height="148" /></a>
</p>
<h1><span class="mw-headline" id="Boucles"><span class="mw-headline-number">3</span> Boucles</span></h1>
<h2><span class="mw-headline" id="If"><span class="mw-headline-number">3.1</span> If</span></h2>
<p>Voici la structure d'un if&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$mytruc</span> <span class="kw1">gt</span> <span class="st_h">'toto'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;'$mytruc' est plus grand que toto.<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;'$mytruc' est plus petit que toto.<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Pour avoir STDIN en tant que variable scalaire (Rappel: STDIN sert à utiliser ce que l'utilisateur va taper sur le clavier)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">$line</span> <span class="sy0">=</span> <span class="re4">&lt;STDIN&gt;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$line</span> <span class="kw1">eq</span> <span class="st0">&quot;<span class="es0">\n</span>&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw3">print</span><span class="st0">&quot;Ceci n'était qu'une ligne vide&#160;!<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
  <span class="kw3">print</span> <span class="st0">&quot;Cette ligne de saisie était&#160;: $line&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="while"><span class="mw-headline-number">3.2</span> while</span></h2>
<p>Voici la structure d'un while&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">$total</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
<span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$total</span> <span class="sy0">&lt;</span> <span class="nu0">10</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="re0">$total</span> <span class="sy0">+=</span> <span class="nu0">1</span><span class="sy0">;</span>
  <span class="kw3">print</span> <span class="st0">&quot;total vaut désormais  $total<span class="es0">\n</span>&quot;</span><span class="sy0">;</span> <span class="co1"># donne les valeurs de 1  à 10</span>
<span class="br0">&#125;</span></pre></div></div>
<h1><span class="mw-headline" id="Fonctions_utiles"><span class="mw-headline-number">4</span> Fonctions utiles</span></h1>
<h2><span class="mw-headline" id="Defined"><span class="mw-headline-number">4.1</span> Defined</span></h2>
<p>Vérifie si une valeur est définie ou non
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">$bre1</span> <span class="sy0">=</span> <span class="re4">&lt;STDIN&gt;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">defined</span><span class="br0">&#40;</span><span class="re0">$bre1</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw3">print</span> <span class="st0">&quot;la saisie est $bre1&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
  <span class="kw3">print</span> <span class="st0">&quot;aucune saisie diponible&#160;!<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Chomp"><span class="mw-headline-number">4.2</span> Chomp</span></h2>
<p>Il supprime les caractères de nouvelle ligne&#160;:
</p>
<pre>$text = "une ligne de texte\n";
chomp($text);
</pre>
<h1><span class="mw-headline" id="Tableaux"><span class="mw-headline-number">5</span> Tableaux</span></h1>
<p>Voici l'entrée de la ligne 0 d'un tableau&#160;:
</p>
<pre>$tab[0] = "test";
</pre>
<p>Et voilà comment on peut calculer une ligne de tableau&#160;:
</p>
<pre>$tab[5 - 0.4] = "test"; # Soit $tab[4]
</pre>
<p>Pour créer 99 éléments undef (non définit)&#160;:
</p>
<pre>$tab[99] = "test";
</pre>
<p>Pour définir le dernier élément du tableau, il y a 2 manières&#160;:
</p>
<pre>$tab[$#tab] = 'test';
$tab[-1] = 'test';
</pre>
<p>Pour connaitre le nombre de colonnes dans un tableau&#160;:
</p>
<pre>my $numbers = @tab;
</pre>
<p>Maintenant $numbers contient le nombre de colonnes.
</p><p>Pour vider un tableau&#160;:
</p>
<pre>@tab = ();
</pre>
<h2><span class="mw-headline" id="Listes"><span class="mw-headline-number">5.1</span> Listes</span></h2>
<p>Voici un exemple de listes&#160;:
</p>
<pre>(1..5, 7) # de 1 à 5 et 7;
</pre>
<h3><span class="mw-headline" id="qw"><span class="mw-headline-number">5.1.1</span> qw</span></h3>
<p>Si par exemple nous souhaitons avoir une liste de ce type&#160;:
</p>
<pre>("toto", "tata", "titi")
</pre>
<p>Pour simplifier les choses, nous pouvons faire ceci&#160;:
</p>
<pre>qw<b>/</b> toto tata titi <b>/</b>
</pre>
<p>On peut remplacer <b>/</b> par&#160;!, #, (), {}, [] ou &lt;&gt;.
</p><p>L'avantage d'utilser ces écritures, c'est que cela peut être malformé par des espaces ou nouvelles lignes, elles seront automatiquement ignorées, et vos mots seront par contre eux pris en compte. Voici donc un autre forme d'écriture possible&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">qw</span><span class="br0">&#123;</span>
  <span class="sy0">/</span>usr<span class="sy0">/</span>dict<span class="sy0">/</span>words<span class="sy0">;</span>
  <span class="sy0">/</span>home<span class="sy0">/</span>root<span class="sy0">/.</span>ispell_french<span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>On peut faire aussi&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">@nombre</span> <span class="sy0">=</span> <span class="kw3">qw</span><span class="br0">&#40;</span>un deux trois<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="Affectations_de_listes"><span class="mw-headline-number">5.1.2</span> Affectations de listes</span></h3>
<p>Pour affecter des listes&#160;:
</p>
<pre>($toto, $tata, $titi) = ("un", "deux", "trois");
</pre>
<p>Ici donc toto vaut un, tata vaut deux...
</p><p>On peut permuter de cette façon&#160;:
</p>
<pre>($toto, $tata) = ($tata, $toto);
</pre>
<p>Attentin aux éléments ignorés du type&#160;:
</p>
<pre>($toto, $tata) = qw&lt;un deux trois quatre&gt;;
</pre>
<p>Ici, seuls les 2 premiers seront pris en compte. Pour l'inverse&#160;:
</p>
<pre>($toto, $tata) = qw&lt;un&gt;;
</pre>
<p>$tata aura une valeur undef.
</p>
<h2><span class="mw-headline" id="pop"><span class="mw-headline-number">5.2</span> pop</span></h2>
<p>Pop sert à retirer des éléments se trouvant à la fin d'un tableau&#160;:
</p>
<pre>@tab = 5..9 # mon tableau va de 5 à 9
$toto = pop(@tab); # $toto va recevoir 9, et le tableau n'aura plus que 5,6,7 et 8
$tata = pop @tab # idem, donc $tat à 8 et le tableau s'arrête à 7
pop @tab; # le 7 est jetté
</pre>
<p>Lorsque le tableau est vide, pop renvoie undef.
</p>
<h2><span class="mw-headline" id="push"><span class="mw-headline-number">5.3</span> push</span></h2>
<p>Push sert à ajouter à la fin des tableau des valeurs supplémentaires&#160;:
</p>
<pre>push (@tab, 0); # le tableau vaut mainteant 6, 7 et 0
push @tab, 1..10 # @tab en contient maintenant 10 nouveaux
</pre>
<h2><span class="mw-headline" id="shift"><span class="mw-headline-number">5.4</span> shift</span></h2>
<p>Shift est comme pop mais agit au début du tableau&#160;:
</p>
<pre>@tab = qw&lt;tata toto titi&gt;;
$myshift = shift @tab; # @tab contient alors toto et titi.
</pre>
<h2><span class="mw-headline" id="unshift"><span class="mw-headline-number">5.5</span> unshift</span></h2>
<p>Unshift est comme push, mais agit au début du tableau&#160;:
</p>
<pre> unshift @tab, tata # Maintenant, mon tableau redevient tata, toto, titi
</pre>
<h2><span class="mw-headline" id="foreach"><span class="mw-headline-number">5.6</span> foreach</span></h2>
<p>Un foreach va permettre de parcourir une liste complète&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">@total</span> <span class="sy0">=</span> <span class="co2">qw/toto titi tata/</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="re0">$toutou</span> <span class="br0">&#40;</span><span class="re0">@total</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw3">print</span> <span class="st0">&quot;$toutou<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id=".24"><span class="mw-headline-number">5.7</span> $_</span></h2>
<p>Voici je pense la variable par défaut la plus utilisée dans Perl. Elle permet de ne pas déclarer de variables dans une boucle. Par exemple&#160;:
</p>
<pre>foreach (1..10) { # Utilisation par défaut de $_
  print "Je sais compter jusqu'à $_!\n";
}
</pre>
<p>Autre exemple&#160;:
</p>
<pre>$_ = "Mon test\n";
print; # affiche par défaut la variabe $_
</pre>
<h2><span class="mw-headline" id="reverse"><span class="mw-headline-number">5.8</span> reverse</span></h2>
<p>Reverse prends une liste de valeurs et renvoie la liste dans l'ordre inversée&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">@num</span> <span class="sy0">=</span> <span class="nu0">6</span><span class="sy0">..</span><span class="nu0">10</span><span class="sy0">;</span>
<span class="re0">@tab1</span> <span class="sy0">=</span> <span class="kw3">reverse</span><span class="br0">&#40;</span><span class="re0">@num</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># renvoie 10,9,8,7,6.</span>
<span class="re0">@tab2</span> <span class="sy0">=</span> <span class="kw3">reverse</span> <span class="nu0">6</span><span class="sy0">..</span><span class="nu0">10</span><span class="sy0">;</span> <span class="co1"># Idem mais sans aller chercher dans le tableau.</span>
<span class="re0">@num</span> <span class="sy0">=</span> <span class="kw3">reverse</span><span class="br0">&#40;</span><span class="re0">@num</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># Remplace directement dans le tableau d'origine.</span>
<span class="re0">@inverse</span> <span class="sy0">=</span> <span class="kw3">reverse</span> <span class="co2">qw/ tata toto titi/</span><span class="sy0">;</span> <span class="co1"># donne tata titi toto</span>
<span class="re0">$inverse</span> <span class="sy0">=</span> <span class="kw3">reverse</span> <span class="co2">qw/ tata toto titi/</span><span class="sy0">;</span> <span class="co1"># donne ototititatat</span></pre></div></div>
<h2><span class="mw-headline" id="sort"><span class="mw-headline-number">5.9</span> sort</span></h2>
<p>Tout comme le binaire sort sur les unix, il trie par ordre alphabétique (<b>mais ASCII</b>)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">@planetes</span> <span class="sy0">=</span> <span class="co2">qw/ terre saturne mars pluton /</span><span class="sy0">;</span>
<span class="re0">@triee</span> <span class="sy0">=</span> <span class="kw3">sort</span><span class="br0">&#40;</span><span class="re0">@planetes</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># donnera mars, pluton, saturne et terre.</span>
<span class="re0">@triee</span> <span class="sy0">=</span> <span class="kw3">sort</span> <span class="re0">@planetes</span><span class="sy0">;</span> <span class="co1"># Idem</span>
<span class="re0">@inverse</span> <span class="sy0">=</span> <span class="kw3">reverse</span> <span class="kw3">sort</span><span class="br0">&#40;</span><span class="re0">@planetes</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># inversera le résultat ci dessus.</span></pre></div></div>
<h2><span class="mw-headline" id="Contexte_de_liste_et_de_scalaire"><span class="mw-headline-number">5.10</span> Contexte de liste et de scalaire</span></h2>
<p>Il est important de comprendre cette section&#160;:
</p>
<pre>5 + x # x doit être un scalaire
sort x # x doit être une liste
</pre>
<pre>@personnes = qw( toto tata titi);
@triee = sort @personnes;
$nombre = 5 + @personnes # donne ici 5 + 3
$n = @personnes; # donne 3
</pre>
<p>Pour forcer un contexte scalaire&#160;:
</p>
<pre>print "Je ", <b>scalar @tab</b>, " force le scalaire\n";
</pre>
<h1><span class="mw-headline" id="Fonctions"><span class="mw-headline-number">6</span> Fonctions</span></h1>
<p>On définit avec sub&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">sub</span> way <span class="br0">&#123;</span>
   <span class="re0">$n</span> <span class="sy0">+=</span> <span class="nu0">1</span><span class="sy0">;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Le numéro de metro est&#160;: $n<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Et on appelle la fonction avec une esperluète (&amp;)&#160;:
</p>
<pre>&amp;way; # Affichera&#160;: Le numéro de metro est&#160;: 1
&amp;way; # Affichera&#160;: Le numéro de metro est&#160;: 2
</pre>
<p>Voici un exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@c</span><span class="sy0">;</span>
<span class="kw2">sub</span> liste_de_toto_a_titi <span class="br0">&#123;</span>
   <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$toto</span> <span class="sy0">&lt;</span> <span class="re0">$titi</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="co1"># Enumère en montant de toto à titi</span>
      <span class="kw3">push</span> <span class="re0">@c</span><span class="sy0">,</span> <span class="re0">$toto</span><span class="sy0">..</span><span class="re0">$titi</span><span class="sy0">;</span>
   <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
      <span class="co1"># Enumère en descendant de toto à titi</span>
      <span class="kw3">push</span> <span class="re0">@c</span><span class="sy0">,</span> <span class="re0">$titi</span><span class="sy0">..</span><span class="re0">$toto</span><span class="sy0">;</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
<span class="re0">$toto</span> <span class="sy0">=</span> <span class="nu0">11</span><span class="sy0">;</span>
<span class="re0">$titi</span> <span class="sy0">=</span> <span class="nu0">6</span><span class="sy0">;</span>
<span class="re0">@c</span> <span class="sy0">=</span> <span class="re0">&amp;liste_de_toto_a_titi</span><span class="sy0">;</span> <span class="co1"># @c recoit (11,10,9,8,7,6)</span>
<span class="kw3">print</span> <span class="re0">@c</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Arguments_de_fonctions"><span class="mw-headline-number">6.1</span> Arguments de fonctions</span></h2>
<p>Nous allons passer 2 arguments pour une fonction&#160;:
</p>
<pre>$n = &amp;max(10,15);
</pre>
<p>Et nous allons appeller dans la fonction les <b>2 arguments avec $_[1] ou $_[2]</b> (mais uniquement dans la fonction&#160;!) qui <b>font partie de la liste @_</b>. <b>Ces variables n'on rien à voir avec la variable $_</b>. Voici un exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">sub</span> max <span class="br0">&#123;</span>
   <span class="kw1">if</span> <span class="br0">&#40;</span><span class="co5">$_</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">&lt;</span> <span class="co5">$_</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="co5">$_</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
      <span class="co5">$_</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Si il y a une valeur qui est appelée et non définie, alors elle sera mis en undef.
</p><p>Pour être sur de recevoir le nombre exact d'arguments&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">sub</span> max <span class="br0">&#123;</span>
   <span class="kw1">if</span> <span class="br0">&#40;</span><span class="co5">@_</span> <span class="sy0">!=</span> <span class="nu0">2</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw3">print</span> <span class="st0">&quot;Attention&#160;! &amp;max devrait recevoir 2 arguments<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="my"><span class="mw-headline-number">6.2</span> my</span></h2>
<p>La valeur my permet de créer des variables privées. Déclarée dans une fonction, elle sera appelée dans la fonction et à la fin, elle sortira de la mémoire.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">sub</span> max <span class="br0">&#123;</span>
   <span class="kw1">my</span> <span class="br0">&#40;</span><span class="re0">$a</span><span class="sy0">,</span> <span class="re0">$b</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># nouvelles variables privées pour ce bloc</span>
   <span class="br0">&#40;</span><span class="re0">$a</span><span class="sy0">,</span> <span class="re0">$b</span><span class="br0">&#41;</span> <span class="sy0">=</span> <span class="co5">@_</span><span class="sy0">;</span> <span class="co1"># donne les noms aux paramètres</span>
   <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$a</span> <span class="sy0">&gt;</span> $ b<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="re0">$a</span> <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> <span class="re0">$b</span> <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Nous pouvons simplifier les choses&#160;:
</p>
<pre>my($a, $b) = @_;
</pre>
<h2><span class="mw-headline" id="local"><span class="mw-headline-number">6.3</span> local</span></h2>
<p>Local est l'ancien nom de my, sauf que local sauvegarde une copie de la valeur de la variable dans un endroit secret (pile). Cette valeur ne peut pas être consultée, modifiée, ou supprimée tant qu'est est sauvegardée. Puis local initialise la variable à une valeur vide (undef pour les scalaires, ou liste vide pour les tableaux), ou la valeur affectée. Au retour de la fonction, la variable est automatiquement restaurée à sa valeur d'origine. En somme, la variable a été empruntée un temps rendu avant que quiconque s'en soit aperçu.
</p><p>Vous ne pouvez pas remplacer local par my dans de vieux scripts perl, mais n'oubliez pas d'utiliser de préférence my lorsque vous créez de nouveaux scripts. Ex&#160;:
</p>
<pre>local($a, $b) = @_;
</pre>
<h2><span class="mw-headline" id="return"><span class="mw-headline-number">6.4</span> return</span></h2>
<p>Return va renvoyer la valeur d'une fonction. Par exemple, return, placé dans un foreach va renvoyer une valeur lorsqu'elle aura été trouvée.
</p>
<h1><span class="mw-headline" id="use_strict"><span class="mw-headline-number">7</span> use strict</span></h1>
<p>Pour faire du code "propre", il est préférable de mettre ceci dans vos scripts&#160;:
</p>
<pre>use strict;
</pre>
<h1><span class="mw-headline" id="Hachages"><span class="mw-headline-number">8</span> Hachages</span></h1>
<p>Une table de hach (ou hachage) est comme un tableau sauf qu'au lieu d'avoir des nombres comme repères, nous allons avoir des clefs.
</p><p><a href="./File:Perl_hash_tab.jpg.html" class="image"><img alt="Perl hash tab.jpg" src="images/1/17/Perl_hash_tab.jpg" width="193" height="145" /></a>
</p><p>L'avantage c'est que ces clefs, nous allons les définir. Au cas où ce n'est pas assez clair, voici la différence&#160;:
</p>
<ul><li> Tableau&#160;:</li></ul>
<table border="1">

<tr>
<th>Identifiant ou clef (<b>non modifiable</b>)
</th>
<th>0
</th>
<th>1
</th>
<th>2
</th></tr>
<tr>
<th>Valeur (<b>modifiable</b>)
</th>
<th>tata
</th>
<th>titi
</th>
<th>toto
</th></tr></table>
<ul><li> Table de hach&#160;:</li></ul>
<table border="1">

<tr>
<th>Identifiant ou clef (<b>modifiable</b>)
</th>
<th>IP
</th>
<th>Machine
</th>
<th>Nom
</th></tr>
<tr>
<th>Valeur (<b>modifiable</b>)
</th>
<th>192.168.0.1
</th>
<th>toto-portable
</th>
<th>Toto
</th></tr></table>
<p>On déclare une table de hach de cette façon&#160;:
</p>
<pre>$mon_tableau_de_hash{"<b>identifiant</b>"} = "<b>valeur</b>";
</pre>
<p>Pour copier une colonne&#160;:
</p>
<pre>$mon_tableau_de_hash{"identifiant1"} .=  $mon_tableau_de_hash{"identifiant2"};
</pre>
<p>C'est Perl qui décide de la disposition des clefs dans la table de hash. Vous n'aurez pas vous même la possibilité de le organiser comme vous le souhaitez&#160;! Cela permet en outre à Perl d'accéder plus rapidement aux informations que vous recherchez.
</p>
<h2><span class="mw-headline" id="Liste"><span class="mw-headline-number">8.1</span> Liste</span></h2>
<p>Pour déclarer une liste de hash on peut faire&#160;:
</p>
<pre>%list_hash = ("IP", "192.168.0.1", "Machine", "toto-portable", "Nom", "Toto");
</pre>
<p>Il existe une autre manière, et beaucoup plus claire de faire des déclarations de liste&#160;:
</p>
<pre>my&#160;%list_hash = (
   "IP" =&gt; "192.168.0.1",
   "Machine" =&gt; "toto-portable",
   "Nom" =&gt; "Toto"<b>,</b>
);
</pre>
<p>Nous pouvons laisser sur la dernière liste de ligne la virgule sans problème. Ce qui peut être pratique dans certains cas&#160;:-).
</p>
<h3><span class="mw-headline" id="reverse_2"><span class="mw-headline-number">8.1.1</span> reverse</span></h3>
<p>Le reverse au niveau des listes de hachage va s'avérer très utile&#160;! En effet, comme vous le savez, pour effectuer des recherches, nous pouvons seulement prendre les clefs pour trouver les valeurs. Si nous voulons faire une recherche dans le sens inverse (les valeurs deviennent les clefs, et les clefs deviennent les valeurs)&#160;:
</p>
<pre>%list_hash_inversed = reverse&#160;%list_hash;
</pre>
<p>Mais ne croyez pas que celà ne prends pas de ressources, car contrairement à ce que l'on pourrait penser, une copie de liste fait un déroulement complet, puis une copie un à un de tous les éléments. <b>C'est exactement pareil pour une copie simple d'une liste&#160;:</b>
</p>
<pre>%hash1 =&#160;%hash2;
</pre>
<p>Malheureusement, encore une fois, celà fait extrêmement travailler Perl&#160;! Donc si vous avez la possibilité d'éviter ce genre de choses, c'est bien&#160;:-).
</p>
<h2><span class="mw-headline" id="Fonctions_de_hashage"><span class="mw-headline-number">8.2</span> Fonctions de hashage</span></h2>
<h3><span class="mw-headline" id="Keys_et_values"><span class="mw-headline-number">8.2.1</span> Keys et values</span></h3>
<p>Keys et values sotn 2 fonctions de hash qui permettent de revoyer que les clefs ou que les valeurs&#160;:
</p>
<pre>%list_hash = ("IP", "192.168.0.1", "Machine", "toto-portable", "Nom", "Toto");
my @keys = keys&#160;%list_hash;
my @values = values&#160;%list_hash;
</pre>
<p>Ici @keys comprendra IP, Machine et Nom, tandis que @values comprendra le reste.
</p><p>Sous forme scalaire, cela nous donnera le nombre d'éléments dans keys et dans values&#160;!<br />
Note: Si une valeur est vide elle sera considérée comme false.
</p>
<h3><span class="mw-headline" id="each"><span class="mw-headline-number">8.2.2</span> each</span></h3>
<p>Pour parcourir un hashage entier, nous allons utiliser each qui renvoie une paire de clef/valeur sous forme de liste à 2 éléments&#160;:
</p>
<pre>while ( ($cle, $valeur) = each&#160;%hachage ) {
   print "$cle =&gt; $valeur\n";
}
</pre>
<h3><span class="mw-headline" id="exists"><span class="mw-headline-number">8.2.3</span> exists</span></h3>
<p>Pour connaitre l'existance d'une clef dans un hash&#160;:
</p>
<pre>if (exists $nom{"192.168.0.1"}) {
   print "Il existe un nom pour l'adresse IP 192.168.0.1&#160;!"\n;
}
</pre>
<h3><span class="mw-headline" id="delete"><span class="mw-headline-number">8.2.4</span> delete</span></h3>
<p>La fonction delete va supprimer la clef en question&#160;:
</p>
<pre>my $dhcp{nom}='toto';
delete $dhcp{$nom};
</pre>
<p>Note&#160;: cela n'équivaut pas à insérer un undef dans un élément du hashage.
</p>
<h3><span class="mw-headline" id="R.C3.A9f.C3.A9rences"><span class="mw-headline-number">8.2.5</span> Références</span></h3>
<p>Voici comment retourner des références de hashage&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">sub</span> foo
<span class="br0">&#123;</span>
    <span class="kw1">my</span> <span class="re0">%hash_ref</span><span class="sy0">;</span>
&#160;
    <span class="re0">$hash_ref</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span> <span class="st_h">'key1'</span> <span class="br0">&#125;</span> <span class="sy0">=</span> <span class="st_h">'value1'</span><span class="sy0">;</span>
    <span class="re0">$hash_ref</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span> <span class="st_h">'key2'</span> <span class="br0">&#125;</span> <span class="sy0">=</span> <span class="st_h">'value2'</span><span class="sy0">;</span>
    <span class="re0">$hash_ref</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span> <span class="st_h">'key3'</span> <span class="br0">&#125;</span> <span class="sy0">=</span> <span class="st_h">'value3'</span><span class="sy0">;</span>
&#160;
    <span class="kw3">return</span> <span class="re0">$hash_ref</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw1">my</span> <span class="re0">$hash_ref</span> <span class="sy0">=</span> foo<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
<span class="kw3">print</span> <span class="st0">&quot;the keys&#160;:&#160;%$hash_ref<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<h1><span class="mw-headline" id="Entr.C3.A9es.2FSorties"><span class="mw-headline-number">9</span> Entrées/Sorties</span></h1>
<h2><span class="mw-headline" id="L.27op.C3.A9rateur_Diamant"><span class="mw-headline-number">9.1</span> L'opérateur Diamant</span></h2>
<p>Cet opérateur permet de faire fusionner plusieurs entrées en un gros fichier&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">while</span> <span class="br0">&#40;</span><span class="sy0">&lt;&gt;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">chomp</span><span class="sy0">;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Cette ligne provient de $_&#160;!<span class="es0">\n</span>&quot;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Cet opérateur est généralement utilisé pour traiter toute l'entrée. L'utiliser plusieurs fois dans un programme constituerais une erreur.
</p>
<h3><span class="mw-headline" id=".40ARGV"><span class="mw-headline-number">9.1.1</span> @ARGV</span></h3>
<p>@ARGV est un tableau contenant les arguments d'appel. L'opérateur diamand lira d'abord le tableau @ARGV, si la liste est vide, il lira l'entrée standard sinon la liste des fichiers qu'il trouvera.
</p>
<h2><span class="mw-headline" id="Sortie_standard"><span class="mw-headline-number">9.2</span> Sortie standard</span></h2>
<p>Normalement, vous l'avez compris, il existe des différences entre afficher et interpoler&#160;:
</p>
<pre>print @tab; # affiche une liste d'éléments
print "@tableau" # affiche une chaîne (contenant un tableau interpolé)
</pre>
<h2><span class="mw-headline" id="printf"><span class="mw-headline-number">9.3</span> printf</span></h2>
<p>Printf permet de mieux controler la sortie. Pour afficher un nombre de façon généralement correcte, nous utiliserons <b>%g</b>, qui sélectionne auomatiquement la notation décimale, entière ou exponentielle&#160;:
</p>
<pre>printf "%g&#160;%g", 6/2, 51 ** 17; # Ca nous donnera 3 1.0683e+29
</pre>
<p><b>%d</b> signifie un entier décimale&#160;:
</p>
<pre>printf "%d fois plus", 15.987690987; # Donne 15 fois plus
</pre>
<p>Printf est souvent utilisé pour présenter des données en colonne. Nous allons donc définir des espaces&#160;:
</p>
<pre>printf "%<b>6</b>d\n", 32; # Donne "    32"
</pre>
<p>Nous avons donc ici 4 espaces puis le chiffre 32 qui donne 6 caractères.
</p><p>Pareil avec <b>%s</b> qui est dédié aux chaines&#160;:
</p>
<pre>printf "%<b>10</b>s\n", toto; # "      toto"
</pre>
<p>Si nous passons le 10 au négatif, nous aurons un alignement à gauche&#160;:
</p>
<pre>printf "%<b>-10</b>s\n", toto; # "toto      "
</pre>
<p>Avec les nombres <b>%f</b>, il est donc capable de tronquer&#160;:
</p>
<pre>printf "<b>%12f</b>\n", 6 * 7 + 2/3; # "   42.666667"
printf "%12<b>.3</b>f\n", 6 * 7 + 2/3; # "      42.667", ici, je lui ai dis d'arrondir à 3 chiffres après la virgule
</pre>
<p>Si l'on veut que le signe&#160;% y soit mensionner alors il faut avoir <b>%%</b>&#160;:
</p>
<pre>printf "Mon pourcentage est de&#160;%.2f%%\n"; 5.25/12; # résultat&#160;: "0.44%"
</pre>
<p>Dans le cas où nous souhaitons entrer en STDIN la valeur à tronquer, il ne faut pas oublier d'interpoler celle ci&#160;:
</p>
<pre>printf "%<b>${valeur}</b>s\n", $_
</pre>
<p>Pour plus d'informations&#160;: <a rel="nofollow" class="external free" href="http://perldoc.perl.org/functions/sprintf.html">http://perldoc.perl.org/functions/sprintf.html</a>
</p>
<h1><span class="mw-headline" id="Regex"><span class="mw-headline-number">10</span> Regex</span></h1>
<p>Regex ou expressions régulières sont comme un autre language à apprendre, qui permettent très facilement d'avoir accès à des outils très sofistiqués.
</p><p>Si par exemple, nous souhaitons faire une recherche et afficher l'expression correspondante (équivalent au grep)&#160;:
</p>
<pre>$_ = "tata titi toto";
if (/tot/) {
   print "Correspondance trouvée&#160;!";
}
</pre>
<h2><span class="mw-headline" id="M.C3.A9tacaract.C3.A8res"><span class="mw-headline-number">10.1</span> Métacaractères</span></h2>
<p>Les métacaractères servent à pousser encore plus loin les recherches. Si je reprends l'exemple du dessus&#160;:
</p>
<pre>if (/t.t/) {
</pre>
<p>Le caractère "." signifie n'importe quoi. Donc ici, ca match avec tata, titi et toto. Si vous voulez réèlement utilise le "." et ne pas qu'il passe en regex, il faut utiliser le métacaractère "\".<br />
Ce qui donne "\."&#160;:
</p>
<pre>3\.15 # Donne 3.15
</pre>
<h2><span class="mw-headline" id="Quantificateurs"><span class="mw-headline-number">10.2</span> Quantificateurs</span></h2>
<p>Le signe * signifie que le caractère précédent est répété x fois ou pas du tout&#160;:
</p>
<pre>/toto\t*titi/ # Cette recherche peu comporter de 0 à x tabulations entre toto et titi
</pre>
<p>Si l'on souhaite n'importe quoi entre toto et titi, il suffit de rajouter un "."&#160;:
</p>
<pre>/toto.*titi/ # Recherchera "toto'n importe quoi'titi"
</pre>
<p>Pour répéter l'élément précédent 1 ou plusieurs fois, on utilise "+"&#160;:
</p>
<pre>/toto +titi/ # Peut donner "toto       titi" mais pas "tototiti"
</pre>
<p>Le&#160;? indique que ce n'est pas obligatoire&#160;:
</p>
<pre>/toto-?titi/ # Donne tototiti ou toto-titi
</pre>
<h2><span class="mw-headline" id="Regroupements"><span class="mw-headline-number">10.3</span> Regroupements</span></h2>
<p>On peut regrouper avec des ()&#160;:
</p>
<pre>/toto+/ # Peut faire totooooooooo
/(toto)+/ # Peut donner totototototototo
</pre>
<h2><span class="mw-headline" id="Pipe"><span class="mw-headline-number">10.4</span> Pipe</span></h2>
<p>Le pipe sert à désigner un élément ou un autre&#160;:
</p>
<pre>/toto|titi|tata/ # Cherchera toto ou titi ou tata
</pre>
<p>Si l'un d'eux correspond, alors il est prit. Si on veut rechercher espaces ou tabulations&#160;:
</p>
<pre>/( +|\t+)/
</pre>
<h2><span class="mw-headline" id="Classes_de_caract.C3.A8res"><span class="mw-headline-number">10.5</span> Classes de caractères</span></h2>
<ul><li> Pour désigner des tranches ou quelques lettres ou chiffres, on va utiliser []&#160;:</li></ul>
<pre>[a-c] # Donne a,b et c
[a-cw-z] # Donne a,b,c,w,x,y et z
[1-6] # Donne de 1 à 6
[a-zA-Z] # L'alphabet en minuscule et majuscule
</pre>
<p>Pour éviter certains caractères, il faut rajouter ^&#160;:
</p>
<pre>[^a-c] # Tout sauf a,b et c
</pre>
<p>Maintenant, encore plus fort&#160;! Certaines classes apparaissent si souvent qu'elles ont été encore simplifiées&#160;:
</p>
<table class="wikitable sortable" border="0">
<tr>
<th>Opérateur
</th>
<th>Description
</th>
<th>Exemple
</th></tr>
<tr>
<td align="center">^
</td>
<td align="center"><b>Début</b> de ligne
</td>
<td align="left"><b>^Deimos</b> pour 'Deimos Fr&#160;!!!'
</td></tr>
<tr>
<td align="center">$
</td>
<td align="center"><b>Fin</b> de ligne
</td>
<td align="left"><b>!$</b> pour 'Deimos Fr&#160;!!!'
</td></tr>
<tr>
<td align="center">.
</td>
<td align="center">N'importe quel caractère
</td>
<td align="left"><b>d.im.s</b> pour 'Deimos Fr&#160;!!!'
</td></tr>
<tr>
<td align="center">*
</td>
<td align="center">Répétition du caractère précédent de <b>0 à x fois</b>
</td>
<td align="left"><b>!*</b> pour 'Deimos Fr <b>!!!'</b>
</td></tr>
<tr>
<td align="center">+
</td>
<td align="center">Répétition du caractère précédent de <b>1 à x fois</b>
</td>
<td align="left"><b>!+</b> pour 'Deimos Fr <b>!!!'</b>
</td></tr>
<tr>
<td align="center">?
</td>
<td align="center">Répétition du caractère précédent de <b>0 à 1 fois</b>
</td>
<td align="left"><b>F?</b> pour 'Deimos <b>F</b>r&#160;!!!'
</td></tr>
<tr>
<td align="center">\
</td>
<td align="center">Caractère d’échappement
</td>
<td align="left"><b>\.</b> pour 'Deimos Fr\.'
</td></tr>
<tr>
<td align="center">a,b,...z
</td>
<td align="center">Caractère précis
</td>
<td align="left"><b>D</b>eimos pour 'Deimos Fr'
</td></tr>
<tr>
<td align="center">\w
</td>
<td align="center">Caractère <b>alphanumérique</b> (a...z,A...Z,0...9)
</td>
<td align="left"><b>\w</b>eimos pour 'Deimos Fr'
</td></tr>
<tr>
<td align="center">\W
</td>
<td align="center"><b>Tout sauf</b> un caractère <b>alphanumérique</b>
</td>
<td align="left">I<b>\W</b>ll pour 'I<b>'</b>ll be back'
</td></tr>
<tr>
<td align="center">\d
</td>
<td align="center">Un <b>chiffre</b>
</td>
<td align="left">\d pour 1
</td></tr>
<tr>
<td align="center">\D
</td>
<td align="center"><b>Tout sauf</b> un <b>chiffre</b>
</td>
<td align="left">\Deimos pour <b>D</b>eimos
</td></tr>
<tr>
<td align="center">\s
</td>
<td align="center">Un <b>caractère d'espacement</b> tel que&#160;: espace, tabulation, retour chariot ou saut de ligne (\f,\t,\r,\n)
</td>
<td align="left">'Deimos<b>\s</b>Fr' pour 'Deimos Fr'
</td></tr>
<tr>
<td align="center">\S
</td>
<td align="center"><b>Tout sauf</b> un <b>caractère d'espacement</b>
</td>
<td align="left">'Deimos<b>\S</b>Fr' pour 'Deimos Fr'
</td></tr>
<tr>
<td align="center">{x}
</td>
<td align="center"><b>Répète</b> le caractère précédent exactement <b>x fois</b>
</td>
<td align="left">!{3} dans 'Deimos Fr <b>!!!'</b>
</td></tr>
<tr>
<td align="center">{x,}
</td>
<td align="center"><b>Répète</b> le caractère précédent <b>au moins x fois</b>
</td>
<td align="left">!{2} dans 'Deimos Fr <b>!!!'</b>
</td></tr>
<tr>
<td align="center">{, x}
</td>
<td align="center"><b>Répète entre 0 et x fois</b> le caractère précédent
</td>
<td align="left">!{3} dans 'Deimos Fr <b>!!!'</b>
</td></tr>
<tr>
<td align="center">{x, y}
</td>
<td align="center"><b>Répète entre x et y fois</b> le caractère précédent
</td>
<td align="left">!{1, 3} dans 'Deimos Fr <b>!!!'</b>
</td></tr>
<tr>
<td align="center">[]
</td>
<td align="center">Permet de mettre un <b>range</b> (de a à z[a-z], de 0 à 9[0-9]...)
</td>
<td align="left">[A-D][0-5] dans 'A4'
</td></tr>
<tr>
<td align="center">[^]
</td>
<td align="center">Permet de spécifier des <b>caractères non désirés</b>
</td>
<td align="left">[^0-9]eimos dans 'Deimos'
</td></tr>
<tr>
<td align="center">()
</td>
<td align="center">Permet d'<b>enregistrer le contenu des parenthèses</b> pour une utilisation ultérieure
</td>
<td align="left">(Deimos) dans 'Deimos Fr'
</td></tr>
<tr>
<td align="center">|
</td>
<td align="center">Permet de faire un <b>ou exclusif</b>
</td>
<td align="left">(Org|Fr|Com) dans 'Deimos <b>Fr'</b>
</td></tr></table>
<p>Il existe un site permettant de visualiser une regex&#160;: <a rel="nofollow" class="external text" href="http://www.regexper.com/">Regexper</a> (sources&#160;: <a rel="nofollow" class="external free" href="https://github.com/javallone/regexper">https://github.com/javallone/regexper</a>)
</p><p>Du coup&#160;:
</p>
<pre>/toto \w+ titi/ # Donnera toto, espace, un mot (quelquonque), espace et titi
</pre>
<p>C'est pas butifull ça&#160;? Pour représenter un espace, nous pouvons aussi utiliser \s&#160;:
</p>
<pre>/toto\s\w+\stiti/
</pre>
<ul><li> Maintenant, si nous souhaitons les inverses&#160;:</li></ul>
<pre>[^\d] # Tout sauf des chiffres
</pre>
<p>ou nous pouvons utiliser les majuscules&#160;:
</p>
<pre>\D
</pre>
<p>Pas mal hein&#160;!&#160;:-)
</p><p>On peut également trouver [\d\D] qui signifie n'importe quel chiffre ou non chiffre (contrairement au . qui est identique sauf que le . n'accepte pas les nouvelles lignes).
</p>
<h2><span class="mw-headline" id="Quantificateurs_g.C3.A9n.C3.A9raux"><span class="mw-headline-number">10.6</span> Quantificateurs généraux</span></h2>
<p>Si l'on veut faire correspondre plusieurs fois un motif&#160;:
</p>
<pre>/a{5,15}/ # "a" pourra être répété entre 5 et 15 fois
/a{3,}/ # "a" pourra être répété de 3 à l'infini
</pre>
<p>Ce qui peut donner par exemple, si nous cherchons un mot à 8 caractères&#160;:
</p>
<pre>/\w{8}/
</pre>
<h2><span class="mw-headline" id="Ancres"><span class="mw-headline-number">10.7</span> Ancres</span></h2>
<p>Comme il n'exite trop peu de caractères, certains sont réutilisés&#160;:
</p>
<table border="1">
<tr>
<th>Recherches
</th>
<th>Ancres
</th></tr>
<tr>
<td>Début d'une ligne
</td>
<td>/<b>^</b>Mon\sdébut/
</td></tr>
<tr>
<td>Fin d'une ligne
</td>
<td>/ma\sfin<b>$</b>/
</td></tr></table>
<h3><span class="mw-headline" id="Ancres_de_mot"><span class="mw-headline-number">10.7.1</span> Ancres de mot</span></h3>
<p>Pour définir un mot entier, nous utiliserons \b&#160;:
</p>
<pre>/\btoto\b/ # Ne recherera que "toto"
</pre>
<p>Pour inverser l'ordre des choses, donc si nous voulons tout sauf toto&#160;:
</p>
<pre>/\Btoto\B/
</pre>
<p>Mais on peut vouloir titine et titi&#160;:
</p>
<pre>/\btiti/ # Equivalent à titi.*
</pre>
<p>Super-timore, encore plus fort&#160;:
</p>
<pre>/\bsearch\B/ # Correspondra à searches, searching et searched, mais pas search ou research
</pre>
<h2><span class="mw-headline" id="Paranth.C3.A8ses_de_m.C3.A9morisation"><span class="mw-headline-number">10.8</span> Paranthèses de mémorisation</span></h2>
<p>Un bon exemple et on comprends mieux. Si on utilise&#160;:
</p>
<pre>/./ # On localise n'importe quel caractère individuel sauf la nouvelle ligne
</pre>
<p>Pour mémoriser cette regex, nous utiliserons les paranthèses&#160;:
</p>
<pre>/(.)/ # Là il y a mémorisation
</pre>
<p>Pour en faire référence, nous utiliserons&#160;:
</p>
<pre>/(.)\1/ # Ceci contiendra la première mémoire des regex
</pre>
<p>Ceci n'est pas simple à comprendre mais cela va chercher un caractère identique à la recherche précédente
</p><p>Par exemple si nous avons du code HTML&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="sy0">&lt;</span>image source<span class="sy0">=</span><span class="st_h">'toto.png'</span><span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>image source<span class="sy0">=</span><span class="st0">&quot;toto-l'artichaud.png&quot;</span><span class="sy0">&gt;</span></pre></div></div>
<p>Nous pouvons ici faire notre recherche avec ceci&#160;:
</p>
<pre>/&lt;image source=(['"]).*\1&gt;/ # le *\1 indique que nous utilisons la première mémoire de l'expression régulière. Elle est donc répétée à son appel (\1).
</pre>
<p>Etant donné la complexité de la chose, je vais essayer de montrer de bons exemples. Tout d'abord, il faut compter les parenthèses ouvrantes, c'est ce qui sera notre numéro de mémoire regex ( ex: ((... = 2, car 2 parenthèses ouvrantes)&#160;:
</p>
<pre>/<b>((toto|titi) (tata))</b> \1/ # Peut correspondre à toto tata toto tata ou titi tata titi tata
/((<b>toto|titi</b>) (tata)) \2/ # Peut correspondre à titi tata titi ou toto tata toto
/((toto|titi) (<b>tata</b>)) \3/ # Peut correspondre à toto tata tata ou titi tata tata (même si ce genre d'expression est rare)
/\b((toto|titi)\s+tata\b\b/ # Permet de chercher exactement ces mots (et pas totototo par exemple
/^b[\w.]{1,12}\b$/ # Correspond ) des chaines de lettres, ne se terminant jamais par un . et au maximum 12 caractères.
</pre>
<h2><span class="mw-headline" id="Paranth.C3.A8ses_de_non_m.C3.A9morisation"><span class="mw-headline-number">10.9</span> Paranthèses de non mémorisation</span></h2>
<p>Si vous souhaitez utiliser les parenthèse sans que celles ci soient stocker en mémoire, il faut utiliser ces symboles "?:" comme ceci&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw1">if</span> <span class="br0">&#40;</span><span class="co2">/(?: toto|tata) est en train de jouer/</span><span class="br0">&#41;</span>
 <span class="br0">&#123;</span>
    <span class="kw3">print</span> <span class="st0">&quot;Quelqu'un est en train de jouer&quot;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span></pre></div></div>
<p>Ici, on ne stockera donc pas toto ou tata.
</p>
<h2><span class="mw-headline" id="Utilisation_des_regex"><span class="mw-headline-number">10.10</span> Utilisation des regex</span></h2>
<p>Tout comme nous avon vu avec l'opérateur qw//, il est possible de faire la même chose pour les correspondances avec m//&#160;:
</p>
<pre>m(toto)
m&lt;titi&gt;
m{tata}
</pre>
<p>Bref, les possibilités sont ^,!(&lt;{[ ]}&gt;)!,^. Le raccourci m// n'est pas obligatoire avec les double <b>//</b>.
</p>
<h3><span class="mw-headline" id="Ignorer_la_casse"><span class="mw-headline-number">10.10.1</span> Ignorer la casse</span></h3>
<p>Pour ignorer la casse, il existe <b>/i</b>&#160;:
</p>
<pre>/toto\n/i # La correspondance peut être donc toto ou TOTO, voir ToTo...etc...:-)
</pre>
<h3><span class="mw-headline" id="Ignorer_les_espaces_et_commentaires"><span class="mw-headline-number">10.10.2</span> Ignorer les espaces et commentaires</span></h3>
<p>Si vous souhaitez ignorer tous les espaces et commentaires dans votre code, ajoutez <b>/x</b>&#160;:
</p>
<pre>/   toto # \n/x
</pre>
<h3><span class="mw-headline" id="Correspondance_de_n.27importe_quel_caract.C3.A8re"><span class="mw-headline-number">10.10.3</span> Correspondance de n'importe quel caractère</span></h3>
<p>Le fait que le . ne corresponde pas à un caractère de nouvelle ligne peut être génant. C'est pourquoi <b>/s</b> est utile. Par exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co5">$_</span> <span class="sy0">=</span> <span class="st0">&quot;Voici&#160;:<span class="es0">\n</span>toto<span class="es0">\n</span>titi<span class="es0">\n</span>tata.<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="co2">/\btoto\b.*\btiti\b/s</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Cete chaine indiue toto après titi&#160;!<span class="es0">\n</span>&quot;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Nous pouvons même faire des combinaisons&#160;:
</p>
<pre>if (/\btoto\b.*\btiti\b/si) { # Nous combinons ici /s et /i
</pre>
<h3><span class="mw-headline" id="Recherche_jusqu.27.C3.A0_un_caract.C3.A8re_pr.C3.A9cis"><span class="mw-headline-number">10.10.4</span> Recherche jusqu'à un caractère précis</span></h3>
<p>J'ai pas mal galérer avec cette regex avant de la trouver. Si par exemple, j'ai une ligne du style&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="xml source-xml"><pre class="de1"><span class="sc3"><span class="re1">&lt;task</span> <span class="re0">id</span>=<span class="st0">&quot;3&quot;</span> <span class="re0">name</span>=<span class="st0">&quot;Cacti&quot;</span> <span class="re0">color</span>=<span class="st0">&quot;#8cb6ce&quot;</span> <span class="re0">meeting</span>=<span class="st0">&quot;false&quot;</span> <span class="re0">start</span>=<span class="st0">&quot;2010-04-26&quot;</span> <span class="re0">duration</span>=<span class="st0">&quot;65&quot;</span> <span class="re0">complete</span>=<span class="st0">&quot;0&quot;</span> <span class="re0">priority</span>=<span class="st0">&quot;1&quot;</span> <span class="re0">expand</span>=<span class="st0">&quot;true&quot;</span><span class="re2">&gt;</span></span></pre></div></div>
<p>Et que je souhaites rechercher le contenu de name&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="sy0">/</span>name<span class="sy0">=</span><span class="st0">&quot;(.*)&quot;</span><span class="sy0">/</span></pre></div></div>
<p>Cette regex ne suffira pas car ça me donnera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1">Cacti<span class="st0">&quot; color=&quot;</span><span class="co1">#8cb6ce&quot; meeting=&quot;false&quot; start=&quot;2010-04-26&quot; duration=&quot;65&quot; complete=&quot;0&quot; priority=&quot;1&quot; expand=&quot;true&quot;&gt;</span></pre></div></div>
<p>Pour palier au problème, voici la solution&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="sy0">/</span>name<span class="sy0">=</span><span class="st0">&quot;(.*?)&quot;</span><span class="sy0">/</span></pre></div></div>
<p>J'ai simplement mis un&#160;? qui va demander de chercher pas jusqu'a la dernière ", mais jusqu'à la première&#160;!
</p>
<h3><span class="mw-headline" id="L.27op.C3.A9rateur_de_liaison_.3D.7E"><span class="mw-headline-number">10.10.5</span> L'opérateur de liaison =~</span></h3>
<p>La correspondance avec $_ est celle par déaut&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$qqun</span> <span class="sy0">=</span> <span class="st0">&quot;La personne en question est toto.&quot;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$qqun</span> <span class="sy0">=~</span> <span class="co2">/\btoto/</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Là les choses se compliquent&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Si aucuns opérateur de liaison n'est indiqué, il travaillera avec $_.
</p><p>Voici un autre exemple de correspondance, mais avec les mémoires d'expression régulières&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">$moi</span> <span class="sy0">=</span> <span class="st0">&quot;Pour le moment j'ai vécu 24 ans&#160;!&quot;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$moi</span> <span class="sy0">=~/</span><span class="br0">&#40;</span><span class="re0">\d</span><span class="sy0">*</span><span class="br0">&#41;</span> ans<span class="sy0">/</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;J'ai donc $1 ans<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Un dernier&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co5">$_</span> <span class="sy0">=</span> <span class="st0">&quot;toto tata, titi&quot;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="co2">/(\S+) (\S+), (\S+)/</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Voici les prénoms&#160;: $1 $2 $3&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>La mémoire reste intacte jusqu'à ce qu'il y ai coorespondance, alors qu'une correpondance réussie les réinitialises toutes. Si vous commencez à trop jouer avec les mémoires, vous risquez d'avoir des surprises. Il est donc conseiller de les stocker dans des variables&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#123;</span><span class="re0">$toto</span> <span class="sy0">=~</span> <span class="co2">/(\(w+)/</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw1">my</span> <span class="re0">$recherche_toto</span> <span class="sy0">=</span> <span class="co3">$1</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Maintenant, attention, on va voir le genre de choses que je trouves géniale avec Perl&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="st0">&quot;Voici toto, tata et titi&quot;</span> <span class="sy0">=~</span> <span class="co2">/,\s(\w+)/</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;La correspondance est '$&amp;'.<span class="es0">\n</span>&quot;</span><span class="sy0">;</span> <span class="co1"># Soit &quot;, tata&quot;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>$&amp;&#160;: est la correspondance<br />
$`&#160;: ce qui se situe avant la correspondance<br />
$'&#160;: ce qui se situe après la correspondance
</p><p>Par conclusion, si nous volons la chaine d'origine&#160;:
</p>
<pre>print "La chaine d'origine est&#160;: ($`)($&amp;)($').\n";
</pre>
<p>Ces variables "magiques" ont un prix&#160;! Elles ralentissent les expressions régulières suivantes. Ce qui peut donc faire perdre quelques millisecondes...minutes, suivant votre programme. Apparement, ce problème est corrigé dans Perl 6.
</p><p>Si vous avez donc la possibilité d'utiliser les numérotation à la place de ces regex, n'hésitez pas&#160;!
</p><p>Sachez que vous pouvez obtenir encore plus d'infos sur les regex ici&#160;: <a rel="nofollow" class="external free" href="http://www.perl.com/doc/manual/html/pod/perlre.html">http://www.perl.com/doc/manual/html/pod/perlre.html</a>
</p>
<h2><span class="mw-headline" id="Substitution"><span class="mw-headline-number">10.11</span> Substitution</span></h2>
<p>Pour substituer (remplacer), nous utiliserons <b>s///</b>&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co5">$_</span> <span class="sy0">=</span> <span class="st0">&quot;Toto jour a la Wii avec titi ce soir&quot;</span><span class="sy0">;</span>
<span class="co2">s/titi/tata/</span><span class="sy0">;</span> <span class="co1"># Remplace titi par tata</span>
<span class="co2">s/avec (\w+)/contre $1/</span><span class="sy0">;</span> <span class="co1"># Remplace &quot;avec titi&quot; par &quot;contre titi&quot;</span></pre></div></div>
<p>Ou bien, plus simplement&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$toto</span> <span class="sy0">=</span> <span class="st_h">'TOTO'</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$titi</span> <span class="sy0">=</span> <span class="st0">&quot;<span class="es0">\L</span>$toto&quot;</span><span class="sy0">;</span>
<span class="kw3">print</span> <span class="st0">&quot;$titi<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Maintenant, des exemples un peu plus complexe&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co5">$_</span> <span class="sy0">=</span> <span class="st0">&quot;bumbo, petite automobile&quot;</span><span class="sy0">;</span></pre></div></div>
<ul><li> Pour une substitution globale, c'est à dire sur toutes les occurences trouvées, il suffit de rajouter "g"&#160;:</li></ul>
<pre>$_ = "bumbo, joli bumbo&#160;!";
s/bumbo/auto/g;
print "$_\n";
</pre>
<p>Il est possible d'utiliser d'uatres délimiteurs (comme pour m et qw) tel que "{}, [], &lt;&gt;, ##"&#160;:
</p>
<pre>s&lt;^https://&gt;(http://);
</pre>
<p>Il est également possible de combiner "g" à une autre (comme la sensibilité à la casse par exemple)&#160;:
</p>
<pre>s{https://}[http://]<b>gi</b>;
</pre>
<ul><li> Pour remplacer par des majuscules, il faut utiliser \U&#160;:</li></ul>
<pre>s/(toto|titi)/<b>\U</b>$1/gi; # Donnera TOTO ou TITI
</pre>
<ul><li> Pour remplacer par \L pour avoir que des minuscules&#160;:</li></ul>
<pre>s/(toto|titi)/<b>\L</b>$1/gi; # Donnera toto ou titi
</pre>
<ul><li> On peut désactiver la modification de la casse avec \E&#160;:</li></ul>
<pre>s/(\w+) avec (\w+)/\U$2\E avec $1/i; donnera TOTO avec titi
</pre>
<ul><li> Ecris en minuscule (\l et \u), ces échappements n'affectent que le caractère suivant&#160;:</li></ul>
<pre>s/(toto|titi)/<b>\u</b>$1/gi; # Donnera Toto ou Titi
</pre>
<p>On peut également les combiner pour que tout soit en minuscule sauf la première lettre&#160;:
</p>
<pre>s/(toto|titi)/<b>\u\L</b>$1/gi; # Donnera Toto ou Titi
</pre>
<p>On peut même faire ça dans un simple print&#160;:
</p>
<pre>print "Son nom est \u\L$nom\E\n";
</pre>
<h2><span class="mw-headline" id="split"><span class="mw-headline-number">10.12</span> split</span></h2>
<p>Split permet de faire du découpage par rapport à un espace, une tabulation, un point... à peu prêt n'importe quoi suaf les virgules&#160;:
</p>
<pre>@champs = split /séparateur/, $chaine;
</pre>
<p>Split déplace le motif dans une chaîne et renvoie la liste des champs séparés per les séparateurs. A chaque correspondance du motif correspond la fin d'un champ et le début d'un autre&#160;:
</p>
<pre>@champs = split /:/, "abc:def:ij:k::m"; # Donnera ("abc", "def", "ij", "k", "", "m")
</pre>
<p>Comme je le disais plus haut, il est également possible de faire des séparations avec des espaces&#160;:
</p>
<pre>my $phrase = "Voici ma ligne\t d'espaces.\n"
my @args = split /\s+/, $phrase; # Donne ("Voici", "ma", "ligne", "d'espaces."
</pre>
<p>Par défaut, si aucunes options de séparation n'est spécifiée, c'est "\s+" qui sera utilisé.
</p>
<h2><span class="mw-headline" id="join"><span class="mw-headline-number">10.13</span> join</span></h2>
<p>Join fonctionne exactement comme split sauf que son résultat donnera l'inverse de split. Il joindra des bouts (avec ou non) des séparateurs&#160;:
</p>
<pre>my @mac = join ":", 00, AB, EF, EF, EF, EF; # Donnera 00:AB:EF:EF:EF:EF
</pre>
<p>ou encore&#160;:
</p>
<pre>my $mac = join ":", 00, AB, EF, EF, EF, EF; # Donnera 00:AB:EF:EF:EF:EF
</pre>
<h1><span class="mw-headline" id="Structures_de_contr.C3.B4les_plus_complexe"><span class="mw-headline-number">11</span> Structures de contrôles plus complexe</span></h1>
<h2><span class="mw-headline" id="unless"><span class="mw-headline-number">11.1</span> unless</span></h2>
<p>Unless est l'inverse du if, c'est à dire qu'on rentrera dans la boucle si l'expression rechercée n'est pas la bonne. C'est en fait l'équivalent d'un else dans une boucle if. Cal équivaut aussi à rendre un if négatif&#160;:
</p>
<pre>if (&#160;! ( $toto =~ /Â-Z_]\w*$/i) ) &lt;--&gt; unless ($toto =~ /Â-Z_]\w*$/i)
</pre>
<p>Il est aussi, tout comme un if d'utiliser else avec unless, mais je vous le déconseil car c'est souvent source d'erreurs.
</p>
<h2><span class="mw-headline" id="until"><span class="mw-headline-number">11.2</span> until</span></h2>
<p>Si vous souhaitez inverser la condition de la boucle while&#160;:
</p>
<pre>until ($j &gt; $i) {
   $j *= 2;
}
</pre>
<p>Ceci est en fait une boucle while déguisée qui se répète tant que la condition est fausse.
</p>
<h2><span class="mw-headline" id="Modificateurs_d.27expression"><span class="mw-headline-number">11.3</span> Modificateurs d'expression</span></h2>
<p>Pour avoir une notation plus compacte, une expression peut être suivit d'un modificateur qui la contrôle&#160;:
</p>
<pre>print "$n est un nombre négatif.\n" if $n &lt; 0;
&amp;error("Entrée invalide") unless &amp;valid($entree);
$i *= 2 until $i &gt; $j;
print " ", ($n += 2) while $n &lt; 10;
&amp;saluer($_) foreach @personne;
</pre>
<h2><span class="mw-headline" id="Bloc_nu"><span class="mw-headline-number">11.4</span> Bloc nu</span></h2>
<p>Ceci est un bloc nu&#160;:
</p>
<pre>{
corps;
corps;
corps;
}
</pre>
<p>C'est un bloc qui sera exécuté qu'une fois. L'avantage c'est que nous pouvons créer des variables, mais qui ne seront conservées que dans ce bloc.
</p>
<h2><span class="mw-headline" id="elsif"><span class="mw-headline-number">11.5</span> elsif</span></h2>
<p>Dans une boucle if, si nous voulons avoir plusieurs solutions, nous pouvons utiliser elsif&#160;:
</p>
<pre>if (&#160;! defined $toto) {
   print "La valeur est undef.\n";
} elsif ($toto eq '') {
   print "La valeur est uen chaine.\n";
else {
   ...
}
</pre>
<p>Nous pouvons mettre autant de elsif que nous voulons (voir perlfaq pour émuler des case ou switch).
</p>
<h2><span class="mw-headline" id="Auto_Incr.C3.A9mentation.2FD.C3.A9cr.C3.A9mentation"><span class="mw-headline-number">11.6</span> Auto Incrémentation/Décrémentation</span></h2>
<p>Comme en C, pour incrémenter par exemple une variable&#160;:
</p>
<pre>my $a = 5;
my $b = $a++; # pour s'écrire aussi ++$a
</pre>
<p>Idem avec "--" pour décrémenter
</p>
<h2><span class="mw-headline" id="for"><span class="mw-headline-number">11.7</span> for</span></h2>
<p>For est assez classique et ressemble au C encore une fois&#160;:
</p>
<pre>for ($i = 1; $i &lt;=10; $i++) {
   print "Je sais compter jusqu'à $i!\n";
}
</pre>
<p>Autre exemple. imaginons que nous voulons compter de -150 à 1000 mais par saut de 3&#160;:
</p>
<pre>for ($i = -150; $i &lt;= 1000; $i +=3) {
   print "$i\n";
}
</pre>
<p>Sinon, une simple boucle for pour une recherche qui réussi&#160;:
</p>
<pre>for ($_ = "toto"; s/(.)//; ) {
   print "$1 est trouvé ici\n";
}
</pre>
<p>Attention aux boucles infinies  si vous utilisez des variables&#160;:
</p>
<pre>for (;;) {
   print "Boucle infinie\n";
}
</pre>
<p>Si vraiment vous voulez écrire une boucle infinie, la meilleure façon est celle ci&#160;:
</p>
<pre>for (1) {
   print "Boucle infinie\n";
}
</pre>
<h2><span class="mw-headline" id="foreach_2"><span class="mw-headline-number">11.8</span> foreach</span></h2>
<p>La boucle et for et foreach sont identiques sauf que si il n'y a pas de ";", c'est une boucle foreach&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">for</span> <span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">..</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="co1"># En réalité une boucle foreach de 1 à 10</span>
   <span class="kw3">print</span> <span class="st0">&quot;Je sais compter jusqu'à $_!<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span></pre></div></div>
<p>Il s'agit donc d'une boucle foreach mais écrite avec un for.
</p>
<h2><span class="mw-headline" id="Contr.C3.B4les_de_boucle"><span class="mw-headline-number">11.9</span> Contrôles de boucle</span></h2>
<p>"last" permet de terminer une boucle immédiatement (comme break en C ou shell)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">while</span> <span class="br0">&#40;</span><span class="re4">&lt;STDIN&gt;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw1">if</span> <span class="br0">&#40;</span><span class="co2">/_END_/</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">last</span><span class="sy0">;</span>
   <span class="br0">&#125;</span> <span class="kw1">elsif</span> <span class="br0">&#40;</span><span class="co2">/fred/</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw3">print</span><span class="sy0">;</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Dès qu'une ligne comporte le repère "__END__", la boucle se termine.
</p>
<h2><span class="mw-headline" id="next"><span class="mw-headline-number">11.10</span> next</span></h2>
<p>Parfois, vous n'êtes pas préparé à ce que la boucle se termine, mais vous avez terminé l'itération en cours. C'est là que "next" intervient&#160;! Il saute vers l'intérieur du bas de la boucle, puis il passe à l'itération suivante de la boucle&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">while</span> <span class="br0">&#40;</span><span class="sy0">&lt;&gt;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="kw3">split</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="co1"># divise $_ en mots, en affectant chacun à $_ ) tour de rôle</span>
      <span class="re0">$total</span><span class="sy0">++;</span>
      <span class="kw1">next</span> <span class="kw1">if</span> <span class="co2">/\W/</span><span class="sy0">;</span> <span class="co1"># les mots étranges sautent le reste de la boucle</span>
      <span class="re0">$valides</span><span class="sy0">++;</span>
      <span class="re0">$compte</span><span class="br0">&#123;</span><span class="co5">$_</span><span class="br0">&#125;</span><span class="sy0">++;</span> <span class="co1"># compte chaque mot individuel</span>
      <span class="co1">## next conduit ici ##</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw3">print</span> <span class="st0">&quot;totalité = $total, mots valides = $valides<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="re0">$mot</span> <span class="br0">&#40;</span><span class="kw3">sort</span> <span class="kw3">keys</span> <span class="re0">%compte</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;$mot a été rencontré $compte{$mot} fois.<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="redo"><span class="mw-headline-number">11.11</span> redo</span></h2>
<p>Redo indique de revenir au début du bloc de la boucle en cours sans allez plus loin dans la boucle&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@mots</span> <span class="sy0">=</span> <span class="kw3">qw</span><span class="br0">&#123;</span> toto tata titi<span class="br0">&#125;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$erreurs</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
&#160;
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">@mots</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="co1">## redo revient ici ##</span>
   <span class="kw3">print</span> <span class="st0">&quot;Saisir le mot '$_': &quot;</span><span class="sy0">;</span>
   <span class="kw3">chomp</span><span class="br0">&#40;</span><span class="kw1">my</span> <span class="re0">$essai</span> <span class="sy0">=</span> <span class="re4">&lt;STDIN&gt;</span><span class="br0">&#41;</span><span class="sy0">;</span>
   <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$essai</span> <span class="kw1">ne</span> <span class="co5">$_</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw3">print</span> <span class="st0">&quot;Désolé - Il y a une erreur.<span class="es0">\n</span><span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
      <span class="re0">$erreurs</span><span class="sy0">++;</span>
      <span class="kw1">redo</span><span class="sy0">;</span> <span class="co1"># retourne en haut de la boucle</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw3">print</span> <span class="st0">&quot;Vous avez terminé le test avec $erreurs erreurs.<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Un petit test pour bien comprendre&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">..</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Itération numéro $_.<span class="es0">\n</span><span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Choisissez&#160;: last, next, redo ou aucun&quot;</span><span class="sy0">;</span>
   <span class="kw3">chomp</span><span class="br0">&#40;</span><span class="kw1">my</span> <span class="re0">$choix</span> <span class="sy0">=</span> <span class="re4">&lt;STDIN&gt;</span><span class="br0">&#41;</span><span class="sy0">;</span>
   <span class="kw3">print</span> <span class="st0">&quot;<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
   <span class="kw1">last</span> <span class="kw1">if</span> <span class="re0">$choix</span> <span class="sy0">=~</span> <span class="co2">/last/i</span><span class="sy0">;</span>
   <span class="kw1">next</span> <span class="kw1">if</span> <span class="re0">$choix</span> <span class="sy0">=~</span> <span class="co2">/next/i</span><span class="sy0">;</span>
   <span class="kw1">redo</span> <span class="kw1">if</span> <span class="re0">$choix</span> <span class="sy0">=~</span> <span class="co2">/redo/i</span><span class="sy0">;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Ce n'était aucun des choix... enavant&#160;!<span class="es0">\n</span><span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw3">print</span> <span class="st0">&quot;C'est fini, les gars&#160;!<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Blocs_libell.C3.A9s"><span class="mw-headline-number">11.12</span> Blocs libellés</span></h2>
<p>Les bloc libellés servent à travailler avec des bloc de boucles. Il sont faits de lettres, de caractères de soulignement, de chiffres mais ne peuvent commencer par ces derniers. Il est conseillé de les nommer avec des majuscules. En réalité, les libellés sont rares. Mais voici un exemple&#160;:
</p>
<pre><b>LIGNE: while (&lt;&gt;) {</b>
      foreach (split) {
         last LIGNE if /__END__/; # sort de la bocle LIGNE
         ...;
      }
}
</pre>
<h2><span class="mw-headline" id="Op.C3.A9rateurs_logiques"><span class="mw-headline-number">11.13</span> Opérateurs logiques</span></h2>
<p>Comme en shell&#160;:
</p>
<ul><li> &amp;&amp; (AND)&#160;: exécute ce qui suit, si la condition précédente est vraie. Permet aussi de dire que l'expression d'avant et celle qui va suivre doivent être validée pour effectuer ce qui suit.</li>
<li> || (NOR)&#160;: exécute ce qui suit, si la condition précédente est fausse. Permet aussi de dire que si l'expression d'avant ne corresponds pas, la suivant doit correspondre pour pouvoir poursuivre.</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$dessert</span><span class="br0">&#123;</span><span class="st_h">'gateau'</span><span class="br0">&#125;</span> <span class="sy0">&amp;&amp;</span> <span class="re0">$dessert</span><span class="br0">&#123;</span><span class="st_h">'glace'</span><span class="br0">&#125;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="co1"># Les deux sont vrais</span>
   <span class="kw3">print</span> <span class="st0">&quot;Houra&#160;! Gâteau et glace&#160;!<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">elsif</span> <span class="br0">&#40;</span><span class="re0">$dessert</span><span class="br0">&#123;</span><span class="st_h">'gateau'</span><span class="br0">&#125;</span> <span class="sy0">||</span> <span class="re0">$dessert</span><span class="br0">&#123;</span><span class="st_h">'glace'</span><span class="br0">&#125;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="co1"># Au moins l'un est vrai</span>
   <span class="kw3">print</span> <span class="st0">&quot;C'est toujours bon...<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
   <span class="co1"># Aucun n'est vrai</span>
<span class="br0">&#125;</span></pre></div></div>
<p>On peut également écrire comme ceci&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">$heure</span> <span class="sy0">=</span> <span class="nu0">3</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span> <span class="br0">&#40;</span><span class="nu0">9</span> <span class="sy0">&lt;=</span> <span class="re0">$heure</span><span class="br0">&#41;</span> <span class="sy0">&amp;&amp;</span> <span class="br0">&#40;</span><span class="re0">$heure</span> <span class="sy0">&lt;</span> <span class="nu0">18</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Tu devrais pas bosser là&#160;?<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Ils sont également appellés opérateurs court-circuits, car dans l'exemple ci dessous, il faut que l'opérateur de gauche vérifie celui de droite pou ne pas qu'il fasse une division par 0&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span> <span class="br0">&#40;</span><span class="re0">$n</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="sy0">&amp;&amp;</span> <span class="br0">&#40;</span><span class="re0">$total</span><span class="sy0">/</span><span class="re0">$n</span> <span class="sy0">&lt;</span> <span class="nu0">5</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;La moyene est inférieur à 5.<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p><b>Contrairement aux autres languages, la valeur d'un opérateur court-circuit est la dernière partie évaluée, non une valeur booléenne simple.</b>
</p>
<h2><span class="mw-headline" id="Op.C3.A9rateur_ternaire"><span class="mw-headline-number">11.14</span> Opérateur ternaire</span></h2>
<pre>expression&#160;? expr_si_vrai&#160;: expr_si_faux
</pre>
<p>L'opérateur ternaire ressemble à un if-then-else. On cherche d'abord si l'expression vaut vrai ou faux&#160;:
</p>
<ul><li> Si elle est vrai, la 2ème expression est utilisée, sinon la troisième. A chaque fois, l'une des 2 expressions de droite est évaluée et l'autre ignorée. </li>
<li> Si la première expression vaut vrai la 2ème est évaluée et la 3ème ignorée.</li>
<li> Si la 1ère faut faux, la 2ème est ignorée et la 3ème évaluée comme valeur de l'ensemble.</li></ul>
<pre>my $place = &amp;est_weekend($jour)&#160;? "maison"&#160;: "travail";
</pre>
<p>Voici un autre exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$moyenne</span> <span class="sy0">=</span> <span class="re0">$n</span> <span class="sy0">?</span> <span class="br0">&#40;</span><span class="re0">$total</span><span class="sy0">/</span><span class="re0">$n</span><span class="br0">&#41;</span> <span class="sy0">:</span> <span class="st0">&quot;Pas de moyenne&quot;</span><span class="sy0">;</span>
<span class="kw3">print</span> <span class="st0">&quot;Moyenne&#160;: $moyenne<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Un exemple un peu plus élégant&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$size</span> <span class="sy0">=</span>
   <span class="br0">&#40;</span><span class="re0">$width</span> <span class="sy0">&lt;</span> <span class="nu0">10</span><span class="br0">&#41;</span> <span class="sy0">?</span> <span class="st0">&quot;petit&quot;</span> <span class="sy0">:</span>
   <span class="br0">&#40;</span><span class="re0">$width</span> <span class="sy0">&lt;</span> <span class="nu0">20</span><span class="br0">&#41;</span> <span class="sy0">?</span> <span class="st0">&quot;moyen&quot;</span> <span class="sy0">:</span>
   <span class="br0">&#40;</span><span class="re0">$width</span> <span class="sy0">&lt;</span> <span class="nu0">50</span><span class="br0">&#41;</span> <span class="sy0">?</span> <span class="st0">&quot;grand&quot;</span> <span class="sy0">:</span>
                   <span class="st0">&quot;très grand&quot;</span><span class="sy0">;</span> <span class="co1"># Par défaut</span></pre></div></div>
<p>Un dernier exemple&#160;:
</p>
<pre>($a &lt; $b)&#160;? ($a = $c)&#160;: ($b = $c);
</pre>
<h1><span class="mw-headline" id="Handles_et_tests_de_fichiers"><span class="mw-headline-number">12</span> Handles et tests de fichiers</span></h1>
<p>Les handles de fichiers sont nommés comme les autres identificateurs Perl (avec des lettres, chiffres et des caractères de soulignement, sans pouvoir commencer par un chiffre) mais dans la mesure où ils ne comportent pas de préfixe, ils peuvent être confondus avec des mots réservés actuels ou futurs. Il est donc conseillé d'utiliser que des lettres majuscules pour le nom d'un handle de fichier.
</p><p>Il existe aujourd'hui 6 noms de handles de fichiers utilisés par Perl pour son propre usage&#160;:
</p>
<ul><li> STDIN</li>
<li> STDOUT</li>
<li> STDERR</li>
<li> DATA</li>
<li> ARGV</li>
<li> ARGVOUT</li></ul>
<p>Vous verrez peut être ces handles écris en minuscule dans certains scripts, mais cela ne fonctionne pas toujours, c'est pourquoi il est conseillé de tout mettre en majuscules.
</p><p>La sortie d'un programme s'appelle le STDOUT, et nous allons voir comment rediriger cette sortie. Vous pouvez jetter un oeil sur la <a rel="nofollow" class="external text" href="http://perldoc.perl.org/perlport.html">documentation Perlport</a>.
</p>
<h2><span class="mw-headline" id="Lancements_de_programmes"><span class="mw-headline-number">12.1</span> Lancements de programmes</span></h2>
<p>Voici 2 façons de lire votre programme&#160;:
</p>
<pre>$ ./mon_soft &lt;toto&gt;titi
</pre>
<p>Ceci va lire l'entrée toto et envoyer la sortie vers titi.
</p>
<pre>$ cat toto | ./mon_soft | grep truc
</pre>
<p>Ceci va prendre l'entrée toto, l'envoyer dans mon soft et grepper la sortie de mon soft.
</p><p>Pour la redirection des erreurs&#160;:
</p>
<pre>$ ps aux | ./mon_soft 2&gt;/var/log/mon_soft.err
</pre>
<h2><span class="mw-headline" id="Ouverture_d.27un_handle"><span class="mw-headline-number">12.2</span> Ouverture d'un handle</span></h2>
<p>Voici comment ouvrir des fichiers&#160;:
</p>
<pre>open FILER, "toto";
<b>open FILER, "&lt;toto";</b>
</pre>
<p>Voici 2 méthodes de lecture de fichier. Pour des raisons de sécurité, je vous conseille fortement d'utiliser la dernière méthode.
</p>
<pre>open FILEW, "&gt;titi";
</pre>
<p>Ceci est pour l'écriture dans un fichier.
</p>
<pre>open FILEW, "&gt;&gt;titi";
</pre>
<p>Ceci est aussi pour l'écriture dans un fichier, mais ajouté à la suite d'un fichier déjà existant. Voici un exemple d'utilisation&#160;:
</p>
<pre>my $sortie_soft = "ma_sortie";
open FILE&gt;, "&gt; $sortie_soft";
</pre>
<p>Il est plus clair de faire une variable scalaire et de dire ce que nous allons faire.
</p>
<h2><span class="mw-headline" id="Fermeture_d.27un_handle"><span class="mw-headline-number">12.3</span> Fermeture d'un handle</span></h2>
<p>Pour fermer un handle de fichier, il suffit de faire&#160;:
</p>
<pre>close FILER;
</pre>
<p>Par défaut Perl fermera tous vos fichiers lorsque votre script se fermera.
</p>
<h2><span class="mw-headline" id="Probl.C3.A8mes_de_handle"><span class="mw-headline-number">12.4</span> Problèmes de handle</span></h2>
<p>Vous pouvez rencontrer des problèmes lors de l'ouverture d'un fichier, comme problème de droits ou autres. Voici un exemple pour éviter les bêtises&#160;:
</p>
<pre><b>#!/usr/bin/perl -w</b>
my $success = open LOG, "&gt;&gt;fichier_journal"; # Capture la valeur de retour
<b>unless ($success) {</b>
   # Problème d'ouverture
   ...
}
</pre>
<p>Pour une erreur fatale, on a une autre solution qui est plus courante (die)&#160;:
</p>
<pre>unless (open LOG, "&gt;&gt;fichier_journal") {
   <b>die</b> "Impossible de créer fichier_journal <b>: $!";</b>
}
</pre>
<p>Le signe "$!" sert a afficher la forme lisible de la plainte émanant du système.
</p><p>Voici <b>généralement</b> les états de retour possibles&#160;:
</p>
<ul><li> 0&#160;: tout c'est bien passé</li>
<li> 1&#160;: est une erreur de syntaxe dans les arguments</li>
<li> 2&#160;: est une erreur produite au cours du traitement</li>
<li> 3&#160;: le fichier n'a pas été trouvé</li></ul>
<p>"$!" peut afficher les numéros de lignes d'erreurs. Si vous n'en voulez pas, il faut écrire de la sorte&#160;:
</p>
<pre>die "Problème\n" if @ARGV &lt; 2;
</pre>
<p>Cette ligne va analyser le nombre d'arguments. Si il est supérieur à 2 ce programme se terminera.
</p><p>Nous pouvons également faire comme ceci, qui est la solution la plus utilisée&#160;:
</p>
<pre>open LOG, "&gt;&gt;fichier_journal" or die "Impossible de créer le fichier_journal&#160;: $!";
</pre>
<p>Vous pouvez également remplacer "or" par "||", mais il faudra alors utiliser open avec des parenthèses.
</p><p>Note&#160;: Il est possible d'utiliser "||" à la place d'"or", cependant, c'est un code plus ancien qui utilisera parfois l'opérateur de la précédence plus élevée. La seule différence, est que lorsqu'"open" est écrit sans paranthèses, l'opérateur de précédence élevée sera relié à l'argument du nom de fichier, non à la valeur de retour. Donc la valeur de retour de open n'est pas vérifiée après coup. Si vous utilisez ||, prenez soin d'indiquer les parenthèses. L'idéale reste d'utiliser "or" pour ne pas rencontrer d'effets non souhaités.
</p>
<h2><span class="mw-headline" id="Lecture_d.27un_bloc_de_texte"><span class="mw-headline-number">12.5</span> Lecture d'un bloc de texte</span></h2>
<p>Il peut arriver d'avoir besoin de lire un bloc de texte pour l'interpréter ensuite. L'idée est de faire la saisie, puis un CTRL+D ensuite pour dire que l'on a finit la saisie. Voici comment procéder&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@userinput</span> <span class="sy0">=</span> <span class="re4">&lt;STDIN&gt;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">@userinput</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw3">print</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Avertissements_avec_warn"><span class="mw-headline-number">12.6</span> Avertissements avec warn</span></h2>
<p>Vous pouvez utiliser <i>warn</i> tout comme <i>die</i> sauf qu'au lieu de quitter radicalement l'application, il vous donnera un message d'avertissement.
</p>
<h2><span class="mw-headline" id="Utilisation_des_handles_de_fichiers"><span class="mw-headline-number">12.7</span> Utilisation des handles de fichiers</span></h2>
<p>Après avoir ouvert un fichier en lecture, on peut lire les lignes comme si c'était l'entrée standart STDIN&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">open</span> PASSWD<span class="sy0">,</span> <span class="st0">&quot;/etc/passwd&quot;</span> <span class="kw1">or</span> <span class="kw3">die</span> <span class="st0">&quot;Comment êtes vous connecté&#160;? ($!)&quot;</span><span class="sy0">;</span>
&#160;
<span class="kw1">while</span> <span class="br0">&#40;</span><span class="re4">&lt;PASSWD&gt;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">chomp</span><span class="sy0">;</span>
   <span class="kw1">if</span> <span class="br0">&#40;</span><span class="co2">/^root:/</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw3">print</span> <span class="st0">&quot;root a été trouvé&#160;!!!&quot;</span><span class="sy0">;</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>On peut également ajouter à la fin d'un fichier&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">open</span> RC_LOCAL<span class="sy0">,</span> <span class="st0">&quot;&gt;&gt; /etc/rc.local&quot;</span> <span class="kw1">or</span> <span class="kw3">die</span> <span class="st0">&quot;Ce fichier n'existe pas&#160;! ($!)&quot;</span><span class="sy0">;</span>
&#160;
<span class="kw1">while</span> <span class="br0">&#40;</span><span class="re4">&lt;RC_LOCAL&gt;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">chomp</span><span class="sy0">;</span>
   <span class="kw3">print</span> RC_LOCAL <span class="st0">&quot;/usr/sbin/nrpe -d<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Ici le contenu du print est ajouté à la suite du rc.local. Autre exemple pour une erreur&#160;:
</p>
<pre>printf STDERR "%d pourcent atteint.\n", $fait/$total * 100;
</pre>
<h2><span class="mw-headline" id="Les_HEREDOC"><span class="mw-headline-number">12.8</span> Les HEREDOC</span></h2>
<p>Les HEREDOC servent à inclure un texte de plusieurs lignes littéralement dans le programme, la syntaxe est la suivante&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$string</span> <span class="sy0">=</span> <span class="co4">&lt;&lt;&quot;ENDOFTEXT&quot;;
Ceci est un HEREDOC
On peut passer à la ligne sans problème, 
pour terminer le HEREDOC, il faut mettre 
le marqueur de fin (ici ENDOFTEXT)
tout seul sur une ligne, et vraiment tout seul&#160;!
    ENDOFTEXT
par exemple le HEREDOC n'est pas encore fini, 
car il y avait des espaces avant le marqueur.
ENDOFTEXT</span>
&#160;
<span class="kw3">print</span> <span class="re0">$string</span><span class="sy0">;</span> <span class="co1"># nous sommes de nouveau dans du code Perl</span></pre></div></div>
<p>Il y a des subtilités, par exemple pour une chaine entre apostrophes (quote '), les variables ne sont pas interpolés tandis que quand on la mets entre guillemets (double quote ") les variables sont interpolés&#160;!<br />
Et bien pour un HEREDOC, le comportement des variables est déterminé par ce que tu mets autour du marqueur&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$hello</span> <span class="sy0">=</span> <span class="st0">&quot;Hello world&quot;</span><span class="sy0">;</span>
<span class="kw3">print</span> <span class="co4">&lt;&lt;&quot;EOD&quot;;
Ceci est un HEREDOC avec interpolation&#160;:
$hello
EOD</span>
&#160;
<span class="kw3">print</span> <span class="co4">&lt;&lt;'EOD';
Ceci est un HEREDOC sans interpolation&#160;:
$hello
EOD</span></pre></div></div>
<h2><span class="mw-headline" id="Remplacement_du_handle_de_fichier_de_sortie_par_d.C3.A9faut"><span class="mw-headline-number">12.9</span> Remplacement du handle de fichier de sortie par défaut</span></h2>
<p>Par défaut, printf s'imprime sur la sortie par défaut. La sortie par défaut peut être modifiée avec l'opérateur select.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">select</span> LOG<span class="sy0">;</span>
<span class="kw3">print</span> <span class="st0">&quot;This is my log file<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw3">print</span> <span class="st0">&quot;ok done<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>A partir du moment où vous avez sélectionné un handle de fichier comme sortie par défaut, il le rete (pour plus d'infos man perlfunc).
</p><p>Egalement par défaut, la sortie d'un handle de fichier est tamponnée. En initialisant la variable spéciale "$|" à 1, vous paramètrez le fichier sélectionné (celui sélectionné au moment où la variable est modifiée) de sorte que le tampon soit toujours vidé après chaque opération de sortie. Ainsi, pour être certain que le fichier journal recevra immédiatement toutes ses entrées (pour le cas où vous liriez le journal pour surveiller l'avancement d'un long programme) vous pouvez par exemple écrirer&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">select</span> LOG<span class="sy0">;</span>
<span class="co5">$|</span> <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span> <span class="co1"># ne pas laisser les entrées de LOG dansle tampon</span>
<span class="kw3">select</span> <span class="kw2">STDOUT</span><span class="sy0">;</span>
<span class="co1"># blablabla...</span>
<span class="kw3">print</span> LOG <span class="st0">&quot;ceci est écris dans LOG une fois&#160;!<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="R.C3.A9ouvertre_d.27un_handle_de_fichier_standart"><span class="mw-headline-number">12.10</span> Réouvertre d'un handle de fichier standart</span></h2>
<p>Si vous avez déjà ouvert un handle (ouvrir un LOG quand un LOG est déjà ouvert), l'ancien serait automatiquement fermé. Tout comme vous ne pouvez pas utilisez les 6 standards (sauf cas exceptionnel). Les messages tels que warn ou die iront directement dans STDERR.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">open</span> <span class="kw2">STDERR</span><span class="sy0">,</span> <span class="st0">&quot;&gt;&gt;/home/pmavro/erreurs&quot;</span> <span class="kw1">or</span> <span class="kw3">die</span> <span class="st0">&quot;Problème d'ouverture de fichier&#160;: $!<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Tests_de_fichiers"><span class="mw-headline-number">12.11</span> Tests de fichiers</span></h2>
<p>Peut être que vous aimeriez savoir comment vérifier si un fichier existe, son age ou autre&#160;:
</p>
<pre>die "Désolé le fichier existe déja\n" if -e $mon_fichier;
</pre>
<p>Vous pouvez voir que nous n'avons pas mis ici $!, car ce n'est pas le système qui a refusé une requête, mais bien mon fichier qui existe déjà. Pour une actualisation régulière, si vous souhaitez vérifier un fichier n'est pas plus vieux que 4 jours&#160;:
</p>
<pre>warn "Le fichier de config est trop vieux\n" if -M CONFIG &gt; 4;
</pre>
<p>Pour les habitués du find, ceci va vous plaire, imaginons que nous ne voulons pas les fichiers supérieurs à 100k, nous le déplaçons dans un dossier que si il est inutilisé depuis au - 90 jours&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@original_files</span> <span class="sy0">=</span> <span class="co2">qw/ toto titi tata tutu tete /</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">@big_old_files</span><span class="sy0">;</span> <span class="co1"># Ce que nous voulons transférer dans le vieux dossier</span>
<span class="kw1">foreach</span> <span class="kw1">my</span> <span class="re0">$my_files</span> <span class="br0">&#40;</span><span class="re0">@original_files</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">push</span> <span class="re0">@big_old_files</span><span class="sy0">,</span> <span class="co5">$_</span> <span class="kw1">if</span> <span class="sy0">-</span><span class="kw3">s</span> <span class="re0">$my_files</span> <span class="sy0">&gt;</span> <span class="nu0">100</span>_000 <span class="kw1">and</span> <span class="sy0">-</span>A <span class="re0">$my_files</span> <span class="sy0">&gt;</span> <span class="nu0">90</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Voici donc les possibilitées&#160;:<br />
<a href="./File:Files_tests_perl.png.html" class="image"><img alt="Files tests perl.png" src="images/f/f9/Files_tests_perl.png" width="724" height="590" /></a><br />
Les tests -r, -w, -x et -o ne fonctionneront que sur l'utilisateur qui exécute le script Perl. Attention également toute fois avec certaines limitations système, comme le -w qui n'empeche pas d'écrire, seulement si c'est sur un CD du faite qu'il soit monté en lecture seule.
</p><p>Autrechose auquel il faut faire attention, c'est les liens symboliques qui peuvent tromper. C'est pourquoi, il vaudrait mieux tester la présence d'un lien symbolique avant de tester ce qui vous intéresse.
</p><p>Pour les recherches au niveau du temps, il est possible qu'il y ai des virgules flottantes ainsi que des nombres négatifs (si l'exécution est toujours en cours par exemple).
</p><p>Le test -t renvoie true si le handle est un TTY. Il est capable d'être interractif avec l'utilisateur avec par exemple un "-t STDIN".
</p><p>Pour le -r, si vous oubliez de spécifier un fichier, ce sera $_ qui sera prit en compte.
</p><p>Si vous souaitez transformer un taille en Ko attention à bien mettre les parenthèses&#160;:
</p>
<pre>my $taille_en_Ko = <b>(</b>-s<b>)</b> / 1024;
</pre>
<h2><span class="mw-headline" id="Les_fonctions_stat_et_lstat"><span class="mw-headline-number">12.12</span> Les fonctions stat et lstat</span></h2>
<p>Stat permet d'obtenir un grand nombre d'informations sur un fichier&#160;:
</p>
<pre>my ($dev, $ino, $mode, $nlink, $uid, $gid, $rdev, $size, $atime, $mtime, $ctim, $blksize, $blocks) = stat($nom_de_fichier);
</pre>
<ul><li> $dev&#160;: Numéro de périphérique</li>
<li> $ino&#160;: Numréo de l'inode</li>
<li> $mode&#160;: Donne les droits du fichiers tel que 'un ls -l donnerait</li>
<li> $nlink&#160;: Nombre de liens hard. Vaut toujours 2 ou + pour les dossiers et 1 pour les fichiers.</li>
<li> $uid&#160;: User ID</li>
<li> $gid&#160;: Group ID</li>
<li> $size&#160;: la taille du fichier en octet (comme -s)</li>
<li> $atime&#160;: Equivalent à -A</li>
<li> $mtime&#160;: Equivalent à -M</li>
<li> $ctime&#160;: Equivalent à -C</li></ul>
<p>L'invocation de stat sur un lien symbolique renvoie des infos sur le fichier originale. Pour obtenir des informations sur le lien symbolique, vous pouvez utiliser lstat. Cependant, si il n'y aucunes infos, cela vous donnera les infos du fichier originale à la place.
</p>
<h2><span class="mw-headline" id="Localtime"><span class="mw-headline-number">12.13</span> Localtime</span></h2>
<p>Cette fonction permet de convertir l'heure unix en heure humainement lisible&#160;:
</p>
<pre>my $marque_horaire = 19934309;
my $date = localtime $marque_horaire;
</pre>
<p>ou bien&#160;:
</p>
<pre>my($sec, $min, $hour, $day, $mon, $year, $wday, $yday, $isdst) = localtime $marque_horaire
</pre>
<p>Pour l'heure GMT, vous pouvez utiliser la fonction gmtime&#160;:
</p>
<pre>my $maintenant = gmtime;
</pre>
<p>Si vous voulez un exemple concret par exemple pour ne pas pouvoir lancer un script durant des heures de production&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">sub</span> production_time_check
<span class="br0">&#123;</span>
	<span class="kw1">my</span> <span class="br0">&#40;</span><span class="re0">$sec</span><span class="sy0">,</span><span class="re0">$min</span><span class="sy0">,</span><span class="re0">$hour</span><span class="sy0">,</span><span class="re0">$mday</span><span class="sy0">,</span><span class="re0">$mon</span><span class="sy0">,</span><span class="re0">$year</span><span class="sy0">,</span><span class="re0">$wday</span><span class="sy0">,</span><span class="re0">$yday</span><span class="sy0">,</span><span class="re0">$isdst</span><span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw3">localtime</span><span class="br0">&#40;</span><span class="kw3">time</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#123;</span>
		<span class="kw1">if</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><span class="re0">$hour</span> <span class="sy0">&gt;=</span> <span class="nu0">8</span><span class="br0">&#41;</span> <span class="kw1">and</span> <span class="br0">&#40;</span><span class="re0">$hour</span> <span class="sy0">&lt;=</span> <span class="nu0">18</span><span class="br0">&#41;</span> <span class="kw1">and</span> <span class="br0">&#40;</span><span class="re0">$wday</span> <span class="sy0">&gt;=</span> <span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">and</span> <span class="br0">&#40;</span><span class="re0">$wday</span> <span class="sy0">&lt;=</span> <span class="nu0">5</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
		<span class="br0">&#123;</span>
			<span class="kw3">exit</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
		<span class="kw1">else</span>
		<span class="br0">&#123;</span>
			<span class="kw3">print</span> <span class="st0">&quot;You can continue&#160;:-)<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Op.C3.A9rateurs_bits_.C3.A0_bits"><span class="mw-headline-number">12.14</span> Opérateurs bits à bits</span></h2>
<p>Ceci est utile pour faire des calculs binaires, comme par exemple les les valeurs retournées par la fonction stat&#160;:
</p><p><a href="./File:Operateur_bit_a_bit.png.html" class="image"><img alt="Operateur bit a bit.png" src="images/9/93/Operateur_bit_a_bit.png" width="1045" height="150" /></a>
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co1"># $mode est la valeur de mode renvoyée par une stat de CONFIG</span>
<span class="kw3">warn</span> <span class="st0">&quot;The configuration file is world-writable!<span class="es0">\n</span>&quot;</span> <span class="kw1">if</span> <span class="re0">$mode</span> <span class="sy0">&amp;</span> 0002<span class="sy0">;</span> <span class="co1"># problème de sécurité de configuration</span>
<span class="kw1">my</span> <span class="re0">$classical_mode</span> <span class="sy0">=</span> 0777 <span class="sy0">&amp;</span> <span class="re0">$mode</span><span class="sy0">;</span>                <span class="co1"># masque les bits supérieurs supplémentaires</span>
<span class="kw1">my</span> <span class="re0">$u_plus_x</span> <span class="sy0">=</span> <span class="re0">$classical_mode</span> <span class="sy0">|</span> 0100<span class="sy0">;</span>            <span class="co1"># active 1 bit</span>
<span class="kw1">my</span> <span class="re0">$go_minus_r</span> <span class="sy0">=</span> <span class="re0">$classical_mode</span> <span class="sy0">&amp;</span> <span class="br0">&#40;</span><span class="sy0">~</span> 0044<span class="br0">&#41;</span><span class="sy0">;</span>      <span class="co1"># désactive 2 bits</span></pre></div></div>
<h2><span class="mw-headline" id="Utilisation_du_handle_de_fichier_sp.C3.A9ciale_.22_.22"><span class="mw-headline-number">12.15</span> Utilisation du handle de fichier spéciale "_"</span></h2>
<p>A chaque utilisation de stat et lstat on fait 2 appels systèmes&#160;:
</p>
<ul><li> 1&#160;: savoir s'il est possible de lire</li>
<li> 2&#160;: savoir s'il est possible d'écrire</li></ul>
<p>Or on perd du temps lorsqu'on fait des demandes au système. Le but est donc de demander qu'une seule fois avec "_" et ensuite de réutiliser ceci pour obtenir les nouvelles informations. Ca a l'air un peu ridicule comme cela mais si vous faites beaucoup d'appels système, vous verrez qu'avec ceci votre programme sera nettement plus rapide&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@original_files</span> <span class="sy0">=</span> <span class="co2">qw/ fred barney betty wilma pebbles dino bamm-bamm /</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">@big_old_files</span><span class="sy0">;</span>                       <span class="co1"># Ce que nous voulons sauvegarder sur bande</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">@original_files</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw3">push</span> <span class="re0">@big_old_files</span><span class="sy0">,</span> <span class="co5">$_</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">-</span><span class="kw3">s</span><span class="br0">&#41;</span> <span class="sy0">&gt;</span> <span class="nu0">100</span>_000 <span class="kw1">and</span> <span class="sy0">-</span>A _ <span class="sy0">&gt;</span> <span class="nu0">90</span><span class="sy0">;</span>     <span class="co1"># Plus efficace que précédement</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Nous utilisons donc $_ pour le premier test ce n'est pas plus efficace, mais on obtient les infos du système d'exploitation.<br />
Ensuite nous utilisons le handle de fichier magique&#160;: "_". Les données laissées après la récupération de la taille du fichier sont utilisées. Ici nous optimisons donc les requêtes.
</p>
<h1><span class="mw-headline" id="Op.C3.A9rations_sur_les_r.C3.A9pertoires"><span class="mw-headline-number">13</span> Opérations sur les répertoires</span></h1>
<h2><span class="mw-headline" id="D.C3.A9placement_dans_l.27arborescence_des_r.C3.A9pertoires"><span class="mw-headline-number">13.1</span> Déplacement dans l'arborescence des répertoires</span></h2>
<p>Pour se déplacer (équivalent au "cd" en shell)&#160;:
</p>
<pre>chdir "/etc/" or die "Impossible de se déplacer dans /etc&#160;: $!\n";
</pre>
<p><b>Comme il s'agit d'un requête système, la valeur de $! est initialisée ne cas d'erreur.</b>
</p>
<h2><span class="mw-headline" id="Globalisation"><span class="mw-headline-number">13.2</span> Globalisation</span></h2>
<p>Voici un exemple de globalisation (en shell)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1">$ echo <span class="sy0">*.</span>pm
toto<span class="sy0">.</span>pm titi<span class="sy0">.</span>pm tata<span class="sy0">.</span>pm</pre></div></div>
<p>En perl c'est un peu kif kif en fait, imaginons nous avons un tableau avec tout un tas de fichiers&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">foreach</span> <span class="re0">$arg</span> <span class="br0">&#40;</span><span class="sy0">@</span><span class="kw2">ARGV</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;un des arguments est $arg<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>et bien voici comment en faire ressortir ce qui nous intéresse&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@tous_les_fichiers</span> <span class="sy0">=</span> <span class="kw3">glob</span> <span class="st0">&quot;*&quot;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">@fichiers_pm</span> <span class="sy0">=</span> <span class="kw3">glob</span> <span class="st0">&quot;*.pm&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Si l'on souhaites plusieurs recherches, il suffit de les séparer par des espaces&#160;:
</p>
<pre>my @tous_les_fichiers_y_compris_point = glob ".* *";
</pre>
<p>Voici un autre type de syntaxe&#160;:
</p>
<pre>my @tous_les_fichiers = &lt;*&gt;;
</pre>
<p>équivalent à&#160;:
</p>
<pre>my @tous_les_fichiers = glob "*";
</pre>
<p>autre exemple qui se passe de commentaire&#160;:
</p>
<pre>my $rep = "/etc";
my @fichiers_rep = &lt;$rep/* $rep/.*&gt;;
</pre>
<h2><span class="mw-headline" id="Handles_de_r.C3.A9pertoires"><span class="mw-headline-number">13.3</span> Handles de répertoires</span></h2>
<p>Si l'on veut lister le contenu d'un dossier&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$dossier</span><span class="sy0">=</span><span class="st0">&quot;/etc&quot;</span><span class="sy0">;</span>
<span class="kw3">opendir</span> DOSSIER<span class="sy0">,</span> <span class="re0">$dossier</span> <span class="kw1">or</span> <span class="kw3">die</span> <span class="st0">&quot;Impossible d'ouvrir $dosser&#160;: $!&quot;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="re0">$fichier</span> <span class="br0">&#40;</span><span class="kw3">readdir</span> DOSSIER<span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;$fichier est dans le dossier $dossier<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw3">closedir</span> DOSSIER<span class="sy0">;</span></pre></div></div>
<p>Le résultat sera des fichiers ou dossier non triés (même les fichiers commençant par un .). Si maintenant, nous souhaitons n'obtenir que les fichiers se terminant par pm, il faudra faire comme ceci&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$nom</span> <span class="sy0">=</span> <span class="kw3">readdir</span> DIR<span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw1">next</span> <span class="kw1">unless</span> <span class="re0">$nom</span> <span class="sy0">=~</span> <span class="co2">/\.pm$/</span><span class="sy0">;</span>
   <span class="sy0">...</span>autre traitement<span class="sy0">...</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Si nous avions voulu tout saut . et ..&#160;:
</p>
<pre>next if $nom eq "." or $nom eq "..";
</pre>
<p>Maintenant, si vous souhaitez faire du récursif, alors je vous conseil la librairie <a rel="nofollow" class="external text" href="http://search.cpan.org/~rgarcia/perl-5.10.0/lib/File/Find.pm">File::find</a>.
</p>
<h1><span class="mw-headline" id="Manipulation_des_fichiers_et_des_r.C3.A9pertoires"><span class="mw-headline-number">14</span> Manipulation des fichiers et des répertoires</span></h1>
<h2><span class="mw-headline" id="Supression_de_fichiers"><span class="mw-headline-number">14.1</span> Supression de fichiers</span></h2>
<p>L'équivalent d'un rm est unlink&#160;:
</p>
<pre>unlink "fichier1", "$fichier2";
</pre>
<p>Autre exemple, avec glob&#160;:
</p>
<pre>unlink glob "*.bak";
</pre>
<p>Pour valider la suppression des fichiers&#160;:
</p>
<pre>my $success = unlink "titi", "tata", "toto";
print "Les fichiers $success on été supprimés\n";
</pre>
<p>Nous verrons ici si 0 ou 3 fichiers ont été supprimés, mais pas 1 ou 2. Il faudra faire une boucle dans le cas ou vous voulez absolument savoir&#160;:
</p>
<pre>foreach my $fichier (qw(toto tata titi)) {
   unlink $fichier or warn "Le fichier $fichier n'a pas pu etre supprimé&#160;: $!\n";
}
</pre>
<h2><span class="mw-headline" id="Renommer_des_fichiers"><span class="mw-headline-number">14.2</span> Renommer des fichiers</span></h2>
<p>Voici 2 exemples&#160;;
</p>
<pre>rename "toto", "titi";
rename "/mon/fichier/toto", "titi";
</pre>
<p>On peut également procéder avec une boucle et renommer élégament&#160;:
</p>
<pre>(my $nouveaufichier = $fichier) =~ s/\.ancien$/.nouveau/;
</pre>
<h2><span class="mw-headline" id="Liens_et_fichiers"><span class="mw-headline-number">14.3</span> Liens et fichiers</span></h2>
<p>Pour savoir quel est le fichier source d'un lien symbolique&#160;:
</p>
<pre>my $ou_ca = readlink "toto"; # Renvera tata (car en fait ln -s tata toto
</pre>
<h2><span class="mw-headline" id="Cr.C3.A9ation_et_suppression_des_r.C3.A9pertoires"><span class="mw-headline-number">14.4</span> Création et suppression des répertoires</span></h2>
<p>Pour créer un dossier c'est très simple&#160;:
</p>
<pre>mkdir "toto", 0755 or warn "Impossible&#160;: $!";
</pre>
<p>Attention parcontre si vous souhaitez affecter les droits en variable car ceci ne fonctionnera pas comme cela&#160;:
</p>
<pre>my $user = 'toto';
my $permissions = '0755';
mkdir $user, $permissions;
</pre>
<p>Et là c'est le drame car notre dossier à des droits bizzard du type 01363. Tout ça parceque la chaine est par défaut en décimale et qu'il nous faut de l'octale, pour résoudre cet épineux problème&#160;:
</p>
<pre>mkdir $user, oct($permissions);
</pre>
<p>Maintenant si nous souhaitons supprimer un dossier, c'est simple&#160;:
</p>
<pre>rmdir glob "toto/*" or warn "Sorry $!";
</pre>
<p>Ceci supprimera tous les répertoires vides dans le dossier toto. Rmdir renvoie le nombre d'éléments supprimés. Rmdir ne supprimera un répertoire que si il est vide, utilisez donc unlink avant rmdir&#160;:
</p>
<pre>unlink glob "toto/*" "toto/.*";
rmdir 'toto';
</pre>
<p>Si cette alternative vous semble trop ennuyese, utilisez le module <a rel="nofollow" class="external text" href="http://search.cpan.org/~dland/File-Path-2.07/Path.pm">File::Path</a>.
</p>
<h2><span class="mw-headline" id="D.C3.A9terminer_le_processus"><span class="mw-headline-number">14.5</span> Déterminer le processus</span></h2>
<p>Pour déterminer le processus d'exécution en cours, utilisez la variable $$. Lorsque vous créez un fichier par exemple, cela donne&#160;:
</p>
<pre>mkdir "/tmp/temp_$$";
</pre>
<h2><span class="mw-headline" id="Modification_des_permissions"><span class="mw-headline-number">14.6</span> Modification des permissions</span></h2>
<p>Pour changer les permissions, il suffit, comme en shell d'utiliser chmod&#160;:
</p>
<pre>chmod 0755, "toto", "tata";
</pre>
<p>Si vous souhaitez utiliser u+x ou ce genre de chose, reportez vous à <a rel="nofollow" class="external free" href="http://search.cpan.org/~pinyan/File-chmod-0.32/chmod.pm">http://search.cpan.org/~pinyan/File-chmod-0.32/chmod.pm</a>
</p>
<h2><span class="mw-headline" id="Changement_du_propri.C3.A9taire"><span class="mw-headline-number">14.7</span> Changement du propriétaire</span></h2>
<p>Encore une fois c'est comme en shell, on utilise chown&#160;:
</p>
<pre>my $user = 1004;
my $grp = 100;
chown $user, $grp, glob "*.o";
</pre>
<p>Si vous ne souhaitez pas utiliser l'uid et le guid pour faire le changement et préférez des noms, alors faite comme ceci&#160;:
</p>
<pre>defined(my $user = getpwnam "toto") or die "mauvais utilisateur";
defined(my $grp = getgrnam "users") or die "mauvais groupe";
chown $user, $grp, glob "/home/toto/*";
</pre>
<p>Le fonction defined vérifie que la valeur de retour n'est pas undef.
</p>
<h2><span class="mw-headline" id="Modification_de_la_date_et_de_l.27heure"><span class="mw-headline-number">14.8</span> Modification de la date et de l'heure</span></h2>
<p>Il arrive parfois que l'on veuille mentir à certains programmes, voici comment changer l'heure d'accès et de modification&#160;:
</p>
<pre>my $now = time;
my $before = now - 24 * 60 * 60 # secondes par jour
utime $now, $before, glob "*"; # initialise l'accès à maintenant, modifié de la veille
</pre>
<p>Ceci peut être très pratique en cas de problèmes sur des sauvegardes.
</p>
<h2><span class="mw-headline" id="Le_module_File::Basename"><span class="mw-headline-number">14.9</span> Le module File::Basename</span></h2>
<p>Si l'on souhaite obtenir le path d'un binaire par exemple, nous allons avoir besoin de ce module, voici comment ça fonctionne&#160;:
</p>
<pre>use File::Basename;
my $nom = "/usr/jdk/latest/bin/java";
my $nom_de_base = basename $nom; # donne 'java'
</pre>
<h2><span class="mw-headline" id="N.27utiliser_que_certaines_fonctions_d.27un_module"><span class="mw-headline-number">14.10</span> N'utiliser que certaines fonctions d'un module</span></h2>
<p>Imaginons que vous avez une fonction portant le même nom qu'une fonction d'un de vos modules. Pour ne charger que ce dont vous avez besoin, voici comment faire&#160;:
</p>
<pre>use File::Basename qw/ basename /; # Ici nous ne chargeons que la fonction basename
use File::Basename qw/ /; # Ici nous ne demandons aucunes fontions
my $perlpath = "/usr/bin/perl";
my $folder_name = File::Basename::dirname $perlpath; # Va utiliser dirname du module
</pre>
<h2><span class="mw-headline" id="Le_module_File::Spec"><span class="mw-headline-number">14.11</span> Le module File::Spec</span></h2>
<p>Avec le module File::Basename, c'est pratique, vous savez ce qu'il vous faut pour récupérer un fichier, mais si vous souhaitez récupérer le path complet où se trouve votre fichier, il faudra utiliser le module <a rel="nofollow" class="external text" href="http://search.cpan.org/~smueller/PathTools-3.29/lib/File/Spec.pm">File::Spec</a>.
</p>
<h1><span class="mw-headline" id="Gestion_des_processus"><span class="mw-headline-number">15</span> Gestion des processus</span></h1>
<p>Faire appel a des programme externe peut s'avérer très pratique quand on a pas le temps de se prendre la tête ou tout simplement quand on a pas le choix.
</p>
<h2><span class="mw-headline" id="System"><span class="mw-headline-number">15.1</span> System</span></h2>
<p>Celle ci est ma préférée, car elle permet de lancer un processus enfant de votre programme Perl. Si vous avez besoin de forker à votre programme Perl une commande, la fonction system est très pratique. Personnellement j'ai du pour la boite dans laquelle je travaille développer en Perl pour un script générique (GDS) sur SunPlex (Sun Cluster), et il me fallait forker à un moment. J'ai été ravi de voir que system le faisait.
</p><p>Il est parcontre important de comprendre que la fonction system renverra les données à STDOUT et non à votre programme Perl&#160;:
</p>
<pre>system 'ls -l $HOME';
system "ls -l \$HOME";
</pre>
<p>Notez que les apostrophes simple servent pour les valeurs du shell et les doubles apostrophes pour votre programme perl.
</p><p>Le problème de cette commande réside aussi dans la commande que vous appelée car si elle vous pose des question (comme la demande de confirmation etc..), votre programme Perl restera en attente de la fin de votre commande. Pour passez outre, rajoutez un &amp;&#160;:
</p>
<pre>system "rm -R /tmp/ &amp;";
</pre>
<p>Si vous êtes sous Windows, voici la solution à adopter&#160;:
</p>
<pre>system(1, "del c:\toto");
</pre>
<p>Là où la fonction system a été bien écrite c'est qu'elle ne nécessite pas de lancement de shell lorsque c'est une petite commande. Parcontre si elle comporte des caractères avec des $, / ou \ par exemple, alors là un shell sera lancé pour cet exécution.
</p>
<h3><span class="mw-headline" id="Eviter_le_shell"><span class="mw-headline-number">15.1.1</span> Eviter le shell</span></h3>
<p>Si vous pouvez éviter l'appel du shell, c'est pas plus mal. Voici un exmple&#160;:
</p>
<pre>my $file='toto';
my @folders=qw/titi, tata, tutu/;
<b>system "rm -Rf $file @folders"; # Et là, c'est le drame&#160;!</b>
</pre>
<p>Alors qu'il existe une façon plus "propre" ne faisant pas appel au shell&#160;:
</p>
<pre><b>system "rm", "-Rf", $file, @folders;</b>
</pre>
<p>Si maintenant, je souhaite utiliser les valeurs de retour pour voir si tout s'est bien passé&#160;:
</p>
<pre>unless (system 'ls -l') {
   print "Command has been successfully exeecuted\n";
}
</pre>
<p>ou bien
</p>
<pre>!system "rm", "-Rf", $file, @folders or die "Rm command failed\n";
</pre>
<p>Il ne sert à rien d'utiliser ici $! car Perl ne peut évaluer ce qui s'est produit puisque cela ne se situe pas dans Perl.
</p>
<h2><span class="mw-headline" id="Exec"><span class="mw-headline-number">15.2</span> Exec</span></h2>
<p>Le fonctionnement de la fonction system par rapport à exec est identique à part un point très important&#160;! En effet, elle ne créera pas de processus enfants, mais s'exécutera d'elle même.
</p><p><b>Lorsque dans votre code nous arrivons à la partie exec, il saute dans la commande et la commande prends le PID de votre programme Perl jusqu'à la fin de son exécution et rends ensuite la main (non pas à Perl, mais généralement au shell, là où vous avez lancer le script Perl).</b>
</p>
<h2><span class="mw-headline" id="Variables_d.27environnements"><span class="mw-headline-number">15.3</span> Variables d'environnements</span></h2>
<p>En Perl, il existe une table de hashage appellée&#160;%ENV contenant les variables d'environnement qui contient les valeurs héritées du shell précédent qui a été lancé.Il existe ceci&#160;:
</p>
<pre>$ENV{'PATH'} = "/usr/cluster/bin:$ENV{'PATH'}";
delete $ENV{'CVS'};
</pre>
<p>Qui va vous permettre de modifier votre PATH shell quand vous allez faire appel à des processus enfant. C'est assez pratique, mais cela ne fonctionne évidement pas pour les processus parents.
</p><p>Pour rappel sous linux, la commande pour voir les variables d'environnement est "env et sous Windows c'est "set".
</p>
<h2><span class="mw-headline" id="Utilisation_de_.60_pour_capturer_la_sortie"><span class="mw-headline-number">15.4</span> Utilisation de ` pour capturer la sortie</span></h2>
<p>Voici un exemple de ce que l'on peut faire en récupérant la sortie&#160;:
</p>
<pre>my $now = `date`;
print "La date du jour est $now";
</pre>
<p>Voici un autre exemple&#160;:
</p>
<pre>my @functions = qw( int rand sleep) {
   $documentations{$_} = `perldoc -t -f $_`;
}
</pre>
<p><b>N'ayez pas une utilisation abusive des ` car Perl doit travailler un peu plus dur pour récupérer la sortie. Si il n'y en a pas besoin, inutile de les utilisez, préférez system à celà.</b>
</p><p>Si vous souhaitez récupérer les erreurs, utilisez ceci 2&gt;&amp;1&#160;:
</p>
<pre>my $err_out = `command 2&gt;&amp;1`;
</pre>
<p>Si vous avez besoin d'utiliser une commande qui peut (sans que vous le vouliez) vous poser une question, celà posera problème. Pour éviter ce genre de désagréments, envoyez /dev/null à cette commande&#160;:
</p>
<pre>my $result = `command arg arg arg &lt;/dev/null`;
</pre>
<h2><span class="mw-headline" id="Utilisation_de_.60_dans_un_contexte_de_liste"><span class="mw-headline-number">15.5</span> Utilisation de ` dans un contexte de liste</span></h2>
<p>Si la sortie d'un programme renvoie plusieurs lignes, alors la variable contiendra toutes les lignes les unes à la suite des autres sur une seule. Par exemple avec la commande who, il est préférable d'utiliser un tableau&#160;:
</p>
<pre>my @persons = `who`;
</pre>
<p>Puis ensuite pour l'analyse&#160;:
</p>
<pre>foreach (`who`) {
   my ($user, $tty, $date) = /(\S+)\s+(\S+)\s+(.*)/;
   $ttys{$user} .= "$tty à $date\n";
}
</pre>
<p>Remarquez que lorsque =~ n'est pas présent, c'est $_ qui est automatiquement prit.
</p>
<h2><span class="mw-headline" id="Processus_en_tant_que_handles_de_fichiers"><span class="mw-headline-number">15.6</span> Processus en tant que handles de fichiers</span></h2>
<p>J'aime beaucoup cette manière de faire, car elle me parait être la plus claire. Il faut donc opérer comme si c'était un fichier et ne pas omettre un | à la fin de votre commande&#160;:
</p>
<pre>open (DATE, "date |") or die "Impossible d'ouvrir le tube à partir de date&#160;: $!"\n;
close (DATE);
</pre>
<p>Vous pouvez également mettre le | de l'autre côté&#160;:
</p>
<pre>open (MAIL, "|mail -s deimos \"Ceci est un test\"") or die "Impossible d'ouvrir le tube vers&#160;: $!\n";
close (MAIL);
</pre>
<p>Il n'y a même pas besoin d'aller jusque là d'ailleur pour faire ceci, un simple print ira&#160;:
</p>
<pre>my $now = &lt;DATE&gt;;
print MAIL "Il est maintenant $now";
close MAIL;
</pre>
<p>Cette utilisation (avec open) est plus complex à utiliser qu'avec des `, cependant, elle permet d'avoir un résultat arrivant au fur et à mesure. Ce que je vous dis à du sens avec la commande find par exemple, qui donne petit à petit ses résultats. Cela vous permet d'analyser et traiter en temps réèl alors qu'avec les ` il faudrait attendre la fin de la commande find pour traiter&#160;:
</p>
<pre>open F, "find / -atime +90 -size +1000 -print|" or die "fork impossible&#160;: $!";
while (&lt;F&gt;) {
   chomp $_;
   printf "%s taille&#160;%dk dernier accès&#160;%s\n", $_, (1023 + -s $_)/1024, -A $_;
}
</pre>
<h2><span class="mw-headline" id="Utilisation_de_fork"><span class="mw-headline-number">15.7</span> Utilisation de fork</span></h2>
<p>En plus des interfaces de haut niveaux comme ci dessus, on peut en Perl faire des appels système de bas niveau. Par exemple fork, qui est très pratique. Par exemple ceci&#160;:
</p>
<pre>system "date";
</pre>
<p>en version forkée donne&#160;:
</p>
<pre>defined(my $pid = fork) or die "fork impossible&#160;: $!";
unless ($pid)  {
   # Le processus enfant&#160;:
   exec "date";
   die "Impossible d'exécuter date&#160;: $!";
}
# Le processus parent est&#160;:
waitpid($pid, 0);
</pre>
<p>Le 0 signifie que le PID ne doit pas être 0.
</p><p>Si vous souhaitez plus d'informations, consultez le manuel perlipc.
</p>
<h2><span class="mw-headline" id="Emissions_et_r.C3.A9ceptions_de_signaux"><span class="mw-headline-number">15.8</span> Emissions et réceptions de signaux</span></h2>
<p>Les différents signaux sont identifiés par un nom (par exemple SIGINT, pour "signal d'interruption") et un entier (allant de 1 à 16, 1 à 32 ou 1 à 63, selon votre mouture d'Unix). Par exemple, si nous souhaitons envoyer un SIGHINT&#160;: 
</p>
<pre>kill 2, 3094 or die "Impossible d'envoyer un SIGHINT&#160;: $!";
</pre>
<p>Le numéro du PID est ici 3094 et vous pouvez changer 2 par INT si vous le souhaitez. Faites attentions aux droits, car si vous n'avez pas les autorisations pour killer le processus, vous aurez une erreur.
</p><p>Si le processus n'existe plus, vous aurez un retour à <i>false</i>, <b>ce qui vous permet de savoir si le processus est toujours en cours d'utilisation ou non.</b>
</p><p>Si vous souhaitez simplement vérifier si un processus est en vie ou non, vous pouvez le tester avec un kill 0&#160;:
</p>
<pre>unless (kill 0, $PID) {
   warn "$PID n'existe pas\n";
}
</pre>
<p>L'intercepetion de signaux peut paraitre plus intéresasnte que l'envoie. Par exemple si quelqu'un fait un Ctrl+C sur votre programme et que vous avez des fichiers temporaires qui existent encore, peut être souhaiteriez vous que ces fichiers soient supprimés de toutes façons. Voici comment procéder&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$temp</span> <span class="sy0">=</span> <span class="st0">&quot;/tmp/mysoft.$$&quot;</span><span class="sy0">;</span>
<span class="kw3">mkdir</span> <span class="re0">$temp</span><span class="sy0">,</span> 0700 <span class="kw1">or</span> <span class="kw3">die</span> <span class="st0">&quot;Impossible de créer $temp&#160;: $!&quot;</span><span class="sy0">;</span>
&#160;
<span class="kw2">sub</span> flush <span class="br0">&#123;</span>
   <span class="kw3">unlink</span> <span class="kw3">glob</span> <span class="st0">&quot;$temp/*&quot;</span><span class="sy0">;</span>
   <span class="kw3">rmdir</span> <span class="re0">$temp</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw2">sub</span> my_manager_int <span class="br0">&#123;</span>
   <span class="re0">&amp;flush</span><span class="sy0">;</span>
   <span class="kw3">die</span> <span class="st0">&quot;Interrupted, exit...<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="re0">$SIG</span><span class="br0">&#123;</span><span class="st_h">'QUIT'</span><span class="br0">&#125;</span> <span class="sy0">=</span> <span class="st_h">'my_manager_int'</span><span class="sy0">;</span>
<span class="re0">$SIG</span><span class="br0">&#123;</span><span class="st_h">'INT'</span><span class="br0">&#125;</span> <span class="sy0">=</span> <span class="st_h">'my_manager_int'</span><span class="sy0">;</span>
<span class="re0">$SIG</span><span class="br0">&#123;</span><span class="st_h">'HUP'</span><span class="br0">&#125;</span> <span class="sy0">=</span> <span class="st_h">'my_manager_int'</span><span class="sy0">;</span>
<span class="re0">$SIG</span><span class="br0">&#123;</span><span class="st_h">'TERM'</span><span class="br0">&#125;</span> <span class="sy0">=</span> <span class="st_h">'my_manager_int'</span><span class="sy0">;</span>
<span class="sy0">...</span></pre></div></div>
<p>Les fichiers temporaires se créent, le programme s'exécute etc...
Et à la fin du programme on flush&#160;:
</p>
<pre>&amp;flush;
</pre>
<p>Si un Ctrl+C intervient, le programme saute directement à la section &amp;flush.
</p>
<h1><span class="mw-headline" id="Cha.C3.AEnes_et_tris"><span class="mw-headline-number">16</span> Chaînes et tris</span></h1>
<p>Lorsque nous avons besoin de chercher du texte, les regex sont très pratiques, mais peuvent s'avérer parfois trop compliquées. C'est pourquoi il existe les chaînes.
</p>
<h2><span class="mw-headline" id="Localisation_d.27une_sous-cha.C3.AEne_avec_index"><span class="mw-headline-number">16.1</span> Localisation d'une sous-chaîne avec index</span></h2>
<p>Par exemple, ici nous cherchons "mon"&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$substance</span> <span class="sy0">=</span> <span class="st0">&quot;Salut le monde&#160;!&quot;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$emplacement</span> <span class="sy0">=</span> <span class="kw3">index</span><span class="br0">&#40;</span><span class="re0">$substance</span><span class="sy0">,</span> <span class="st0">&quot;mon&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>La valeur de retour est ici 9, car il y a 9 éléments avant de trouver "mon". Si aucunes occurence n'a été trouvée, la valeur de retour sera -1.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$substance</span> <span class="sy0">=</span> <span class="st0">&quot;Salut le monde&#160;!&quot;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$emplacement1</span> <span class="sy0">=</span> <span class="kw3">index</span><span class="br0">&#40;</span><span class="re0">$substance</span><span class="sy0">,</span> <span class="st0">&quot;e&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># emplacement1 = 7</span>
<span class="kw1">my</span> <span class="re0">$emplacement2</span> <span class="sy0">=</span> <span class="kw3">index</span><span class="br0">&#40;</span><span class="re0">$substance</span><span class="sy0">,</span> <span class="st0">&quot;e&quot;</span><span class="sy0">,</span> <span class="re0">$emplacement1</span> <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># emplacement2 = 13</span>
<span class="kw1">my</span> <span class="re0">$emplacement3</span> <span class="sy0">=</span> <span class="kw3">index</span><span class="br0">&#40;</span><span class="re0">$substance</span><span class="sy0">,</span> <span class="st0">&quot;e&quot;</span><span class="sy0">,</span> <span class="re0">$emplacement2</span> <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># emplacement3 = -1</span></pre></div></div>
<p>On peut également inverser la recherche avec rindex&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$last_slash</span> <span class="sy0">=</span> <span class="kw3">rindex</span><span class="br0">&#40;</span><span class="st0">&quot;/etc/passwd&quot;</span><span class="sy0">,</span> <span class="st0">&quot;/&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># la valeur = 4</span></pre></div></div>
<p>Et enfin il existe un dernier paramètre facultatif qui permet de donner la valeur de retour maximum autorisée&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$fred</span> <span class="sy0">=</span> <span class="st0">&quot;Yabba dabba doo!&quot;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$emplacement1</span> <span class="sy0">=</span> <span class="kw3">rindex</span><span class="br0">&#40;</span><span class="re0">$fred</span><span class="sy0">,</span> <span class="st0">&quot;abba&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># emplacement1 = 7</span>
<span class="kw1">my</span> <span class="re0">$emplacement2</span> <span class="sy0">=</span> <span class="kw3">rindex</span><span class="br0">&#40;</span><span class="re0">$fred</span><span class="sy0">,</span> <span class="st0">&quot;abba&quot;</span><span class="sy0">,</span> <span class="re0">$emplacement1</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># emplacement2 = 1</span>
<span class="kw1">my</span> <span class="re0">$emplacement3</span> <span class="sy0">=</span> <span class="kw3">rindex</span><span class="br0">&#40;</span><span class="re0">$fred</span><span class="sy0">,</span> <span class="st0">&quot;abba&quot;</span><span class="sy0">,</span> <span class="re0">$emplacement2</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># emplacement3 = -1</span></pre></div></div>
<h2><span class="mw-headline" id="Manipulation_des_sous_cha.C3.AEnes_avec_substr"><span class="mw-headline-number">16.2</span> Manipulation des sous chaînes avec substr</span></h2>
<p>substr prends 3 arguements&#160;:
</p>
<ul><li> Une valeur de chaînes</li>
<li> Une emplacement initiale basé sur 0</li>
<li> La longueur de la sous chaîne</li></ul>
<p>La valeur de retour contient la sous chaîne&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$mineral</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">&#40;</span><span class="st0">&quot;Fred J. Flinstone&quot;</span><span class="sy0">,</span> <span class="nu0">8</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># obtient &quot;Flint&quot;</span>
<span class="kw1">my</span> <span class="re0">$roche</span> <span class="sy0">=</span> <span class="kw3">substr</span> <span class="st0">&quot;Fred J. Flinstone&quot;</span><span class="sy0">,</span> <span class="nu0">13</span><span class="sy0">,</span> <span class="nu0">1000</span><span class="sy0">;</span> <span class="co1"># obtient &quot;stone&quot;</span>
<span class="kw1">my</span> <span class="re0">$galet</span> <span class="sy0">=</span> <span class="kw3">substr</span> <span class="st0">&quot;Fred J. Flinstone&quot;</span><span class="sy0">,</span> <span class="nu0">13</span><span class="sy0">;</span> <span class="co1"># obtient &quot;stone&quot;</span></pre></div></div>
<p>Si nous mettons pas de 3ème paramètre, cela ira au bout de la chaine, peut importe la longueur.
</p><p>Pour inverser la sélection, nous allons utiliser des nombres négatifs&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$output</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">&#40;</span><span class="st0">&quot;This is a long line&quot;</span><span class="sy0">,</span> <span class="sy0">-</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1"># output = in</span></pre></div></div>
<p>index et substr fonctionnent très bien ensemble. Par exemple, ici nous allons extraire une sous chaîne commençant par la lettre l&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$long</span> <span class="sy0">=</span> <span class="st0">&quot;a very long line&quot;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$just</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">&#40;</span><span class="re0">$long</span><span class="sy0">,</span> <span class="kw3">index</span><span class="br0">&#40;</span><span class="re0">$long</span><span class="sy0">,</span> <span class="st0">&quot;l&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Voici maintenant comment rendre le tout un petit peut plus souple&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$chain</span> <span class="sy0">=</span> <span class="st0">&quot;Hello world&#160;!&quot;</span><span class="sy0">;</span>
<span class="kw3">substr</span><span class="br0">&#40;</span><span class="re0">$chain</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">4</span><span class="br0">&#41;</span> <span class="sy0">=</span> <span class="st0">&quot;Good bye&quot;</span><span class="sy0">;</span> <span class="co1"># donnera &quot;Good bye world&#160;!&quot;</span></pre></div></div>
<p>Voici un moyen encore plus court&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">substr</span><span class="br0">&#40;</span><span class="re0">$chain</span><span class="sy0">,</span> <span class="sy0">-</span><span class="nu0">20</span><span class="br0">&#41;</span> <span class="sy0">=~</span> <span class="co2">s/fred/barney/g</span><span class="sy0">;</span></pre></div></div>
<p>Dans la réalité, nous n'utilisons jamais ce genre de code. Mais vous pourez peut être en avoir besoins.
</p><p>Utilisez le plus souvent les fonctions index et substr à des regex car elles n'ont pas la surcharge du moteur des regex&#160;:
</p>
<ul><li> Elles ne sont jamais insensibles à la casse</li>
<li> Elles ne se soucient pas de métacaractères</li>
<li> Elles n'initialisent aucunes des variables en mémoire</li></ul>
<h2><span class="mw-headline" id="Mise_en_forme_des_donn.C3.A9es_avec_sprintf"><span class="mw-headline-number">16.3</span> Mise en forme des données avec sprintf</span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$date_tag</span> <span class="sy0">=</span> <span class="kw3">sprintf</span> <span class="st0">&quot;%4d/%02d/%02d&#160;%2d:%02d:%02d&quot;</span><span class="sy0">,</span> <span class="re0">$yr</span><span class="sy0">,</span> <span class="re0">$mo</span><span class="sy0">,</span> <span class="re0">$da</span><span class="sy0">,</span> <span class="re0">$h</span><span class="sy0">,</span> <span class="re0">$m</span><span class="sy0">,</span> <span class="re0">$s</span><span class="sy0">;</span></pre></div></div>
<p>Ici $date_tag reçoit quelquechose comme "2008/12/07 03:00:30". La chaîne de format (le premier argument de sprintf) place un 0 au début de certaines nombres, chose que nous n'avions pas mentionnée lorsque nous avons étudié les formats de printf. Ce 0 demande d'ajouter des 0 de début à la demande pour donner au nombre la largeur requise. Sans ce 0, il y aurait des espaces à la place&#160;: "2008/12/ 7 3: 0:30".
</p>
<h2><span class="mw-headline" id="Utilisation_de_sprintf_avec_des_nombres_mon.C3.A9taire"><span class="mw-headline-number">16.4</span> Utilisation de sprintf avec des nombres monétaire</span></h2>
<p>Pour indiquer une somme d'argent sous la forme 2.50, non de 2.5 - et surtout pas de 2.49997&#160;! Le format "%2f" permet d'obtenir facilement ce résultat&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$money</span> <span class="sy0">=</span> <span class="kw3">sprintf</span> <span class="st0">&quot;%.2f&quot;</span><span class="sy0">,</span> <span class="nu0">2.49997</span><span class="sy0">;</span></pre></div></div>
<p><b>Les implications complètes de l'arrondi sont nombreuses et subtiles, mais le plus souvent il est souhaitable de garder les nombres en mémoire avec tout la précision possible, en n'arrondissant que pour l'affichage.</b>
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">sub</span> grosse_somme <span class="br0">&#123;</span>
   <span class="kw1">my</span> <span class="re0">$nombre</span> <span class="sy0">=</span> <span class="kw3">sprintf</span> <span class="st0">&quot;%.2f&quot;</span> <span class="kw3">shift</span> <span class="co5">@_</span><span class="sy0">;</span>
   <span class="co1"># On ajout une virgule à chaque passage dans la boucle qui ne fait rien</span>
   <span class="nu0">1</span> <span class="kw1">while</span> <span class="re0">$nombre</span> <span class="sy0">=~</span> <span class="co2">s/^(-?\d+)(\d\d\d)/$1,$2/</span><span class="sy0">;</span>
   <span class="co1"># On place le signe dollar au bon endroit</span>
   <span class="re0">$nombre</span> <span class="sy0">=~</span> <span class="co2">s/^(-?)/$1\$/</span><span class="sy0">;</span>
   <span class="re0">$nombre</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$number</span> <span class="sy0">=~</span> <span class="kw3">s</span><span class="sy0">/^</span><span class="br0">&#40;</span><span class="sy0">-?</span><span class="re0">\d</span><span class="sy0">+</span><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="re0">\d</span><span class="re0">\d</span><span class="re0">\d</span><span class="br0">&#41;</span><span class="sy0">/</span><span class="co3">$1</span><span class="sy0">,</span><span class="co3">$2</span><span class="sy0">/</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="nu0">1</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Pourquoi n'avons nous pas simplement utilisé le modificateur /g pour effectuer une recherche et remplacement "globale" et éviter la peine et la confusion du 1 while&#160;? Parce que nous travaillons à reculons depuis le point décimale, non en avançant du début de la chaîne. Le placement de virgules dans un nombre comme celui-ci ne peut pas être réalisé par une substitution s///g seule.
</p>
<h2><span class="mw-headline" id="Tri_.C3.A9volu.C3.A9"><span class="mw-headline-number">16.5</span> Tri évolué</span></h2>
<p>Vous pouvez utiliser cmp pour créer un ordre de tri plus complexe, par exemple insensible à la casse&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">sub</span> no_senscase <span class="br0">&#123;</span>
 <span class="st0">&quot;<span class="es0">\L</span>$a&quot;</span> <span class="kw1">cmp</span> <span class="st0">&quot;<span class="es0">\L</span>$b&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@numbers</span> <span class="sy0">=</span> <span class="kw3">sort</span> <span class="br0">&#123;</span> <span class="re0">$a</span> <span class="sy0">&lt;=&gt;</span> <span class="re0">$b</span> <span class="br0">&#125;</span> <span class="re0">@some_numbers</span><span class="sy0">;</span>
<span class="kw1">my</span> decroissant <span class="sy0">=</span> <span class="kw3">reverse</span> <span class="kw3">sort</span> <span class="br0">&#123;</span> <span class="re0">$a</span> <span class="sy0">&lt;=&gt;</span> <span class="re0">$b</span> <span class="br0">&#125;</span> <span class="re0">@some_numbers</span><span class="sy0">;</span></pre></div></div>
<p>Si par exemple nous souhaitons trier par ordre de modification/création de fichiers&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co1"># Get logs files</span>
<span class="kw1">my</span> <span class="re0">@logs_files</span> <span class="sy0">=</span> <span class="kw3">glob</span> <span class="st0">&quot;$path/logs/*$market_name*&quot;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">@sorted_logs</span> <span class="sy0">=</span> <span class="kw3">sort</span> <span class="br0">&#123;</span> <span class="sy0">-</span>M <span class="re0">$a</span> <span class="sy0">&lt;=&gt;</span> <span class="sy0">-</span>M <span class="re0">$b</span> <span class="br0">&#125;</span> <span class="re0">@logs_files</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Tri_par_cl.C3.A9_multiple"><span class="mw-headline-number">16.6</span> Tri par clé multiple</span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">%score</span> <span class="sy0">=</span> <span class="br0">&#40;</span>
   <span class="st0">&quot;toto&quot;</span> <span class="sy0">=&gt;</span> <span class="nu0">195</span><span class="sy0">,</span>
   <span class="st0">&quot;tata&quot;</span> <span class="sy0">=&gt;</span> <span class="nu0">205</span><span class="sy0">,</span>
   <span class="st0">&quot;titi&quot;</span> <span class="sy0">=&gt;</span> <span class="nu0">30</span><span class="sy0">,</span>
   <span class="st0">&quot;tutu&quot;</span> <span class="sy0">=&gt;</span> <span class="nu0">195</span><span class="sy0">,</span>
<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Nous souhaitons ici classer les joueurs ci dessus par score, et si le score est identique à un autre, par ordre alphabétique&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@winners</span> <span class="sy0">=</span> <span class="kw3">sort</span> by_score_and_name <span class="kw3">keys</span> <span class="re0">%score</span><span class="sy0">;</span>
&#160;
<span class="kw2">sub</span> by_score_and_name <span class="br0">&#123;</span>
   <span class="re0">$score</span><span class="br0">&#123;</span>b<span class="br0">&#125;</span> <span class="sy0">&lt;=&gt;</span> <span class="re0">$score</span><span class="br0">&#123;</span>a<span class="br0">&#125;</span> <span class="co1"># score numérique descendant</span>
   <span class="kw1">or</span>
   <span class="re0">$a</span> <span class="kw1">cmp</span> <span class="re0">$b</span>               <span class="co1"># par nom ASCIIbétique</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Si l'opérateur vaisseau spacial aperçoit 2 scores différents, il s'agit de la comparaison souhaitée. Il renvoie -1 ou 1 (valeur true) et le raccourci de faible précédente or indique que le reste de l'expression doit être sautée et la comparaison souhaitée est renvoyée. (Souvenez vous que le raccourci or renvoie la dernière expression évlauée).<br />
Mais si l'opérateur vaisseau spacial aperçoit 2 scores identiques, il renvoie 0 (valeur false); l'opérateur cmp prend le relais et renvoie une valeur de classement appropriée en considérant les clés comme des chaînes. Si les scores sont identiques, la comparaison sur les chaînes met fin à la compétition.
</p><p>Il n'existe aucunes raisons pour que votre sous-routine de tri soit limitée à 2 niveaux de tri. Ci dessous, le programme de la bibliothèque de Bedrock classe une liste de numéros d'ID de clients selon un ordre de tri de 5 niveaux&#160;: le montant des pénalités impayées de chaque client (calculées par uen sous-routine ici absente, &amp;penalites), le nombre d'articles actuellement consultés (d'après&#160;%articles), leur nom (dans l'ordre du nom de famille puis du prénom, les 2 provenant de hachages), enfin le numéro d'ID du client, pour le cas où le reste serait identique&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="re0">@clients_IDs</span> <span class="sy0">=</span> <span class="kw3">sort</span> <span class="br0">&#123;</span>
   <span class="re0">&amp;penalites</span><span class="br0">&#40;</span><span class="re0">$b</span><span class="br0">&#41;</span> <span class="sy0">&lt;=&gt;</span> <span class="re0">&amp;penalites</span><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span> <span class="kw1">or</span>
   <span class="re0">$articles</span><span class="br0">&#123;</span><span class="re0">$b</span><span class="br0">&#125;</span> <span class="sy0">&lt;=&gt;</span> <span class="re0">$articles</span><span class="br0">&#123;</span><span class="re0">$a</span><span class="br0">&#125;</span> <span class="kw1">or</span>
   <span class="re0">$nom_de_familles</span><span class="br0">&#123;</span><span class="re0">$a</span><span class="br0">&#125;</span> <span class="kw1">cmp</span> <span class="re0">$nom_de_famille</span><span class="br0">&#123;</span><span class="re0">$a</span><span class="br0">&#125;</span> <span class="kw1">or</span>
   <span class="re0">$prenom</span><span class="br0">&#123;</span><span class="re0">$a</span><span class="br0">&#125;</span> <span class="kw1">cmp</span> <span class="re0">$nom_de_famille</span><span class="br0">&#123;</span><span class="re0">$b</span><span class="br0">&#125;</span> <span class="kw1">or</span>
   <span class="re0">$a</span> <span class="sy0">&lt;=&gt;</span> <span class="re0">$b</span>
<span class="br0">&#125;</span> <span class="re0">@clients_IDs</span><span class="sy0">;</span></pre></div></div>
<h1><span class="mw-headline" id="Bases_de_donn.C3.A9es_simples"><span class="mw-headline-number">17</span> Bases de données simples</span></h1>
<h2><span class="mw-headline" id="Ouvertures_et_fermeture_de_hachages_DBM"><span class="mw-headline-number">17.1</span> Ouvertures et fermeture de hachages DBM</span></h2>
<p>C'est ici assez simple à comprendre&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">dbmopen</span><span class="br0">&#40;</span><span class="re0">%DATA</span><span class="sy0">,</span> <span class="st0">&quot;my_database&quot;</span><span class="sy0">,</span> 0644<span class="br0">&#41;</span> <span class="kw1">or</span> <span class="kw3">die</span> <span class="st0">&quot;Can't create my database&#160;: $!&quot;</span><span class="sy0">;</span>
<span class="kw3">dbmclose</span><span class="br0">&#40;</span><span class="re0">%DATA</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Utilisation_d.27un_hashage_DBM"><span class="mw-headline-number">17.2</span> Utilisation d'un hashage DBM</span></h2>
<p>Le hachage DBM ressemble à n'importe quel autre hachage, mais au lieu d'être stocké en mémoire, il est stocké sur disque. Par conséquent, lorsque votre programme l'ouvre à nouveau, le hachage contient déjà les données de l'appel précédent (certaines doc de débutant vous diront de ne plus utiliser les bases DBM et de les remplacer par "tie", cependant ce n'est pas la peine d'utiliser des méthodes complexe quand nous ne souhaitons faire quelquechose de simple).
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">while</span> <span class="br0">&#40;</span><span class="kw1">my</span><span class="br0">&#40;</span><span class="re0">$key</span><span class="sy0">,</span> <span class="re0">$value</span><span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw3">each</span><span class="br0">&#40;</span><span class="re0">%DATA</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Value of $key is $value<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Manipulation_des_donn.C3.A9es_avec_pack_et_unpack"><span class="mw-headline-number">17.3</span> Manipulation des données avec pack et unpack</span></h2>
<p>Pack sert à empaqueter des données. Nous rassemblons 3 nombres de tailles différentes dans une chaine de 7 octets en utilisant les formats c, s et l (qui rappellent char, short et long). Le premier nombre est empaqueté dans un octet, le second dans 2 et le 3ème dans 4&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw1">my</span> <span class="re0">$tampon</span> <span class="sy0">=</span> <span class="kw3">pack</span><span class="br0">&#40;</span><span class="st0">&quot;c s l&quot;</span><span class="sy0">,</span> <span class="nu0">31</span><span class="sy0">,</span> <span class="nu0">4159</span><span class="sy0">,</span> <span class="nu0">265359</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Il est possible d'améliorer la visibilité en plaçant des espacements dans une chaîne de format. Par exemple, on peut convertir "ccccccc" en "c7". Evidemment en cas d'unpack, il est plus simple d'utiliser "c*" en cas d'unpack.
</p>
<h2><span class="mw-headline" id="Bases_de_donn.C3.A9es_.C3.A0_acc.C3.A8s_al.C3.A9atoire_de_longueur_fixe"><span class="mw-headline-number">17.4</span> Bases de données à accès aléatoire de longueur fixe</span></h2>
<p>Il existe plusieurs formats disponible dans la documentation de pack. Il faut donc choisir le format approprié. La fonction open possède un autre mode que nous n'avons pas encore présenté. Le fait de placer "+&lt;" devant la chaîne de paramètre du nom de fichier équivaut à utiliser "&lt;" pour ouvrir le fichier existant en lecture, en demandant en plus la permission d'écrire dans le fichier&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">open</span><span class="br0">&#40;</span>READ<span class="sy0">,</span> <span class="st0">&quot;&lt;toto&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">open</span><span class="br0">&#40;</span>READ_WRITE<span class="sy0">,</span> <span class="st0">&quot;&lt;+toto&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>De même, à l'inverse, on peut écrire dans un fichier puis le lire&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">open</span> <span class="br0">&#40;</span>WRITE<span class="sy0">,</span> <span class="st0">&quot;&gt;toto&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">open</span> <span class="br0">&#40;</span>WRITE_READ<span class="sy0">,</span> <span class="st0">&quot;&gt;+toto&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Pour résumer&#160;:
</p>
<ul><li> "&lt;+"&#160;: Permet de lire un fichier existant, puis d'écrire dedans</li>
<li> "&gt;+"&#160;: Permet d'écrire dans un fichier, puis de le lire</li></ul>
<p>Généralement, ce dernier est utiliser pour les fichiers brouillons.
</p><p>Une fois ouvert, le fichier ouvert, nous devons le parcourir, nous utiliserons la fonction seek.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">seek</span><span class="br0">&#40;</span>TOTO<span class="sy0">,</span> <span class="nu0">55</span> <span class="sy0">*</span> <span class="re0">$n</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<ul><li> 1er paramètre&#160;: handle de fichier</li>
<li> 2nd paramètre&#160;: le déplacement en octets depuis le début du fichier</li>
<li> 3th paramètre&#160;: Le paramètre de départ, soit 0</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$tamp</span><span class="sy0">;</span> <span class="co1"># Variable du tampon d'entrée</span>
<span class="kw1">my</span> <span class="re0">$nombre_lu</span> <span class="sy0">=</span> <span class="kw3">read</span><span class="br0">&#40;</span>Toto<span class="sy0">,</span> <span class="re0">$tamp</span><span class="sy0">,</span> <span class="nu0">55</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<ul><li> 1er paramètre&#160;: handle de fichier</li>
<li> 2nd paramètre&#160;: variable de tampon devant recevoir les données lues</li>
<li> 3th paramètre&#160;: nombre d'octets à lire</li></ul>
<p>Nous avons demander 55 octets car celà correspond à la taille de notre enregistrement. Mais si au niveau du tampon, vous vous trouvez à 5 octets de la fin sur les 55, alors vous n'en aurez que 5.
</p><p>Voici un petit exemple de tout cela avec une fonction time pour donner l'heure&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">print</span> TOTO <span class="kw3">pack</span><span class="br0">&#40;</span><span class="st0">&quot;a40 C I5 L&quot;</span><span class="sy0">,</span>
   <span class="re0">$nom</span><span class="sy0">,</span> <span class="re0">$age</span><span class="sy0">,</span>
   <span class="re0">$infos</span><span class="sy0">,</span> <span class="re0">$infos1</span><span class="sy0">,</span> <span class="re0">$infos2</span><span class="sy0">,</span> <span class="re0">$infos3</span><span class="sy0">,</span> <span class="re0">$infos4</span><span class="sy0">,</span>
   <span class="kw3">time</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Sur certains systèmes, il est nécessaire d'utiliser seek à chaque transition d'une lecture à une écriture, même lorsque la position en cours dans le fichier est correcte. Il est donc conseillé d'utiliser seek immédiatement avant toute lecture ou écriture.
</p><p>Voici une petite alternative à ce que nous venons de voir&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$pack_format</span> <span class="sy0">=</span> <span class="st0">&quot;a40 C I15 L&quot;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$pack_lenght</span> <span class="sy0">=</span> lenght <span class="kw3">pack</span><span class="br0">&#40;</span><span class="re0">$pack_format</span><span class="sy0">,</span> <span class="st0">&quot;données&quot;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">6</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Bases_de_donn.C3.A9es_.28texte.29_de_longueur_variable"><span class="mw-headline-number">17.5</span> Bases de données (texte) de longueur variable</span></h2>
<p>La façon la plus courante d'actualiser un fichier texte par programme consiste à écrire un fichier entièrement nouveau semblable à l'ancien, en lui apportant au fur et à mesure les modifications nécessaires. Cette technique donne pratiquement le même résultat que la mise à jour du fichier proprement dit, mais offre en plus des avantages.
</p><p>C'est là que Perl est encore une fois géniale, il est possible de faire de la substitution directement sur le fichier sans avoir à recréer un nouveau fichier avec l'opérateur "&lt;&gt;"&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co1">#!/usr/bin/perl -w</span>
&#160;
<span class="kw2">use</span> strict<span class="sy0">;</span>
&#160;
<span class="kw3">chomp</span><span class="br0">&#40;</span><span class="kw1">my</span> <span class="re0">$date</span><span class="sy0">=</span> <span class="st0">`date`</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="sy0">@</span><span class="kw2">ARGV</span> <span class="sy0">=</span> <span class="kw3">glob</span> <span class="st0">&quot;toto*.dat&quot;</span> <span class="kw1">or</span> <span class="kw3">die</span> <span class="st0">&quot;no files were found<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="co5">$^I</span> <span class="sy0">=</span> <span class="st0">&quot;.bak&quot;</span><span class="sy0">;</span>
&#160;
<span class="kw1">while</span> <span class="br0">&#40;</span><span class="sy0">&lt;&gt;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="co2">s/^Toto&#160;:/^Titi&#160;:/</span><span class="sy0">;</span>
   <span class="kw3">print</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Pour fournir la liste des fichiers à l'opérateur diamant, nous les lisons dans un glob. La ligne suivante initialise $^I. Par défaut celle ci est initialiser à undef, mais lorsqu'elle est initialisée à une certaine chaîne, elle rend l'opérateur diamant encore plus magique.<br />
Dès lors, la boucle while lit une ligne dans l'ancien fichier, la met à jour puis l'écrit dans le nouveau fichier. Ce programme est capable d'actualiser des centaines de fichiers en quelques secondes sur uen machine classique.<br />
Une fois le programme terminé, Perl a automatiquement créer un fichier de sauvegarde de l'originale comme par magie.
</p>
<h2><span class="mw-headline" id="Edition_sur_place_.C3.A0_partir_de_la_ligne_de_commande"><span class="mw-headline-number">17.6</span> Edition sur place à partir de la ligne de commande</span></h2>
<p>Imaginez que vous deviez corriger des centaines de fichiers comportant une faute d'orthographe. Voici la solution en une seule ligne&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> perl</font>
</td></tr>
<tr>
<td>
<pre>perl -p -i.bak -w -e 's/toto/tata/g' titi*.dat
</pre>
</td></tr></table><br />
<h1><span class="mw-headline" id="Quelques_techniques_Perl_avanc.C3.A9es"><span class="mw-headline-number">18</span> Quelques techniques Perl avancées</span></h1>
<h2><span class="mw-headline" id="Interception_des_erreurs_avec_eval"><span class="mw-headline-number">18.1</span> Interception des erreurs avec eval</span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">eval</span> <span class="br0">&#123;</span> <span class="re0">$toto</span> <span class="sy0">=</span> <span class="re0">$titi</span> <span class="sy0">/</span> <span class="re0">$tutu</span> <span class="br0">&#125;</span><span class="sy0">;</span></pre></div></div>
<p>A présent, même si $tutu vaut 0, cette ligne ne plantera pas le programme car eval est une expression et non une structure de contrôle comme while ou foreach. Si une erreur subsite, vous la trouverez dans $@.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw3">eval</span> <span class="br0">&#123;</span>
   <span class="sy0">...</span>
<span class="br0">&#125;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="co5">$@</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">print</span> <span class="st0">&quot;Une erreur est survenue ($@), poursuite...<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Il est possible d'imbriquer des blocs evals dans d'autres blocs evals.
</p>
<h2><span class="mw-headline" id="Choix_des_.C3.A9l.C3.A9ments_d.27une_liste_avec_grep"><span class="mw-headline-number">18.2</span> Choix des éléments d'une liste avec grep</span></h2>
<p>Choisissons les nombres impairs d'une longue liste de nombres. Nous n'avons besoin d'aucunes nouveautés&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$nombres_impaires</span><span class="sy0">;</span>
&#160;
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">..</span><span class="nu0">1000</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw3">push</span> <span class="re0">@nombres_impairs</span><span class="sy0">,</span> <span class="co5">$_</span> <span class="kw1">if</span> <span class="co5">$_</span> <span class="sy0">%</span> <span class="nu0">2</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Ce code utilise l'opérateur modulo. Si un nombre est pair, ce nombre modulo 2 donne 0 ce qui vaut false. Mais un nombre impair donnera un&#160;; comme cela équivaut true, seuls les nombres impairs seront placés dans le tableau.
</p><p>Il n'y a rien à reprocher à code, sinon qu'il est un peu long à écrire et <b>lent à s'exécuter</b>, si l'on sait que perl propose l'opérateur grep&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@nombres_impairs</span> <span class="sy0">=</span> <span class="kw3">grep</span> <span class="br0">&#123;</span> <span class="co5">$_</span> <span class="sy0">%</span> <span class="nu0">2</span> <span class="br0">&#125;</span> <span class="nu0">1</span><span class="sy0">..</span><span class="nu0">1000</span><span class="sy0">;</span></pre></div></div>
<p>Encore un autre exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@lignes_correspondantes</span> <span class="sy0">=</span> <span class="kw3">grep</span> <span class="co2">/\btoto\b/i</span><span class="sy0">,</span> <span class="re4">&lt;FICHIER&gt;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Transformation_des_.C3.A9l.C3.A9ments_d.27une_liste_avec_map"><span class="mw-headline-number">18.3</span> Transformation des éléments d'une liste avec map</span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@datas</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">123</span><span class="sy0">,</span> <span class="nu0">8.343</span><span class="sy0">,</span> <span class="nu0">29.84</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">@formated_datas</span> <span class="sy0">=</span> <span class="kw3">map</span> <span class="br0">&#123;</span> <span class="re0">&amp;big_addition</span><span class="br0">&#40;</span><span class="co5">$_</span><span class="br0">&#41;</span> <span class="br0">&#125;</span> <span class="re0">@datas</span><span class="sy0">;</span></pre></div></div>
<p>L'opérateur map ressemble à grep car il possède le même type d'arguments&#160;: un bloc utilisant $_ et une liste d'éléments à traiter. Il opère de la même façon, en évaluant une fois le bloc pour chaque élément de la liste, $_ devenant l'alias d'un élément d'origine différent de la liste à chaque fois.
</p>
<h2><span class="mw-headline" id="Cl.C3.A9s_de_hachage_sans_guillemets"><span class="mw-headline-number">18.4</span> Clés de hachage sans guillemets</span></h2>
<p>Naturellement pas sur n'importe quelle clé; en effet, une clé de hashage peut être n'importe quelle chaîne. Mais les clés sont souvent simples. Si une clé de hashage n'est constituée que de lettres, chiffres et caractères de soulignement, sans commencer par un chiffre, vous pouvez omettre les guillemets (appellé mot simple)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">%score</span> <span class="sy0">=</span> <span class="br0">&#40;</span>
   toto <span class="sy0">=&gt;</span> <span class="nu0">10</span><span class="sy0">,</span>
   tata <span class="sy0">=&gt;</span> <span class="nu0">15</span><span class="sy0">,</span>
   tutu <span class="sy0">=&gt;</span> <span class="nu0">20</span><span class="sy0">,</span>
<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Expressions_r.C3.A9guli.C3.A8res_plus_puissantes"><span class="mw-headline-number">18.5</span> Expressions régulières plus puissantes</span></h2>
<h3><span class="mw-headline" id="Quantificateurs_non_avides"><span class="mw-headline-number">18.5.1</span> Quantificateurs non avides</span></h3>
<p>Les expressions régulières peuvent consommer plus ou moins de CPU suivant la façon dont vous effectuez les recherches. Plus le nombre d'éléments cherché aura été trouvé (dans l'ordre chronologique), plus le temps d'exécution de votre programme sera long.
</p><p>Voici un exemple permettant de supprimer des balises, mais il y a une erreur&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="co2">s/&lt;BOLD&gt;(.*)&lt;/BOLD&gt;/</span><span class="co3">$1</span><span class="sy0">/</span>g<span class="sy0">;</span></pre></div></div>
<p>L'astérisque (*) étant avide, nous ne tomberons pas sur ce qui nous intéresse, voici la bonne solution&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="co2">s/&lt;BOLD&gt;(.*?)&lt;/BOLD&gt;/</span><span class="co3">$1</span><span class="sy0">/</span>g<span class="sy0">;</span></pre></div></div>
<p>Le&#160;? permet de dire que celà peut être le cas ou non, et pas forcément toujours (comme le ferait le premier exemple).
</p>
<h3><span class="mw-headline" id="Reconnaissance_de_texte_multiligne"><span class="mw-headline-number">18.5.2</span> Reconnaissance de texte multiligne</span></h3>
<p>Les ancres ^ et $ permettre de faire correspondre aux débuts et fin de lignes, mais si nous souhaitons effectuer des correspondances également à des caractères de nouvelle lignes interne, il faudra utiliser "/m"&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw3">print</span> <span class="st0">&quot;Found 'toto' at the beginning of the line<span class="es0">\n</span>&quot;</span> <span class="kw1">if</span> <span class="co2">/^toto\b/im</span><span class="sy0">;</span></pre></div></div>
<p>Cela fait des ances de début et de fin à chaque ligne, non de la chaîne globale.
</p>
<h2><span class="mw-headline" id="Tranches"><span class="mw-headline-number">18.6</span> Tranches</span></h2>
<p>Si par exemple, nous souhaitons définir un stat sur des variables avec un certain nombre en undef&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="br0">&#40;</span><span class="kw3">undef</span><span class="sy0">,</span> <span class="kw3">undef</span><span class="sy0">,</span> <span class="kw3">undef</span><span class="sy0">,</span> <span class="kw3">undef</span><span class="sy0">,</span> <span class="kw3">undef</span><span class="sy0">,</span> <span class="kw3">undef</span><span class="sy0">,</span> <span class="kw3">undef</span><span class="sy0">,</span> <span class="kw3">undef</span><span class="sy0">,</span> <span class="kw3">undef</span><span class="sy0">,</span> <span class="re0">$mtime</span><span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw3">stat</span> <span class="re0">$file</span></pre></div></div>
<p>Si on indique un mauvais nombre de undef, on atteindra malheureusement un atime ou ctime, ce qui est assez difficile à déboguer. <b>Il existe cependant un meilleur méthode&#160;!</b> Perl sait indexer une liste comme si c'était un tableau.
</p><p>Ici, comme mtime est l'élément 9 de la liste renvoyée par stat, nous l'obtenons par un indice&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$mtime</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw3">stat</span> <span class="re0">$file</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">9</span><span class="br0">&#93;</span><span class="sy0">;</span></pre></div></div>
<p>Maintenant, voyons comment avec la liste, nous pouvons spliter des infos&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$card_number</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw3">split</span> <span class="co2">/:/</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$total</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw3">split</span> <span class="co2">/:/</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">5</span><span class="br0">&#93;</span><span class="sy0">;</span></pre></div></div>
<p>Cette méthode est bonne mais pas assez efficace. Voici comment faire mieux&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span><span class="br0">&#40;</span><span class="re0">$card_number</span><span class="sy0">,</span> <span class="re0">$total</span><span class="br0">&#41;</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw3">split</span> <span class="co2">/:/</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">&#93;</span><span class="sy0">;</span></pre></div></div>
<p>SI maintenant nous souhaitons récupérer quelques éléments d'une liste (-1 représentant le dernier élément)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span><span class="br0">&#40;</span><span class="re0">$first</span><span class="sy0">,</span> <span class="re0">$last</span><span class="br0">&#41;</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw3">sort</span> <span class="re0">@names</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span></pre></div></div>
<p>Voici un exemple d'une extraction de 5 éléments sur une liste de 10&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@names</span> <span class="sy0">=</span> <span class="kw3">qw</span><span class="br0">&#123;</span> zero one two three four five six seven eight nine ten <span class="br0">&#125;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">@numbers</span> <span class="sy0">=</span> <span class="br0">&#123;</span> <span class="re0">@names</span> <span class="br0">&#125;</span><span class="br0">&#91;</span><span class="nu0">9</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">;</span>
<span class="kw3">print</span> <span class="st0">&quot;Bedrock @numbers<span class="es0">\n</span>&quot;</span><span class="sy0">;</span> <span class="co1"># Donne &quot;Bedrock nine zero two one zero&quot;</span></pre></div></div>
<h3><span class="mw-headline" id="Tranche_de_tableau"><span class="mw-headline-number">18.6.1</span> Tranche de tableau</span></h3>
<p>L'exemple ci dessus encore simplifié aurait donné&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@numbers</span> <span class="sy0">=</span> <span class="re0">@names</span><span class="br0">&#91;</span><span class="nu0">9</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">;</span></pre></div></div>
<p>Pour entrer simplement des infos dans un tableau alors que c'est pour le moment des variables, voici la solution&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">$phone</span> <span class="sy0">=</span> <span class="st0">&quot;08 36 65 65 65&quot;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$address</span> <span class="sy0">=</span> <span class="st0">&quot;Laponie&quot;</span><span class="sy0">;</span>
<span class="re0">@elements</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">3</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="re0">$phone</span><span class="sy0">,</span> <span class="re0">$address</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="Tranche_de_hachage"><span class="mw-headline-number">18.6.2</span> Tranche de hachage</span></h3>
<p>Voici encore une technique qui fonctionne&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@three_scrores</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="re0">$score</span><span class="br0">&#123;</span><span class="st0">&quot;toto&quot;</span><span class="br0">&#125;</span><span class="sy0">,</span> <span class="re0">$score</span><span class="br0">&#123;</span><span class="st0">&quot;tata&quot;</span><span class="br0">&#125;</span><span class="sy0">,</span> <span class="re0">$score</span><span class="br0">&#123;</span><span class="st0">&quot;titi&quot;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Mais là, ce n'est encore une fois pas la solution la plus optimisée. Là voilà&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw1">my</span> <span class="re0">@three_scores</span> <span class="sy0">=</span> <span class="re0">@score</span><span class="br0">&#123;</span> <span class="co2">qw/ toto tata titi/</span> <span class="br0">&#125;</span><span class="sy0">;</span></pre></div></div>
<p>Pourquoi n'y a t'il pas de&#160;% alors que nous parlons de hashage&#160;?<br />
Il s'agit de la marque indiquant un hashage global&#160;; une tranche de hashage (comme toute tranche) est toujours une liste, pas un hashage (tout comme un incendie de maison est un incendie et pas une maison). En Perl, le signe $ signifie un seul élément, l'@ une liste d'éléments et le&#160;% un hashage entier.
</p>
<h2><span class="mw-headline" id="Cr.C3.A9er_un_D.C3.A9mon"><span class="mw-headline-number">18.7</span> Créer un Démon</span></h2>
<p>Un démon permet de lancer une appli en tache de fond. Voici comment faire en perl&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">use</span> POSIX <span class="kw3">qw</span><span class="br0">&#40;</span>setsid<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">defined</span><span class="br0">&#40;</span><span class="kw1">my</span> <span class="re0">$pid</span><span class="coMULTI">=fork) or die &quot;cannot fork process:$!&quot;;
exit if $pid;
setsid;
umask 0;
&#160;
# Enter loop to do work
while (1) {
   sleep 1;
}</span></pre></div></div>
<h2><span class="mw-headline" id="Cr.C3.A9er_des_sockets"><span class="mw-headline-number">18.8</span> Créer des sockets</span></h2>
<p>Cette partie explique comment faire fonctionner un socket (client/serveur). 
</p><p>On utilisera un fork pour chaque connection afin de ne pas être limité. Dans le cas contraire, il faudrait attendre la fermeture de la première connexion pour qu'une deuxième soit prise en charge.
Grâce au fork, un nouveau fils est créé à chaque connection. Il se chargera d'elle tandis que son père attendra une nouvelle connexion, prêt à la déléguer à un autre de ses fils.
</p><p>Le code suivant sera proprement commenté pour donner toutes les explications nécessaires.
</p><p>Voilà à quoi ressemblera le serveur&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co1">#!/usr/bin/perl -w</span>
<span class="kw2">use</span> strict<span class="sy0">;</span>
<span class="kw2">use</span> POSIX <span class="kw3">qw</span><span class="br0">&#40;</span>setsid<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw2">use</span> IO<span class="sy0">::</span><span class="me2">Socket</span><span class="sy0">;</span>
<span class="kw2">use</span> Socket<span class="sy0">;</span>
&#160;
<span class="kw1">my</span> <span class="br0">&#40;</span><span class="re0">$client</span><span class="sy0">,</span> <span class="re0">$machine_distante</span><span class="sy0">,</span> <span class="re0">$port</span><span class="sy0">,</span> <span class="re0">$adr_i</span><span class="sy0">,</span> <span class="re0">$ip_reelle</span><span class="sy0">,</span> <span class="re0">$nom_client</span><span class="sy0">,</span> <span class="re0">$pid_fils</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$serveur</span> <span class="sy0">=</span> <span class="kw2">new</span> IO<span class="sy0">::</span><span class="me2">Socket</span><span class="sy0">::</span><span class="me2">INET</span> <span class="br0">&#40;</span> LocalPort <span class="sy0">=&gt;</span> <span class="st_h">'7070'</span><span class="sy0">,</span> Type <span class="sy0">=&gt;</span> SOCK_STREAM<span class="sy0">,</span> Reuse <span class="sy0">=&gt;</span> <span class="nu0">1</span><span class="sy0">,</span> Listen <span class="sy0">=&gt;</span> <span class="nu0">10</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">die</span> <span class="st0">&quot;Could not create socket: $!<span class="es0">\n</span>&quot;</span> <span class="kw1">unless</span> <span class="re0">$serveur</span><span class="sy0">;</span>
&#160;
<span class="co1"># On créer une boucle dans laquelle reviendra le processus père une fois un fils créé</span>
REQUETE<span class="sy0">:</span>
<span class="co1"># Ce while signifie qu'une connexion a été demandé par un client.</span>
<span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$client</span> <span class="sy0">=</span> <span class="re0">$serveur</span><span class="sy0">-&gt;</span><span class="kw3">accept</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="co1"># Grâce à ces premières lignes, on peut afficher un message d’accueil</span>
    <span class="co1"># $machine_distante = getpeername($client);</span>
    <span class="co1"># ($port, $adr_i) = unpack_sockaddr_in($machine_distante);</span>
    <span class="co1"># $ip_reelle = inet_ntoa($adr_i);</span>
    <span class="co1"># $nom_client = gethostbyaddr($adr_i, AF_INET);</span>
    <span class="co1"># print &quot;$nom_client se connecte&#160;!\n&quot;;</span>
&#160;
&#160;
    <span class="co1"># Une nouvelle connexion étant demandée, le père tente de se dupliquer afin de pouvoir accepter une autre connexion d'un client au besoin</span>
    <span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$pid_fils</span> <span class="sy0">=</span> <span class="kw3">fork</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="co1"># S'il réussi, alors le handle inutilisé (celui client du père) est fermé et le père relance l'écoute pendant que le fils continue.</span>
        <span class="co1"># Ainsi un nouveau fils est créé pour chaque connexion, le père ne fait que les générer.</span>
        <span class="kw3">close</span><span class="br0">&#40;</span><span class="re0">$client</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">next</span> REQUETE<span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw3">defined</span> <span class="re0">$pid_fils</span> <span class="kw1">or</span> <span class="kw3">die</span> <span class="st0">&quot;Fork impossible&#160;: $!<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
&#160;
    <span class="co1"># Le fils ferme le handle inutilisé de son père</span>
    <span class="kw3">close</span><span class="br0">&#40;</span><span class="re0">$serveur</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
    <span class="co1"># Vidage automatique de tampon</span>
    <span class="co5">$|</span> <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span>
&#160;
    <span class="co1"># Code réel des entrées et sorties avec le client:</span>
    <span class="kw1">while</span><span class="br0">&#40;</span><span class="kw1">my</span> <span class="re0">$entree</span> <span class="sy0">=</span> <span class="sy0">&lt;</span><span class="re0">$client</span><span class="sy0">&gt;</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw3">print</span> <span class="kw2">STDOUT</span> <span class="st0">&quot;option envoyée&#160;: $entree&quot;</span><span class="sy0">;</span>
&#160;
        <span class="co1"># Donne un handle par défaut pour les futurs affichages</span>
        <span class="kw3">select</span><span class="br0">&#40;</span><span class="re0">$client</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="co1"># afficher sur la machine client puisque le handle est spécifié</span>
        <span class="kw3">print</span> <span class="re0">$client</span> <span class="st0">&quot;affichage<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
&#160;
&#160;
	<span class="co1"># Si l'on ne souhaite pas faire &quot;select($client)&quot;, on peut choisir quelle sortie sera renvoyée sur la machine client grâce à ces lignes</span>
        <span class="co1"># open(STDIN, &quot;&lt;&lt;&amp;$client&quot;);</span>
        <span class="co1"># open(STDOUT, &quot;&gt;&amp;$client&quot;);</span>
        <span class="co1"># open(STDERR, &quot;&gt;&amp;$client&quot;);</span>
&#160;
&#160;
        <span class="kw3">print</span> <span class="st0">&quot;fini<span class="es0">\n</span>&quot;</span><span class="sy0">;</span> <span class="co1">#Dans le client toujours puisque handle par défaut</span>
&#160;
	<span class="co1"># On close le handle pour mettre fin à la connexion.</span>
        <span class="kw3">close</span><span class="br0">&#40;</span><span class="re0">$client</span><span class="br0">&#41;</span><span class="sy0">;</span>    
        <span class="co1"># Pour empêcher le fils de repartir dans la boucle. Cela génèrerait une erreur étant donné que le handle server a été fermé par le fils.</span>
        <span class="kw3">exit</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Le client lui, ressemblera à ça (beaucoup plus simple)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co1">#!/usr/bin/perl -w</span>
<span class="kw2">use</span> strict<span class="sy0">;</span>
<span class="kw2">use</span> IO<span class="sy0">::</span><span class="me2">Socket</span><span class="sy0">;</span>
<span class="kw2">use</span> Getopt<span class="sy0">::</span><span class="me2">Long</span><span class="sy0">;</span>
&#160;
<span class="kw1">my</span> <span class="br0">&#40;</span><span class="re0">$reponse</span><span class="sy0">,</span> <span class="re0">$option</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$socket</span> <span class="sy0">=</span> <span class="kw2">new</span> IO<span class="sy0">::</span><span class="me2">Socket</span><span class="sy0">::</span><span class="me2">INET</span> <span class="br0">&#40;</span>PeerAddr <span class="sy0">=&gt;</span> <span class="st_h">'localhost'</span><span class="sy0">,</span>PeerPort <span class="sy0">=&gt;</span> <span class="st_h">'7070'</span><span class="sy0">,</span>Proto <span class="sy0">=&gt;</span> <span class="st_h">'tcp'</span><span class="sy0">,</span> Type <span class="sy0">=&gt;</span> SOCK_STREAM<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">die</span> <span class="st0">&quot;Could not create socket: $!<span class="es0">\n</span>&quot;</span> <span class="kw1">unless</span> <span class="re0">$socket</span><span class="sy0">;</span>
&#160;
<span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$ARGV</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="co1"># On envoie dans le socket l'option que l'on a donnée au script</span>
    <span class="kw3">print</span> <span class="re0">$socket</span> <span class="st0">&quot;$ARGV[0]<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw1">while</span><span class="br0">&#40;</span><span class="re0">$reponse</span> <span class="sy0">=</span> <span class="sy0">&lt;</span><span class="re0">$socket</span><span class="sy0">&gt;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>	
    <span class="co1"># On affiche toutes les réponses renvoyées par le Serveur</span>
    <span class="kw3">print</span> <span class="re0">$reponse</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="co1"># On ferme le socket pour mettre fin à la connection</span>
<span class="kw3">close</span><span class="br0">&#40;</span><span class="re0">$socket</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">exit</span><span class="sy0">;</span></pre></div></div>
<p>Il est possible de coder des fonctions dans les deux parties. La chose la plus facile à mettre en oeuvre pour faire exécuter des actions au serveur est de lui faire analyser ce que lui envoie le client.<br />
Selon sa correspondance avec une regexp ou une autre, il lancera une certaine fonction.
</p>
<h1><span class="mw-headline" id="Plus_loin_dans_Perl"><span class="mw-headline-number">19</span> Plus loin dans Perl</span></h1>
<p>Dans un premier temps, sachez que si vous avez besoin de documentation supplémentaire, vous pouvez regarder les mans suivants&#160;:
</p>
<ul><li> perltoc (table des matières)</li>
<li> perlfaq</li>
<li> perldoc</li>
<li> perlrun</li></ul>
<p>Pour les expressions régulières, vous pouvez également trouver votre bonheur ici&#160;:
</p>
<ul><li> perlre</li>
<li> perltut (pour les tutoriaux)</li>
<li> perlrequick</li></ul>
<h2><span class="mw-headline" id="Modules"><span class="mw-headline-number">19.1</span> Modules</span></h2>
<p>Les modules sont des outils fait pour vous faire gagner tu temps. Ils vous permettent de ne pas réinventer la roue à chaque fois que vous voulez de nouvelles fonctionalitées. Abusez en&#160;! Je vous invite à aller sur le site de <a rel="nofollow" class="external text" href="http://www.cpan.org">CPAN</a> et de faire un petit tour.
</p><p>Pour installer un module, c'est très simple, en root lancez la commande cpan, puis&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> cpan</font>
</td></tr>
<tr>
<td>
<pre>install Mon::Module::a_installer
</pre>
</td></tr></table><br />
<p>Et tout se fera tout seul&#160;:-)
</p><p>Si vous rencontrez des problèmes de compilation, consultez les erreurs, mais dans beaucoup de cas, ils vous manque les librairies de développement C&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> apt-get</font>
</td></tr>
<tr>
<td>
<pre>apt-get install libc6-dev
</pre>
</td></tr></table><br />
<p>Dans le très rare cas ou il n'existera pas de module pour faire ce que vous voulez, pour pouvez en développer un vous même en Perl ou en C (et le soumettre ensuite, pensez à la comunautée&#160;!). Consultez&#160;:
</p>
<ul><li> perlmod</li>
<li> perlmodlib</li></ul>
<h3><span class="mw-headline" id="Lister_les_modules_install.C3.A9s"><span class="mw-headline-number">19.1.1</span> Lister les modules installés</span></h3>
<p>Il peut s'avérer très pratique de lister les modules installés. Pour cela nous allons avoir besoin de ce package&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> aptitude</font>
</td></tr>
<tr>
<td>
<pre>aptitude install perl-doc
</pre>
</td></tr></table><br />
<p>Ensuite, il ne reste plus qu'a lancer cette commande&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> perldoc</font>
</td></tr>
<tr>
<td>
<pre>perldoc perllocal
</pre>
</td></tr></table><br />
<h3><span class="mw-headline" id="Savoir_si_un_module_est_int.C3.A9gr.C3.A9e_de_base_dans_Perl"><span class="mw-headline-number">19.1.2</span> Savoir si un module est intégrée de base dans Perl</span></h3>
<p>Pour savoir si un module est intégré au Core de Perl, il y existe cette commande&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> corelist</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">corelist &lt;perl_module&gt;</pre></div></div>
</td></tr></table><br />
<p>Exemple&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> corelist</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; corelist strict
strict was first released with perl 5</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Quelques_modules_importants"><span class="mw-headline-number">19.2</span> Quelques modules importants</span></h2>
<h3><span class="mw-headline" id="Cwd"><span class="mw-headline-number">19.2.1</span> Cwd</span></h3>
<p>Equivalent à la commande pwd, il permet de connaitre le répertoire ou l'on se trouve (.)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw2">use</span> Cwd<span class="sy0">;</span>
 <span class="kw1">my</span> <span class="re0">$folder</span> <span class="sy0">=</span> cwd<span class="sy0">;</span></pre></div></div>
<p>Et si on souhaites connaitre le fichier perl qui est en cours d'exécution (celui que l'on lance)&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">use</span> Cwd <span class="st_h">'abs_path'</span><span class="sy0">;</span>
&#160;
<span class="kw1">my</span> <span class="re0">$current_file</span><span class="sy0">=</span><span class="co3">$0</span><span class="sy0">;</span>
<span class="kw3">print</span> <span class="st0">&quot;$current_file<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="Fatal"><span class="mw-headline-number">19.2.2</span> Fatal</span></h3>
<p>Si vous en avez marre d'écrire "or die" à chaque invocation d'open ou chdir par exemple, fatal est fait pour vous&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw2">use</span> Fatal <span class="co2">qw/ open chdir /</span><span class="sy0">;</span>
 <span class="kw3">chdir</span> <span class="st_h">'/home/toto'</span><span class="sy0">;</span></pre></div></div>
<p>Là pas besoin d'indiquer "or die", on se fera jetter si on a pas pu changer de dossier.
</p>
<h3><span class="mw-headline" id="Sys::Hostname"><span class="mw-headline-number">19.2.3</span> Sys::Hostname</span></h3>
<p>Pour connaitre le nom de la machine&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw2">use</span> Sys<span class="sy0">::</span><span class="me2">Hostname</span><span class="sy0">;</span>
 <span class="kw1">my</span> <span class="re0">$hote</span> <span class="sy0">=</span> hostname<span class="sy0">;</span>
 <span class="kw3">print</span> <span class="st0">&quot;Cette machine s'appelle $hote<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="Time::Local"><span class="mw-headline-number">19.2.4</span> Time::Local</span></h3>
<p>Conversion de l'heure Epoch en heure humainement lisible&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw2">use</span> Time<span class="sy0">::</span><span class="me2">Local</span><span class="sy0">;</span>
 <span class="kw1">my</span> <span class="re0">$now</span> <span class="sy0">=</span> timelocal<span class="br0">&#40;</span><span class="re0">$sec</span><span class="sy0">,</span> <span class="re0">$min</span><span class="sy0">,</span> <span class="re0">$hr</span><span class="sy0">,</span> <span class="re0">$day</span><span class="sy0">,</span> <span class="re0">$month</span><span class="sy0">,</span> <span class="re0">$year</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="diagnonstics"><span class="mw-headline-number">19.2.5</span> diagnonstics</span></h3>
<p>Pour avoir plus d'informations sur les erreurs dans votre code&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw2">use</span> diagnostics</pre></div></div>
<h3><span class="mw-headline" id="Grands_nombres"><span class="mw-headline-number">19.2.6</span> Grands nombres</span></h3>
<p>Pour avoir un calcul avec de grands nombres, utilisez Math::BigFloat ou Math::BigInt.
</p>
<h3><span class="mw-headline" id="splice"><span class="mw-headline-number">19.2.7</span> splice</span></h3>
<p>Il permet d'ajouter ou supprimer des éléments au milieu d'un tableau.
</p>
<h3><span class="mw-headline" id="S.C3.A9curit.C3.A9"><span class="mw-headline-number">19.2.8</span> Sécurité</span></h3>
<p>Perl possède une fonctionnalité qui va connaitre éxactement ce que Perl utilise en mémoire (au cas ou il y aurat corruption de données à ce niveau là). Le module de controle d'antu-pollution est également appellé taint checking. Voir également perlsec.
</p>
<h3><span class="mw-headline" id="D.C3.A9bogage"><span class="mw-headline-number">19.2.9</span> Débogage</span></h3>
<p>Voir le module B::Lint.
</p>
<h3><span class="mw-headline" id="Conversion_d.27autres_languages"><span class="mw-headline-number">19.2.10</span> Conversion d'autres languages</span></h3>
<ul><li> Pour convertir à partir de sed&#160;: man s2p</li>
<li> Pour convertir à partir de awk&#160;: a2p</li></ul>
<h3><span class="mw-headline" id="find"><span class="mw-headline-number">19.2.11</span> find</span></h3>
<p>Pour convertir la commande find en perl utilisez la commande find2perl&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> find2perl <span class="sy0">/</span>tmp <span class="sy0">-</span>atime <span class="sy0">+</span><span class="nu0">14</span> <span class="sy0">-</span><span class="kw3">eval</span> <span class="kw3">unlink</span> <span class="sy0">&gt;</span>toto<span class="sy0">.</span>pl</pre></div></div>
<h3><span class="mw-headline" id="Socket"><span class="mw-headline-number">19.2.12</span> Socket</span></h3>
<p>Si l'on souhaites savoir si un port écoute ou pas&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">use</span> Socket<span class="sy0">;</span>
&#160;
<span class="kw1">my</span> <span class="re0">$proto</span> <span class="sy0">=</span> <span class="kw3">getprotobyname</span><span class="br0">&#40;</span><span class="st_h">'tcp'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">my</span> <span class="re0">$port</span><span class="sy0">=</span><span class="nu0">44556</span><span class="sy0">;</span>
&#160;
<span class="kw3">socket</span><span class="br0">&#40;</span>SOCK<span class="sy0">,</span> PF_INET<span class="sy0">,</span> SOCK_STREAM<span class="sy0">,</span> <span class="re0">$proto</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="kw3">connect</span><span class="br0">&#40;</span>SOCK<span class="sy0">,</span> sockaddr_in<span class="br0">&#40;</span><span class="re0">$port</span><span class="sy0">,</span> inet_aton<span class="br0">&#40;</span><span class="st_h">'localhost'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw3">print</span> <span class="st0">&quot;Personne n'ecoute<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw3">close</span> SOCK<span class="sy0">;</span></pre></div></div>
<p>Pour plus d'info&#160;:<br />
<a rel="nofollow" class="external free" href="http://perldoc.perl.org/perlipc.html#Sockets%3a-Client%2fServer-Communication">http://perldoc.perl.org/perlipc.html#Sockets%3a-Client%2fServer-Communication</a>
</p>
<h3><span class="mw-headline" id="Getopt::Long_et_Getopt::Std"><span class="mw-headline-number">19.2.13</span> Getopt::Long et Getopt::Std</span></h3>
<p>Ce petit module est l'un de mes préféré car il permet de gérer toute la partie @ARGV sans se prendre la tête. Un petit exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw2">use</span> Getopt<span class="sy0">::</span><span class="me2">Long</span><span class="sy0">;</span>
&#160;
 <span class="co1"># Vars</span>
 <span class="kw1">my</span> <span class="br0">&#40;</span><span class="re0">$hostname</span><span class="sy0">,</span><span class="re0">$base</span><span class="sy0">,</span><span class="re0">$filter</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">my</span> <span class="re0">$scope</span><span class="sy0">=</span><span class="st_h">'sub'</span><span class="sy0">;</span>
&#160;
 help <span class="kw1">if</span> <span class="sy0">!</span><span class="br0">&#40;</span><span class="kw3">defined</span><span class="br0">&#40;</span><span class="sy0">@</span><span class="kw2">ARGV</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
 <span class="co1"># Set options</span>
 GetOptions<span class="br0">&#40;</span> <span class="st0">&quot;help|h&quot;</span>    <span class="sy0">=&gt;</span> <span class="re0">\&amp;help</span><span class="sy0">,</span>
     <span class="st0">&quot;H=s&quot;</span>      <span class="sy0">=&gt;</span> <span class="re0">\$hostname</span><span class="sy0">,</span>
     <span class="st0">&quot;b=s&quot;</span>	<span class="sy0">=&gt;</span> <span class="re0">\$base</span><span class="sy0">,</span>
     <span class="st0">&quot;f=s&quot;</span>	<span class="sy0">=&gt;</span> <span class="re0">\$filter</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Ici, vous définissez des variables pour indiquer les arguements. Par exemple&#160;:
</p>
<ul><li> s&#160;: est de type string (ici l'help est définit par la lettre h ou help)</li>
<li> i&#160;: est de type integer.</li></ul>
<p>L'avantage est que ce module gère les variable peut importe ou elles sont situées, peut importe si il y a 1 ou 2 '-' avant. Bref que du bonheur pour l'utilisateur finale.
</p><p>Pour plus d'infos&#160;: <a rel="nofollow" class="external free" href="http://perldoc.perl.org/Getopt/Long.html">http://perldoc.perl.org/Getopt/Long.html</a>
</p>
<h3><span class="mw-headline" id="Term::ANSIColor"><span class="mw-headline-number">19.2.14</span> Term::ANSIColor</span></h3>
<p>Ceci est pour utiliser des couleurs. Personnellement, je m'en sert pour afficher des OK en vert et Failed en rouge. Un petit exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">use</span> Term<span class="sy0">::</span><span class="me2">ANSIColor</span><span class="sy0">;</span>
&#160;
<span class="co1"># Set OK color in green and FAILED in red</span>
<span class="co1"># 1st arg is message line and 2nd is ok or failed</span>
<span class="kw2">sub</span> print_color
<span class="br0">&#123;</span>
    <span class="co1"># Print message</span>
    <span class="kw3">printf</span> <span class="st0">&quot;%-60s&quot;</span><span class="sy0">,</span> <span class="st0">&quot;$_[0]&quot;</span><span class="sy0">;</span>
    <span class="co1"># Print OK in green</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="co5">$_</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">=~</span> <span class="co2">/ok|reussi/i</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>   
        <span class="kw3">print</span> color <span class="st_h">'bold green'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>   
    <span class="kw1">else</span>
    <span class="br0">&#123;</span>   
        <span class="co1"># Print failed in red</span>
        <span class="kw3">print</span> color <span class="st_h">'bold red'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>   
    <span class="kw3">printf</span> <span class="st0">&quot;%20s&quot;</span><span class="sy0">,</span> <span class="st0">&quot;$_[1]<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
    <span class="co1"># Resetting colors</span>
    <span class="kw3">print</span> color <span class="st_h">'reset'</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw3">print</span> color <span class="st_h">'bold red'</span><span class="sy0">;</span>
<span class="kw3">print</span> <span class="st0">&quot;# WARNING&#160;: BE AWARE THAT YOU ARE ACTUALLY WORKING DURING PRODUCTION TIME #<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw3">print</span> color <span class="st_h">'reset'</span><span class="sy0">;</span>
&#160;
print_color<span class="br0">&#40;</span><span class="st0">&quot;Checks passed succesfully&quot;</span><span class="sy0">,</span><span class="st_h">'[ OK ]'</span><span class="br0">&#41;</span><span class="sy0">;</span>
print_color<span class="br0">&#40;</span><span class="st0">&quot;Environement check failed&quot;</span><span class="sy0">,</span><span class="st_h">'[ FAILED ]'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Voilà de quoi vous donner une idée de comment fonctionne les couleurs.
</p>
<h3><span class="mw-headline" id="Term::ReadKey"><span class="mw-headline-number">19.2.15</span> Term::ReadKey</span></h3>
<p>Voici un truc con mais pratique, si on ne veut pas que les mots de passe soient affichés quand quelqu'un tape quelque chose sur un STDIN&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="kw2">use</span> Term<span class="sy0">::</span><span class="me2">ReadKey</span><span class="sy0">;</span>
&#160;
<span class="kw3">print</span> <span class="st0">&quot;Please enter password&#160;:<span class="es0">\n</span>&quot;</span><span class="sy0">;</span>
ReadMode <span class="nu0">2</span><span class="sy0">;</span>
<span class="re4">&lt;STDIN&gt;</span><span class="sy0">;</span>
ReadMode <span class="nu0">0</span><span class="sy0">;</span></pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="Cr.C3.A9er_un_module"><span class="mw-headline-number">19.3</span> Créer un module</span></h2>
<p>La création d'un module peut s'avérer pratique pour dissocier des parties de son code. Il est préférable, la plus part du temps de ne faire que des fonctions pour les modules et de les appeler que depuis le code principale.
</p><p>Pour créer un module, c'est simple. Imaginons que j'ai 2 scripts&#160;:
</p>
<ul><li> main.pl (mon script principale)</li>
<li> mon_module.pm (mon module)</li></ul>
<p>Il faut donc que le module ai une extention en ".pm". Ensuite, il faut qu'il contienne ceci au début&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co1">#!/usr/bin/perl -w -I .</span>
<span class="kw3">package</span> mon_module<span class="sy0">;</span>
<span class="sy0">...</span></pre></div></div>
<p>Et pour qu'il soit valide, la fin du module doit se terminer comme ceci&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="sy0">...</span>
<span class="nu0">1</span><span class="sy0">;</span></pre></div></div>
<p>C'est tout&#160;:-)
</p>
<h2><span class="mw-headline" id="Cr.C3.A9ation_d.27un_binaire"><span class="mw-headline-number">19.4</span> Création d'un binaire</span></h2>
<p>Je n'aime pas trop cette politique mais il peut s'avérer très intéressant de créer des binaires depuis les codes sources de perl. Pour ce faire, il suffit d'utiliser la commande perlcc&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> perlcc</font>
</td></tr>
<tr>
<td>
<pre>perlcc -o binaire source.pl
</pre>
</td></tr></table><br />
<p>Et voilà&#160;:-), c'est très simple et votre code n'est plus divulgué.
</p>
<h2><span class="mw-headline" id="Cr.C3.A9ation_d.27un_exe_sous_Windows"><span class="mw-headline-number">19.5</span> Création d'un exe sous Windows</span></h2>
<p>Il existe plusieurs outils commerciaux pour faire des exe. Pour ma part, j'ai choisis d'utiliser encore une fois, le libre et gratuit. Dans un premier temps, il vous faut installer <a rel="nofollow" class="external text" href="http://www.activestate.com/activeperl/">activeperl</a> ou <a rel="nofollow" class="external text" href="http://strawberryperl.com/">Strawberry</a> afin de pouvoir lancer du Perl sous Windows (<a rel="nofollow" class="external text" href="http://www.cygwin.com/">cygwin</a> peut peut être aussi faire l'affaire).<br />
Personnellement, j'ai une petite préférence pour Strawberry du fait que ça ressemble à 2 goutes d'eau à Linux et que c'est totalement gratuit.
</p>
<h3><span class="mw-headline" id="Avec_Strawberry"><span class="mw-headline-number">19.5.1</span> Avec Strawberry</span></h3>
<p>Ouvrez le Perl Command Line, exécutez cpan et installez les modules suivants&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&gt; cpan
install PAR
install Getopt::ArgvFile
install Module::ScanDeps
install Parse::Binary
install Win32::Exe
install PAR::Packer</pre></div></div>
</td></tr></table><br />
<h3><span class="mw-headline" id="Avec_ActivePerl"><span class="mw-headline-number">19.5.2</span> Avec ActivePerl</span></h3>
<p>Maintenant, utilisez Perl Package Manager pour installer les packages suivants car c'est lui qui va nous permettre d'installer toutes les dépendances nécessaire (dans View, cliquez sur "All packages" pour voir tous les packages disponible)&#160;:<br />
<a href="./File:Ppm1.png.html" class="image"><img alt="Ppm1.png" src="images/4/4e/Ppm1.png" width="577" height="585" /></a>
</p><p>Nous allons également en profiter pour installer ces packages&#160;:
</p>
<ul><li> PAR</li>
<li> MinGW</li>
<li> Getopt-ArgvFile</li>
<li> Module-ScanDeps</li>
<li> Parse-Binary</li>
<li> Win32-Exe</li>
<li> PAR-Packer</li></ul>
<p>Si le package PAR-Packer n'est pas disponible pour votre version, il va falloir aller le chercher sur un site externe <a rel="nofollow" class="external text" href="http://search.cpan.org/~smueller/PAR-Packer-1.002/lib/pp.pm">PAR-Packer</a>. Pour l'installer, vérifiez bien que vous avec la version 5.10 de Perl, sinon adaptez avec le bon fichier, et lancez cette commande sous Windows&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> ppm</font>
</td></tr>
<tr>
<td>
<pre>ppm install <a rel="nofollow" class="external free" href="http://www.bribes.org/perl/ppm/PAR-Packer-5101.ppd">http://www.bribes.org/perl/ppm/PAR-Packer-5101.ppd</a>
</pre>
</td></tr></table><br />
<p>Ou sinon, rajoutez le dépot dans les préférences de PPM&#160;:
</p>
<ul><li> Name&#160;: A repository of Bioperl packages</li>
<li> Location&#160;: <a rel="nofollow" class="external free" href="http://bioperl.org/DIST">http://bioperl.org/DIST</a></li></ul>
<h3><span class="mw-headline" id="G.C3.A9n.C3.A9rer_l.27exe"><span class="mw-headline-number">19.5.3</span> Générer l'exe</span></h3>
<p>Maintenant on peut générer des .exe depuis un script Perl très facilement&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> pp</font>
</td></tr>
<tr>
<td>
<pre>C:\Documents and Settings\deimos\Bureau&gt;<b>pp test.pl -o test.exe</b>
Set up gcc environment - 3.4.5 (mingw-vista special r3)
Set up gcc environment - 3.4.5 (mingw-vista special r3)
Copyright (C) 2004 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.


Set up gcc environment - 3.4.5 (mingw-vista special r3)
Copyright (C) 2004 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</pre>
</td></tr></table><br />
<p>J'ai donc ici compilé un fichier test.pl en test.exe. Simple non&#160;?&#160;:-)
</p><p>Si vous souhaitez rajouter une icone rajoutez votre icone à la fin comme ceci&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> pp</font>
</td></tr>
<tr>
<td>
<pre>pp test.pl -C -x -o test.exe <b>--icon icon.ico</b>
</pre>
</td></tr></table><br />
<p>Si au lancement, vous rencontrez un problème de dépendance de librairies, vous devez spécifier un chemin lors de la compilation pour lui dire ou les trouver (--lib)&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> pp</font>
</td></tr>
<tr>
<td>
<pre>pp test.pl -C -x -o test.exe --icon icon.ico <b>--lib=C:\strawberry\perl\lib:C:\strawberry\perl\site\lib:C:\strawberry\perl\vendor\lib</b>
</pre>
</td></tr></table><br />
<h1><span class="mw-headline" id="M.C3.A9mos"><span class="mw-headline-number">20</span> Mémos</span></h1>
<p>Voici quelques petits mémos qui me servent assez souvent.
</p>
<h2><span class="mw-headline" id="clear"><span class="mw-headline-number">20.1</span> clear</span></h2>
<p>Pour faire l'équivalent d'un clear (effacer l'écran), voici la solution en perl&#160;:
</p>
<pre>print "\033[2J";
</pre>
<p>Si vous souhaitez effacer la ligne courante pour par exemple faire un compte à rebours&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"><span class="co5">$|</span> <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="nu0">1</span> <span class="sy0">..</span> <span class="nu0">5</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
<span class="kw3">print</span> <span class="st0">&quot;<span class="es0">\r</span>Step $_&quot;</span><span class="sy0">;</span>
<span class="kw3">sleep</span> <span class="nu0">1</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw3">print</span> <span class="st0">&quot;<span class="es0">\r</span>Finished.<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Afficher_les_paths_de_ses_librairies_Perl"><span class="mw-headline-number">20.2</span> Afficher les paths de ses librairies Perl</span></h2>
<p>Pour afficher tous les paths pour les librairies disponible, nous allons utiliser cette commande&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> perl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">$ perl -e 'print map { $_ . &quot;\n&quot; } @INC;'
/etc/perl
/usr/local/lib/perl/5.10.0
/usr/local/share/perl/5.10.0
/usr/lib/perl5
/usr/share/perl5
/usr/lib/perl/5.10
/usr/share/perl/5.10
/usr/local/lib/site_perl
.</pre></div></div>
</td></tr></table><br />
<h2><span class="mw-headline" id="R.C3.A9cup.C3.A9rer_le_PID_de_son_programme"><span class="mw-headline-number">20.3</span> Récupérer le PID de son programme</span></h2>
<p>On peut récupérer le PID de son programme Perl très simplement&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="perl source-perl"><pre class="de1"> <span class="kw3">print</span> <span class="st0">&quot;$$<span class="es0">\n</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<h1><span class="mw-headline" id="Ressources"><span class="mw-headline-number">21</span> Ressources</span></h1>
<p><a rel="nofollow" class="external text" href="http://www.perl.org/">Site officiel de Perl</a><br />
<a rel="nofollow" class="external text" href="http://www.cpan.org">Modules et documentations Perl</a><br />
<a rel="nofollow" class="external text" href="http://perlcritic.com">Pour faire valider votre code et prétendre avoir un code "Propre"</a><br />
<a rel="nofollow" class="external text" href="http://www.mongueurs.net/">Les Mongueurs de Perl</a><br />
<a rel="nofollow" class="external text" href="http://perldoc.perl.org/perlport.html">Perlport</a><br />
<a rel="nofollow" class="external text" href="http://books.google.fr/books?id=NuKGSvzneeUC&amp;pg=PP1&amp;ots=cxREfzjaS7&amp;dq=introduction+perl&amp;sig=lRxH8nw5lWxPOyFA-A5_0aaxMgo">Introduction à Perl d'Oreilly</a> (Je vous le conseil fortement)<br />
<a href="./File:Intro_perl.pdf.html" title="File:Intro perl.pdf">Autre documentation sur l'Introduction à Perl</a><br />
<a href="images/1/10/Perl_unixgarden_1.pdf" class="internal" title="Perl unixgarden 1.pdf">Nouveautées de Perl 5.10 Partie 1</a><br />
<a href="images/9/93/Perl_unixgarden_2.pdf" class="internal" title="Perl unixgarden 2.pdf">Nouveautées de Perl 5.10 Partie 2</a><br />
<a href="./File:CPAN_Module.pdf.html" title="File:CPAN Module.pdf">Documentation pour créer un module Perl</a>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.388 seconds
Real time usage: 0.390 seconds
Preprocessor visited node count: 2296/1000000
Preprocessor generated node count: 4506/1000000
Post‐expand include size: 10234/2097152 bytes
Template argument size: 3568/2097152 bytes
Highest expansion depth: 4/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  227.134      1 - -total
  3.67%    8.336      1 - Template:Regex_Array
  2.14%    4.870     22 - Template:Array_3col
  1.73%    3.933     14 - Template:Command
  1.28%    2.901      1 - Template:Config
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:2020-0!*!*!1!en!5!* and timestamp 20181111230831 and revision id 12978
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=Introduction_à_Perl&amp;oldid=12978">https://wiki.deimos.fr/index.php?title=Introduction_à_Perl&amp;oldid=12978</a>"					</div>
													<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://wiki.deimos.fr/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://wiki.deimos.fr/index.php?title=Category:Perl&amp;action=edit&amp;redlink=1" class="new" title="Category:Perl (page does not exist)">Perl</a></li><li><a href="https://wiki.deimos.fr/index.php?title=Category:D%C3%A9veloppement&amp;action=edit&amp;redlink=1" class="new" title="Category:Développement (page does not exist)">Développement</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=Introduction+%C3%A0+Perl" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="Introduction_à_Perl.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="Introduction_à_Perl.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="Introduction_à_Perl.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=Introduction_%C3%A0_Perl&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=Introduction_%C3%A0_Perl&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="Introduction_à_Perl.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/Introduction_à_Perl.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/Introduction_%C3%A0_Perl" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=Introduction_%C3%A0_Perl&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=Introduction_%C3%A0_Perl&amp;oldid=12978" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=Introduction_%C3%A0_Perl&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 24 September 2013, at 11:20.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":430});
}</script>
	</body>
</html>
	