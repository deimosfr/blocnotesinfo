<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>BackupPC : Un outil complet de backup - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="./BackupPC_:_Un_outil_complet_de_backup.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"BackupPC_:_Un_outil_complet_de_backup","wgTitle":"BackupPC : Un outil complet de backup","wgCurRevisionId":11162,"wgRevisionId":11162,"wgArticleId":1832,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"BackupPC_:_Un_outil_complet_de_backup","wgRelevantArticleId":1832,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-bash {line-height: normal;}
.source-bash li, .source-bash pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for bash
 * CSS class: source-bash, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.bash.source-bash .de1, .bash.source-bash .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.bash.source-bash  {font-family:monospace;}
.bash.source-bash .imp {font-weight: bold; color: red;}
.bash.source-bash li, .bash.source-bash .li1 {font-weight: normal; vertical-align:top;}
.bash.source-bash .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.bash.source-bash .li2 {font-weight: bold; vertical-align:top;}
.bash.source-bash .kw1 {color: #000000; font-weight: bold;}
.bash.source-bash .kw2 {color: #c20cb9; font-weight: bold;}
.bash.source-bash .kw3 {color: #7a0874; font-weight: bold;}
.bash.source-bash .co0 {color: #666666; font-style: italic;}
.bash.source-bash .co1 {color: #800000;}
.bash.source-bash .co2 {color: #cc0000; font-style: italic;}
.bash.source-bash .co3 {color: #000000; font-weight: bold;}
.bash.source-bash .co4 {color: #666666;}
.bash.source-bash .es1 {color: #000099; font-weight: bold;}
.bash.source-bash .es2 {color: #007800;}
.bash.source-bash .es3 {color: #007800;}
.bash.source-bash .es4 {color: #007800;}
.bash.source-bash .es5 {color: #780078;}
.bash.source-bash .es_h {color: #000099; font-weight: bold;}
.bash.source-bash .br0 {color: #7a0874; font-weight: bold;}
.bash.source-bash .sy0 {color: #000000; font-weight: bold;}
.bash.source-bash .st0 {color: #ff0000;}
.bash.source-bash .st_h {color: #ff0000;}
.bash.source-bash .nu0 {color: #000000;}
.bash.source-bash .re0 {color: #007800;}
.bash.source-bash .re1 {color: #007800;}
.bash.source-bash .re2 {color: #007800;}
.bash.source-bash .re4 {color: #007800;}
.bash.source-bash .re5 {color: #660033;}
.bash.source-bash .ln-xtra, .bash.source-bash li.ln-xtra, .bash.source-bash div.ln-xtra {background-color: #ffc;}
.bash.source-bash span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-BackupPC_Un_outil_complet_de_backup skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">BackupPC : Un outil complet de backup</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="./BackupPC_:_Un_outil_complet_de_backup.html#mw-navigation">navigation</a>, 					<a href="./BackupPC_:_Un_outil_complet_de_backup.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Configuration"><span class="tocnumber">2</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Hote_Windows_via_smb"><span class="tocnumber">2.1</span> <span class="toctext">Hote Windows via smb</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Hote_Windows_via_rsync"><span class="tocnumber">2.2</span> <span class="toctext">Hote Windows via rsync</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Sauvegarder_des_bases_SQL"><span class="tocnumber">3</span> <span class="toctext">Sauvegarder des bases SQL</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#MySQL"><span class="tocnumber">3.1</span> <span class="toctext">MySQL</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Backupper_toutes_les_bases_d.27un_coup"><span class="tocnumber">3.1.1</span> <span class="toctext">Backupper toutes les bases d'un coup</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Backupper_base_par_base"><span class="tocnumber">3.1.2</span> <span class="toctext">Backupper base par base</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#PostgreSQL"><span class="tocnumber">3.2</span> <span class="toctext">PostgreSQL</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Backupper_toutes_les_bases_d.27un_coup_2"><span class="tocnumber">3.2.1</span> <span class="toctext">Backupper toutes les bases d'un coup</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Backupper_base_par_base_2"><span class="tocnumber">3.2.2</span> <span class="toctext">Backupper base par base</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Restauration_par_script"><span class="tocnumber">4</span> <span class="toctext">Restauration par script</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#FAQ"><span class="tocnumber">5</span> <span class="toctext">FAQ</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Probl.C3.A8me_de_cr.C3.A9ation_de_lien_au_d.C3.A9marrage_du_service"><span class="tocnumber">5.1</span> <span class="toctext">Problème de création de lien au démarrage du service</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#J.27ai_perdu_les_num.C3.A9ros_de_sauvegardes_quand_je_souhaites_restaurer_des_donn.C3.A9es"><span class="tocnumber">5.2</span> <span class="toctext">J'ai perdu les numéros de sauvegardes quand je souhaites restaurer des données</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="./BackupPC_:_Un_outil_complet_de_backup.html#Ressources"><span class="tocnumber">6</span> <span class="toctext">Ressources</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><span class="mw-headline-number">1</span> Introduction</span></h1>
<p>Si vous cherchez un bel outil pour faire des sauvegardes et restaurations, ne cherchez plus, BackupPC est fait pour vous.
</p>
<h1><span class="mw-headline" id="Configuration"><span class="mw-headline-number">2</span> Configuration</span></h1>
<h2><span class="mw-headline" id="Hote_Windows_via_smb"><span class="mw-headline-number">2.1</span> Hote Windows via smb</span></h2>
<p>Vous pouvez sauvegarder via des partages réseau. Pour celà sous windows, faites votre partage, et pour la machine voici un exemple&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">#============================================================= -*-perl-*-
#
# Configuration file for Windows hosts.
# Note the slashes instead of backslashes
#
&#160;
###########################################################################
# What to backup and when to do it
###########################################################################
#Tableau des répertoires à sauvegarder 
$Conf{BackupFilesOnly} = ['/Documents and Settings', 'Travail'];
#Tableau des répertoires exclus de la sauvegarde
$Conf{BackupFilesExclude} = '/Documents and Setings/user1/Local Settings/Temp';            
&#160;
###########################################################################
# General per-PC configuration settings
###########################################################################
#Nom NetBios de la machine
$Conf{ClientNameAlias} = 'netbiosname';
#Méthode de sauvegarde utilisée
$Conf{XferMethod} = 'smb';
#Niveau de verbosité des fichiers de log
$Conf{XferLogLevel} = 1;
#Nom des partages à sauvegarder
$Conf{SmbShareName} = ['C$'];
#Nom de l'utilisateur réseau
$Conf{SmbShareUserName} = 'Administrateur';
#Mot de passe de l'utilisateur réseau
$Conf{SmbSharePasswd} = 'secret';
#Méthode de compression de la sauvegarde
$Conf{ArchiveComp} = 'bzip2';</pre></div></div>
<h2><span class="mw-headline" id="Hote_Windows_via_rsync"><span class="mw-headline-number">2.2</span> Hote Windows via rsync</span></h2>
<p>Nous allons utiliser la méthode avec laquelle nous allons nous passer de Cygwin. Vous pouvez utiliser la méthode avec Cygwin, mais pas installer les 2 simultanément.
</p><p>Pour commencer, téléchargez <a rel="nofollow" class="external text" href="http://www.itefix.no/i2/node/10650">cwrsync</a> et installez le sur la machine windows. Durant l'installation, il va créer un utilisateur avec un mot de passe généré aléatoirement, laissez comme c'est. Cet utilisateur est dédié au lancement du service rsyncd.
</p><p>Ensuite, allez dans le dossier "C:\Program Files (x86)\ICW", puis editez le fichier de configuration&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> C:\Program Files (x86)\ICW\rsyncd.conf</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">use chroot = false
strict modes = false
hosts allow = *
log file = rsyncd.log
&#160;
# Module definitions
# Remember cygwin naming conventions&#160;: c:\work becomes /cygwin/c/work
#
[share]
path = /cygdrive/c/share
comment = share rsync
read only = yes
transfer logging = yes
hosts allow = 192.168.0.14
secrets file = rsyncd.secrets
auth users = backuppc</pre></div></div>
</td></tr></table><br />
<p>Adaptez les lignes suivantes&#160;:
</p>
<ul><li> path&#160;: /cygdrive/ est obligatoire. Utilisez la lettre ensuite du lecteur qui vous intéresse (ici 'c'), puis le dossier en question (ici 'share') (ce qui donne '/cygdrive/c/share' pour 'C:\share').</li>
<li> comment&#160;: une petite ligne de commentaire</li>
<li> read only&#160;: on le passe à yes, car seul backuppc doit y accéder et il n'a pas besoin de droits spécifique en écriture</li>
<li> hosts allow&#160;: spécifier l'ip du serveur backuppc</li>
<li> secret file&#160;: contient un fichier avec les logins et mots de passe des utilisateurs étant autorisés à se connecter</li>
<li> auth users&#160;: spécifie quel utilisateur est autoriser à se connecter.</li></ul>
<p>J'ai donc créerun utilisateur spécifique appellé backuppc sur la machine et lui ai accordé des droits spécifique (onglet sécurité) au dossier "C:\share"
</p><p>Maintenant, nous allons créer un fichier rsyncd.secrets contenant les utilisateurs et mots de passe. Il va donc falloir autoriser l'utilisateur backuppc à se connecter au service rsyncd&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> C:\Program Files (x86)\ICW\rsyncd.secrets</font>
</td></tr>
<tr>
<td>
<pre>user:password
</pre>
</td></tr></table><br />
<p>La configuration est assez simple, ce qui me donnerait par exemple&#160;: backuppc:mot_de_passe<br />
Une fois que c'est fait, <b>redémarrez le service 'RsyncServer'</b> dans la liste des services.
</p><p>Sur le serveur backuppc, la configuration du serveur en question ressemble à ceci&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/backuppc/windows.pl</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">$Conf{XferMethod} = 'rsyncd';
$Conf{RsyncShareName} = [
  'factory'
];
$Conf{RsyncdPasswd} = 'mot_de_passe';
$Conf{RsyncdUserName} = 'backuppc';</pre></div></div>
</td></tr></table><br />
<p>Reloadez backuppc et c'est bon.
</p>
<h1><span class="mw-headline" id="Sauvegarder_des_bases_SQL"><span class="mw-headline-number">3</span> Sauvegarder des bases SQL</span></h1>
<h2><span class="mw-headline" id="MySQL"><span class="mw-headline-number">3.1</span> MySQL</span></h2>
<p>Pour sauvegarder des bases SQL (MySQL par exemple), il est préférable de créer un compte sql dédié aux backups (backuppc par exemple) et de lui assigné les droits de select et de lock sur toutes les bases&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> mysql</font>
</td></tr>
<tr>
<td>
<pre>$ mysql -uroot -p
CREATE USER 'backuppc'@'localhost' IDENTIFIED BY '<b>password'</b>;
GRANT SELECT , LOCK TABLES ON * . * TO 'backuppc'@'localhost' IDENTIFIED BY '<b>password'</b> WITH MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0;
FLUSH PRIVILEGES&#160;;
</pre>
</td></tr></table><br />
<h3><span class="mw-headline" id="Backupper_toutes_les_bases_d.27un_coup"><span class="mw-headline-number">3.1.1</span> Backupper toutes les bases d'un coup</span></h3>
<p>L'avantage de cette méthode est d'être simple, mais elle ne permet pas de restaurer base par base.
</p><p>Dans la configuration de votre host sur backuppc, ajoutez cette ligne puis adaptez là à vos besoin&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/backuppc/myhost.pl</font>
</td></tr>
<tr>
<td>
<pre>...
$Conf{DumpPreUserCmd} = '$sshPath -q -x -l root $host /usr/bin/mysqldump -u<b>backuppc</b> -p<b>password</b> -e --single-transaction --opt --all-databases &gt; /tmp/dump.sql';
...
</pre>
</td></tr></table><br />
<p>L'idéal est ensuite qu'à la fin du backup, vous puissiez effacer ce dump (par soucis de sécurité)&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/backuppc/myhost.pl</font>
</td></tr>
<tr>
<td>
<pre>...
$Conf{DumpPostUserCmd} = '$sshPath -q -x -l root $host rm -f /tmp/dump.sql';
...
</pre>
</td></tr></table><br />
<h3><span class="mw-headline" id="Backupper_base_par_base"><span class="mw-headline-number">3.1.2</span> Backupper base par base</span></h3>
<p>Cette méthode plus fastidieuse à pour avantage la sauvegarde base par base qui permet de restaurer que la base qui vous intéresse en cas de problème.
</p><p>De plus, elle comprends de la compression à la volée de votre base. Il faudra cependant installer 7zip au préalable (j'ai fais le choix de 7zip pour avoir une meilleure compression).
</p><p>Nous allons créer un script que nous allons placer dans /etc/scripts par exemple&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/scripts/backup_mysql_databases.sh</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">#!/bin/bash
user='root'
password='password'
destination='/tmp/backups_sql'
mail='my@mail.com'
&#160;
mkdir -p $destination
for i in `echo &quot;show databases;&quot; | mysql -u$user -p$password | grep -v Database`; do
       mysqldump -u$user -p$password --opt --add-drop-table --routines --triggers --events --single-transaction --master-data=2 -B $i | 7z a -t7z -mx=9 -si $destination/$i.sql.7z
done
&#160;
problem_text=''
problem=0
for i in `ls $destination/*`&#160;; do
    size=`du -sk $i | awk '{ print $1 }'`
    if [ $size -le 4 ]&#160;; then
        problem_text=&quot;$problem_text- $i database. Backupped database size is equal or under 4k ($size)\n&quot;
        problem=1
    fi  
done
&#160;
if [ $problem -ne 0 ]&#160;; then
    echo -e &quot;Backups problem detected on&#160;:\n\n$problem_text&quot; | mail -s &quot;$HOSTNAME - MySQL backup problem&quot; $mail
fi</pre></div></div>
</td></tr></table><br />
<p>Le problème ici est le mot de passe en clair. Vérifiez donc à bien restreindre à l'utilisateur qui va backuper&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>chmod 700 /etc/scripts/backup_mysql_databases.sh
</pre>
</td></tr></table><br />
<p>Dans la configuration de votre host sur backuppc, ajoutez cette ligne puis adaptez là à vos besoin&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/backuppc/myhost.pl</font>
</td></tr>
<tr>
<td>
<pre>...
$Conf{DumpPreUserCmd} = '$sshPath -q -x -l root $host /etc/scripts/backup_mysql_databases.sh';
...
</pre>
</td></tr></table><br />
<p>L'idéal est ensuite qu'à la fin du backup, vous puissiez effacer ce dump (par soucis de sécurité)&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/backuppc/myhost.pl</font>
</td></tr>
<tr>
<td>
<pre>...
$Conf{DumpPostUserCmd} = '$sshPath -q -x -l root $host rm -Rf /tmp/backups_sql';
...
</pre>
</td></tr></table><br />
<h2><span class="mw-headline" id="PostgreSQL"><span class="mw-headline-number">3.2</span> PostgreSQL</span></h2>
<p>Pour sauvegarder des bases Postgres, <b>il nous faut faire comme d'habitude, un <a href="./OpenSSH_:_Export_/_Echange_de_clefs_SSH.html" title="OpenSSH : Export / Echange de clefs SSH">transfert de clef SSH</a> mais pour l'utilisateur postgres.</b>
</p>
<h3><span class="mw-headline" id="Backupper_toutes_les_bases_d.27un_coup_2"><span class="mw-headline-number">3.2.1</span> Backupper toutes les bases d'un coup</span></h3>
<p>L'avantage de cette méthode est d'être simple, mais elle ne permet pas de restaurer base par base.
</p><p>Dans la configuration de votre host sur backuppc, ajoutez cette ligne puis adaptez là à vos besoin&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/backuppc/myhost.pl</font>
</td></tr>
<tr>
<td>
<pre>...
$Conf{DumpPreUserCmd} = '$sshPath -q -x -l <b>postgres</b> $host /usr/bin/pg_dump &gt; /tmp/dump.sql';
...
</pre>
</td></tr></table><br />
<p>L'idéal est ensuite qu'à la fin du backup, vous puissiez effacer ce dump (par soucis de sécurité)&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/backuppc/myhost.pl</font>
</td></tr>
<tr>
<td>
<pre>...
$Conf{DumpPostUserCmd} = '$sshPath -q -x -l root $host rm -f /tmp/dump.sql';
...
</pre>
</td></tr></table><br />
<h3><span class="mw-headline" id="Backupper_base_par_base_2"><span class="mw-headline-number">3.2.2</span> Backupper base par base</span></h3>
<p>Cette méthode plus fastidieuse à pour avantage la sauvegarde base par base qui permet de restaurer que la base qui vous intéresse en cas de problème.
</p><p>De plus, elle comprends de la compression à la volée de votre base. Il faudra cependant installer 7zip au préalable (j'ai fais le choix de 7zip pour avoir une meilleure compression).
</p><p>Nous allons créer un script que nous allons placer dans /etc/scripts par exemple&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/scripts/backup_postgres_databases.sh</font>
</td></tr>
<tr>
<td><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">#!/bin/bash
destination='/tmp/backups_pgsql'
mail='my@mail.fr'
&#160;
mkdir -p $destination || echo -e &quot;Backups problem detected on&#160;:\n\n$problem_text&quot; | mail -s &quot;Can't create $destination folder&quot; $mail
for i in `psql -l | grep &quot;^\ [a-zA-Z0-9]&quot; | grep -v 'template[0|1]' | cut -d\| -f1`; do
       /usr/bin/pg_dump $i | 7z a -t7z -mx=9 -si $destination/$i.sql.7z
done
&#160;
problem_text=''
problem=0
for i in `ls $destination/*`&#160;; do
    size=`du -sk $i | awk '{ print $1 }'`
    if [ $size -le 4 ]&#160;; then
        problem_text=&quot;$problem_text- $i database. Backupped database size is equal or under 4k ($size)\n&quot;
        problem=1
    fi
done
&#160;
if [ $problem -ne 0 ]&#160;; then
    echo -e &quot;Backups problem detected on&#160;:\n\n$problem_text&quot; | mail -s &quot;$HOSTNAME - Postgres backup problem&quot; $mail
fi</pre></div></div>
</td></tr></table><br />
<p>Un peu de sécurité ne fait pas de mal&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> </font>
</td></tr>
<tr>
<td>
<pre>chmod 744 /etc/scripts/backup_postgres_databases.sh
chown postgres /etc/scripts/backup_postgres_databases.sh
</pre>
</td></tr></table><br />
<p>Dans la configuration de votre host sur backuppc, ajoutez cette ligne puis adaptez là à vos besoin&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/backuppc/myhost.pl</font>
</td></tr>
<tr>
<td>
<pre>...
$Conf{DumpPreUserCmd} = '$sshPath -q -x -l <b>postgres</b> $host /etc/scripts/backup_postgres_databases.sh';
...
</pre>
</td></tr></table><br />
<p>L'idéal est ensuite qu'à la fin du backup, vous puissiez effacer ce dump (par soucis de sécurité)&#160;:
</p>
<table width="100%" class="config_array">
<tr>
<td class="config_subarray"> <font size="-1"><a href="./File:Configuration_file.png.html" class="image" title="Configuration File"><img alt="Configuration File" src="images/a/a6/Configuration_file.png" width="32" height="32" /></a> /etc/backuppc/myhost.pl</font>
</td></tr>
<tr>
<td>
<pre>...
 $Conf{DumpPostUserCmd} = '$sshPath -q -x -l root $host rm -Rf /tmp/backups_sql';
...
</pre>
</td></tr></table><br />
<h1><span class="mw-headline" id="Restauration_par_script"><span class="mw-headline-number">4</span> Restauration par script</span></h1>
<p>Voici un script qui permet de faire de la restauration&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="bash source-bash"><pre class="de1"><span class="co0">#!/bin/bash</span>
&#160;
<span class="co0"># Script for restoring hosts (last full backup) from command line.</span>
<span class="co0"># The restored backups can be found in $RESTOREDIR (defined below),</span>
<span class="co0"># and are to be written on tape.</span>
&#160;
<span class="re2">BACKUPPCDIR</span>=<span class="sy0">/</span>srv<span class="sy0">/</span>backuppc-data
<span class="re2">HOSTSDIR</span>=<span class="re1">$BACKUPPCDIR</span><span class="sy0">/</span>pc
<span class="re2">RESTOREDIR</span>=<span class="re1">$HOSTSDIR</span><span class="sy0">/</span>restore<span class="sy0">/</span>restore
&#160;
<span class="co0"># put the hosts/directories you do not want to restore into egrep...</span>
<span class="re2">HOSTS</span>=$<span class="br0">&#40;</span><span class="kw2">ls</span> <span class="re1">$HOSTSDIR</span> <span class="sy0">|</span> <span class="kw2">egrep</span> <span class="re5">-v</span> <span class="st_h">'(HOST_CONFIG_FILES|restore)'</span> <span class="sy0">|</span> <span class="kw2">tr</span> <span class="sy0">/</span> <span class="st0">&quot; &quot;</span><span class="br0">&#41;</span>
<span class="co0"># or use:</span>
<span class="co0"># HOSTS=&quot;HOST1 HOST2 REMOTE3&quot;</span>
&#160;
&#160;
<span class="co0"># no need to change anything below...</span>
&#160;
<span class="re2">DATE</span>=$<span class="br0">&#40;</span><span class="kw2">date</span> +<span class="sy0">%</span>F<span class="br0">&#41;</span>
<span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="re1">$RESTOREDIR</span><span class="sy0">/</span><span class="re1">$DATE</span>
&#160;
<span class="kw1">for</span> HOST <span class="kw1">in</span> <span class="re1">$HOSTS</span>
<span class="kw1">do</span>
<span class="co0"># find the last full backup</span>
<span class="re2">NUMBER</span>=$<span class="br0">&#40;</span><span class="kw2">grep</span> full <span class="re1">$HOSTSDIR</span><span class="sy0">/</span><span class="re1">$HOST</span><span class="sy0">/</span>backups<span class="sy0">|</span> <span class="kw2">tail</span> <span class="re5">-1</span> <span class="sy0">|</span> <span class="kw2">cut</span> -f1<span class="br0">&#41;</span>
&#160;
<span class="kw1">if</span> <span class="br0">&#91;</span> <span class="st0">&quot;<span class="es2">$NUMBER</span>&quot;</span> <span class="br0">&#93;</span>
<span class="kw1">then</span>
&#160;
<span class="co0"># do the backup for the host</span>
<span class="re1">$BACKUPPCDIR</span><span class="sy0">/</span>bin<span class="sy0">/</span>BackupPC_archiveHost <span class="re1">$BACKUPPCDIR</span><span class="sy0">/</span>bin<span class="sy0">/</span>BackupPC_tarCreate <span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span><span class="kw2">split</span> <span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span>par2 \
            <span class="st0">&quot;<span class="es2">$HOST</span>&quot;</span> <span class="st0">&quot;<span class="es2">$NUMBER</span>&quot;</span> <span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span><span class="kw2">gzip</span> .gz 0000000 <span class="re1">$RESTOREDIR</span><span class="sy0">/</span><span class="re1">$DATE</span> <span class="nu0">0</span> \<span class="sy0">*</span>
<span class="kw1">fi</span>
&#160;
<span class="kw1">done</span></pre></div></div>
<h1><span class="mw-headline" id="FAQ"><span class="mw-headline-number">5</span> FAQ</span></h1>
<h2><span class="mw-headline" id="Probl.C3.A8me_de_cr.C3.A9ation_de_lien_au_d.C3.A9marrage_du_service"><span class="mw-headline-number">5.1</span> Problème de création de lien au démarrage du service</span></h2>
<p>Si vous rencontrez ce type de message d'erreur&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">2008-04-20 17:55:46 Can't create a test hardlink between a file in /var/lib/backuppc/pc and /var/lib/backuppc/cpool.  Either these are different file systems, or this file system doesn't 
support hardlinks, or these directories don't exist, or there is a permissions problem, or the file system is out of inodes or full.  Use df, df -i, and ls -ld to check each of these possibilities. Quitting...</pre></div></div>
<p>Vérifiez bien les droits etc... sinon, si vous utilisez la cryptologie encfs, alors cela vient de ça et je vous invite a suivre <a href="./Encfs_:_Mise_en_place_d'Encfs_avec_FUSE.html#I_can.27t_create_hard_link" title="Encfs : Mise en place d'Encfs avec FUSE">ce lien</a>
</p>
<h2><span class="mw-headline" id="J.27ai_perdu_les_num.C3.A9ros_de_sauvegardes_quand_je_souhaites_restaurer_des_donn.C3.A9es"><span class="mw-headline-number">5.2</span> J'ai perdu les numéros de sauvegardes quand je souhaites restaurer des données</span></h2>
<p>Si vous avez toujours vos données mais que vos fichier backups et backups.old sont corrompus, il reste un moyen de recréer l'indexation des sauvegardes afin de pouvoir récupérer les données. Si vous souhaitez tout réindexer, exécutez ceci&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> BackupPC_fixupBackupSummary</font>
</td></tr>
<tr>
<td>
<pre>/usr/share/backuppc/bin/BackupPC_fixupBackupSummary
</pre>
</td></tr></table><br />
<p>Sinon, si vous voulez faire simplement une machine, ajoutez ceci à la fin&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> BackupPC_fixupBackupSummary</font>
</td></tr>
<tr>
<td>
<pre>$ /usr/share/backuppc/bin/BackupPC_fixupBackupSummary <b>-l localhost</b>
Doing host localhost
   Reading /var/lib/backuppc/pc/localhost/0/backupInfo
   Reading /var/lib/backuppc/pc/localhost/1/backupInfo
   Reading /var/lib/backuppc/pc/localhost/2/backupInfo
   Reading /var/lib/backuppc/pc/localhost/204/backupInfo
   Reading /var/lib/backuppc/pc/localhost/206/backupInfo
   Reading /var/lib/backuppc/pc/localhost/207/backupInfo
</pre>
<p><br />
</p>
</td></tr></table><br />
<p>Si vous avez une erreur Perl, c'est qu'il vous manque surement le paquage Perl "Time::ParseDate", faites ceci&#160;:
</p>
<table width="100%" class="command_array">
<tr>
<td class="command_subarray"> <font size="-1"><a href="./File:Terminal.png.html" class="image" title="Command"><img alt="Command" src="images/9/9c/Terminal.png" width="32" height="32" /></a> apt-get</font>
</td></tr>
<tr>
<td>
<pre>apt-get install libtime-modules-perl
</pre>
</td></tr></table><br />
<h1><span class="mw-headline" id="Ressources"><span class="mw-headline-number">6</span> Ressources</span></h1>
<p><a href="./File:BackupPC.pdf.html" title="File:BackupPC.pdf">Documentation BackupPC</a><br />
<a href="./File:Backuppc.pdf.html" title="File:Backuppc.pdf">Documentation on Backuppc on Debian</a>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.056 seconds
Real time usage: 0.057 seconds
Preprocessor visited node count: 362/1000000
Preprocessor generated node count: 972/1000000
Post‐expand include size: 6623/2097152 bytes
Template argument size: 2795/2097152 bytes
Highest expansion depth: 4/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   17.340      1 - -total
 28.74%    4.983     13 - Template:Config
  9.73%    1.688      1 - Template:Mysql_backup_alldb_7z
  8.75%    1.517      6 - Template:Command
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:1832-0!*!0!1!en!5!* and timestamp 20181111230721 and revision id 11162
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=BackupPC_:_Un_outil_complet_de_backup&amp;oldid=11162">https://wiki.deimos.fr/index.php?title=BackupPC_:_Un_outil_complet_de_backup&amp;oldid=11162</a>"					</div>
													<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=BackupPC+%3A+Un+outil+complet+de+backup" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="./BackupPC_:_Un_outil_complet_de_backup.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="./BackupPC_:_Un_outil_complet_de_backup.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="./BackupPC_:_Un_outil_complet_de_backup.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=BackupPC_:_Un_outil_complet_de_backup&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=BackupPC_:_Un_outil_complet_de_backup&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="./BackupPC_:_Un_outil_complet_de_backup.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/BackupPC_:_Un_outil_complet_de_backup.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/BackupPC_:_Un_outil_complet_de_backup" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=BackupPC_:_Un_outil_complet_de_backup&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=BackupPC_:_Un_outil_complet_de_backup&amp;oldid=11162" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=BackupPC_:_Un_outil_complet_de_backup&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 9 July 2012, at 07:24.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":31});
}</script>
	</body>
</html>
	