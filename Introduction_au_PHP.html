<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Introduction au PHP - Deimos.fr / Bloc Notes Informatique</title>
<meta name="generator" content="MediaWiki 1.25.5" />
<link rel="shortcut icon" href="https://wiki.deimos.fr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Deimos.fr / Bloc Notes Informatique (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.deimos.fr/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Introduction_au_PHP.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr" />
<link rel="alternate" type="application/atom+xml" title="Deimos.fr / Bloc Notes Informatique Atom feed" href="https://wiki.deimos.fr/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|mediawiki.skinning.interface|mediawiki.ui.button|skins.vector.styles&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-css:7:6f8c0c45eefd74c7bbe9478b32df38c0 */</style>
<script src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Introduction_au_PHP","wgTitle":"Introduction au PHP","wgCurRevisionId":9424,"wgRevisionId":9424,"wgArticleId":2639,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Introduction_au_PHP","wgRelevantArticleId":2639,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: blocnotesinfo-wiki_:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-php {line-height: normal;}
.source-php li, .source-php pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for php
 * CSS class: source-php, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.php.source-php .de1, .php.source-php .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.php.source-php  {font-family:monospace;}
.php.source-php .imp {font-weight: bold; color: red;}
.php.source-php li, .php.source-php .li1 {font-weight: normal; vertical-align:top;}
.php.source-php .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.php.source-php .li2 {font-weight: bold; vertical-align:top;}
.php.source-php .kw1 {color: #b1b100;}
.php.source-php .kw2 {color: #000000; font-weight: bold;}
.php.source-php .kw3 {color: #990000;}
.php.source-php .kw4 {color: #009900; font-weight: bold;}
.php.source-php .co1 {color: #666666; font-style: italic;}
.php.source-php .co2 {color: #666666; font-style: italic;}
.php.source-php .co3 {color: #0000cc; font-style: italic;}
.php.source-php .co4 {color: #009933; font-style: italic;}
.php.source-php .coMULTI {color: #666666; font-style: italic;}
.php.source-php .es0 {color: #000099; font-weight: bold;}
.php.source-php .es1 {color: #000099; font-weight: bold;}
.php.source-php .es2 {color: #660099; font-weight: bold;}
.php.source-php .es3 {color: #660099; font-weight: bold;}
.php.source-php .es4 {color: #006699; font-weight: bold;}
.php.source-php .es5 {color: #006699; font-weight: bold; font-style: italic;}
.php.source-php .es6 {color: #009933; font-weight: bold;}
.php.source-php .es_h {color: #000099; font-weight: bold;}
.php.source-php .br0 {color: #009900;}
.php.source-php .sy0 {color: #339933;}
.php.source-php .sy1 {color: #000000; font-weight: bold;}
.php.source-php .st0 {color: #0000ff;}
.php.source-php .st_h {color: #0000ff;}
.php.source-php .nu0 {color: #cc66cc;}
.php.source-php .nu8 {color: #208080;}
.php.source-php .nu12 {color: #208080;}
.php.source-php .nu19 {color:#800080;}
.php.source-php .me1 {color: #004000;}
.php.source-php .me2 {color: #004000;}
.php.source-php .re0 {color: #000088;}
.php.source-php .ln-xtra, .php.source-php li.ln-xtra, .php.source-php div.ln-xtra {background-color: #ffc;}
.php.source-php span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Introduction_au_PHP skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Introduction au PHP</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Deimos.fr / Bloc Notes Informatique</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="Introduction_au_PHP.html#mw-navigation">navigation</a>, 					<a href="Introduction_au_PHP.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Introduction_au_PHP.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Introduction_au_PHP.html#Bases"><span class="tocnumber">2</span> <span class="toctext">Bases</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Introduction_au_PHP.html#Manipulation_de_donn.C3.A9es_textuelles_et_num.C3.A9riques"><span class="tocnumber">3</span> <span class="toctext">Manipulation de données textuelles et numériques</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Introduction_au_PHP.html#Manipulation_de_texte"><span class="tocnumber">3.1</span> <span class="toctext">Manipulation de texte</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="Introduction_au_PHP.html#Validation_des_cha.C3.AEnes"><span class="tocnumber">3.1.1</span> <span class="toctext">Validation des chaînes</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="Introduction_au_PHP.html#Formatage_du_texte"><span class="tocnumber">3.1.2</span> <span class="toctext">Formatage du texte</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="Introduction_au_PHP.html#Op.C3.A9rateurs_arithm.C3.A9tiques"><span class="tocnumber">3.2</span> <span class="toctext">Opérateurs arithmétiques</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Introduction_au_PHP.html#Variables"><span class="tocnumber">3.3</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="Introduction_au_PHP.html#Op.C3.A9rations_sur_les_variables"><span class="tocnumber">3.4</span> <span class="toctext">Opérations sur les variables</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Introduction_au_PHP.html#Variables_plac.C3.A9es_dans_les_cha.C3.AEnes"><span class="tocnumber">3.5</span> <span class="toctext">Variables placées dans les chaînes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="Introduction_au_PHP.html#Prises_de_d.C3.A9cision_et_r.C3.A9p.C3.A9titions"><span class="tocnumber">4</span> <span class="toctext">Prises de décision et répétitions</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="Introduction_au_PHP.html#Prise_de_d.C3.A9cision"><span class="tocnumber">4.1</span> <span class="toctext">Prise de décision</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="Introduction_au_PHP.html#Cr.C3.A9ation_de_d.C3.A9cisions_complexe"><span class="tocnumber">4.2</span> <span class="toctext">Création de décisions complexe</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="Introduction_au_PHP.html#R.C3.A9p.C3.A9titions"><span class="tocnumber">4.3</span> <span class="toctext">Répétitions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="Introduction_au_PHP.html#Utilisation_des_tableaux"><span class="tocnumber">5</span> <span class="toctext">Utilisation des tableaux</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="Introduction_au_PHP.html#Cr.C3.A9ation_d.27un_tableau"><span class="tocnumber">5.1</span> <span class="toctext">Création d'un tableau</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="Introduction_au_PHP.html#Cr.C3.A9ation_d.27un_tableau_indic.C3.A9_par_des_nombres"><span class="tocnumber">5.2</span> <span class="toctext">Création d'un tableau indicé par des nombres</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="Introduction_au_PHP.html#Trouver_la_taille_d.27un_tableau"><span class="tocnumber">5.3</span> <span class="toctext">Trouver la taille d'un tableau</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="Introduction_au_PHP.html#Parcours_des_tableaux"><span class="tocnumber">5.4</span> <span class="toctext">Parcours des tableaux</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="Introduction_au_PHP.html#Modification_des_tableaux"><span class="tocnumber">5.5</span> <span class="toctext">Modification des tableaux</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="Introduction_au_PHP.html#Tri_de_tableaux"><span class="tocnumber">5.6</span> <span class="toctext">Tri de tableaux</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="Introduction_au_PHP.html#Utilisation_de_tableau_multidimensionnels"><span class="tocnumber">5.7</span> <span class="toctext">Utilisation de tableau multidimensionnels</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="Introduction_au_PHP.html#Fonctions"><span class="tocnumber">6</span> <span class="toctext">Fonctions</span></a>
<ul>
<li class="toclevel-2 tocsection-24"><a href="Introduction_au_PHP.html#D.C3.A9clarations_et_appels_de_fonctions"><span class="tocnumber">6.1</span> <span class="toctext">Déclarations et appels de fonctions</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="Introduction_au_PHP.html#Passage_des_param.C3.A8tres_aux_fonctions"><span class="tocnumber">6.2</span> <span class="toctext">Passage des paramètres aux fonctions</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="Introduction_au_PHP.html#Valeurs_de_retour_des_fonctions"><span class="tocnumber">6.3</span> <span class="toctext">Valeurs de retour des fonctions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27"><a href="Introduction_au_PHP.html#Cr.C3.A9ation_de_formulaires_HTML"><span class="tocnumber">7</span> <span class="toctext">Création de formulaires HTML</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="Introduction_au_PHP.html#Variables_utiles_concernant_le_serveur"><span class="tocnumber">7.1</span> <span class="toctext">Variables utiles concernant le serveur</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="Introduction_au_PHP.html#Acc.C3.A8s_aux_param.C3.A8tres_des_formulaires"><span class="tocnumber">7.2</span> <span class="toctext">Accès aux paramètres des formulaires</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="Introduction_au_PHP.html#Traitement_des_formulaires_avec_des_fonctions"><span class="tocnumber">7.3</span> <span class="toctext">Traitement des formulaires avec des fonctions</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="Introduction_au_PHP.html#El.C3.A9ments_obligatoires"><span class="tocnumber">7.4</span> <span class="toctext">Eléments obligatoires</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="Introduction_au_PHP.html#El.C3.A9ments_num.C3.A9riques_ou_cha.C3.AEnes"><span class="tocnumber">7.5</span> <span class="toctext">Eléments numériques ou chaînes</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="Introduction_au_PHP.html#Intervalles_num.C3.A9riques"><span class="tocnumber">7.6</span> <span class="toctext">Intervalles numériques</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="Introduction_au_PHP.html#Adresses_de_courrier_.C3.A9lectronique"><span class="tocnumber">7.7</span> <span class="toctext">Adresses de courrier électronique</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="Introduction_au_PHP.html#Menu_.3Cselect.3E"><span class="tocnumber">7.8</span> <span class="toctext">Menu &lt;select&gt;</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="Introduction_au_PHP.html#HTML_et_Javascript"><span class="tocnumber">7.9</span> <span class="toctext">HTML et Javascript</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="Introduction_au_PHP.html#Affichage_de_valeurs_par_d.C3.A9faut"><span class="tocnumber">7.10</span> <span class="toctext">Affichage de valeurs par défaut</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-38"><a href="Introduction_au_PHP.html#Utilisation_des_bases_de_donn.C3.A9es_pour_le_stockage_d.27informations"><span class="tocnumber">8</span> <span class="toctext">Utilisation des bases de données pour le stockage d'informations</span></a>
<ul>
<li class="toclevel-2 tocsection-39"><a href="Introduction_au_PHP.html#Connexion_.C3.A0_un_syst.C3.A8me_de_bases_de_donn.C3.A9es"><span class="tocnumber">8.1</span> <span class="toctext">Connexion à un système de bases de données</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="Introduction_au_PHP.html#Cr.C3.A9ation_d.27une_table"><span class="tocnumber">8.2</span> <span class="toctext">Création d'une table</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="Introduction_au_PHP.html#Stockage_d.27informations_dans_une_base_de_donn.C3.A9es"><span class="tocnumber">8.3</span> <span class="toctext">Stockage d'informations dans une base de données</span></a>
<ul>
<li class="toclevel-3 tocsection-42"><a href="Introduction_au_PHP.html#Insert"><span class="tocnumber">8.3.1</span> <span class="toctext">Insert</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="Introduction_au_PHP.html#Update"><span class="tocnumber">8.3.2</span> <span class="toctext">Update</span></a></li>
<li class="toclevel-3 tocsection-44"><a href="Introduction_au_PHP.html#Delete"><span class="tocnumber">8.3.3</span> <span class="toctext">Delete</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-45"><a href="Introduction_au_PHP.html#Inserion_s.C3.A9curis.C3.A9e_de_donn.C3.A9es_provenant_de_formulaires"><span class="tocnumber">8.4</span> <span class="toctext">Inserion sécurisée de données provenant de formulaires</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="Introduction_au_PHP.html#G.C3.A9n.C3.A9ration_d.27identifiants_uniques"><span class="tocnumber">8.5</span> <span class="toctext">Génération d'identifiants uniques</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="Introduction_au_PHP.html#R.C3.A9cup.C3.A9ration_des_donn.C3.A9es_stock.C3.A9es_dans_la_base"><span class="tocnumber">8.6</span> <span class="toctext">Récupération des données stockées dans la base</span></a>
<ul>
<li class="toclevel-3 tocsection-48"><a href="Introduction_au_PHP.html#Select"><span class="tocnumber">8.6.1</span> <span class="toctext">Select</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-49"><a href="Introduction_au_PHP.html#Modification_du_format_des_lignes_du_r.C3.A9sultat"><span class="tocnumber">8.7</span> <span class="toctext">Modification du format des lignes du résultat</span></a></li>
<li class="toclevel-2 tocsection-50"><a href="Introduction_au_PHP.html#R.C3.A9cup.C3.A9ration_s.C3.A9curis.C3.A9e_des_donn.C3.A9es_d.27un_formulaire"><span class="tocnumber">8.8</span> <span class="toctext">Récupération sécurisée des données d'un formulaire</span></a></li>
<li class="toclevel-2 tocsection-51"><a href="Introduction_au_PHP.html#Formulaire_de_consultation_complet"><span class="tocnumber">8.9</span> <span class="toctext">Formulaire de consultation complet</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="Introduction_au_PHP.html#MySQL_sans_PEAR_DB"><span class="tocnumber">8.10</span> <span class="toctext">MySQL sans PEAR DB</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-53"><a href="Introduction_au_PHP.html#M.C3.A9morisation_des_utilisateurs_gr.C3.A2ce_aux_cookies_et_aux_sessions"><span class="tocnumber">9</span> <span class="toctext">Mémorisation des utilisateurs grâce aux cookies et aux sessions</span></a></li>
<li class="toclevel-1 tocsection-54"><a href="Introduction_au_PHP.html#D.C3.A9bogage"><span class="tocnumber">10</span> <span class="toctext">Débogage</span></a></li>
<li class="toclevel-1 tocsection-55"><a href="Introduction_au_PHP.html#Ressources"><span class="tocnumber">11</span> <span class="toctext">Ressources</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><span class="mw-headline-number">1</span> Introduction</span></h1>
<p><a rel="nofollow" class="external text" href="http://fr.wikipedia.org/wiki/Php">PHP</a> (acronyme récursif pour PHP: Hypertext Preprocessor), est un langage de scripts libre principalement utilisé pour produire des pages web dynamiques via un serveur HTTP, mais pouvant également fonctionner comme n'importe quel langage interprété de façon locale, en exécutant les programmes en ligne de commande. PHP est un langage impératif disposant depuis la version 5 de fonctionnalités de modèle objet complètes[3]. En raison de la richesse de sa bibliothèque, on désigne parfois PHP comme une plate-forme plus qu'un simple langage.
</p>
<h1><span class="mw-headline" id="Bases"><span class="mw-headline-number">2</span> Bases</span></h1>
<ul><li> Dans des pages contenant essentiellement du HTML, il est possible d'insérer des petits bouts de PHP pour faciliter la vie. Il suffit de mettre des balies de type&#160;:</li></ul>
<pre>&lt;html&gt;
&lt;head&gt;&lt;title&gt;PHP says hello&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;b&gt;
<b>&lt;?php</b>
<b>print "Hello, World!";</b>
<b>?&gt;</b>
&lt;/b&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Cela produira&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>html<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>head<span class="sy0">&gt;&lt;</span>title<span class="sy0">&gt;</span>PHP says hello<span class="sy0">&lt;/</span>title<span class="sy0">&gt;&lt;/</span>head<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>body<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>b<span class="sy0">&gt;</span>
Hello<span class="sy0">,</span> World<span class="sy0">!</span>
<span class="sy0">&lt;/</span>b<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>body<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>html<span class="sy0">&gt;</span></pre></div></div>
<ul><li> Nous pouvons également inverser l'exemple ci dessus afin de mettre du code HTML dans une page PHP&#160;:</li></ul>
<pre>&lt;?php
<b>print &lt;&lt;&lt;_HTML_</b>
&lt;form method=&quot;post&quot; action=&quot;$_SERVER[PHP_SELF]&quot;&gt;
 Your Name: &lt;input type=&quot;text&quot; name=&quot;user&quot;&gt;
 &lt;br/&gt;
 &lt;input type=&quot;submit&quot; value=&quot;Say Hello&quot;&gt;
 &lt;/form&gt;
<b>_HTML_;</b>
?&gt;
</pre>
<p>La variable <b>$_SERVER[PHP_SELF]</b> a été appellée, elle est spéciale au PHP. Elle sert à obtenir l'URL du lien appellée mais sans le protocole, ni le nom d'hôte. Ex&#160;:<br />
</p>
<pre><a rel="nofollow" class="external free" href="https://www.deimos.fr">https://www.deimos.fr</a><b>/blocnotesinfo/index.php?title=Introduction_au_PHP</b>
</pre>
<p>Seul ce qui est en gras est gardé.
</p><p>Pour vous donner de ce qui est disponible, vous pouvez créer un fichier avec ceci&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="text source-text"><pre class="de1">&lt;?php
echo &quot;&lt;table border=\&quot;1\&quot;&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['argv'] .&quot;&lt;/td&gt;&lt;td&gt;argv&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['argc'] .&quot;&lt;/td&gt;&lt;td&gt;argc&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['GATEWAY_INTERFACE'] .&quot;&lt;/td&gt;&lt;td&gt;GATEWAY_INTERFACE&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['SERVER_ADDR'] .&quot;&lt;/td&gt;&lt;td&gt;SERVER_ADDR&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['SERVER_NAME'] .&quot;&lt;/td&gt;&lt;td&gt;SERVER_NAME&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['SERVER_SOFTWARE'] .&quot;&lt;/td&gt;&lt;td&gt;SERVER_SOFTWARE&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['SERVER_PROTOCOL'] .&quot;&lt;/td&gt;&lt;td&gt;SERVER_PROTOCOL&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['REQUEST_METHOD'] .&quot;&lt;/td&gt;&lt;td&gt;REQUEST_METHOD&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['REQUEST_TIME'] .&quot;&lt;/td&gt;&lt;td&gt;REQUEST_TIME&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['QUERY_STRING'] .&quot;&lt;/td&gt;&lt;td&gt;QUERY_STRING&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['DOCUMENT_ROOT'] .&quot;&lt;/td&gt;&lt;td&gt;DOCUMENT_ROOT&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['HTTP_ACCEPT'] .&quot;&lt;/td&gt;&lt;td&gt;HTTP_ACCEPT&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['HTTP_ACCEPT_CHARSET'] .&quot;&lt;/td&gt;&lt;td&gt;HTTP_ACCEPT_CHARSET&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['HTTP_ACCEPT_ENCODING'] .&quot;&lt;/td&gt;&lt;td&gt;HTTP_ACCEPT_ENCODING&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['HTTP_ACCEPT_LANGUAGE'] .&quot;&lt;/td&gt;&lt;td&gt;HTTP_ACCEPT_LANGUAGE&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['HTTP_CONNECTION'] .&quot;&lt;/td&gt;&lt;td&gt;HTTP_CONNECTION&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['HTTP_HOST'] .&quot;&lt;/td&gt;&lt;td&gt;HTTP_HOST&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['HTTP_REFERER'] .&quot;&lt;/td&gt;&lt;td&gt;HTTP_REFERER&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['HTTP_USER_AGENT'] .&quot;&lt;/td&gt;&lt;td&gt;HTTP_USER_AGENT&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['HTTPS'] .&quot;&lt;/td&gt;&lt;td&gt;HTTPS&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['REMOTE_ADDR'] .&quot;&lt;/td&gt;&lt;td&gt;REMOTE_ADDR&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['REMOTE_HOST'] .&quot;&lt;/td&gt;&lt;td&gt;REMOTE_HOST&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['REMOTE_PORT'] .&quot;&lt;/td&gt;&lt;td&gt;REMOTE_PORT&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['SCRIPT_FILENAME'] .&quot;&lt;/td&gt;&lt;td&gt;SCRIPT_FILENAME&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['SERVER_ADMIN'] .&quot;&lt;/td&gt;&lt;td&gt;SERVER_ADMIN&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['SERVER_PORT'] .&quot;&lt;/td&gt;&lt;td&gt;SERVER_PORT&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['SERVER_SIGNATURE'] .&quot;&lt;/td&gt;&lt;td&gt;SERVER_SIGNATURE&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['PATH_TRANSLATED'] .&quot;&lt;/td&gt;&lt;td&gt;PATH_TRANSLATED&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['SCRIPT_NAME'] .&quot;&lt;/td&gt;&lt;td&gt;SCRIPT_NAME&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['REQUEST_URI'] .&quot;&lt;/td&gt;&lt;td&gt;REQUEST_URI&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['PHP_AUTH_DIGEST'] .&quot;&lt;/td&gt;&lt;td&gt;PHP_AUTH_DIGEST&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['PHP_AUTH_USER'] .&quot;&lt;/td&gt;&lt;td&gt;PHP_AUTH_USER&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['PHP_AUTH_PW'] .&quot;&lt;/td&gt;&lt;td&gt;PHP_AUTH_PW&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;tr&gt;&lt;td&gt;&quot; .$_SERVER['AUTH_TYPE'] .&quot;&lt;/td&gt;&lt;td&gt;AUTH_TYPE&lt;/td&gt;&lt;/tr&gt;&quot;;
echo &quot;&lt;/table&gt;&quot;
?&gt;</pre></div></div>
<ul><li> Pour des formulaires de type HTML correspondant à ceci&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;POST&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;sayhello.php&quot;</span><span class="sy0">&gt;</span>
Your Name<span class="sy0">:</span> <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;user&quot;</span><span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>br<span class="sy0">/&gt;</span>
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;Say Hello&quot;</span><span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span></pre></div></div>
<p>Va donner en PHP cela&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">&lt;?php</span>
<span class="kw1">print</span> <span class="st0">&quot;Hello, &quot;</span><span class="sy0">;</span>
<span class="co1">// Print what was submitted in the form parameter called 'user'</span>
<span class="kw1">print</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'user'</span><span class="br0">&#93;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;!&quot;</span><span class="sy0">;</span>
<span class="sy1">?&gt;</span></pre></div></div>
<p><b>$_POST</b> contient les valeurs des paramètres du formulaire, telles qu'elles ont été soumises. En termes de programmation, il s'agit d'une variable ainsi nomée parce que vous pouvez modifier les valeurs qu'elle contient. En fait c'est une variable <b>tableau</b> car elle peut contenir plusieurs valeurs simultanément.
</p><p>Lorsque $_SERVER[PHP_SELF] est l'action du formulaire, vous pouvez placer dans la même page le code d'affichage d'un formulaire et le code de traitement des données saisies&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">&lt;?php</span>
<span class="co1">// Print a greeting if the form was submitted</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'user'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;Hello, &quot;</span><span class="sy0">;</span>
    <span class="co1">// Print what was submitted in the form parameter called 'user'</span>
    <span class="kw1">print</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'user'</span><span class="br0">&#93;</span><span class="sy0">;</span>
    <span class="kw1">print</span> <span class="st0">&quot;!&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
    <span class="co1">// Otherwise, print the form</span>
    <span class="kw1">print</span> <span class="sy0">&lt;&lt;&lt;</span>_HTML_
<span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;post&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;<span class="es4">$_SERVER[PHP_SELF]</span>&quot;</span><span class="sy0">&gt;</span>
Your Name<span class="sy0">:</span> <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;user&quot;</span><span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>br<span class="sy0">/&gt;</span>
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;Say Hello&quot;</span><span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span>
_HTML_<span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="sy1">?&gt;</span></pre></div></div>
<ul><li> Pour des commentaires, vous pouvez utiliser&#160;:
<ul><li> //&#160;: Pour une ligne à commenter</li>
<li> /* à */&#160;: pour commenter un paragraphe, nous revindrons là dessus plus bas.</li></ul></li></ul>
<ul><li> Maintenant voici un exemple de code PHP qui se connecte à un serveur de base de données et récupère une liste de plats avec leurs prix en fonction de la valeur du paramètre rpas, puis affiche ces plats et leurs prix dans une table HTML&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">&lt;?php</span>
<span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span>
<span class="co1">// Connect to MySQL running on localhost with username &quot;menu&quot;</span>
<span class="co1">// and password &quot;good2eaT&quot;, and database &quot;dinner&quot;</span>
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://menu:good2eaT@localhost/dinner'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">// Define what the allowable meals are</span>
<span class="re0">$meals</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'breakfast'</span><span class="sy0">,</span><span class="st_h">'lunch'</span><span class="sy0">,</span><span class="st_h">'dinner'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">// Check if submitted form parameter &quot;meal&quot; is one of</span>
<span class="co1">// &quot;breakfast&quot;, &quot;lunch&quot;, or &quot;dinner&quot;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">in_array</span><span class="br0">&#40;</span><span class="re0">$meals</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'meal'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="co1">// If so, get all of the dishes for the specified meal</span>
    <span class="re0">$q</span> <span class="sy0">=</span> <span class="re0">$dbh</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;SELECT dish,price FROM meals WHERE meal LIKE '&quot;</span> <span class="sy0">.</span>
                     <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'meal'</span><span class="br0">&#93;</span> <span class="sy0">.</span><span class="st0">&quot;'&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="co1">// If no dishes were found in the database, say so</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$q</span><span class="sy0">-&gt;</span><span class="me1">numrows</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">print</span> <span class="st0">&quot;No dishes available.&quot;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
        <span class="co1">// Otherwise, print out each dish and its price as a row</span>
        <span class="co1">// in an HTML table</span>
        <span class="kw1">print</span> <span class="st_h">'&lt;table&gt;&lt;tr&gt;&lt;th&gt;Dish&lt;/th&gt;&lt;th&gt;Price&lt;/th&gt;&lt;/tr&gt;'</span><span class="sy0">;</span>
        <span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$row</span> <span class="sy0">=</span> <span class="re0">$q</span><span class="sy0">-&gt;</span><span class="me1">fetchRow</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">print</span> <span class="st0">&quot;&lt;tr&gt;&lt;td&gt;<span class="es4">$row[0]</span>&lt;/td&gt;&lt;td&gt;<span class="es4">$row[1]</span>&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
        <span class="kw1">print</span> <span class="st0">&quot;&lt;/table&gt;&quot;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
    <span class="co1">// This message prints if the submitted parameter &quot;meal&quot; isn't</span>
    <span class="co1">// &quot;breakfast&quot;, &quot;lunch&quot;, or &quot;dinner&quot;</span>
    <span class="kw1">print</span> <span class="st0">&quot;Unknown meal.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="sy1">?&gt;</span></pre></div></div>
<h1><span class="mw-headline" id="Manipulation_de_donn.C3.A9es_textuelles_et_num.C3.A9riques"><span class="mw-headline-number">3</span> Manipulation de données textuelles et numériques</span></h1>
<p>Le chaines peuvent etre délimitées par des "". Elles fonctionnent comme les chaines entourées par des ', mais permettent plus de caractères spéciaux&#160;:
</p>
<table border="1">
<tr>
<td><b>Character</b>
</td>
<td><b>Meaning</b>
</td></tr>
<tr>
<td>\n
</td>
<td>Newline (ASCII 10)
</td></tr>
<tr>
<td>\r
</td>
<td>Carriage return (ASCII 13)
</td></tr>
<tr>
<td>\t
</td>
<td>Tab (ASCII 9)
</td></tr>
<tr>
<td>\\
</td>
<td>\
</td></tr>
<tr>
<td>\$
</td>
<td>$
</td></tr>
<tr>
<td>\"
</td>
<td>"
</td></tr>
<tr>
<td>\0 .. \777
</td>
<td>Octal (base 8) number
</td></tr>
<tr>
<td>\x0 .. \xFF
</td>
<td>Hexadecimal (base 16) number
</td></tr></table>
<p>Un petit exemple pour clarifier le tout. Imaginons $user vaut Pierre&#160;:
</p>
<ul><li> 'Bonjour $user'&#160;: Affichera&#160;: Bonjour $user</li>
<li> "Bonjour $user"&#160;: Affichera&#160;: Bonjour Pierre</li></ul>
<p>Pour combiner 2 chaines, il faut utliser un "." <b>qui permet de concaténer des chaines</b>&#160;:<br />
</p>
<pre>print 'bread' . 'fruit';
print "It's a beautiful day " . 'in the neighborhood.';
print "The price is: " . '$3.95';
print 'Inky' . 'Pinky' . 'Blinky' . 'Clyde';
</pre>
<p>Ceci affichera&#160;:
</p>
<pre>breadfruit
It's a beautiful day in the neighborhood.
The price is: $3.95
InkyPinkyBlinkyClyde
</pre>
<h2><span class="mw-headline" id="Manipulation_de_texte"><span class="mw-headline-number">3.1</span> Manipulation de texte</span></h2>
<h3><span class="mw-headline" id="Validation_des_cha.C3.AEnes"><span class="mw-headline-number">3.1.1</span> Validation des chaînes</span></h3>
<p>La fonction <b>trim()</b> supprime les espaces situés au début ou à la fin d'une chaine. Combiné à <b>strlen()</b>, qui vous renseigne sur la longueur d'une chaine, vous pouvez connaitre la longueur d'une valeur soumise par un formulaire tout en ignorant les espaces de tête et de fin.
</p>
<pre>// $_POST['zipcode'] holds the value of the submitted form parameter
// "zipcode"
$zipcode = <b>trim($_POST['zipcode']);</b>
// Now $zipcode holds that value, with any leading or trailing spaces
// removed
$zip_length = <b>strlen($zipcode);</b>
// Complain if the ZIP code is not 5 characters long
<b>if ($zip_length&#160;!= 5) {</b>
   print "Please enter a ZIP code that is 5 characters long.";
}
</pre>
<p>On peut faire plus court en combinant les fonctions. Un peu comme Final fantasy quand on combine la mana&#160;:
</p>
<pre>if (<b>strlen(trim($_POST['zipcode']))</b>&#160;!= 5) {
   print "Please enter a ZIP code that is 5 characters long.";
}
</pre>
<p>Pour comparer les chaines avec l'opérateur dégalité, utilisez (==)&#160;:
</p>
<pre>if ($_POST['email'] <b>==</b> 'president@whitehouse.gov') {
  print "Welcome, Mr. President.";
}
</pre>
<p>Pour comparer des chaînes sans tenir compte de la casse, utilisez la fonction strcasecmp(). Elle renvoie 0 si les 2 chaînes fournies à strcasecmp() sont égales (à la casse près)&#160;:
</p>
<pre>if (<b>strcasecmp($_POST['email']</b>, 'president@whitehouse.gov') == 0) {
   print "Welcome back, Mr. President.";
}
</pre>
<h3><span class="mw-headline" id="Formatage_du_texte"><span class="mw-headline-number">3.1.2</span> Formatage du texte</span></h3>
<p>printf() donne plus de contrôle que print sur l'aspect de sortie&#160;:
</p>
<pre>$price = 5; $tax = 0.075;
printf('The dish costs $%.2f', $price * (1 + $tax));
</pre>
<p>Ceci affichera&#160;:
</p>
<pre>The dish costs $5.38
</pre>
<p>Le "%.2fé est remplacée par la valeur de $price * (1 + $tax)) et formatée pour avoir 2 chiffres après la virgule.
</p><p>Les règles de format commencent par&#160;%. On peut ensuite placer des modificateurs optionneles qui affectent le comportement de la règle&#160;:
</p>
<ul><li> Un caractère de remplissage&#160;: Si la chaine remplaçant la règle de format est trop courte, ce caractère permettra de la remplir. Utilisez un espace pour remplir avec des espaces ou un 0 pour remplir avec des zéros.</li>
<li> Un signe&#160;: Pour les nombres, un + placera un + avant les nombres positifs (ils sont normalement affichés sans signe). Pour les chaînes, un - fera que la chaîne sera justifiée à droite (par défaut, les chaînes sont justifiées à gauche).</li>
<li> Une largeur minimale&#160;: la taille minimale que devra avoir la valeur remplçant la règle de format. Si elle est plus courte, le caractère de remplissage servira à combler le vide.</li>
<li> Un point et un nombre de décimales&#160;: Pour les nombres à virgule flottante, cela contrôle le nombre de chiffres après la virgule. Dans l'exemple ci dessus, le .2 formate $price * (1 + $tax)); avec 2 décimales.</li></ul>
<p>Voici un exemple de remplissage par des zéros avec printf()&#160;:
</p>
<pre>$zip = '6520';
$month = 2;
$day = 6;
$year = 2007;
printf("ZIP is&#160;%05d and the date is&#160;%02d/%02d/%d", $zip, $month, $day, $year);
</pre>
<p>Affichera&#160;:
</p>
<pre>ZIP is 06520 and the date is 02/06/2007
</pre>
<p>Affichage des signes avec printf()&#160;:
</p>
<pre>$min = -40;
$max = 40;
printf("The computer can operate between&#160;%+d and&#160;%+d degrees Celsius.", $min, $max);
</pre>
<p>Affichera&#160;:
</p>
<pre>The computer can operate between -40 and +40 degrees Celsius.
</pre>
<p>Pour découvrir d'autres règle avec printf, consultez <a rel="nofollow" class="external free" href="http://www.php.net">http://www.php.net</a>
</p><p>Les fonctions <b>strtolower()</b> et <b>strtoupper()</b> produisent , respectivement, des versions tout en minuscules ou tout en majuscules d'une chaîne.
</p>
<pre>print strtolower('Beef, CHICKEN, Pork, duCK');
print strtoupper('Beef, CHICKEN, Pork, duCK');
</pre>
<p>Affichera&#160;:
</p>
<pre>beef, chicken, pork, duck
BEEF, CHICKEN, PORK, DUCK
</pre>
<p>La fonction <b>ucwords()</b> met en majuscule la première lettre de chaque mot d'une chaîne&#160;:
</p>
<pre>print ucwords(strtolower('JOHN FRANKENHEIMER'));
</pre>
<p>Affichera&#160;:
</p>
<pre>John Frankenheimer
</pre>
<p>Troncature d'une chaîne avec <b>substr()</b>&#160;:
</p>
<pre>// Grab the first thirty characters of $_POST['comments']
print substr($_POST['comments'], 0, 30);
// Add an ellipsis
print '...';
</pre>
<p>Affichera&#160;:
</p>
<pre>The Fresh Fish with Rice Noodle was delicious, but I didn't like the Beef Tripe.
</pre>
<p>Les 3 paramèters de substr() sont respectivement, la chaîne concernée, la position de départ de la sous-chaîne à extraire et le nombre de caractère à extraire.<br />
La chaîne commence à la position 0, et non 1&#160;: substr($_POST['comments'], 0, 30) signifie donc "extraire 30 caractères de $_POST['comments'] en partant du début de cette chaîne".
</p><p>Extraction de la fin d'une chaîne avec substr()&#160;:
</p>
<pre>print 'Card: XX';
print substr($_POST['card'],-4,4);
</pre>
<p>Si le paramètre du formulaire vaut 4000-1234-5678-9101, ceci affichera&#160;:
</p>
<pre>Card: XX9101
</pre>
<p>C'est donc un exemple très pratique pour les cartes de crédit.
</p><p>Pour abréger, vous pouvez utiliser substr($_POST['card'],-4) au lieu de substr($_POST['card'], -4,4). Si vous ne fournissez pas le dernier paramètre, substr() renverra tout ce qui se trouve entre la position de départ (qu'elle soit positive ou négative) et la fin de la chaîne.
</p><p>Utilisation de <b>str_replace()</b>&#160;:
</p>
 <div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">print</span> <span class="kw3">str_replace</span><span class="br0">&#40;</span><span class="st_h">'{class}'</span><span class="sy0">,</span><span class="re0">$my_class</span><span class="sy0">,</span>
                  <span class="st_h">'&lt;span class=&quot;{class}&quot;&gt;Fried Bean Curd&lt;span&gt;
                   &lt;span class=&quot;{class}&quot;&gt;Oil-Soaked Fish&lt;/span&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>span <span class="kw2">class</span><span class="sy0">=</span><span class="st0">&quot;lunch&quot;</span><span class="sy0">&gt;</span>Fried Bean Curd<span class="sy0">&lt;</span>span<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>span <span class="kw2">class</span><span class="sy0">=</span><span class="st0">&quot;lunch&quot;</span><span class="sy0">&gt;</span>Oil<span class="sy0">-</span>Soaked Fish<span class="sy0">&lt;/</span>span<span class="sy0">&gt;</span></pre></div></div>
<h2><span class="mw-headline" id="Op.C3.A9rateurs_arithm.C3.A9tiques"><span class="mw-headline-number">3.2</span> Opérateurs arithmétiques</span></h2>
<p>Quelques opérations élémentaires en php&#160;:
</p>
<pre>print 2 + 2;
print 17 - 3.5;
print 10 / 3;
print 6 * 9;
</pre>
<p>Affichera&#160;:
</p>
<pre>4
13.5
3.3333333333333
54
</pre>
<p>Outre les signes +, -,/ et *, php dispose du module&#160;% qui renvoie le reste d'une division&#160;:
</p>
<pre>print 17&#160;% 3;
</pre>
<p>affichera&#160;:
</p>
<pre>2
</pre>
<h2><span class="mw-headline" id="Variables"><span class="mw-headline-number">3.3</span> Variables</span></h2>
<p>Voici un exemple de variables acceptables&#160;:
</p>
<pre>$size
$drinkSize
$my_drink_size
$_drinks
$drink4you2
</pre>
<p>Et non acceptable&#160;:
</p>
<table border="1">
<tr>
<td><b>Variable name</b>
</td>
<td><b>Flaw</b>
</td></tr>
<tr>
<td>Begins with a number
</td>
<td>$2hot4u
</td></tr>
<tr>
<td>Unacceptable character: -
</td>
<td>$drink-size
</td></tr>
<tr>
<td>Unacceptable characters: @ and .
</td>
<td>$drinkmaster@example.com
</td></tr>
<tr>
<td>Unacceptable character:&#160;!
</td>
<td>$drink!lots
</td></tr>
<tr>
<td>Unacceptable character: +
</td>
<td>$drink+dinner
</td></tr></table>
<p><b>Les noms des variables sont sensibles à la casse&#160;!!!</b>
</p>
<h2><span class="mw-headline" id="Op.C3.A9rations_sur_les_variables"><span class="mw-headline-number">3.4</span> Opérations sur les variables</span></h2>
<p>Quelques opérations sur les variables&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">&lt;?php</span>
<span class="re0">$price</span> <span class="sy0">=</span> <span class="nu19">3.95</span><span class="sy0">;</span>
<span class="re0">$tax_rate</span> <span class="sy0">=</span> <span class="nu19">0.08</span><span class="sy0">;</span>
<span class="re0">$tax_amount</span> <span class="sy0">=</span> <span class="re0">$price</span> <span class="sy0">*</span> <span class="re0">$tax_rate</span><span class="sy0">;</span>
<span class="re0">$total_cost</span> <span class="sy0">=</span> <span class="re0">$price</span> <span class="sy0">+</span> <span class="re0">$tax_amount</span><span class="sy0">;</span>
<span class="re0">$username</span> <span class="sy0">=</span> <span class="st_h">'james'</span><span class="sy0">;</span>
<span class="re0">$domain</span> <span class="sy0">=</span> <span class="st_h">'@example.com'</span><span class="sy0">;</span>
<span class="re0">$email_address</span> <span class="sy0">=</span> <span class="re0">$username</span> <span class="sy0">.</span> <span class="re0">$domain</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st_h">'The tax is '</span> <span class="sy0">.</span> <span class="re0">$tax_amount</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span> <span class="co1">// this prints a linebreak</span>
<span class="kw1">print</span> <span class="st_h">'The total cost is '</span> <span class="sy0">.</span><span class="re0">$total_cost</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span> <span class="co1">// this prints a linebreak</span>
<span class="kw1">print</span> <span class="re0">$email_address</span><span class="sy0">;</span>
<span class="sy1">?&gt;</span></pre></div></div>
<p>Addition combinée à l'affectation&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="co1">// Add 3 the regular way</span>
<span class="re0">$price</span> <span class="sy0">=</span> <span class="re0">$price</span> <span class="sy0">+</span> <span class="nu0">3</span><span class="sy0">;</span>
<span class="co1">// Add 3 with the combined operator</span>
<span class="re0">$price</span> <span class="sy0">+=</span> <span class="nu0">3</span><span class="sy0">;</span></pre></div></div>
<p>Incrémentation et décrémentation&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="co1">// Add one to $birthday</span>
<span class="re0">$birthday</span> <span class="sy0">=</span> <span class="re0">$birthday</span> <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span>
<span class="co1">// Add another one to $birthday</span>
<span class="sy0">++</span><span class="re0">$birthday</span><span class="sy0">;</span>
<span class="co1">// Subtract 1 from $years_left</span>
<span class="re0">$years_left</span> <span class="sy0">=</span> <span class="re0">$years_left</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span>
<span class="co1">// Subtract another 1 from $years_left</span></pre></div></div>
<h2><span class="mw-headline" id="Variables_plac.C3.A9es_dans_les_cha.C3.AEnes"><span class="mw-headline-number">3.5</span> Variables placées dans les chaînes</span></h2>
<p>Interpolation dans un document sur place&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$page_title</span> <span class="sy0">=</span> <span class="st_h">'Menu'</span><span class="sy0">;</span>
<span class="re0">$meat</span> <span class="sy0">=</span> <span class="st_h">'pork'</span><span class="sy0">;</span>
<span class="re0">$vegetable</span> <span class="sy0">=</span> <span class="st_h">'bean sprout'</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="co3">&lt;&lt;&lt;MENU
&lt;html&gt;
&lt;head&gt;&lt;title&gt;$page_title&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;
&lt;li&gt; Barbecued $meat
&lt;li&gt; Sliced $meat
&lt;li&gt; Braised $meat with $vegetable
&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;
MENU</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>html<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>head<span class="sy0">&gt;&lt;</span>title<span class="sy0">&gt;</span>Menu<span class="sy0">&lt;/</span>title<span class="sy0">&gt;&lt;/</span>head<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>body<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>ul<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>li<span class="sy0">&gt;</span> Barbecued pork
<span class="sy0">&lt;</span>li<span class="sy0">&gt;</span> Sliced pork
<span class="sy0">&lt;</span>li<span class="sy0">&gt;</span> Braised pork with bean sprout
<span class="sy0">&lt;/</span>ul<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>body<span class="sy0">&gt;</span></pre></div></div>
<p>Interpolation avec accolades&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$preparation</span> <span class="sy0">=</span> <span class="st_h">'Braise'</span><span class="sy0">;</span>
<span class="re0">$meat</span> <span class="sy0">=</span> <span class="st_h">'Beef'</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;<span class="es4">{$preparation}</span>d <span class="es4">$meat</span> with Vegetables&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<pre>Braised Beef with Vegetables
</pre>
<p>Sans les accolades, l'instruction print de l'exemple ci dessus aurait été&#160;:
</p>
<pre>print "$preparationd $meat with Vegetables";
</pre>
<h1><span class="mw-headline" id="Prises_de_d.C3.A9cision_et_r.C3.A9p.C3.A9titions"><span class="mw-headline-number">4</span> Prises de décision et répétitions</span></h1>
<p>Dans ce chapitre, nous allons voir comment&#160;:
</p>
<ul><li> Afficher un menu spécial si un utilisateur doté des droits d'admin est connecté.</li>
<li> Afficher un en-tête de page différent en fonction du moment de la journée.</li>
<li> Prévenir un user s'il a reçu de nouveaux messages depuis sa dernière connection.</li></ul>
<p>Lorsqu'il prends des décisions, l'interpréteur PHP ramène une expression à une valeur true ou false.
</p><p>La valeur d'une affectation est la valeur affectée. L'expression $prix = 5 vaut 5&#160;: ce prix a été affecté à $prix. Comme l'affectatiion produit un ésultat, vous pouvez enchaîner les affectations pour affecter la même valeur à plusieurs variables&#160;:
</p>
<pre>$prix = $quantite = 5;
</pre>
<h2><span class="mw-headline" id="Prise_de_d.C3.A9cision"><span class="mw-headline-number">4.1</span> Prise de décision</span></h2>
<p>Utilisation du <b>elseif()</b>&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$logged_in</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="co1">// This runs if $logged_in is true</span>
    <span class="kw1">print</span> <span class="st0">&quot;Welcome aboard, trusted user.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">elseif</span> <span class="br0">&#40;</span><span class="re0">$new_messages</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="co1">// This runs if $logged_in is false but $new_messages is true</span>
    <span class="kw1">print</span> <span class="st0">&quot;Dear stranger, there are new messages.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">elseif</span> <span class="br0">&#40;</span><span class="re0">$emergency</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="co1">// This runs if $logged_in and $new_messages are false</span>
    <span class="co1">// But $emergency is true</span>
    <span class="kw1">print</span> <span class="st0">&quot;Stranger, there are no new messages, but there is an emergency.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
    <span class="co1">// You can put what you want</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Cr.C3.A9ation_de_d.C3.A9cisions_complexe"><span class="mw-headline-number">4.2</span> Création de décisions complexe</span></h2>
<p>L'opérateur d'égalité&#160;:
</p>
<pre>if ($new_messages <b>==</b> 10) {
   print "You have ten new messages.";
}
if ($new_messages <b>==</b> $max_messages) {
   print "You have the maximum number of messages.";
}
if ($dinner <b>==</b> 'Braised Scallops') {
   print "Yum! I love seafood.";
}
</pre>
<p>L'opérateur de différence&#160;:
</p>
<pre>if ($new_messages <b>!=</b> 10) {
   print "You don't have ten new messages.";
}
if ($dinner <b>!=</b> 'Braised Scallops') {
   print "I guess we're out of scallops.";
}
</pre>
<p><b>Faites attention à ne pas utiliser = lorsque vous voulez utiliser ==. Un seul signe égal affecte une valeur et renvoie la valeur affectée , tandis que deux signes égal testent l'égalité et renvoient true si les valeurs sont égales. Si vous oubliez le second signe égal, vous obtiendrez généralement un test if() qui vaudra toujorus true&#160;:</b>
</p><p>Exemple d'affectation qui aurait dû être une comparaison&#160;:
</p>
<pre>if ($new_messages = 12) {
   print "It seems you now have twelve new messages.";
}
</pre>
<p><b>Un moyen d'éviter l'utilisation malencontreuse de = à la place de == consiste à placer la variable à droite de la comparaison et le littéral à gauche&#160;:</b>
</p>
<pre>if (12 == $new_messages) {
   print "You have twelve new messages.";
}
</pre>
<p>Opérateurs inférieur et supérieur&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$age</span><span class="sy0">&gt;</span> <span class="nu0">17</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;You are old enough to download the movie.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$age</span> <span class="sy0">&gt;=</span> <span class="nu0">65</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;You are old enough for a discount.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$celsius_temp</span> <span class="sy0">&lt;=</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;Uh-oh, your pipes may freeze.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$kelvin_temp</span> <span class="sy0">&lt;</span> <span class="nu19">20.3</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;Your hydrogen is a liquid or a solid now.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Les nombres à virgule flottante ont une représentation interne qui peut être légèrement différente de la valeur qui leur a été affectée (la représentation interne de 50.0 par exmeple, pourrait être 50.000000002). Pour tester si 2 nombres à virgule flottante sont égaux, vérifiez si la différence entre ces 2 nombres est inférieure à un seuil raisonnablement petit, au lieu d'utiliser l'opérateur d'égalité. Si vous comparez les valeurs monétaires, par exemple, un seuil acceptable serait 0.00001.
</p><p>Comparaisons de nombres à virgule flottante&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span><span class="br0">&#40;</span><span class="kw3">abs</span><span class="br0">&#40;</span><span class="re0">$price_1</span> <span class="sy0">-</span> <span class="re0">$price_2</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu19">0.00001</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st_h">'$price_1 and $price_2 are equal.'</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st_h">'$price_1 and $price_2 are not equal.'</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>La fonction <b>abs()</b> renvoie la valeur absolue de son paramètre. Avec abs(), la comparaison fonctionne correctement, que $price_1 soit plus grand ou non que $price_2.
</p><p><b>Les codes ASCII des chiffres sont inférieurs à ceux des majuscules, eux même inférieurs aux codes des minuscules, les codes des lettres accentuées sont la partie "étendue", donc supérieurs à tous les codes de l'ASCII international.</b>
</p><p>Généralement les chaînes sont comparées selon l'ordre alphabétique (caramel &lt; chocolat).
</p><p>Comparaison de chaînes&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$word</span> <span class="sy0">&lt;</span> <span class="st_h">'baa'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;Your word isn't cookie.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$word</span><span class="sy0">&gt;=</span> <span class="st_h">'zoo'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;Your word could be zoo or zymurgy, but not zone.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Si vous voulez être sûr que l'interpréteur PHP compare les chaînes dans effectuer de conversion numérique en coulisse, utilisez la fonction <b>strcmp()</b> qui compare toujours ses paramètres selon l'ordre de la table ASCII.
</p><p>La fonction <b>strcmp()</b> prend deux chaînes en paramètres. Elle renvoie un nombre positif si la première chaîne est plus grande que la seconde ou un nombre négatif si la première chaîne est inférieure à la seconde. L'ordre est celui de la table ASCII étendue. Cette fonction renvoie 0 si les 2 chaînes sont égales.
</p><p>Comparaisons de chaînes avec strcmp()&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$x</span> <span class="sy0">=</span> <span class="kw3">strcmp</span><span class="br0">&#40;</span><span class="st0">&quot;x54321&quot;</span><span class="sy0">,</span><span class="st0">&quot;x5678&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$x</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st_h">'The string &quot;x54321&quot; is greater than the string &quot;x5678&quot;.'</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">elseif</span> <span class="br0">&#40;</span><span class="re0">$x</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st_h">'The string &quot;x54321&quot; is less than the string &quot;x5678&quot;.'</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Dans l'exemple ci dessous, strcmp() trouve que la chaîne "54321" est inférieur à "5678" car les seconds caractères des 2 chaînes diffèrent et que "4" est avant "6". <b>L'ordre alphabétique est seulement ce qui importe à la fonction strcmp(), peut importe que numériquement ce soit l'inverse</b>.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="co1">// These values are compared using numeric order</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="st0">&quot;54321&quot;</span> <span class="sy0">&gt;</span> <span class="st0">&quot;5678&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st_h">'The string &quot;54321&quot; is greater than the string &quot;5678&quot;.'</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st_h">'The string &quot;54321&quot; is not greater than the string &quot;5678&quot;.'</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Utilisation de l'opérateur de négation&#160;:
</p>
<pre>if (! strcasecmp($first_name,$last_name)) {
   print '$first_name and $last_name are equal.';
}
</pre>
<p>Grâce aux opérateurs logiques, vous pouvez combiner plusieurs expressions dans une même instruction if(). L'opérateur logique ET, &amp;, teste si 2 expressions sont toutes les 2 vraies.<br />
L'opérateur logique OU, ||, teste si l'une au moins des 2 expressions est vraie&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><span class="re0">$age</span> <span class="sy0">&gt;=</span> <span class="nu0">13</span><span class="br0">&#41;</span> <span class="sy0">&amp;&amp;</span> <span class="br0">&#40;</span><span class="re0">$age</span> <span class="sy0">&lt;</span> <span class="nu0">65</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw1">print</span> <span class="st0">&quot;You are too old for a kid's discount and too young for the senior's discount.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><span class="re0">$meal</span> <span class="sy0">==</span> <span class="st_h">'breakfast'</span><span class="br0">&#41;</span> <span class="sy0">||</span> <span class="br0">&#40;</span><span class="re0">$dessert</span> <span class="sy0">==</span> <span class="st_h">'souffle'</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="kw1">print</span> <span class="st0">&quot;Time to eat some eggs.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="R.C3.A9p.C3.A9titions"><span class="mw-headline-number">4.3</span> Répétitions</span></h2>
<p>Production d'un menu &lt;select&gt; avec while()&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st_h">'&lt;select name=&quot;people&quot;&gt;'</span><span class="sy0">;</span>
<span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$i</span> <span class="sy0">&lt;=</span> <span class="nu0">10</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;&lt;option&gt;<span class="es4">$i</span>&lt;/option&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
    <span class="re0">$i</span><span class="sy0">++;</span>
<span class="br0">&#125;</span>
<span class="kw1">print</span> <span class="st_h">'&lt;/select&gt;'</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>select name<span class="sy0">=</span><span class="st0">&quot;people&quot;</span><span class="sy0">&gt;&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">1</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">2</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">3</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">4</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">5</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">6</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">7</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">8</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">9</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span><span class="nu0">10</span><span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>select<span class="sy0">&gt;</span></pre></div></div>
<p>Production d'un menu &lt;select&gt; avec for()&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">print</span> <span class="st_h">'&lt;select name=&quot;people&quot;&gt;'</span><span class="sy0">;</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;=</span> <span class="nu0">10</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;&lt;option&gt;<span class="es4">$i</span>&lt;/option&gt;&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">print</span> <span class="st_h">'&lt;/select&gt;'</span><span class="sy0">;</span></pre></div></div>
<p>La troisième expression ($i++) est l'expression d'itération. Elle est exécutée après chaque exécution du corps de la boucle.
</p><p>Plusieurs expressions dans for()&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">print</span> <span class="st_h">'&lt;select name=&quot;doughnuts&quot;&gt;'</span><span class="sy0">;</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="re0">$min</span> <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="re0">$max</span> <span class="sy0">=</span> <span class="nu0">10</span><span class="sy0">;</span> <span class="re0">$min</span> <span class="sy0">&lt;</span> <span class="nu0">50</span><span class="sy0">;</span> <span class="re0">$min</span> <span class="sy0">+=</span> <span class="nu0">10</span><span class="sy0">,</span> <span class="re0">$max</span> <span class="sy0">+=</span> <span class="nu0">10</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;&lt;option&gt;<span class="es4">$min</span> - <span class="es4">$max</span>&lt;/option&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">print</span> <span class="st_h">'&lt;/select&gt;'</span><span class="sy0">;</span></pre></div></div>
<h1><span class="mw-headline" id="Utilisation_des_tableaux"><span class="mw-headline-number">5</span> Utilisation des tableaux</span></h1>
<p>Dans les exemples qui vont suivre, voici le tableau type sur lequel nous allons nous appuyer&#160;:<br />
<a href="./File:Php_tab.jpg.html" class="image"><img alt="Php tab.jpg" src="images/8/87/Php_tab.jpg" width="191" height="167" /></a>
</p>
<h2><span class="mw-headline" id="Cr.C3.A9ation_d.27un_tableau"><span class="mw-headline-number">5.1</span> Création d'un tableau</span></h2>
<ul><li> Création de tableaux&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="co1">// An array called $vegetables with string keys</span>
<span class="re0">$vegetables</span><span class="br0">&#91;</span><span class="st_h">'corn'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'yellow'</span><span class="sy0">;</span>
<span class="re0">$vegetables</span><span class="br0">&#91;</span><span class="st_h">'beet'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'red'</span><span class="sy0">;</span>
<span class="re0">$vegetables</span><span class="br0">&#91;</span><span class="st_h">'carrot'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'orange'</span><span class="sy0">;</span>
<span class="co1">// An array called $dinner with numeric keys</span>
<span class="re0">$dinner</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Sweet Corn and Asparagus'</span><span class="sy0">;</span>
<span class="re0">$dinner</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Lemon Chicken'</span><span class="sy0">;</span>
<span class="re0">$dinner</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Braised Bamboo Fungus'</span><span class="sy0">;</span>
<span class="co1">// An array called $computers with numeric and string keys</span>
<span class="re0">$computers</span><span class="br0">&#91;</span><span class="st_h">'trs-80'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Radio Shack'</span><span class="sy0">;</span>
<span class="re0">$computers</span><span class="br0">&#91;</span><span class="nu0">2600</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Atari'</span><span class="sy0">;</span>
<span class="re0">$computers</span><span class="br0">&#91;</span><span class="st_h">'Adam'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Coleco'</span><span class="sy0">;</span></pre></div></div>
<p>Les clés et les valeurs des tableaux s'écrivent exactement comme les autre chaînes et nombre d'un programme PHP&#160;: <b>avec des apostrophes autour des chaînes, mais pas autour des nombres.</b>
</p>
<ul><li> Création de tableaux avec <b>array()&#160;:</b></li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$vegetables</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'corn'</span> <span class="sy0">=&gt;</span> <span class="st_h">'yellow'</span><span class="sy0">,</span>
                    <span class="st_h">'beet'</span> <span class="sy0">=&gt;</span> <span class="st_h">'red'</span><span class="sy0">,</span>
                    <span class="st_h">'carrot'</span> <span class="sy0">=&gt;</span> <span class="st_h">'orange'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$dinner</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="nu0">0</span> <span class="sy0">=&gt;</span> <span class="st_h">'Sweet Corn and Asparagus'</span><span class="sy0">,</span>
                <span class="nu0">1</span> <span class="sy0">=&gt;</span> <span class="st_h">'Lemon Chicken'</span><span class="sy0">,</span>
                <span class="nu0">2</span> <span class="sy0">=&gt;</span> <span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$computers</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'trs-80'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Radio Shack'</span><span class="sy0">,</span>
                   <span class="nu0">2600</span> <span class="sy0">=&gt;</span> <span class="st_h">'Atari'</span><span class="sy0">,</span>
                   <span class="st_h">'Adam'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Coleco'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Avec <b>array()</b>, vous précisez une liste de paires clé/valeur séparées par des virgules. La clé et la valeur sont séparées par =&gt;. La syntaxe array() st plus concise lorsque l'on ajoute plusieurs éléments à la fois à un tableau. La syntaxe des crochets est préférable lorsque l'on ajoute les éléments un à un.
</p>
<h2><span class="mw-headline" id="Cr.C3.A9ation_d.27un_tableau_indic.C3.A9_par_des_nombres"><span class="mw-headline-number">5.2</span> Création d'un tableau indicé par des nombres</span></h2>
<p>Si vous créez un tableau avec array() en ne précisant qu'une liste de valeurs au lieu de paires clé/valeurs, l'interpréteur PHP affecte automatiquement une clé numérique à chaque valeur. Les clés commencent à 0 et augmentent de 1 à chaque élément. L'exemple ci dessous utilise cette technique pour créer le tableau $dinner&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$dinner</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Sweet Corn and Asparagus'</span><span class="sy0">,</span>
                <span class="st_h">'Lemon Chicken'</span><span class="sy0">,</span>
                <span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;I want <span class="es4">$dinner[0]</span> and <span class="es4">$dinner[1]</span>.&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<pre>I want Sweet Corn and Asparagus and Lemon Chicken.
</pre>
<p>PHP utilise automatiqumet des nombres incrémentés pour les clés lorsque l'on crée un tableau ou que l'on ajoute des éléments à un tableau avec la syntaxe des crochets vides&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="co1">// Create $lunch array with two elements</span>
<span class="co1">// This sets $lunch[0]</span>
<span class="re0">$lunch</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Dried Mushrooms in Brown Sauce'</span><span class="sy0">;</span>
<span class="co1">// This sets $lunch[1]</span>
<span class="re0">$lunch</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Pineapple and Yu Fungus'</span><span class="sy0">;</span>
<span class="co1">// Create $dinner with three elements</span>
<span class="re0">$dinner</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Sweet Corn and Asparagus'</span><span class="sy0">,</span> <span class="st_h">'Lemon Chicken'</span><span class="sy0">,</span>
                <span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">// Add an element to the end of $dinner</span>
<span class="co1">// This sets $dinner[3]</span>
<span class="re0">$dinner</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Flank Skin with Spiced Flavor'</span><span class="sy0">;</span></pre></div></div>
<p><b>Si le tableau n'existe pas encore, les crochets vides le créent en ajoutant un élément de clé 0.</b>
</p>
<h2><span class="mw-headline" id="Trouver_la_taille_d.27un_tableau"><span class="mw-headline-number">5.3</span> Trouver la taille d'un tableau</span></h2>
<p>La fonction <b>count()</b> renvoie le nombre d'éléments d'un tableau&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$dinner</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Sweet Corn and Asparagus'</span><span class="sy0">,</span>
                <span class="st_h">'Lemon Chicken'</span><span class="sy0">,</span>
                <span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$dishes</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$dinner</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;There are <span class="es4">$dishes</span> things for dinner.&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<pre>There are 3 things for dinner.
</pre>
<p>Lorsqu'on lui passe un tableau vide (c'est à dire un tableau ne contenant aucun élément), count() renvoie 0. Un tableau vide est également évalué comme false dans une expression de test.
</p>
<h2><span class="mw-headline" id="Parcours_des_tableaux"><span class="mw-headline-number">5.4</span> Parcours des tableaux</span></h2>
<ul><li> Parcours avec foreach()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$meal</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'breakfast'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Walnut Bun'</span><span class="sy0">,</span>
              <span class="st_h">'lunch'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Cashew Nuts and White Mushrooms'</span><span class="sy0">,</span>
              <span class="st_h">'snack'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Dried Mulberries'</span><span class="sy0">,</span>
              <span class="st_h">'dinner'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Eggplant with Chili Sauce'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;&lt;table&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$meal</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;&lt;tr&gt;&lt;td&gt;<span class="es4">$key</span>&lt;/td&gt;&lt;td&gt;<span class="es4">$value</span>&lt;/td&gt;&lt;/tr&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">print</span> <span class="st_h">'&lt;/table&gt;'</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>table<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>tr<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>breakfast<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>Walnut Bun<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;/</span>tr<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>tr<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>lunch<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>Cashew Nuts and White Mushrooms<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;/</span>tr<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>tr<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>snack<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>Dried Mulberries<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;/</span>tr<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>tr<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>dinner<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>Eggplant with Chili Sauce<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;/</span>tr<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>table<span class="sy0">&gt;</span></pre></div></div>
<ul><li> Pour alterner les couleurs de lignes d'une table&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$row_color</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'red'</span><span class="sy0">,</span><span class="st_h">'green'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$color_index</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
<span class="re0">$meal</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'breakfast'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Walnut Bun'</span><span class="sy0">,</span>
              <span class="st_h">'lunch'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Cashew Nuts and White Mushrooms'</span><span class="sy0">,</span>
              <span class="st_h">'snack'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Dried Mulberries'</span><span class="sy0">,</span>
              <span class="st_h">'dinner'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Eggplant with Chili Sauce'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;&lt;table&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$meal</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st_h">'&lt;tr bgcolor=&quot;'</span> <span class="sy0">.</span> <span class="re0">$row_color</span><span class="br0">&#91;</span><span class="re0">$color_index</span><span class="br0">&#93;</span> <span class="sy0">.</span> <span class="st_h">'&quot;&gt;'</span><span class="sy0">;</span>
    <span class="kw1">print</span> <span class="st0">&quot;&lt;td&gt;<span class="es4">$key</span>&lt;/td&gt;&lt;td&gt;<span class="es4">$value</span>&lt;/td&gt;&lt;/tr&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
    <span class="co1">// This switches $color_index between 0 and 1</span>
    <span class="re0">$color_index</span> <span class="sy0">=</span> <span class="nu0">1</span> <span class="sy0">-</span> <span class="re0">$color_index</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">print</span> <span class="st_h">'&lt;/table&gt;'</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>table<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>tr bgcolor<span class="sy0">=</span><span class="st0">&quot;red&quot;</span><span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>breakfast<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>Walnut Bun<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;/</span>tr<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>tr bgcolor<span class="sy0">=</span><span class="st0">&quot;green&quot;</span><span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>lunch<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>Cashew Nuts and White Mushrooms<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;/</span>tr<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>tr bgcolor<span class="sy0">=</span><span class="st0">&quot;red&quot;</span><span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>snack<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>Dried Mulberries<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;/</span>tr<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>tr bgcolor<span class="sy0">=</span><span class="st0">&quot;green&quot;</span><span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>dinner<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;</span>td<span class="sy0">&gt;</span>Eggplant with Chili Sauce<span class="sy0">&lt;/</span>td<span class="sy0">&gt;&lt;/</span>tr<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>table<span class="sy0">&gt;</span></pre></div></div>
<ul><li> Modification d'un tableau avec foreach()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$meals</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Walnut Bun'</span> <span class="sy0">=&gt;</span> <span class="nu0">1</span><span class="sy0">,</span>
               <span class="st_h">'Cashew Nuts and White Mushrooms'</span> <span class="sy0">=&gt;</span> <span class="nu19">4.95</span><span class="sy0">,</span>
               <span class="st_h">'Dried Mulberries'</span> <span class="sy0">=&gt;</span> <span class="nu19">3.00</span><span class="sy0">,</span>
               <span class="st_h">'Eggplant with Chili Sauce'</span> <span class="sy0">=&gt;</span> <span class="nu19">6.50</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$meals</span> <span class="kw1">as</span> <span class="re0">$dish</span> <span class="sy0">=&gt;</span> <span class="re0">$price</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="co1">// $price = $price * 2 does NOT work</span>
    <span class="re0">$meals</span><span class="br0">&#91;</span><span class="re0">$dish</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="re0">$meals</span><span class="br0">&#91;</span><span class="re0">$dish</span><span class="br0">&#93;</span> <span class="sy0">*</span> <span class="nu0">2</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="co1">// Iterate over the array again and print the changed values</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$meals</span> <span class="kw1">as</span> <span class="re0">$dish</span> <span class="sy0">=&gt;</span> <span class="re0">$price</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw3">printf</span><span class="br0">&#40;</span><span class="st0">&quot;The new price of <span class="es6">%s</span> is <span class="es1">\$</span><span class="es6">%.2f</span>.<span class="es1">\n</span>&quot;</span><span class="sy0">,</span><span class="re0">$dish</span><span class="sy0">,</span><span class="re0">$price</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<ul><li> Utilisation de foreach() avec les tableaux indicés&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$dinner</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Sweet Corn and Asparagus'</span><span class="sy0">,</span>
                <span class="st_h">'Lemon Chicken'</span><span class="sy0">,</span>
                <span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$dinner</span> <span class="kw1">as</span> <span class="re0">$dish</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;You can eat: <span class="es4">$dish</span><span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<ul><li> Parcours d'un tableau indicé avec for()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$dinner</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Sweet Corn and Asparagus'</span><span class="sy0">,</span>
                <span class="st_h">'Lemon Chicken'</span><span class="sy0">,</span>
                <span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$num_dishes</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$dinner</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="re0">$num_dishes</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">print</span> <span class="st0">&quot;Dish number <span class="es4">$i</span> is <span class="es4">$dinner</span>[<span class="es4">$i</span>]<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<ul><li> Alterner les couleurs des lignes d'une table avec for()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$row_color</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'red'</span><span class="sy0">,</span><span class="st_h">'green'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$dinner</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Sweet Corn and Asparagus'</span><span class="sy0">,</span>
                <span class="st_h">'Lemon Chicken'</span><span class="sy0">,</span>
                <span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;&lt;table&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$num_dishes</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$dinner</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="re0">$num_dishes</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st_h">'&lt;tr bgcolor=&quot;'</span> <span class="sy0">.</span> <span class="re0">$row_color</span><span class="br0">&#91;</span><span class="re0">$i</span> <span class="sy0">%</span> <span class="nu0">2</span><span class="br0">&#93;</span> <span class="sy0">.</span> <span class="st_h">'&quot;&gt;'</span><span class="sy0">;</span>
    <span class="kw1">print</span> <span class="st0">&quot;&lt;td&gt;Element <span class="es4">$i</span>&lt;/td&gt;&lt;td&gt;<span class="es4">$dinner</span>[<span class="es4">$i</span>]&lt;/td&gt;&lt;/tr&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">print</span> <span class="st_h">'&lt;/table&gt;'</span><span class="sy0">;</span></pre></div></div>
<ul><li> Pour garantir un accès aux éléments selon <b>l'ordre nuémrique</b> de leurs clés, utilisez for()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">for</span> <span class="br0">&#40;</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$num_letters</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$letters</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="re0">$num_letters</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="re0">$letters</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p><b>Pour savoir s'il existe un élément ayant une clé donnée, utilisez array_key_exists()&#160;:</b>
</p>
<pre>meals = array('Walnut Bun' =&gt; 1,
               'Cashew Nuts and White Mushrooms' =&gt; 4.95,
               'Dried Mulberries' =&gt; 3.00,
               'Eggplant with Chili Sauce' =&gt; 6.50,
               'Shrimp Puffs' =&gt; 0); // Shrimp Puffs are free!
$books = array("The Eater's Guide to Chinese Characters",
               'How to Cook and Eat in Chinese');
<b>// This is true
if (array_key_exists('Shrimp Puffs',$meals)) {
    print "Yes, we have Shrimp Puffs";
}
// This is false
if (array_key_exists('Steak Sandwich',$meals)) {
    print "We have a Steak Sandwich";
}
// This is true
if (array_key_exists(1, $books)) {
    print "Element 1 is How to Cook in Eat in Chinese";
}</b>
</pre>
<ul><li> La fonction <b>array_search()</b> est similaire à in_array(), mais si elle trouve un élément elle renvoie sa clé plutôt que true. Dans l'exemple ci dessous, array_search() renvoie le nom du plat qui coûte 6,50 euros&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$meals</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Walnut Bun'</span> <span class="sy0">=&gt;</span> <span class="nu0">1</span><span class="sy0">,</span>
               <span class="st_h">'Cashew Nuts and White Mushrooms'</span> <span class="sy0">=&gt;</span> <span class="nu19">4.95</span><span class="sy0">,</span>
               <span class="st_h">'Dried Mulberries'</span> <span class="sy0">=&gt;</span> <span class="nu19">3.00</span><span class="sy0">,</span>
               <span class="st_h">'Eggplant with Chili Sauce'</span> <span class="sy0">=&gt;</span> <span class="nu19">6.50</span><span class="sy0">,</span>
               <span class="st_h">'Shrimp Puffs'</span> <span class="sy0">=&gt;</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$dish</span> <span class="sy0">=</span> <span class="kw3">array_search</span><span class="br0">&#40;</span><span class="nu19">6.50</span><span class="sy0">,</span> <span class="re0">$meals</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$dish</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;<span class="es4">$dish</span> costs <span class="es1">\$</span>6.50&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Modification_des_tableaux"><span class="mw-headline-number">5.5</span> Modification des tableaux</span></h2>
<ul><li> Interpolation des éléments de tableaux dans les chaînes entre apostrophes doubles&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$meals</span><span class="br0">&#91;</span><span class="st_h">'breakfast'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Walnut Bun'</span><span class="sy0">;</span>
<span class="re0">$meals</span><span class="br0">&#91;</span><span class="st_h">'lunch'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Eggplant with Chili Sauce'</span><span class="sy0">;</span>
<span class="re0">$amounts</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">6</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;For breakfast, I'd like <span class="es4">$meals[breakfast]</span> and for lunch, &quot;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;I'd like <span class="es4">$meals[lunch]</span>. I want <span class="es4">$amounts[0]</span> at breakfast and &quot;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;<span class="es4">$amounts[1]</span> at lunch.&quot;</span><span class="sy0">;</span></pre></div></div>
<p>La fonction <b>unset()</b> permet de supprimer un élément d'un tableau&#160;:
</p>
<pre>unset($dishes['Roast Duck']);
</pre>
<p>Supprimer un élément avec unset() est différent de simplement lui affecter 0 ou la chaîne vide. Lorque l'on utilise unset(), l'élément n'est plus là lorsque l'on parcourt le tableay ou que l'on compte le nombre de ses éléments.<br />
Utiliser unset() sur un tableau qui représente un inventaire revient à dire que le magasin n propose plus un produit. Fixer la valeur de l'élément à 0 ou lui affecter la chaîne vide revient à dire que cet élément n'est plus en stock pour le moment.
</p>
<ul><li> Création d'une chaîne à partir d'un tableau avec implode()&#160;:</li></ul>
<pre>$dimsum = array('Chicken Bun','Stuffed Duck Web','Turnip Cake');
$menu = implode(', ', $dimsum);
print $menu;
</pre>
<p>Affichera&#160;:
</p>
<pre>Chicken Bun, Stuffed Duck Web, Turnip Cake
</pre>
<p>Pour convertir un tableau sans ajouter de délimiteur, utilisez la chaîne vide comme premier paramètre d'implode()&#160;:
</p>
<pre>$letters = array('A','B','C','D');
print implode(<i>,$letters);</i>
</pre>
<p>Affichera&#160;:
</p>
<pre>ABCD
</pre>
<ul><li> Production des lignes d'une table HTML avec implode()&#160;:</li></ul>
<pre>$dimsum = array('Chicken Bun','Stuffed Duck Web','Turnip Cake');
print '&lt;tr&gt;&lt;td&gt;' . implode('&lt;/td&gt;&lt;td&gt;',$dimsum) . '&lt;/td&gt;&lt;/tr&gt;';
</pre>
<p>Affichera&#160;:
</p>
<pre>&lt;tr&gt;&lt;td&gt;Chicken Bun&lt;/td&gt;&lt;td&gt;Stuffed Duck Web&lt;/td&gt;&lt;td&gt;Turnip Cake&lt;/td&gt;&lt;/tr&gt;
</pre>
<p>Comme vous l'avez certainement vu, cela évite d'écrire une boucle.
</p>
<ul><li> Conversion d'un chaîne en tableau avec <b>explode()</b>&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$fish</span> <span class="sy0">=</span> <span class="st_h">'Bass, Carp, Pike, Flounder'</span><span class="sy0">;</span>
<span class="re0">$fish_list</span> <span class="sy0">=</span> <span class="kw3">explode</span><span class="br0">&#40;</span><span class="st_h">', '</span><span class="sy0">,</span> <span class="re0">$fish</span><span class="br0">&#41;</span><span class="sy0">;</span>La f
<span class="kw1">print</span> <span class="st0">&quot;The second fish is <span class="es4">$fish_list[1]</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<pre>The second fish is Carp
</pre>
<h2><span class="mw-headline" id="Tri_de_tableaux"><span class="mw-headline-number">5.6</span> Tri de tableaux</span></h2>
<p>La fonction <b>sort()</b> trie un tableau selon les valeurs de ses éléments. Elle ne devrait être utilisée que sur les tableaux ayant des lcés numériques car elle réinitialise ces clés lors du tri. Voici quelques tableaux avant et après unappel à sort().
</p><p>Tri avec sort()&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$dinner</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Sweet Corn and Asparagus'</span><span class="sy0">,</span>
                <span class="st_h">'Lemon Chicken'</span><span class="sy0">,</span>
                <span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$meal</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'breakfast'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Walnut Bun'</span><span class="sy0">,</span>
              <span class="st_h">'lunch'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Cashew Nuts and White Mushrooms'</span><span class="sy0">,</span>
              <span class="st_h">'snack'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Dried Mulberries'</span><span class="sy0">,</span>
              <span class="st_h">'dinner'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Eggplant with Chili Sauce'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;Before Sorting:<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$dinner</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot; <span class="es1">\$</span>dinner: <span class="es4">$key</span> <span class="es4">$value</span><span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$meal</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;   <span class="es1">\$</span>meal: <span class="es4">$key</span> <span class="es4">$value</span><span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw3">sort</span><span class="br0">&#40;</span><span class="re0">$dinner</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">sort</span><span class="br0">&#40;</span><span class="re0">$meal</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;After Sorting:<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$dinner</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot; <span class="es1">\$</span>dinner: <span class="es4">$key</span> <span class="es4">$value</span><span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$meal</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;   <span class="es1">\$</span>meal: <span class="es4">$key</span> <span class="es4">$value</span><span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<pre>Before Sorting:
$dinner: 0 Sweet Corn and Asparagus
$dinner: 1 Lemon Chicken
$dinner: 2 Braised Bamboo Fungus
  <b>$meal: breakfast Walnut Bun
  $meal: lunch Cashew Nuts and White Mushrooms
  $meal: snack Dried Mulberries
  $meal: dinner Eggplant with Chili Sauce</b>
After Sorting:
$dinner: 0 Braised Bamboo Fungus
$dinner: 1 Lemon Chicken
$dinner: 2 Sweet Corn and Asparagus
  <b>$meal: 0 Cashew Nuts and White Mushrooms
  $meal: 1 Dried Mulberries
  $meal: 2 Eggplant with Chili Sauce
  $meal: 3 Walnut Bun</b>
</pre>
<ul><li> Pour trier un tableau associatif, <b>utilisez asort(), qui conserve les clés et les valeurs</b>&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$meal</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'breakfast'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Walnut Bun'</span><span class="sy0">,</span>
              <span class="st_h">'lunch'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Cashew Nuts and White Mushrooms'</span><span class="sy0">,</span>
              <span class="st_h">'snack'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Dried Mulberries'</span><span class="sy0">,</span>
              <span class="st_h">'dinner'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Eggplant with Chili Sauce'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;Before Sorting:<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$meal</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;   <span class="es1">\$</span>meal: <span class="es4">$key</span> <span class="es4">$value</span><span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw3">asort</span><span class="br0">&#40;</span><span class="re0">$meal</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;After Sorting:<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$meal</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">print</span> <span class="st0">&quot;   <span class="es1">\$</span>meal: <span class="es4">$key</span> <span class="es4">$value</span><span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">Before Sorting<span class="sy0">:</span>
   <span class="re0">$meal</span><span class="sy0">:</span> breakfast Walnut Bun
   <span class="re0">$meal</span><span class="sy0">:</span> lunch Cashew Nuts and White Mushrooms
   <span class="re0">$meal</span><span class="sy0">:</span> snack Dried Mulberries
   <span class="re0">$meal</span><span class="sy0">:</span> dinner Eggplant with Chili Sauce
After Sorting<span class="sy0">:</span>
   <span class="re0">$meal</span><span class="sy0">:</span> lunch Cashew Nuts and White Mushrooms
   <span class="re0">$meal</span><span class="sy0">:</span> snack Dried Mulberries
   <span class="re0">$meal</span><span class="sy0">:</span> dinner Eggplant with Chili Sauce
   <span class="re0">$meal</span><span class="sy0">:</span> breakfast Walnut Bun</pre></div></div>
<ul><li> Alors que sort() et asort() trient les tableaux selon les valeurs de leurs éléments, ksort() permet de trier selon leurs clés&#160;: les paires clé/valeur restent identiques, mais sont ordonnées selon les clés.</li></ul>
<p>Les fonctions <b>rsort(), arsort() et krsort()</b> sont les contreparties respectives de sort(), asort() et ksort() pour les tris dans l'ordre décroissant<b>. Elles fonctionnent exactement de la même façon, sauf que c'est la plus grande clé ou valeur (ou la dernière d'un point de vue alphabétique) qui apparara en premier dans le tableau trié et que les éléments suivants seront placés dans un ordre décroissant.</b>
</p>
<h2><span class="mw-headline" id="Utilisation_de_tableau_multidimensionnels"><span class="mw-headline-number">5.7</span> Utilisation de tableau multidimensionnels</span></h2>
<ul><li> Création de t'ableaux multidimentionnels avec array()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$meals</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'breakfast'</span> <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Walnut Bun'</span><span class="sy0">,</span><span class="st_h">'Coffee'</span><span class="br0">&#41;</span><span class="sy0">,</span>
               <span class="st_h">'lunch'</span>     <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Cashew Nuts'</span><span class="sy0">,</span> <span class="st_h">'White Mushrooms'</span><span class="br0">&#41;</span><span class="sy0">,</span>
               <span class="st_h">'snack'</span>     <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Dried Mulberries'</span><span class="sy0">,</span><span class="st_h">'Salted Sesame Crab'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$lunches</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Chicken'</span><span class="sy0">,</span><span class="st_h">'Eggplant'</span><span class="sy0">,</span><span class="st_h">'Rice'</span><span class="br0">&#41;</span><span class="sy0">,</span>
                  <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Beef'</span><span class="sy0">,</span><span class="st_h">'Scallions'</span><span class="sy0">,</span><span class="st_h">'Noodles'</span><span class="br0">&#41;</span><span class="sy0">,</span>
                  <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Eggplant'</span><span class="sy0">,</span><span class="st_h">'Tofu'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$flavors</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Japanese'</span> <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'hot'</span> <span class="sy0">=&gt;</span> <span class="st_h">'wasabi'</span><span class="sy0">,</span>
                                     <span class="st_h">'salty'</span> <span class="sy0">=&gt;</span> <span class="st_h">'soy sauce'</span><span class="br0">&#41;</span><span class="sy0">,</span>
                 <span class="st_h">'Chinese'</span> <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'hot'</span> <span class="sy0">=&gt;</span> <span class="st_h">'mustard'</span><span class="sy0">,</span>
                                     <span class="st_h">'pepper-salty'</span> <span class="sy0">=&gt;</span> <span class="st_h">'prickly ash'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>On accède aux éléments de ces tableaux en utilisant des paires de crochets supplémentaires pour les identifier&#160;: chaque paire descend d'un niveau dans le tableau complet.
</p><p>Accès aux éléments d'un tableau multidimensionnel&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">print</span> <span class="re0">$meals</span><span class="br0">&#91;</span><span class="st_h">'lunch'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span> <span class="co1">// White Mushroomsprint $meals['snack'][0];           // Dried Mulberries</span>
<span class="kw1">print</span> <span class="re0">$lunches</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">;</span>               <span class="co1">// Chicken</span>
<span class="kw1">print</span> <span class="re0">$lunches</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>               <span class="co1">// Tofu</span>
<span class="kw1">print</span> <span class="re0">$flavors</span><span class="br0">&#91;</span><span class="st_h">'Japanese'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st_h">'salty'</span><span class="br0">&#93;</span> <span class="co1">// soy sauce</span>
<span class="kw1">print</span> <span class="re0">$flavors</span><span class="br0">&#91;</span><span class="st_h">'Chinese'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st_h">'hot'</span><span class="br0">&#93;</span><span class="sy0">;</span>   <span class="co1">// mustard</span></pre></div></div>
<ul><li> Manipulation de tableaux multidimentionnel&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$prices</span><span class="br0">&#91;</span><span class="st_h">'dinner'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st_h">'Sweet Corn and Asparagus'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu19">12.50</span><span class="sy0">;</span>
<span class="re0">$prices</span><span class="br0">&#91;</span><span class="st_h">'lunch'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st_h">'Cashew Nuts and White Mushrooms'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu19">4.95</span><span class="sy0">;</span>
<span class="re0">$prices</span><span class="br0">&#91;</span><span class="st_h">'dinner'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu19">8.95</span><span class="sy0">;</span>
<span class="re0">$prices</span><span class="br0">&#91;</span><span class="st_h">'dinner'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st_h">'total'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="re0">$prices</span><span class="br0">&#91;</span><span class="st_h">'dinner'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st_h">'Sweet Corn and Asparagus'</span><span class="br0">&#93;</span> <span class="sy0">+</span>
                             <span class="re0">$prices</span><span class="br0">&#91;</span><span class="st_h">'dinner'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st_h">'Braised Bamboo Fungus'</span><span class="br0">&#93;</span><span class="sy0">;</span>
<span class="re0">$specials</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Chestnut Bun'</span><span class="sy0">;</span>
<span class="re0">$specials</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Walnut Bun'</span><span class="sy0">;</span>
<span class="re0">$specials</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Peanut Bun'</span><span class="sy0">;</span>
<span class="re0">$specials</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Chestnut Salad'</span><span class="sy0">;</span>
<span class="re0">$specials</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Walnut Salad'</span><span class="sy0">;</span>
<span class="co1">// Leaving out the index adds it to the end of the array</span>
<span class="co1">// This creates $specials[1][2]</span>
<span class="re0">$specials</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Peanut Salad'</span><span class="sy0">;</span></pre></div></div>
<ul><li> Parcours d'un tableau multidimentionnel avec foreach)&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$flavors</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Japanese'</span> <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'hot'</span> <span class="sy0">=&gt;</span> <span class="st_h">'wasabi'</span><span class="sy0">,</span>
                                     <span class="st_h">'salty'</span> <span class="sy0">=&gt;</span> <span class="st_h">'soy sauce'</span><span class="br0">&#41;</span><span class="sy0">,</span>
                 <span class="st_h">'Chinese'</span> <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'hot'</span> <span class="sy0">=&gt;</span> <span class="st_h">'mustard'</span><span class="sy0">,</span>
                                     <span class="st_h">'pepper-salty'</span> <span class="sy0">=&gt;</span> <span class="st_h">'prickly ash'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">// $culture is the key and $culture_flavors is the value (an array)</span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$flavors</span> <span class="kw1">as</span> <span class="re0">$culture</span> <span class="sy0">=&gt;</span> <span class="re0">$culture_flavors</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="co1">// $flavor is the key and $example is the value</span>
    <span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$culture_flavors</span> <span class="kw1">as</span> <span class="re0">$flavor</span> <span class="sy0">=&gt;</span> <span class="re0">$example</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">print</span> <span class="st0">&quot;A <span class="es4">$culture</span> <span class="es4">$flavor</span> flavor is <span class="es4">$example</span>.<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">A Japanese hot flavor is wasabi<span class="sy0">.</span>
A Japanese salty flavor is soy sauce<span class="sy0">.</span>
A Chinese hot flavor is mustard<span class="sy0">.</span>
A Chinese pepper<span class="sy0">-</span>salty flavor is prickly ash<span class="sy0">.</span></pre></div></div>
<p>La première boucle foreach() parcourt la première dimension de $flavors. Les clés stockées dans $culture sont les chaînes Japanese et Chinese et les valeurs stockées dans $culture_flavors sont les tableaux qui sont les éléments de cette dimension.<br />
Le foreach() suivant parcourt ces tableaux en copiant les clés comme piquant et salé dans $flavors et les valeurs comme wasabu et soy sauce dans $example. Le bloc de codde du deuxième foreach() utilise les variables des deux instructions foreach() our produire un message complet.
</p><p>Tout comme les boucles foreach() imbriquées parcourent un tableau associatif multidimensionnel, les boucles for() imbriquées permettent de prcourir un tableau multidimensionnel avec des indices numériques&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$specials</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Chestnut Bun'</span><span class="sy0">,</span> <span class="st_h">'Walnut Bun'</span><span class="sy0">,</span> <span class="st_h">'Peanut Bun'</span><span class="br0">&#41;</span><span class="sy0">,</span>
                      <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Chestnut Salad'</span><span class="sy0">,</span><span class="st_h">'Walnut Salad'</span><span class="sy0">,</span> <span class="st_h">'Peanut Salad'</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">// $num_specials is 2: the number of elements in the first dimension of $specials</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$num_specials</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$specials</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="re0">$num_specials</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="co1">// $num_sub is 3: the number of elements in each sub-array</span>
    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="re0">$m</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$num_sub</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$specials</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="re0">$m</span> <span class="sy0">&lt;</span> <span class="re0">$num_sub</span><span class="sy0">;</span> <span class="re0">$m</span><span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">print</span> <span class="st0">&quot;Element [<span class="es4">$i</span>][<span class="es4">$m</span>] is &quot;</span> <span class="sy0">.</span> <span class="re0">$specials</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="re0">$m</span><span class="br0">&#93;</span> <span class="sy0">.</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">Element <span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>   is  Chestnut Bun
Element <span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>   is  Walnut Bun
Element <span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span>   is  Peanut Bun
Element <span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>   is  Chestnut Salad
Element <span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>   is  Walnut Salad
Element <span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span>   is  Peanut Salad</pre></div></div>
<p>Pour interpoler la valeur d'un tableau multidimensionnel dans une chaîne entre apostrophes doubles ou un document sur place, on doit utiliser la syntaxe pour produire le même résultat que l'exemple précédent&#160;: en fait, la seule différence est l'inzstruction print&#160;:
</p><p>Interpolation d'un tableau multidimentionnel&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$specials</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Chestnut Bun'</span><span class="sy0">,</span> <span class="st_h">'Walnut Bun'</span><span class="sy0">,</span> <span class="st_h">'Peanut Bun'</span><span class="br0">&#41;</span><span class="sy0">,</span>
                   <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Chestnut Salad'</span><span class="sy0">,</span><span class="st_h">'Walnut Salad'</span><span class="sy0">,</span> <span class="st_h">'Peanut Salad'</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">// $num_specials is 2: the number of elements in the first dimension of $specials</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$num_specials</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$specials</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="re0">$num_specials</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="co1">// $num_sub is 3: the number of elements in each sub-array</span>
    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="re0">$m</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$num_sub</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$specials</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="re0">$m</span> <span class="sy0">&lt;</span> <span class="re0">$num_sub</span><span class="sy0">;</span> <span class="re0">$m</span><span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">print</span> <span class="st0">&quot;Element [<span class="es4">$i</span>][<span class="es4">$m</span>] is {<span class="es4">$specials</span>[<span class="es4">$i</span>][<span class="es4">$m</span>]}<span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h1><span class="mw-headline" id="Fonctions"><span class="mw-headline-number">6</span> Fonctions</span></h1>
<h2><span class="mw-headline" id="D.C3.A9clarations_et_appels_de_fonctions"><span class="mw-headline-number">6.1</span> Déclarations et appels de fonctions</span></h2>
<ul><li> Déclaration d'une fonction appellée <b>page_header()</b>&#160;:</li></ul>
<pre><b>function page_header() { </b>
   print '&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to my site&lt;/title&gt;&lt;/head&gt;'; 
   print '&lt;body bgcolor="#ffffff"&gt;'; 
}
</pre>
<ul><li> Appel d'une fonction&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">page_header<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st0">&quot;Welcome, <span class="es4">$user</span>&quot;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st0">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="sy0">;</span></pre></div></div>
<ul><li> Définitions de fonctions avant ou après leur appel&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">function</span> page_header<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st_h">'&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to my site&lt;/title&gt;&lt;/head&gt;'</span><span class="sy0">;</span> 
    <span class="kw1">print</span> <span class="st_h">'&lt;body bgcolor=&quot;#ffffff&quot;&gt;'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
page_header<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st0">&quot;Welcome, <span class="es4">$user</span>&quot;</span><span class="sy0">;</span> 
page_footer<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="kw2">function</span> page_footer<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st_h">'&lt;hr&gt;Thanks for visiting.'</span><span class="sy0">;</span> 
    <span class="kw1">print</span> <span class="st_h">'&lt;/body&gt;&lt;/html&gt;'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<p><b>Je vous recommande plus que fortement de coder "propre". En effet, si vous mettez des fonctions n'importe ou dans votre code, ça va vite devenir le bordel. Il faut donc regrouper les fonctions ensemble et les mettre au début de votre code. Je ne suis pas un puriste (...quoi que), mais les personnes repassant derrière votre code, ou vous même si vous le reprenez quelques mois après, vous aprécirez reprendre rapidement le code.</b>
</p>
<h2><span class="mw-headline" id="Passage_des_param.C3.A8tres_aux_fonctions"><span class="mw-headline-number">6.2</span> Passage des paramètres aux fonctions</span></h2>
<ul><li> Déclaration d'une fonction avec un paramètre (ici $color)&#160;:</li></ul>
<pre>function <b>page_header2($color)</b> { 
   print '&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to my site&lt;/title&gt;&lt;/head&gt;'; 
   print '&lt;body bgcolor="#' . <b>$color</b> . '"&gt;'; 
}
</pre>
<p>En appelant la fonction comme ceci&#160;:
</p>
<pre>page_header2('cc00cc'); 
</pre>
<p>On obtiendra&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>html<span class="sy0">&gt;&lt;</span>head<span class="sy0">&gt;&lt;</span>title<span class="sy0">&gt;</span>Welcome to my site<span class="sy0">&lt;/</span>title<span class="sy0">&gt;&lt;/</span>head<span class="sy0">&gt;&lt;</span>body bgcolor<span class="sy0">=</span><span class="st0">&quot;#cc00cc&quot;</span><span class="sy0">&gt;</span></pre></div></div>
<p>Lorsque l'on définit une fonction prenant un paramètre, on doit passer un paramètre à cette fonction lors de son appel. Dans le cas contraire, l'interpréteur PHP produira un message d'avertissement pour s'en plaindre. Si par exemple, vous appelez <b>page_header2()</b> de la façon suivante&#160;:
</p>
<pre>page_header2(); 
</pre>
<p>Il s'affichera&#160;:
</p>
<pre>PHP Warning:  Missing argument 1 for page_header2()
</pre>
<ul><li> Utilisation d'une valeur par défaut pour un paramètre&#160;:</li></ul>
<p><b>Pour éviter cet avertissement</b>, faites en sorte que cette fonction puisse être appellée sans paramètre en fournissant une valeur par défaut ans la déclaration de la fonction. En ce cas, si la fonction est appellée sans paramètres, c'est cette valeur par défaut qui sera prise comme valeur de paramètre. Pour fournir une valeur par défaut, placez-la après le nom du paramètre. Ici cette valeur est cc3399&#160;:
</p>
<pre>function page_header3($color = '<b>cc3399'</b>) { 
   print '&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to my site&lt;/title&gt;&lt;/head&gt;'; 
   print '&lt;body bgcolor="#' . $color . '"&gt;'; 
} 
</pre>
<p>Les valeurs par défaut des paramètres doivent être des littéraux, par exemple 12, cc3399 ou une chaîne&#160;; <b>elles ne peuvent pas être des variables</b>&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$my_color</span> <span class="sy0">=</span> <span class="st_h">'#000000'</span><span class="sy0">;</span> 
&#160;
<span class="co1">// This is incorrect: the default value can't be a variable. </span>
<span class="kw2">function</span> page_header_bad<span class="br0">&#40;</span><span class="re0">$color</span> <span class="sy0">=</span> <span class="re0">$my_color</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st_h">'&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to my site&lt;/title&gt;&lt;/head&gt;'</span><span class="sy0">;</span> 
    <span class="kw1">print</span> <span class="st_h">'&lt;body bgcolor=&quot;#'</span> <span class="sy0">.</span> <span class="re0">$color</span> <span class="sy0">.</span> <span class="st_h">'&quot;&gt;'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<ul><li> Définition d'une fonction avec <b>2 paramètres</b>&#160;:</li></ul>
<pre>function page_header4($color, $title) { 
   print '&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to ' . $title . '&lt;/title&gt;&lt;/head&gt;'; 
   print '&lt;body bgcolor="#' . $color . '"&gt;'; 
} 
</pre>
<ul><li> Appel d'une fonction a 2 paramètres&#160;:</li></ul>
<pre>page_header4('66cc66','my homepage');
</pre>
<ul><li> Définition de plusieurs paramètres facultatifs&#160;:</li></ul>
<pre>// One optional argument: it must be last 
function page_header5($color, $title, $header = 'Welcome') { 
   print '&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to ' . $title . '&lt;/title&gt;&lt;/head&gt;'; 
   print '&lt;body bgcolor="#' . $color . '"&gt;'; 
   print &quot;&lt;h1&gt;$header&lt;/h1&gt;&quot;; 
} 
<b>// Acceptable ways to call this function: 
page_header5('66cc99','my wonderful page'); // uses default $header 
page_header5('66cc99','my wonderful page','This page is great!');
// no defaults 

// Two optional arguments: must be last two arguments 
function page_header6($color, $title = 'the page', $header = 'Welcome') { 
   print '&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to ' . $title . '&lt;/title&gt;&lt;/head&gt;'; 
   print '&lt;body bgcolor="#' . $color . '"&gt;'; 
   print &quot;&lt;h1&gt;$header&lt;/h1&gt;&quot;; 
}
// Acceptable ways to call this function: 
page_header6('66cc99'); // uses default $title and $header 
page_header6('66cc99','my wonderful page'); // uses default $header 
page_header6('66cc99','my wonderful page','This page is great!');
// no defaults</b>

// All optional arguments 
function page_header6($color = '336699', $title = 'the page', $header = 'Welcome') { 
   print '&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to ' . $title . '&lt;/title&gt;&lt;/head&gt;'; 
   print '&lt;body bgcolor="#' . $color . '"&gt;'; 
   print &quot;&lt;h1&gt;$header&lt;/h1&gt;&quot;; 
} 
// Acceptable ways to call this function: 
page_header7( ); // uses all defaults 
page_header7('66cc99'); // uses default $title and $header 
page_header7('66cc99','my wonderful page'); // uses default $header 
page_header7('66cc99','my wonderful page','This page is great!');
// no defaults
</pre>
<h2><span class="mw-headline" id="Valeurs_de_retour_des_fonctions"><span class="mw-headline-number">6.3</span> Valeurs de retour des fonctions</span></h2>
<p>Capture d'une valeur de retour&#160;:
</p>
<pre>$number_to_display = number_format(285266237); 
print "The population of the US is about: $number_to_display"; 
</pre>
<p>Ce qui affichera&#160;:
</p>
<pre>The population of the US is about: 285,266,237
</pre>
<p>Pour renvoyer des valeurs à partir de vos propres fonctions, utilisez le mot clé return, suivit de la valeur à renvoyer. L'exécution d'une fonction s'arrête dès la rencontre du mot-clé return et renvoie alors la valeur indiquée. L'exemple suivant définit une fonction renvoyant le montant total d'un repas après avoir ajouter la T.V.A et le pourboire. Renvoie d'une valeur à partir d'une fonction&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">function</span> restaurant_check<span class="br0">&#40;</span><span class="re0">$meal</span><span class="sy0">,</span> <span class="re0">$tax</span><span class="sy0">,</span> <span class="re0">$tip</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$tax_amount</span> <span class="sy0">=</span> <span class="re0">$meal</span> <span class="sy0">*</span> <span class="br0">&#40;</span><span class="re0">$tax</span> <span class="sy0">/</span> <span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="re0">$tip_amount</span> <span class="sy0">=</span> <span class="re0">$meal</span> <span class="sy0">*</span> <span class="br0">&#40;</span><span class="re0">$tip</span> <span class="sy0">/</span> <span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="re0">$total_amount</span> <span class="sy0">=</span> <span class="re0">$meal</span> <span class="sy0">+</span> <span class="re0">$tax_amount</span> <span class="sy0">+</span> <span class="re0">$tip_amount</span><span class="sy0">;</span> 
&#160;
    <span class="kw1">return</span> <span class="re0">$total_amount</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<p>Une instruction return ne peut renvoyer q'une seule valeur&#160;: une syntaxe comme return 15, 23 n'est pas autorisée. <b>Si vous voulez qu'une fonction renvoie plusieurs valeurs, placez-les dans un tableau et renvoyez celui-ci</b>.
</p><p>Voici une version modifiée de la version restaurant_check() qui renvoie un tableau a 2 éléments, correspondant au montant total avant et après l'ajout du pourboire.
</p>
<ul><li> <b>Renvoie d'un tableau à partir d'une fonction</b>&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">function</span> restaurant_check2<span class="br0">&#40;</span><span class="re0">$meal</span><span class="sy0">,</span> <span class="re0">$tax</span><span class="sy0">,</span> <span class="re0">$tip</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$tax_amount</span>  <span class="sy0">=</span> <span class="re0">$meal</span> <span class="sy0">*</span> <span class="br0">&#40;</span><span class="re0">$tax</span> <span class="sy0">/</span> <span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="re0">$tip_amount</span>  <span class="sy0">=</span> <span class="re0">$meal</span> <span class="sy0">*</span> <span class="br0">&#40;</span><span class="re0">$tip</span> <span class="sy0">/</span> <span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="re0">$total_notip</span> <span class="sy0">=</span> <span class="re0">$meal</span> <span class="sy0">+</span> <span class="re0">$tax_amount</span><span class="sy0">;</span> 
    <span class="re0">$total_tip</span>   <span class="sy0">=</span> <span class="re0">$meal</span> <span class="sy0">+</span> <span class="re0">$tax_amount</span> <span class="sy0">+</span> <span class="re0">$tip_amount</span><span class="sy0">;</span> 
    <span class="kw1">return</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="re0">$total_notip</span><span class="sy0">,</span> <span class="re0">$total_tip</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span></pre></div></div>
<ul><li> <b>Utilisation d'un tableau renvoyé par une fonction</b>&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$totals</span> <span class="sy0">=</span> restaurant_check2<span class="br0">&#40;</span><span class="nu19">15.22</span><span class="sy0">,</span> <span class="nu19">8.25</span><span class="sy0">,</span> <span class="nu0">15</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$totals</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">&lt;</span> <span class="nu0">20</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st_h">'The total without tip is less than $20.'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$totals</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">&lt;</span> <span class="nu0">20</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st_h">'The total with tip is less than $20.'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<ul><li> Utilisation des valeurs de retours avec un if()</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span>restaurant_check<span class="br0">&#40;</span><span class="nu19">15.22</span><span class="sy0">,</span> <span class="nu19">8.25</span><span class="sy0">,</span> <span class="nu0">15</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">20</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st_h">'Less than $20, I can pay cash.'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st_h">'Too expensive, I need my credit card.'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<ul><li> Fonctions renvoyant true ou false&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">function</span> can_pay_cash<span class="br0">&#40;</span><span class="re0">$cash_on_hand</span><span class="sy0">,</span> <span class="re0">$amount</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$amount</span> <span class="sy0">&gt;</span> <span class="re0">$cash_on_hand</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
        <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="re0">$total</span> <span class="sy0">=</span> restaurant_check<span class="br0">&#40;</span><span class="nu19">15.22</span><span class="sy0">,</span><span class="nu19">8.25</span><span class="sy0">,</span><span class="nu0">15</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span>can_pay_cash<span class="br0">&#40;</span><span class="nu0">20</span><span class="sy0">,</span> <span class="re0">$total</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;I can pay in cash.&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;Time for the credit card.&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<p>Depuis une fonction, il y a 2 façons d'accéder à une variable globale. La méthode la plus directe consiste à les rechercher dans un tableau spécial appelé $GLOBALS, car toute variable globale est accessible comme élément de ce tableau. Voici comment utiliser le tableau $GLOBALS&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$dinner</span> <span class="sy0">=</span> <span class="st_h">'Curry Cuttlefish'</span><span class="sy0">;</span> 
&#160;
<span class="kw2">function</span> macrobiotic_dinner<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$dinner</span> <span class="sy0">=</span> <span class="st0">&quot;Some Vegetables&quot;</span><span class="sy0">;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;Dinner is <span class="es4">$dinner</span>&quot;</span><span class="sy0">;</span> 
    <span class="co1">// Succumb to the delights of the ocean </span>
    <span class="kw1">print</span> <span class="st0">&quot; but I'd rather have &quot;</span><span class="sy0">;</span> 
    <span class="kw1">print</span> <span class="re0">$GLOBALS</span><span class="br0">&#91;</span><span class="st_h">'dinner'</span><span class="br0">&#93;</span><span class="sy0">;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
macrobiotic_dinner<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st0">&quot;Regular dinner is: <span class="es4">$dinner</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Ce qui affichera&#160;:
</p>
<pre>Dinner is Some Vegetables but I'd rather have Curry Cuttlefish 
Regular dinner is: Curry Cuttlefish
</pre>
<p>La 2ème façon d'accéder à une variable globale depuis une fonction consiste à utiliser le mot-clé <i>global</i>, qui indique à l'interpréteur PHP que <b>l'utilisation ultérieur, dans la fonction, de la variable indiquée portera sur cette variable locale, et non sur une variable locale</b>&#160;: c'est ce que l'on appelle "placer une variable dans la portée locale". Le mot clé <i>global</i>&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$dinner</span> <span class="sy0">=</span> <span class="st_h">'Curry Cuttlefish'</span><span class="sy0">;</span> 
&#160;
<span class="kw2">function</span> vegetarian_dinner<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw2">global</span> <span class="re0">$dinner</span><span class="sy0">;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;Dinner was <span class="es4">$dinner</span>, but now it's &quot;</span><span class="sy0">;</span> 
    <span class="re0">$dinner</span> <span class="sy0">=</span> <span class="st_h">'Sauteed Pea Shoots'</span><span class="sy0">;</span>  
    <span class="kw1">print</span> <span class="re0">$dinner</span><span class="sy0">;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="kw1">print</span> <span class="st0">&quot;Regular Dinner is <span class="es4">$dinner</span>.<span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
vegetarian_dinner<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st0">&quot;Regular dinner is <span class="es4">$dinner</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Affichera&#160;:
</p>
<pre>Regular Dinner is Curry Cuttlefish. 
Dinner was Curry Cuttlefish, but now it's Sauteed Pea Shoots 
Regular dinner is Sauteed Pea Shoots
</pre>
<p>On peut également utiliser global avec plusieurs noms de variables, séparés par des virgules&#160;:
</p>
<pre>global $dinner, $lunch, $breakfast; 
</pre>
<h1><span class="mw-headline" id="Cr.C3.A9ation_de_formulaires_HTML"><span class="mw-headline-number">7</span> Création de formulaires HTML</span></h1>
<p>Afficher un "Hello"&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">array_key_exists</span><span class="br0">&#40;</span><span class="st_h">'my_name'</span><span class="sy0">,</span><span class="re0">$_POST</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;Hello, &quot;</span><span class="sy0">.</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'my_name'</span><span class="br0">&#93;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
    print<span class="sy0">&lt;&lt;&lt;</span>_HTML_
<span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;post&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;<span class="es4">$_SERVER[PHP_SELF]</span>&quot;</span><span class="sy0">&gt;</span> 
 Your name<span class="sy0">:</span> <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;my_name&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>br<span class="sy0">/&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;Say Hello&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span> 
_HTML_<span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<ul><li> Récupération et affichage du formulaire&#160;:</li></ul>
<p><a href="./File:Recup_form_php.png.html" class="image"><img alt="Recup form php.png" src="images/5/55/Recup_form_php.png" width="619" height="268" /></a>
</p>
<ul><li> Soumission du formlaire et affichage du résultat&#160;:</li></ul>
<p><a href="./File:Soum_form_php.png.html" class="image"><img alt="Soum form php.png" src="images/9/96/Soum_form_php.png" width="614" height="234" /></a>
</p><p>Le formulaire est renvoyé à la même URL que celle qui l'a initialement demandé car l'attribut action de la valise &lt;form&gt; est initialisé avec la variable spéciale $_SERVER[PHP_SELF]. Le tableau super-global $_SERVER contient un certain nombre d'informations concernant votre serveur ainsi que la requête qui est en cours de traitement par l'interpréteur PHP. L'élément PHP_SELF de ce tableau, notamment, contient la composante chemin de l'URL de la requête&#160;: si par exemple, un script PHP est accédé par <a rel="nofollow" class="external free" href="http://www.example.com/magazin/catalogue.php">http://www.example.com/magazin/catalogue.php</a>, $_SERVER['PHP_SELF'] vaudra /magasin/catalogue.php dans cette page.
</p><p>Le tableau $_POST est une variable super-globale contenant les données soumises par le formulaire. Ses clés sont les noms des éléments du formulaire et les valeurs correspondantes sont celles de ces éléments. Lorsque l'on clique sur le bouton de soumission, la valeur de $_POST['my_name'] est initialisée avec ce qui a été saisi dans le champ dont l'attribut <i>name</i> vaut <i>my_name</i>.
</p><p>Ainsi, en testant s'il existe une clé <i>my_name</i> dans le tableau $_POST, on peut savoir si une paramètre nommé <i>my_name</i> a été soumis par le formulaire. Même si ce paramètre a été laissé vide, <i>array_key_exists() renverra </i>true<i> et le message de bienvenue s'affichera.</i>
</p><p><b>Attention&#160;: Si vous commencez a faire des formulaires accessibles depuis l'extérieur, l'appel à <i>my_name</i> est dangereux si vous ne le protégez pas car il est possible dy insérer du javascript ou du code HTML. Nous verrons plus loin comment s'en protéger. Vous pouvez également regarder <a href="Développement.html#Php" title="Développement">les autres documentations PHP dont celles parlant de la sécurité</a>.</b>
</p>
<h2><span class="mw-headline" id="Variables_utiles_concernant_le_serveur"><span class="mw-headline-number">7.1</span> Variables utiles concernant le serveur</span></h2>
<p>Outre PHP_SELF, le tableau super-global $_SERVER contient un certain nombre d'éléments utiles qui fournissent des informations sur le serveur web et la requête en cours de traitement, en voici quelques uns&#160;:
</p>
<table border="1" width="100%">
<tr>
<th>Elément
</th>
<th>Exemple
</th>
<th>Description
</th></tr>
<tr>
<td>QUERY_STRING
</td>
<td>http://www.example.com/catalog/store.php?<b>category=kitchen&amp;price=5</b>
</td>
<td>La partie de l'URL située après le&#160;? et contenant les paramètres de l'URL
</td></tr>
<tr>
<td>PATH_INFO
</td>
<td>http://www.example.com/catalog/store.php/<b>browse</b>
</td>
<td>Informations supplémentaires sur le chemin, placées après le / à la fin de l'URL. Cela permet de passer des informations à un script sans utiliser la chaîne de requête
</td></tr>
<tr>
<td>SERVER_NAME
</td>
<td>http://<b>www.example.com</b>/catalog/store.php
</td>
<td>FQDN du site. Si le serveur héberge plusieurs virtualhosts, c'est celui qui est utilisé actuellement qui sera prit.
</td></tr>
<tr>
<td>DOCUMENT_ROOT
</td>
<td>/var/www
</td>
<td>Répertoire contenant les documents du site web sur le serveur. Si /var/www est la racine du serveur web, alors <a rel="nofollow" class="external free" href="http://www.example.com/catalog/store.php">http://www.example.com/catalog/store.php</a> correspond à /var/www/catalog/store.php.
</td></tr>
<tr>
<td>REMOTE_ADDR
</td>
<td>175.56.28.3
</td>
<td>IP du client (IP source)
</td></tr>
<tr>
<td>REMOTE_HOST
</td>
<td>pool0560.cvx.dialup.verizon.net
</td>
<td>Si le serveur web est configurer pour faire de la résolution de noms, cette requête est utile, cependant très peu de serveur web s'en servent (<b>traitement trop coûteux en temps</b>)
</td></tr>
<tr>
<td>HTTP_REFERER
</td>
<td><a rel="nofollow" class="external free" href="http://directory.google.com/Top/Shopping/Clothing/">http://directory.google.com/Top/Shopping/Clothing/</a>
</td>
<td>Si l'URL courante a été atteinte a l'aide d'un lien, HTTP_REFER contient l'URL de la page contenant ce lien. <b>Attention&#160;: cette valeur peut être falsifiée&#160;!</b>
</td></tr>
<tr>
<td>HTTP_USER_AGENT
</td>
<td>Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)
</td>
<td>Informations sur le navigateur du client, ainsi que l'OS utilisé.
</td></tr></table>
<h2><span class="mw-headline" id="Acc.C3.A8s_aux_param.C3.A8tres_des_formulaires"><span class="mw-headline-number">7.2</span> Accès aux paramètres des formulaires</span></h2>
<p>Les paramètres des URL et des formulaires qui utilisent la méthode GET sont placés dans $_GET, tandis que les paramètres des formulaires utilisant la méthode POST sont mis dans $_POST.<br />
L'URL <i>http://www.example.com/catalog.php?product_id=21&amp;category=fryingpan</i> placera donc 2 valeurs da,s $_GET&#160;: $_GET['product_id'] sera initialisé avec 21 et $_GET['category'] avec fryingpan.<br />
La soumission du formulaire ci dessous placera ces mêmes valeurs dans $_POST, en supposant que l'on ait entré 21 dans le champ de saisie et que Frying Pan ait été choisi dans le menu.
</p>
<ul><li> Formulaire contenant 2 éléments&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;POST&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;catalog.php&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;product_id&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>select name<span class="sy0">=</span><span class="st0">&quot;category&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option value<span class="sy0">=</span><span class="st0">&quot;ovenmitt&quot;</span><span class="sy0">&gt;</span>Pot Holder<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option value<span class="sy0">=</span><span class="st0">&quot;fryingpan&quot;</span><span class="sy0">&gt;</span>Frying Pan<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option value<span class="sy0">=</span><span class="st0">&quot;torch&quot;</span><span class="sy0">&gt;</span>Kitchen Torch<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>select<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span><span class="sy0">&gt;</span> <span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span></pre></div></div>
<ul><li> Affichage des paramètres soumis par un formulaire&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">&lt;form method=&quot;POST&quot; action=&quot;catalog.php&quot;&gt; 
&lt;input type=&quot;text&quot; name=&quot;product_id&quot;&gt; 
&lt;select name=&quot;category&quot;&gt; 
&lt;option value=&quot;ovenmitt&quot;&gt;Pot Holder&lt;/option&gt; 
&lt;option value=&quot;fryingpan&quot;&gt;Frying Pan&lt;/option&gt; 
&lt;option value=&quot;torch&quot;&gt;Kitchen Torch&lt;/option&gt; 
&lt;/select&gt; 
&lt;input type=&quot;submit&quot; name=&quot;submit&quot;&gt; 
&lt;/form&gt; 
Here are the submitted values: 
&#160;
product_id: <span class="kw2">&lt;?php</span> <span class="kw1">print</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'product_id'</span><span class="br0">&#93;</span><span class="sy0">;</span> <span class="sy1">?&gt;</span> 
&lt;br/&gt; 
category: <span class="kw2">&lt;?php</span> <span class="kw1">print</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'category'</span><span class="br0">&#93;</span><span class="sy0">;</span> <span class="sy1">?&gt;</span></pre></div></div>
<p>Ce qui donne&#160;:<br />
<a href="./File:Form_affiche_php.png.html" class="image"><img alt="Form affiche php.png" src="images/f/f4/Form_affiche_php.png" width="342" height="83" /></a><br />
Le nom d'un élément de formulaire pouvant contenir plusieurs valeurs doit se terminer par [] afin d'indiquer à l'interpréteur PHP qu'il doit traiter les différentes valeurs comme les éléments d'un tableau. Ainsi, les valeurs soumises pour le menu &lt;select&gt; de l'exemple ci dessous seront placées dnas $_POST['lunch'].
</p>
<ul><li> Eléments de formulaires multivalués&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;POST&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;eat.php&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>select name<span class="sy0">=</span><span class="st0">&quot;lunch[  ]&quot;</span> multiple<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option value<span class="sy0">=</span><span class="st0">&quot;pork&quot;</span><span class="sy0">&gt;</span>BBQ Pork Bun<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option value<span class="sy0">=</span><span class="st0">&quot;chicken&quot;</span><span class="sy0">&gt;</span>Chicken Bun<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option value<span class="sy0">=</span><span class="st0">&quot;lotus&quot;</span><span class="sy0">&gt;</span>Lotus Seed Bun<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option value<span class="sy0">=</span><span class="st0">&quot;bean&quot;</span><span class="sy0">&gt;</span>Bean Paste Bun<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option value<span class="sy0">=</span><span class="st0">&quot;nest&quot;</span><span class="sy0">&gt;</span>Bird<span class="sy0">-</span>Nest Bun<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>select<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span></pre></div></div>
<ul><li> Accès aux valeurs d'un élément multivalué&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">&lt;form method=&quot;POST&quot; action=&quot;eat.php&quot;&gt; 
&lt;select name=&quot;lunch[  ]&quot; multiple&gt; 
&lt;option value=&quot;pork&quot;&gt;BBQ Pork Bun&lt;/option&gt; 
&lt;option value=&quot;chicken&quot;&gt;Chicken Bun&lt;/option&gt; 
&lt;option value=&quot;lotus&quot;&gt;Lotus Seed Bun&lt;/option&gt; 
&lt;option value=&quot;bean&quot;&gt;Bean Paste Bun&lt;/option&gt; 
&lt;option value=&quot;nest&quot;&gt;Bird-Nest Bun&lt;/option&gt; 
&lt;/select&gt; 
&lt;input type=&quot;submit&quot; name=&quot;submit&quot;&gt; 
&lt;/form&gt; 
Selected buns: 
&lt;br/&gt; 
<span class="kw2">&lt;?php</span> 
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'lunch'</span><span class="br0">&#93;</span> <span class="kw1">as</span> <span class="re0">$choice</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;You want a <span class="es4">$choice</span> bun. &lt;br/&gt;&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
<span class="sy1">?&gt;</span></pre></div></div>
<p>Ce qui donne&#160;:<br />
<a href="./File:Php_multival.png.html" class="image"><img alt="Php multival.png" src="images/f/f3/Php_multival.png" width="182" height="161" /></a>
</p>
<h2><span class="mw-headline" id="Traitement_des_formulaires_avec_des_fonctions"><span class="mw-headline-number">7.3</span> Traitement des formulaires avec des fonctions</span></h2>
<p>Pour savoir si un formulaire a été soumis, on peut utiliser des paramètres cachés. Si un paramètre caché se trouve dans $_POST, on traitera le formulaire; sinon, on l'affichera. On utilise cette technique dans l'exemple ci dessous avec le paramètre caché "<i>_submit_check</i>"&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="co1">// Logic to do the right thing based on  </span>
<span class="co1">// the hidden _submit_check parameter </span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'_submit_check'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    process_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
    show_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="co1">// Do something when the form is submitted </span>
<span class="kw2">function</span> process_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;Hello, &quot;</span><span class="sy0">.</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'my_name'</span><span class="br0">&#93;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="co1">// Display the form </span>
<span class="kw2">function</span> show_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    print<span class="sy0">&lt;&lt;&lt;</span>_HTML_ 
<span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;POST&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;<span class="es4">$_SERVER[PHP_SELF]</span>&quot;</span><span class="sy0">&gt;</span> 
Your name<span class="sy0">:</span> <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;my_name&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>br<span class="sy0">/&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;Say Hello&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;hidden&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;_submit_check&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;1&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span> 
_HTML_<span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<ul><li> Validation des données d'un formulaire&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="co1">// Logic to do the right thing based on  </span>
<span class="co1">// the hidden _submit_check parameter </span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'_submit_check'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">if</span> <span class="br0">&#40;</span>validate_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        process_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
        show_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
    show_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="co1">// Do something when the form is submitted </span>
<span class="kw2">function</span> process_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;Hello, &quot;</span><span class="sy0">.</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'my_name'</span><span class="br0">&#93;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="co1">// Display the form </span>
<span class="kw2">function</span> show_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    print<span class="sy0">&lt;&lt;&lt;</span>_HTML_ 
<span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;POST&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;<span class="es4">$_SERVER[PHP_SELF]</span>&quot;</span><span class="sy0">&gt;</span> 
Your name<span class="sy0">:</span> <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;my_name&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>br<span class="sy0">/&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;Say Hello&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;hidden&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;_submit_check&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;1&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span>
_HTML_<span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="co1">// Check the form data </span>
<span class="kw2">function</span> validate_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="co1">// Is my_name at least 3 characters long? </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">strlen</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'my_name'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">3</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
        <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span> 
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p><b>Il faut TOUJOURS valider les informations soumises par un formulaire avant de les traiter. Ne JAMAIS les balancer directement à l'exécution. De l'injection de code étant possible, il est beaucoup plus prudent de vérifier.</b>
</p>
<ul><li> Affichage de messages d'erreur du formulaire&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="co1">// Logic to do the right thing based on  </span>
<span class="co1">// the hidden _submit_check parameter </span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'_submit_check'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="co1">// If validate_form( ) returns errors, pass them to show_form( ) </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$form_errors</span> <span class="sy0">=</span> validate_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        show_form<span class="br0">&#40;</span><span class="re0">$form_errors</span><span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
        process_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
    show_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="co1">// Do something when the form is submitted </span>
<span class="kw2">function</span> process_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;Hello, &quot;</span><span class="sy0">.</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'my_name'</span><span class="br0">&#93;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="co1">// Display the form </span>
<span class="kw2">function</span> show_form<span class="br0">&#40;</span><span class="re0">$errors</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="co1">// If some errors were passed in, print them out </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$errors</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="kw1">print</span> <span class="st_h">'Please correct these errors: &lt;ul&gt;&lt;li&gt;'</span><span class="sy0">;</span> 
        <span class="kw1">print</span> <span class="kw3">implode</span><span class="br0">&#40;</span><span class="st_h">'&lt;/li&gt;&lt;li&gt;'</span><span class="sy0">,</span> <span class="re0">$errors</span><span class="br0">&#41;</span><span class="sy0">;</span> 
        <span class="kw1">print</span> <span class="st_h">'&lt;/li&gt;&lt;/ul&gt;'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    print<span class="sy0">&lt;&lt;&lt;</span>_HTML_
<span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;POST&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;<span class="es4">$_SERVER[PHP_SELF]</span>&quot;</span><span class="sy0">&gt;</span> 
Your name<span class="sy0">:</span> <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;my_name&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>br<span class="sy0">/&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;Say Hello&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;hidden&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;_submit_check&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;1&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span> 
_HTML_<span class="sy0">;</span>
<span class="br0">&#125;</span> 
&#160;
<span class="co1">// Check the form data </span>
<span class="kw2">function</span> validate_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="co1">// Start with an empty array of error messages </span>
    <span class="re0">$errors</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
    <span class="co1">// Add an error message if the name is too short </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">strlen</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'my_name'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">3</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Your name must be at least 3 letters long.'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    <span class="co1">// Return the (possibly empty) array of error messages </span>
    <span class="kw1">return</span> <span class="re0">$errors</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="El.C3.A9ments_obligatoires"><span class="mw-headline-number">7.4</span> Eléments obligatoires</span></h2>
<p>Pour vérifier qu'un élément obligatoire a bien été saisi, contrôlez sa longueur avec la fonction strlen()&#160;:
</p>
<pre>if (<b>strlen</b>($_POST['email']) =  = 0) { 
   $errors[  ] = "You must enter an email address."; } 
}
</pre>
<h2><span class="mw-headline" id="El.C3.A9ments_num.C3.A9riques_ou_cha.C3.AEnes"><span class="mw-headline-number">7.5</span> Eléments numériques ou chaînes</span></h2>
<p>Pour garantir qu'une valeur saisie est un nombre entier ou flottant, utilisez les fonctions de conversion intval() ou floatval(). Elles vous renverront le nombre (entier ou flottant). contenu dans une chaîne, ensupprimant tout texte superflu ou d'autres formats numériques.
</p><p>Pour utiliser ces fonctions afin de valider des formulaires, comparez la valeur soumise avec ce que vous obtiendrez si vous la passiez à intval() ou floatval(), puis à strval(). Cette dernière fonction reconvertit le nombre nettoyé en chaîne, ce qui permet une comparaison avec l'élément concerné de $_POST. Si la chaîne soumise et la chaîne nettoyée ne correspondent pas, c'est qu'il y a quelque chose d'anormal dans la valeur soumise&#160;: vous devriez donc la rejeter. Dans l'exemple ci dessous, nous voyons comment vérifier q'un élément soumis est bien un entier.
</p>
<ul><li> Vérification d'un élément pour savoir si c'est un entier&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'age'</span><span class="br0">&#93;</span> <span class="sy0">!=</span> <span class="kw3">strval</span><span class="br0">&#40;</span><span class="kw3">intval</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'age'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Please enter a valid age.'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<p>Si $_POST['age'] est un entier comme 59, 0 ou -32, intval($POST['age']) renverra, respectivement 59, 0 ou -32. Les 2 valeurs correspondront et rien ne sera ajouté à $erreurs. Par contre, si $_POST['age'] vaut 52-poussières, intval($_POST['age']) vaudra 52. Ces 2 valeurs étant différentes, l'expression de test du if() sera vérifiée et un message sera ajouté à $erreurs. Si $_POST['age'] ne contient aucun chiffre, intval($POST['age']) renverra 0. Si, par exemple vieux est la valeur soumise pour $_POST['age'], intval($_POST['age']) reverra 0.
</p>
<ul><li> Vérification d'un élément pour savoir si c'est un réel&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'price'</span><span class="br0">&#93;</span> <span class="sy0">!=</span> <span class="kw3">strval</span><span class="br0">&#40;</span><span class="kw3">floatval</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'price'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Please enter a valid price.'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<p>Lorsque l'on valide des éléments - tout particulièrement les chaînes de caractères, il est souvent utile de supprimer les espaces de début et de fin avec la fonction trim().<br />
Ainsi, pour empêcher la saisie d'une chaîne ne contenant que des espaces dans un élément obligatoire, vous pouvez combiner l'appel de trim() avec celui de strlen(), comme le montre l'exemple ci dessous&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">strlen</span><span class="br0">&#40;</span><span class="kw3">trim</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'name'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">=</span>  <span class="sy0">=</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st0">&quot;Your name is required.&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Intervalles_num.C3.A9riques"><span class="mw-headline-number">7.6</span> Intervalles numériques</span></h2>
<ul><li> Tester qu'une valeur appartient à un intervalle numérique&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'age'</span><span class="br0">&#93;</span> <span class="sy0">!=</span> <span class="kw3">strval</span><span class="br0">&#40;</span><span class="kw3">intval</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'age'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st0">&quot;Your age must be a number.&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> <span class="kw1">elseif</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'age'</span><span class="br0">&#93;</span> <span class="sy0">&lt;</span> <span class="nu0">18</span><span class="br0">&#41;</span> <span class="sy0">||</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'age'</span><span class="br0">&#93;</span> <span class="sy0">&gt;</span> <span class="nu0">65</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st0">&quot;Your age must be at least 18 and no more than 65.&quot;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Adresses_de_courrier_.C3.A9lectronique"><span class="mw-headline-number">7.7</span> Adresses de courrier électronique</span></h2>
<p>Si vous ne souhaitez pas cous lancer dans cette opération de vérification par envoi de message, vous pouvez quand même effectuer quelques tests de syntaxe dans le code de validation du formulaire pour éliminer les adresses mal formées.<br />
Ainsi, l'expression régulière suivante&#160;:
</p>
<pre>^[^@\s]+@([-a-z0-9]+\.)+[a-z]{2,}$
</pre>
<p>correspond aux adresses de courrier les plus fréquentes et rejettera la plupart des mauvaises. Comme le montre l'exemple ci dessous, vous pouvez utiliser dnas un appel à preg_match()&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span> <span class="kw3">preg_match</span><span class="br0">&#40;</span><span class="st_h">'/^[^@\s]+@([-a-z0-9]+\.)+[a-z]{2,}$/i'</span><span class="sy0">,</span>  
                 <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'email'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Please enter a valid e-mail address'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="Menu_.3Cselect.3E"><span class="mw-headline-number">7.8</span> Menu &lt;select&gt;</span></h2>
<p>Lorsque l'on utilise un menu &lt;select&gt; dans un formulaire, il faut s'assurer que la valeur soumise pour celui-ci fait partie des choix possible du menu. Bien qu'avec un navigateur classique comme Firefox ou IE (et oui malheureusement), un utilisateur ne puisse pas soumettre une valeur qui ne fait pas partie du menu, un pirate peut très bien ne pas utiliser de navigateur et construire de toutes pièces une requête contenant n'importe quelle valeur.
</p>
<ul><li> Affichage d'un menu &lt;select&gt;</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$sweets</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Sesame Seed Puff'</span><span class="sy0">,</span><span class="st_h">'Coconut Milk Gelatin Square'</span><span class="sy0">,</span> 
                 <span class="st_h">'Brown Sugar Cake'</span><span class="sy0">,</span><span class="st_h">'Sweet Rice and Meat'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="co1">// Display the form </span>
<span class="kw2">function</span> show_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    print<span class="sy0">&lt;&lt;&lt;</span>_HTML_ 
<span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;post&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;<span class="es4">$_SERVER[PHP_SELF]</span>&quot;</span><span class="sy0">&gt;</span> 
Your Order<span class="sy0">:</span> <span class="sy0">&lt;</span>select name<span class="sy0">=</span><span class="st0">&quot;order&quot;</span><span class="sy0">&gt;</span> 
&#160;
_HTML_<span class="sy0">;</span> 
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$GLOBALS</span><span class="br0">&#91;</span><span class="st_h">'sweets'</span><span class="br0">&#93;</span> <span class="kw1">as</span> <span class="re0">$choice</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;&lt;option&gt;<span class="es4">$choice</span>&lt;/option&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
print<span class="sy0">&lt;&lt;&lt;</span>_HTML_
<span class="sy0">&lt;/</span>select<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>br<span class="sy0">/&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;Order&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;hidden&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;_submit_check&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;1&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span> 
_HTML_<span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Ce qui affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="sy0">&lt;</span>form method<span class="sy0">=</span><span class="st0">&quot;post&quot;</span> action<span class="sy0">=</span><span class="st0">&quot;order.php&quot;</span><span class="sy0">&gt;</span> 
Your Order<span class="sy0">:</span> <span class="sy0">&lt;</span>select name<span class="sy0">=</span><span class="st0">&quot;order&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span>Sesame Seed Puff<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span>Coconut Milk Gelatin Square<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span>Brown Sugar Cake<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>option<span class="sy0">&gt;</span>Sweet Rice and Meat<span class="sy0">&lt;/</span>option<span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>select<span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>br<span class="sy0">/&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;Order&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;hidden&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;_submit_check&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;1&quot;</span><span class="sy0">&gt;</span> 
<span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span></pre></div></div>
<p>Pour des soucis de sécurité, il est important de vérifier son code, voici comment procéder&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span> <span class="kw3">array_key_exists</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'order'</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$GLOBALS</span><span class="br0">&#91;</span><span class="st_h">'sweets'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Please choose a valid order.'</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<h2><span class="mw-headline" id="HTML_et_Javascript"><span class="mw-headline-number">7.9</span> HTML et Javascript</span></h2>
<p>Le livre d'or facilite la tâche d'un utilisateur malveillant qui peut ainsi mettre sur le serveur du code HTML ou Javascript qui sera ensuite exécuté par un navigateur sans que son utilisateur s'en aperçoive. Ce type de problème est appelé attaqe de type cross scripting car ce livre d'or mal écrit permet à du code provenant d'une certaine source (utilisateur mal intentionné) de faire croire qu'il vient d'ailleurs (le site du livre d'or).
</p><p><b>Pour empêcher ce type d'attaque, n'affichez jamais les données provenant de l'extérieur sans les avoir préalablement vérifiées</b>. Supprimez les parties suspectes (les balises HTML, par exemple) ou encodez les caractères spéciaux pour que les navigateurs ne peuvent agir sur du code HTML ou Javascript qui aurait été intégré. PHP vous offre 2 fonctions pour simplifier ces opérations&#160;: strip_tags() supprime les marqueurs HTML d'une chaîne et htmlentities() encode les caractères spéciaux et HTML.
</p>
<ul><li> Suppression des balise HTML d'une chaîne&#160;:</li></ul>
<pre>// Remove HTML from comments 
$comments = <b>strip_tags</b>($_POST['comments']); 
// Now it's OK to print $comments 
print $comments;
</pre>
<ul><li> Encodage des entités HTML d'une chaîne&#160;:</li></ul>
<pre>$comments = <b>htmlentities</b>($_POST['comments']); 
// Now it's OK to print $comments 
print $comments;
</pre>
<p><b>Dans la pluspart des applications, vous devriez utiliser htmlentities() pour nettoyer les textes qui proviennent de l'extérieur</b>, car cette fonction ne supprime aucun contenu tout en vous protégeant contre les attaques de cross-site scripting.
</p>
<h2><span class="mw-headline" id="Affichage_de_valeurs_par_d.C3.A9faut"><span class="mw-headline-number">7.10</span> Affichage de valeurs par défaut</span></h2>
<p>Lorsque l'on réaffiche un formulaire à cause d'une erreur, préserver les informations déjà saisies par l'utilisateur peut s'avérer pratique.
</p>
<ul><li> Construction d'un tableau de valeurs par défaut&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'_submit_check'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$defaults</span> <span class="sy0">=</span> <span class="re0">$_POST</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
    <span class="re0">$defaults</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'delivery'</span>  <span class="sy0">=&gt;</span> <span class="st_h">'yes'</span><span class="sy0">,</span> 
                      <span class="st_h">'size'</span>      <span class="sy0">=&gt;</span> <span class="st_h">'medium'</span><span class="sy0">,</span> 
                      <span class="st_h">'main_dish'</span> <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'taro'</span><span class="sy0">,</span><span class="st_h">'tripe'</span><span class="br0">&#41;</span><span class="sy0">,</span> 
<span class="br0">&#125;</span></pre></div></div>
<p>Si $_POST['_submit_check'] est initialisé, cela signifie que le formulaire a été soumis&#160;: en ce cas, les valeurs par défaut devraient être celles envoyées par l'utilisateur. Dans le cas contraire, nous pouvons configurer nos propres valeurs par défaut.
</p>
<ul><li> Configurer une valeur par défaut pour un champ de saisie&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">print</span> <span class="st_h">'&lt;input type=&quot;text&quot; name=&quot;my_name&quot; value=&quot;'</span> <span class="sy0">.</span>  
<span class="kw3">htmlentities</span><span class="br0">&#40;</span><span class="re0">$defaults</span><span class="br0">&#91;</span><span class="st_h">'my_name'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">.</span> <span class="st_h">'&quot;&gt;'</span><span class="sy0">;</span></pre></div></div>
<ul><li> Configurer une valeur par défaut pour une zone de texte multi-ligne&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">print</span> <span class="st_h">'&lt;textarea name=&quot;comments&quot;&gt;'</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="kw3">htmlentities</span><span class="br0">&#40;</span><span class="re0">$defaults</span><span class="br0">&#91;</span><span class="st_h">'comments'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st_h">'&lt;/textarea&gt;'</span><span class="sy0">;</span></pre></div></div>
<ul><li> Configurer une valeur par défaut dans un menu &lt;select&gt;&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$sweets</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'puff'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Sesame Seed Puff'</span><span class="sy0">,</span> 
                <span class="st_h">'square'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Coconut Milk Gelatin Square'</span><span class="sy0">,</span> 
                <span class="st_h">'cake'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Brown Sugar Cake'</span><span class="sy0">,</span> 
                <span class="st_h">'ricemeat'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Sweet Rice and Meat'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="kw1">print</span> <span class="st_h">'&lt;select name=&quot;sweet&quot;&gt;'</span><span class="sy0">;</span> 
<span class="co1">// $val is the option value, $choice is what's displayed </span>
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$sweets</span> <span class="kw1">as</span> <span class="re0">$option</span> <span class="sy0">=&gt;</span> <span class="re0">$label</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st_h">'&lt;option value=&quot;'</span> <span class="sy0">.</span><span class="re0">$option</span> <span class="sy0">.</span><span class="st_h">'&quot;'</span><span class="sy0">;</span> 
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$option</span> <span class="sy0">=</span>  <span class="sy0">=</span> <span class="re0">$defaults</span><span class="br0">&#91;</span><span class="st_h">'sweet'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="kw1">print</span> <span class="st_h">' selected=&quot;selected&quot;'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;&gt; <span class="es4">$label</span>&lt;/option&gt;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
<span class="kw1">print</span> <span class="st_h">'&lt;/select&gt;'</span><span class="sy0">;</span></pre></div></div>
<h1><span class="mw-headline" id="Utilisation_des_bases_de_donn.C3.A9es_pour_le_stockage_d.27informations"><span class="mw-headline-number">8</span> Utilisation des bases de données pour le stockage d'informations</span></h1>
<p>L'essentiel de ce chapitre utilise PEAR DB, une couche d'abstraction pour l'accès aux bases de donnée qui se greffe sur PHP afin de simplifier les communications entre vos programmes et les logiciels de base de données.
</p><p>Voici ce que nous allons utiliser&#160;:
</p>
<table border="1">
<tr>
<th>ID
</th>
<th>Name
</th>
<th>Price
</th>
<th>Is Spicy&#160;?
</th></tr>
<tr>
<td>1
</td>
<td>Fried Bean Curd
</td>
<td>5.50
</td>
<td>0
</td></tr>
<tr>
<td>2
</td>
<td>Braised Sea Cucumber
</td>
<td>9.95
</td>
<td>0
</td></tr>
<tr>
<td>3
</td>
<td>Walnut Bun
</td>
<td>1.00
</td>
<td>0
</td></tr>
<tr>
<td>4
</td>
<td>Eggplant with Chilli Sauce
</td>
<td>6.50
</td>
<td>1
</td></tr></table>
<h2><span class="mw-headline" id="Connexion_.C3.A0_un_syst.C3.A8me_de_bases_de_donn.C3.A9es"><span class="mw-headline-number">8.1</span> Connexion à un système de bases de données</span></h2>
<ul><li> Chargement d'un fichier externe avec require&#160;:</li></ul>
<pre>require 'DB.php';
</pre>
<p>Cette ligne demande à l'interpréteur PHP 'exécuter tout le code de DB.php, qui est le fichier principal de paquetage PEAR DB et qui définit les fonctions que vous utiliserez pour dialoguer avec votre base de données.<br />
<i>Include</i> peut être utilsé à la place de <i>require</i>. La différence est que include ne quittera pas votre programme si le fichier n'existe pas contrairement à requiere.
</p><p>Après le chargement du module DB, vous devez étalbir une connexion à la base de données à l'aide de la fonction DB::connect()&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://penguin:top^hat@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Explication de la dernière ligne (DSN&#160;: Data Source Name)&#160;:
</p>
<pre>db_program://user:password@hostname/database
</pre>
<ul><li> Voici les valeurs possible pour les SGDB&#160;:</li></ul>
<table border="1">
<tr>
<th>db_program
</th>
<th>Database program
</th></tr>
<tr>
<td>dbase
</td>
<td>dBase
</td></tr>
<tr>
<td>fbsql
</td>
<td>FrontBase
</td></tr>
<tr>
<td>ibase
</td>
<td>InterBase
</td></tr>
<tr>
<td>ifx
</td>
<td>Informix
</td></tr>
<tr>
<td>msql
</td>
<td>Mini SQL
</td></tr>
<tr>
<td>mssql
</td>
<td>Microsoft SQL Server
</td></tr>
<tr>
<td>mysql
</td>
<td>MySQL (version &lt;= 4.0)
</td></tr>
<tr>
<td>mysqli
</td>
<td>MySQL (verison &gt;= 4.1.2)
</td></tr>
<tr>
<td>oci8
</td>
<td>Oracle (version 7,8 et 9)
</td></tr>
<tr>
<td>odbc
</td>
<td>ODBC
</td></tr>
<tr>
<td>pgsql
</td>
<td>PostgreSQL
</td></tr>
<tr>
<td>sqlite
</td>
<td>SQLite
</td></tr>
<tr>
<td>sybase
</td>
<td>Sybase
</td></tr></table>
<p>Un appel a DB:connect() renvoie un objet qui vous permettra d'interagir avec la vase de données. En cas de problème de connexion, cette fonction renverra un type d'objet différent, contenant des informations sur les raisons de l'échec. Avant d'aller plus loin, utilisez la fonction DB:isError().
</p>
<ul><li> Contrôle des erreurs de conexion&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://penguin:top^hat@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span>DB<span class="sy0">::</span><span class="me2">isError</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw3">die</span><span class="br0">&#40;</span><span class="st0">&quot;Can't connect: &quot;</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span></pre></div></div>
<p>Dans l'exemple ci dessus, le message est "Can't connect:" suivit de "$db-&gt;getMessage( )" qui renvoie plus d'informations sur l'erreur.
</p><p>Après avoir appelé DB:connect(), vous pouvez utiliser les fonctions de l'objet obtenu pour interagir aec la base de données, ainsi, $db-&gt;getMessage( ) signifie "appelle la fonction getMessage( ) qui se trouve dans l'objet $db". Ici, $db contient les informations d'erreur et la fonction getMessage() en affiche certaines. Ex&#160;:
</p>
<pre>Can't connect: DB Error: connect failed
</pre>
<h2><span class="mw-headline" id="Cr.C3.A9ation_d.27une_table"><span class="mw-headline-number">8.2</span> Création d'une table</span></h2>
<ul><li> Création d'une table dishes&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">CREATE TABLE dishes <span class="br0">&#40;</span> 
    dish_id INT<span class="sy0">,</span> 
    dish_name VARCHAR<span class="br0">&#40;</span><span class="nu0">255</span><span class="br0">&#41;</span><span class="sy0">,</span> 
    price DECIMAL<span class="br0">&#40;</span><span class="nu0">4</span><span class="sy0">,</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">,</span> 
    is_spicy INT 
<span class="br0">&#41;</span></pre></div></div>
<p>Certains types de colonnes incluent une longueur ou des informations de format entre parenthèses&#160;:
</p>
<ul><li> VARCHAR(255)&#160;: Chaîne de longueur variable de 255 caractères maximum.</li>
<li> DECIMAL(4,2)&#160;: Nombre décimal de quatre chiffres, dont 2 après la virgule.</li></ul>
<ul><li> Types fréquement utilisés pour les colonnes d'une table&#160;:</li></ul>
<table border="1">
<tr>
<th>Type de la colonne
</th>
<th>Description
</th></tr>
<tr>
<td>VARCHAR(longueur)
</td>
<td>Chaîne de longueur variable. longueur=caractères maximum.
</td></tr>
<tr>
<td>INT
</td>
<td>entier
</td></tr>
<tr>
<td>BLOB (PostgreSQL appelle ce type BYTEA)
</td>
<td>Chaîne de données binaires, d'au plus 64 Ko
</td></tr>
<tr>
<td>DECIMAL(total_chiffres,nb_décimale)
</td>
<td>Nombre décimal de <i>total_chiffres</i> chiffres, dont <i>nb_décimales</i> après la virgule (La virgule décimale est représentée par un point, et non une virgule).
</td></tr>
<tr>
<td>DATETIME (Oracle appelle ce type DATE)
</td>
<td>Date et heure&#160;: 2008-09-07 21:38:48 par exemple
</td></tr></table>
<ul><li> Envoie d'une commande CREATE TABLE au système de base de données&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span>DB<span class="sy0">::</span><span class="me2">isError</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw3">die</span><span class="br0">&#40;</span><span class="st0">&quot;connection error: &quot;</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span> 
<span class="re0">$q</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;CREATE TABLE dishes ( 
        dish_id INT, 
        dish_name VARCHAR(255), 
        price DECIMAL(4,2), 
        is_spicy INT 
)&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<ul><li> Suppression d'une table&#160;:</li></ul>
<pre>DROP TABLE dishes
</pre>
<h2><span class="mw-headline" id="Stockage_d.27informations_dans_une_base_de_donn.C3.A9es"><span class="mw-headline-number">8.3</span> Stockage d'informations dans une base de données</span></h2>
<h3><span class="mw-headline" id="Insert"><span class="mw-headline-number">8.3.1</span> Insert</span></h3>
<p>Pour stocker des données dans la base, il suffit de passer une instruction INSERT à la fonction query() de l'objet&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span>DB<span class="sy0">::</span><span class="me2">isError</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw3">die</span><span class="br0">&#40;</span><span class="st0">&quot;connection error: &quot;</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span> 
<span class="re0">$q</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;INSERT INTO dishes (dish_name, price, is_spicy)     VALUES ('Sesame Seed Puff', 2.50, 0)&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Pour plus d'explications sur la fonction INSERT d'SQL, <a href="Introduction_au_SQL.html#Create_-_Insertion_de_donn.C3.A9es" title="Introduction au SQL">reportez vous à l'introduction d'SQL</a>.
</p><p>Au lieu d'appeller DB:isError après chaque requête, il est plus pratique d'utiliser la fonction <i>setErrorHandling()</i> pour mettre en place un comportement par défaut pour la gestion des erreurs&#160;: il suffit de passer la constante PEAR_ERROR_DIE à <i>setErrorHandling()</i> pour que votre programme affiche automatiquement un message d'rreur et s'arrête en cas d'échec d'une requête.
</p>
<ul><li> Gestion automatique des erreurs avec setErrorHandling()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span>DB<span class="sy0">::</span><span class="me2">isError</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw3">die</span><span class="br0">&#40;</span><span class="st0">&quot;Can't connect: &quot;</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span> 
<span class="co1">// print a message and quit on future database errors </span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">setErrorHandling</span><span class="br0">&#40;</span>PEAR_ERROR_DIE<span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="re0">$q</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;INSERT INTO dishes (dish_size, dish_name, price, is_spicy) 
    VALUES ('large', 'Sesame Seed Puff', 2.50, 0)&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st0">&quot;Query Succeeded!&quot;</span><span class="sy0">;</span>  
<span class="br0">&#125;</span></pre></div></div>
<p>Ce qui affichera&#160;:
</p>
<pre>DB Error: syntax error
</pre>
<p>Le programme se terminant dès qu'il rencontre l'erreur, la dernière ligne de l'exemple ne s'exécutera jamais&#160;: le message "Succès de la requête&#160;!" ne s'affichera donc pas.
</p><p><b>La fonction setErrorHandling() appartient à l'objet $db&#160;: vous devez donc d'abord appeler DB::connect() afin d'obtenir cet objet.</b>
</p>
<h3><span class="mw-headline" id="Update"><span class="mw-headline-number">8.3.2</span> Update</span></h3>
<p>Pour plus d'explications sur la fonction UPDATE d'SQL, <a href="Introduction_au_SQL.html#UPDATE_-_Mise_.C3.A0_jour_des_donn.C3.A9es" title="Introduction au SQL">reportez vous à l'introduction d'SQL</a>.
</p><p>Voici un exemple de modification de données avec query()&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span>DB<span class="sy0">::</span><span class="me2">isError</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw3">die</span><span class="br0">&#40;</span><span class="st0">&quot;connection error: &quot;</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span> 
<span class="co1">// Decrease the price some some dishes </span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;UPDATE dishes SET price=price - 5 WHERE price &gt; 20&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st_h">'Changed the price of '</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">affectedRows</span><span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st_h">'rows.'</span><span class="sy0">;</span></pre></div></div>
<h3><span class="mw-headline" id="Delete"><span class="mw-headline-number">8.3.3</span> Delete</span></h3>
<p>Pour plus d'explications sur la fonction DELETE d'SQL, <a href="Introduction_au_SQL.html#DELETE_-_Supprimer_des_donn.C3.A9es" title="Introduction au SQL">reportez vous à l'introduction d'SQL</a>.
</p>
<ul><li> Sppression des données avec query()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span>DB<span class="sy0">::</span><span class="me2">isError</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw3">die</span><span class="br0">&#40;</span><span class="st0">&quot;connection error: &quot;</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span> 
<span class="co1">// remove expensive dishes </span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$make_things_cheaper</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;DELETE FROM dishes WHERE price &gt; 19.95&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
    <span class="co1">// or, remove all dishes </span>
    <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;DELETE FROM dishes&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<p>La fonction affectedRows() indique le nombre de lignes qui ont été modifiées ou supprimées par une instruction UPDATE ou DELETE. Pour connaître le nombre de lignes affectées par ces requêtes, appelez-la immédiatement après l'appel à query().
</p>
<ul><li> Connaître le nombre de lignes affectées par un UPDATE ou un DELETE&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span>DB<span class="sy0">::</span><span class="me2">isError</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw3">die</span><span class="br0">&#40;</span><span class="st0">&quot;connection error: &quot;</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span> 
<span class="co1">// Decrease the price some some dishes </span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;UPDATE dishes SET price=price - 5 WHERE price &gt; 20&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st_h">'Changed the price of '</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">affectedRows</span><span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st_h">'rows.'</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Inserion_s.C3.A9curis.C3.A9e_de_donn.C3.A9es_provenant_de_formulaires"><span class="mw-headline-number">8.4</span> Inserion sécurisée de données provenant de formulaires</span></h2>
<p>L'affichage de données non vérifiées provenant de formulaires peut vous exposer, ainsi que vos utilisateurs à une attaque de type cross-site scripting. Dans des requêtes SQL, ces données peuvent posr un problème similaire, appellé "<b>Attaque par injection SQL</b>".
</p><p>En soumettant par un formulaire une valeur  savamment construite, un utilisateur mal intentionné peut injecter des requêtes SQL quelconques dans votre système de base de données. Pour empêcher ce type d'attaques, vous devez protéger les caractères spéciaux (<b>surtout l'apostrophe</b>) dans les requêtes SQL. PEAR DB fournit une fonctionnalité très utile appellée <i>marqueurs d'emplacement</i>, qui rend tout cela très facile.
</p><p><b>La fonctionnalité "apostrophes magiques' est activée par la directive "magic_quotes_gpc" de la configuration de PHP</b>. Pour une gestion plus efficace et plus lisible des paramètres de formulaire, désactivez magic_quotes_gpc et utilisez plutôt des marqueurs d'emplacement ou une fonction de protection lorsque vous devez préparer des données externes pour qu'elles soient utilisées dans une requête de base de données.
</p><p>Pour utiliser un marque d'emplacement dans une requête, mettez un "?" dans celle-ci à chaque endroit où vous souhaitez mettre une valeur.
</p>
<ul><li> Exemple d'insertion de données non sûres, provenant d'un formulaire&#160;:</li></ul>
<pre>$db-&gt;query("INSERT INTO dishes (dish_name) VALUES ('$_POST[new_dish_name]')"); 
</pre>
<ul><li> Exemple d'insertion sûre de données provenant d'un formulaire&#160;:</li></ul>
<pre>$db-&gt;query('INSERT INTO dishes (dish_name) VALUES (?)', array($_POST['new_dish_name']));
</pre>
<p>Vous n'avez pas besoin d'entourer d'apostrophes les marqueurs d'emplacement dans la requête. DB s'en occupe également pour vous.
</p>
<ul><li> Utilisation de plusieurs marqueurs d'emplacement&#160;:</li></ul>
<pre>$db-&gt;query('INSERT INTO dishes (dish_name,price,is_spicy) VALUES (?,?,?)', array($_POST['new_dish_name'], $_POST['new_price'], $_POST['is_spicy']));
</pre>
<h2><span class="mw-headline" id="G.C3.A9n.C3.A9ration_d.27identifiants_uniques"><span class="mw-headline-number">8.5</span> Génération d'identifiants uniques</span></h2>
<p>Les séquences de PEAR DB vous aideront a produire des identifiants entiers uniques. En effet, lorsque l'on demande l'identifiant suivant d'une séquence particulière, on obtient un nombre dont on est sûr qu'il sera unique dans cette séquence. Même si 2 scripts PHP s'exécutent simultanément et demandent au même instant l'identifiant suivant dans une séquence, chacun d'eux obtiendra une valeur différente.
</p>
<ul><li> Obtention d'un identifiant d'une séquence&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$dish_id</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">nextID</span><span class="br0">&#40;</span><span class="st_h">'dishes'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;INSERT INTO orders (dish_id, dish_name, price, is_spicy)
    VALUES (<span class="es4">$dish_id</span>, 'Fried Bean Curd', 1.50, 0)&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="R.C3.A9cup.C3.A9ration_des_donn.C3.A9es_stock.C3.A9es_dans_la_base"><span class="mw-headline-number">8.6</span> Récupération des données stockées dans la base</span></h2>
<p>Lorsque la fonction <i>query()</i> effectue avec succès une commande SELECT, query() renvoie un objet donnant accès donnant aux lignes obtenues et, à chaque fois que appelerez la fonction <i>fetchRow()</i> sur cet objet, vous obtiendrez la ligne suivante du résultat de la requête. Lorsqu'il n'y a plus de lignes, <i>fetchRow()</i> renvoie une valeur considérée comme fausse, ce qui permet de l'utiliser dans une boucle while().
</p>
<ul><li> Récupération de lignes avec query() et fetchRow()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="re0">$q</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st_h">'SELECT dish_name, price FROM dishes'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$row</span> <span class="sy0">=</span> <span class="re0">$q</span><span class="sy0">-&gt;</span><span class="me1">fetchRow</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;<span class="es4">$row[0]</span>, <span class="es4">$row[1]</span> <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<p>Quand il n'y aura plus de ligne à renvoyer, fetchRow() renverra une valeur qui sera évaluée à false et la boucle while() se terminera.<br />
Pour connaître le nombre de lignes renvoyées par une requête SELECT (sans les parcourir toutes), utilisez la fonction numrows() de l'objet renvoyé par query().
</p>
<ul><li> Comptage des lignes avec numrows()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="re0">$q</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st_h">'SELECT dish_name, price FROM dishes'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st_h">'There are '</span> <span class="sy0">.</span> <span class="re0">$q</span><span class="sy0">-&gt;</span><span class="me1">numrows</span><span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st_h">' rows in the dishes table.'</span><span class="sy0">;</span></pre></div></div>
<p>La fonction getAll() exécute une requête SELECT et renvoie un tableau contenant toutes les lignes du résultat.
</p>
<ul><li> Récupération des lignes avec getAll()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="re0">$rows</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getAll</span><span class="br0">&#40;</span><span class="st_h">'SELECT dish_name, price FROM dishes'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$rows</span> <span class="kw1">as</span> <span class="re0">$row</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;<span class="es4">$row[0]</span>, <span class="es4">$row[1]</span> <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span></pre></div></div>
<p>Ce qui affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">Walnut Bun<span class="sy0">,</span> <span class="nu19">1.00</span> 
Cashew Nuts and White Mushrooms<span class="sy0">,</span> <span class="nu19">4.95</span> 
Dried Mulberries<span class="sy0">,</span> <span class="nu19">3.00</span> 
Eggplant with Chili Sauce<span class="sy0">,</span> <span class="nu19">6.50</span></pre></div></div>
<h3><span class="mw-headline" id="Select"><span class="mw-headline-number">8.6.1</span> Select</span></h3>
<p>Pour plus d'explications sur la fonction SELECT d'SQL, <a href="Introduction_au_SQL.html#SELECT_-_R.C3.A9cup.C3.A9rer_des_donn.C3.A9es" title="Introduction au SQL">reportez vous à l'introduction d'SQL</a>.
</p><p>Si vous n'attendez qu'une ligne en résultat d'une requête, utilisez plutôt getRow()&#160;: cette fonction exécute SELECT et ne renvoie qu'une seule ligne.
</p>
<ul><li> Récupération d'une ligne avec getRow()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="re0">$cheapest_dish_info</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getRow</span><span class="br0">&#40;</span><span class="st_h">'SELECT dish_name, price 
                                   FROM dishes ORDER BY price LIMIT 1'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st0">&quot;<span class="es4">$cheapest_dish_info[0]</span>, <span class="es4">$cheapest_dish_info[1]</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Si vous ne vous intéressez qu'a une seule colonne d'une seule ligne, utilisez la fonction getOne(). Elle envoie une requête SELECT et renvoie une valeur simple&#160;: la première colonne de la première ligne renvoyée.
</p>
<ul><li> Récupération d'une valeur avec getOne()&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="re0">$cheapest_dish</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getOne</span><span class="br0">&#40;</span><span class="st_h">'SELECT dish_name, price FROM dishes ORDER print &quot;The cheapest dish is $cheapest_dish&quot;;</span></pre></div></div>
<h2><span class="mw-headline" id="Modification_du_format_des_lignes_du_r.C3.A9sultat"><span class="mw-headline-number">8.7</span> Modification du format des lignes du résultat</span></h2>
<p>Pour plus d'explications sur la fonction Order By et Limit d'SQL, <a href="Introduction_au_SQL.html#ORDER_BY_et_LIMIT_-_Tri_des_donn.C3.A9es" title="Introduction au SQL">reportez vous à l'introduction d'SQL</a>.
</p><p>Jusqu'a maintenant, <i>fetchRow(), getAll() et getOne()</i> ont renvoyées des lignes de la base de données sous la forme de tablaux indicés ar des entiers. Cela permet d'interpoler facilement et rapidement les valeurs dans des chaînes entre apostrophes doubles, mais savoir, par exemple, à quelle colonne de la reqête SELECT correspond l'élément 6 du tableau est une opération délicate et sujette aux erreurs. Pour éviter cela, PEAR DB permet de récupérer chaque ligne du résultat dans un tableau indicé par des chaînes ou sous la forme d'un objet.
</p><p>Le mode de récupération, positionné par la fonction setFetchMode(), contrôle le format des lignes du résultat.
</p><p>En passant DB_FETCHMODE_ASSOC comme paramètre, on obtient les lignes du résultat sous la forme de tableaux indicés par des chaines.
</p>
<ul><li> Récupération des lignes sous la forme de tableaux indicés par des chaines&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="co1">// Change the fetch mode to string-keyed arrays </span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">setFetchMode</span><span class="br0">&#40;</span>DB_FETCHMODE_ASSOC<span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="kw1">print</span> <span class="st0">&quot;With query( ) and fetchRow( ): <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="co1">// get each row with query( ) and fetchRow( ); </span>
<span class="re0">$q</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;SELECT dish_name, price FROM dishes&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">while</span><span class="br0">&#40;</span><span class="re0">$row</span> <span class="sy0">=</span> <span class="re0">$q</span><span class="sy0">-&gt;</span><span class="me1">fetchRow</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;The price of <span class="es4">$row[dish_name]</span> is <span class="es4">$row[price]</span> <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="kw1">print</span> <span class="st0">&quot;With getAll( ): <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="co1">// get all the rows with getAll( ); </span>
<span class="re0">$dishes</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getAll</span><span class="br0">&#40;</span><span class="st_h">'SELECT dish_name, price FROM dishes'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$dishes</span> <span class="kw1">as</span> <span class="re0">$dish</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;The price of <span class="es4">$dish[dish_name]</span> is <span class="es4">$dish[price]</span> <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="kw1">print</span> <span class="st0">&quot;With getRow( ): <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="re0">$cheap</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getRow</span><span class="br0">&#40;</span><span class="st_h">'SELECT dish_name, price FROM dishes 
    ORDER BY price LIMIT 1'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">print</span> <span class="st0">&quot;The cheapest dish is <span class="es4">$cheap[dish_name]</span> with price <span class="es4">$cheap[price]</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<p>Ceci affichera&#160;:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1">With query<span class="br0">&#40;</span> <span class="br0">&#41;</span> and fetchRow<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">:</span> 
The price of Walnut Bun is <span class="nu19">1.00</span> 
The price of Cashew Nuts and White Mushrooms is <span class="nu19">4.95</span> 
The price of Dried Mulberries is <span class="nu19">3.00</span> 
The price of Eggplant with Chili Sauce is <span class="nu19">6.50</span> 
With getAll<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">:</span> 
The price of Walnut Bun is <span class="nu19">1.00</span> 
The price of Cashew Nuts and White Mushrooms is <span class="nu19">4.95</span> 
The price of Dried Mulberries is <span class="nu19">3.00</span> 
The price of Eggplant with Chili Sauce is <span class="nu19">6.50</span> 
With getRow<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">:</span> 
The cheapest dish is Walnut Bun with price <span class="nu19">1.00</span></pre></div></div>
<p>Les lignes renvoyées par ces fonctions sont désormais indicées par des chaines représentant les noms des colonnes de la table des plats.
</p><p><b>Pour obtenir des lignes sous la forme d'objets, passez en paramètre la constante DB_FETCHMODE_OBJECT à setFetchMode(). Chaque ligne de résultat sera alors un objet dont les attributs porteront les noms des colonnes de la table (comme les clés du tableau lorsque l'on utilise le mode de récupération DB_FETCHMODE_ASSOC).</b><br />
Par rapport aux tableaux indicés par des chaînes, le mode de récupération DB_FETCHMODE_OBJECT permet d'utiliser une syntaxe pour désigner les données plus concise et plus simple à interpoler&#160;: on donne le nom de l'objet suivit de -&gt; puis du nom de l'information souhaitée. $plat-&gt;nom_plat, par exemple, désigne linformation nom_plat qui se trouve dans l'objet $plat.
</p>
<ul><li> Récupération de lignes sous la forme d'objets&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="co1">// Change the fetch mode to objects </span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">setFetchMode</span><span class="br0">&#40;</span>DB_FETCHMODE_OBJECT<span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="kw1">print</span> <span class="st0">&quot;With query( ) and fetchRow( ): <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="co1">// get each row with query( ) and fetchRow( ); </span>
<span class="re0">$q</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st0">&quot;SELECT dish_name, price FROM dishes&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">while</span><span class="br0">&#40;</span><span class="re0">$row</span> <span class="sy0">=</span> <span class="re0">$q</span><span class="sy0">-&gt;</span><span class="me1">fetchRow</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;The price of <span class="es4">$row-&gt;dish_name</span> is <span class="es4">$row-&gt;price</span> <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="kw1">print</span> <span class="st0">&quot;With getAll( ): <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="co1">// get all the rows with getAll( ); </span>
<span class="re0">$dishes</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getAll</span><span class="br0">&#40;</span><span class="st_h">'SELECT dish_name, price FROM dishes'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$dishes</span> <span class="kw1">as</span> <span class="re0">$dish</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="kw1">print</span> <span class="st0">&quot;The price of <span class="es4">$dish-&gt;dish_name</span> is <span class="es4">$dish-&gt;price</span> <span class="es1">\n</span>&quot;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="kw1">print</span> <span class="st0">&quot;With getRow( ): <span class="es1">\n</span>&quot;</span><span class="sy0">;</span>
<span class="re0">$cheap</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getRow</span><span class="br0">&#40;</span><span class="st_h">'SELECT dish_name, price FROM dishes 
    ORDER BY price LIMIT 1'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">print</span> <span class="st0">&quot;The cheapest dish is <span class="es4">$cheap-&gt;dish_name</span> with price <span class="es4">$cheap-&gt;price</span>&quot;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="R.C3.A9cup.C3.A9ration_s.C3.A9curis.C3.A9e_des_donn.C3.A9es_d.27un_formulaire"><span class="mw-headline-number">8.8</span> Récupération sécurisée des données d'un formulaire</span></h2>
<p><b>Lorsque l'on utilise dans la clause WHERE d'une commande SELECT, UPDATE ou DELETE des données provenant d'un formulaire ou de toute autre source externe, il faut vérifier que les caractères jockers de SQL sont correctement désactivés dans ces données.</b>
</p><p>Pour que les caractères jockers de SQL saisis dans un formulaire soient désactivés dans les reqêtes, vous devez renoncer au confort et à la facilité que procurent les marqueurs d'emplacement et utiliser 2 autres fonctions&#160;:
</p>
<ul><li> quoteSmart() et DB</li>
<li> strtr(), fournie par PHP</li></ul>
<p>Appliquez d'abord quoteSmart() à la valeur soumise, ce qui aura le même effet sur les apostrophes, qu'un marqueur d'emplacement&#160;: cet appel remplacera par exemple, 'Homard à l'américaine' par 'Homard à l\'américaine'. L'étape suivant consiste à utiliser strtr() pour désactiver les caractère jockers de SQL,&#160;% et _.<br />
La valeur avec les apostrophes protégées et les caractères jockers désactivés peut ensuite être utilise dans une requête en toute sécurité.
</p>
<ul><li> Commande SELECT sans marqueurs d'emplacement&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="co1">// First, do normal quoting of the value </span>
<span class="re0">$dish</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">quoteSmart</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'dish_search'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="co1">// Then, put backslashes before underscores and percent signs </span>
<span class="re0">$dish</span> <span class="sy0">=</span> <span class="kw3">strtr</span><span class="br0">&#40;</span><span class="re0">$dish</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'_'</span> <span class="sy0">=&gt;</span> <span class="st_h">'\_'</span><span class="sy0">,</span> <span class="st_h">'%'</span> <span class="sy0">=&gt;</span> <span class="st_h">'\%'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="co1">// Now, $dish is sanitized and can be interpolated right into the query </span>
<span class="re0">$matches</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getAll</span><span class="br0">&#40;</span><span class="st0">&quot;SELECT dish_name, price FROM dishes WHERE dish_name LIKE <span class="es4">$dish</span>&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<p>Ici, vous ne pouvez pas utiliser un marqeur d'emplacement, car la désactivation des caractères jockers doit intervenir après la protection des apostrophes. En effet, celle-ci place des antislash avant les apostrophes simples, mais également devant les antislash avant les apostrophes simples, mais également devant les antislash&#160;: si strtr() ou avec les marqueurs d'emplacement) la retransformerait en '\\%homard\\%' Cette valeur sera interprétée par la base de données comme un antislash littéral, suivit d'un jocker&#160;%. Si quoteSmart() est d'abord appellée, par contre,&#160;%homard% sera transformé en '%homard%', puis strtr() le retransofmera en '%homard%'.
</p><p>Cette valeur sera interprétée par la base de données comme un pour cent littéral, suivi de hommard, suivi d'un autre pour-cent littéral ce qui est ce que l'utilisateur avait saisi.
</p><p>Des caractères jockers non désactivés peuvent avoir un effet encore plus terrible dans la clause WHERE d'une commande UPDATE ou DELETE. <b>L'exemple ci dessous est l'exemple de ce qui ne faut surtout pas faire</b>. Il montre une requête utilisant incorrectement des marqueurs d'emplacement afin d'autoriser une valeur extérieure à contrôler les plats qui seront vendus 1 euro.
</p>
<ul><li> Utilisation <b>incorrecte</b> de marqueurs d'emplacement dans une commande UPDATE</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st_h">'UPDATE dishes SET price = 1 WHERE dish_name LIKE&#160;?'</span><span class="sy0">,</span>
            <span class="kw3">array</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'dish_name'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
<h2><span class="mw-headline" id="Formulaire_de_consultation_complet"><span class="mw-headline-number">8.9</span> Formulaire de consultation complet</span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">&lt;?php</span> 
&#160;
<span class="co1">// Load PEAR DB </span>
<span class="kw1">require</span> <span class="st_h">'DB.php'</span><span class="sy0">;</span> 
<span class="co1">// Load the form helper functions. </span>
<span class="kw1">require</span> <span class="st_h">'formhelpers.php'</span><span class="sy0">;</span> 
&#160;
<span class="co1">// Connect to the database </span>
<span class="re0">$db</span> <span class="sy0">=</span> DB<span class="sy0">::</span><span class="me2">connect</span><span class="br0">&#40;</span><span class="st_h">'mysql://hunter:w)mp3s@db.example.com/restaurant'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="kw1">if</span> <span class="br0">&#40;</span>DB<span class="sy0">::</span><span class="me2">isError</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw3">die</span> <span class="br0">&#40;</span><span class="st0">&quot;Can't connect: &quot;</span> <span class="sy0">.</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span> 
&#160;
<span class="co1">// Set up automatic error handling </span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">setErrorHandling</span><span class="br0">&#40;</span>PEAR_ERROR_DIE<span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="co1">// Set up fetch mode: rows as objects </span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">setFetchMode</span><span class="br0">&#40;</span>DB_FETCHMODE_OBJECT<span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="co1">// Choices for the &quot;spicy&quot; menu in the form </span>
<span class="re0">$spicy_choices</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'no'</span><span class="sy0">,</span><span class="st_h">'yes'</span><span class="sy0">,</span><span class="st_h">'either'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
<span class="co1">// The main page logic: </span>
<span class="co1">// - If the form is submitted, validate and then process or redisplay </span>
<span class="co1">// - If it's not submitted, display </span>
<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'_submit_check'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="co1">// If validate_form( ) returns errors, pass them to show_form( ) </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$form_errors</span> <span class="sy0">=</span> validate_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        show_form<span class="br0">&#40;</span><span class="re0">$form_errors</span><span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
        <span class="co1">// The submitted data is valid, so process it </span>
        process_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
    <span class="co1">// The form wasn't submitted, so display </span>
    show_form<span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="kw2">function</span> show_form<span class="br0">&#40;</span><span class="re0">$errors</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="co1">// If the form is submitted, get defaults from submitted parameters </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'_submit_check'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$defaults</span> <span class="sy0">=</span> <span class="re0">$_POST</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
        <span class="co1">// Otherwise, set our own defaults </span>
        <span class="re0">$defaults</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'min_price'</span> <span class="sy0">=&gt;</span> <span class="st_h">'5.00'</span><span class="sy0">,</span> 
                      <span class="st_h">'max_price'</span> <span class="sy0">=&gt;</span> <span class="st_h">'25.00'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
    <span class="co1">// If errors were passed in, put them in $error_text (with HTML markup) </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$errors</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$error_text</span> <span class="sy0">=</span> <span class="st_h">'&lt;tr&gt;&lt;td&gt;You need to correct the following errors:'</span><span class="sy0">;</span> 
        <span class="re0">$error_text</span> <span class="sy0">.=</span> <span class="st_h">'&lt;/td&gt;&lt;td&gt;&lt;ul&gt;&lt;li&gt;'</span><span class="sy0">;</span> 
        <span class="re0">$error_text</span> <span class="sy0">.=</span> <span class="kw3">implode</span><span class="br0">&#40;</span><span class="st_h">'&lt;/li&gt;&lt;li&gt;'</span><span class="sy0">,</span><span class="re0">$errors</span><span class="br0">&#41;</span><span class="sy0">;</span> 
        <span class="re0">$error_text</span> <span class="sy0">.=</span> <span class="st_h">'&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
        <span class="co1">// No errors? Then $error_text is blank </span>
        <span class="re0">$error_text</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    <span class="co1">// Jump out of PHP mode to make displaying all the HTML tags easier </span>
<span class="sy1">?&gt;</span> 
&lt;form method=&quot;POST&quot; action=&quot;<span class="kw2">&lt;?php</span> <span class="kw1">print</span> <span class="re0">$_SERVER</span><span class="br0">&#91;</span><span class="st_h">'PHP_SELF'</span><span class="br0">&#93;</span><span class="sy0">;</span> <span class="sy1">?&gt;</span>&quot;&gt; 
&lt;table&gt; 
<span class="kw2">&lt;?php</span> <span class="kw1">print</span> <span class="re0">$error_text</span> <span class="sy1">?&gt;</span> 
&#160;
&lt;tr&gt;&lt;td&gt;Dish Name:&lt;/td&gt; 
&lt;td&gt;<span class="kw2">&lt;?php</span> input_text<span class="br0">&#40;</span><span class="st_h">'dish_name'</span><span class="sy0">,</span> <span class="re0">$defaults</span><span class="br0">&#41;</span> <span class="sy1">?&gt;</span>&lt;/td&gt;&lt;/tr&gt; 
&#160;
&lt;tr&gt;&lt;td&gt;Minimum Price:&lt;/td&gt; 
&lt;td&gt;<span class="kw2">&lt;?php</span> input_text<span class="br0">&#40;</span><span class="st_h">'min_price'</span><span class="sy0">,</span> <span class="re0">$defaults</span><span class="br0">&#41;</span> <span class="sy1">?&gt;</span>&lt;/td&gt;&lt;/tr&gt; 
&#160;
&lt;tr&gt;&lt;td&gt;Maximum Price:&lt;/td&gt; 
&lt;td&gt;<span class="kw2">&lt;?php</span> input_text<span class="br0">&#40;</span><span class="st_h">'max_price'</span><span class="sy0">,</span> <span class="re0">$defaults</span><span class="br0">&#41;</span> <span class="sy1">?&gt;</span>&lt;/td&gt;&lt;/tr&gt; 
&#160;
&lt;tr&gt;&lt;td&gt;Spicy:&lt;/td&gt; 
&lt;td&gt;<span class="kw2">&lt;?php</span> input_select<span class="br0">&#40;</span><span class="st_h">'is_spicy'</span><span class="sy0">,</span> <span class="re0">$defaults</span><span class="sy0">,</span> <span class="re0">$GLOBALS</span><span class="br0">&#91;</span><span class="st_h">'spicy_choices'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="sy1">?&gt;</span> 
&lt;/td&gt;&lt;/tr&gt; 
&#160;
&lt;tr&gt;&lt;td colspan=&quot;2&quot; align=&quot;center&quot;&gt;<span class="kw2">&lt;?php</span> input_submit<span class="br0">&#40;</span><span class="st_h">'search'</span><span class="sy0">,</span><span class="st_h">'Search'</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="sy1">?&gt;</span> 
&lt;/td&gt;&lt;/tr&gt; 
&#160;
&lt;/table&gt; 
&lt;input type=&quot;hidden&quot; name=&quot;_submit_check&quot; value=&quot;1&quot;/&gt; 
&lt;/form&gt; 
<span class="kw2">&lt;?php</span> 
      <span class="br0">&#125;</span> <span class="co1">// The end of show_form( ) </span>
&#160;
<span class="kw2">function</span> validate_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="re0">$errors</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span> <span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
    <span class="co1">// minimum price must be a valid floating point number </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'min_price'</span><span class="br0">&#93;</span> <span class="sy0">!=</span> <span class="kw3">strval</span><span class="br0">&#40;</span><span class="kw3">floatval</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'min_price'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Please enter a valid minimum price.'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    <span class="co1">// maximum price must be a valid floating point number </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'max_price'</span><span class="br0">&#93;</span> <span class="sy0">!=</span> <span class="kw3">strval</span><span class="br0">&#40;</span><span class="kw3">floatval</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'max_price'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Please enter a valid maximum price.'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    <span class="co1">// minimum price must be less than the maximum price </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'min_price'</span><span class="br0">&#93;</span> <span class="sy0">&gt;=</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'max_price'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'The minimum price must be less than the maximum price.'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span> <span class="kw3">array_key_exists</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'is_spicy'</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$GLOBALS</span><span class="br0">&#91;</span><span class="st_h">'spicy_choices'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$errors</span><span class="br0">&#91;</span>  <span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'Please choose a valid &quot;spicy&quot; option.'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
    <span class="kw1">return</span> <span class="re0">$errors</span><span class="sy0">;</span> 
<span class="br0">&#125;</span> 
&#160;
<span class="kw2">function</span> process_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="co1">// Access the global variable $db inside this function </span>
    <span class="kw2">global</span> <span class="re0">$db</span><span class="sy0">;</span> 
&#160;
    <span class="co1">// build up the query  </span>
    <span class="re0">$sql</span> <span class="sy0">=</span> <span class="st_h">'SELECT dish_name, price, is_spicy FROM dishes WHERE 
            price &gt;=&#160;? AND price &lt;=&#160;?'</span><span class="sy0">;</span> 
&#160;
    <span class="co1">// if a dish name was submitted, add to the WHERE clause </span>
    <span class="co1">// we use quoteSmart( ) and strtr( ) to prevent user-entered wildcards from working </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">strlen</span><span class="br0">&#40;</span><span class="kw3">trim</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'dish_name'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$dish</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">quoteSmart</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'dish_name'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
        <span class="re0">$dish</span> <span class="sy0">=</span> <span class="kw3">strtr</span><span class="br0">&#40;</span><span class="re0">$dish</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'_'</span> <span class="sy0">=&gt;</span> <span class="st_h">'\_'</span><span class="sy0">,</span> <span class="st_h">'%'</span> <span class="sy0">=&gt;</span> <span class="st_h">'\%'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
        <span class="re0">$sql</span> <span class="sy0">.=</span> <span class="st0">&quot; AND dish_name LIKE <span class="es4">$dish</span>&quot;</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    <span class="co1">// if is_spicy is &quot;yes&quot; or &quot;no&quot;, add appropriate SQL </span>
    <span class="co1">// (if it's &quot;either&quot;, we don't need to add is_spicy to the WHERE clause) </span>
    <span class="re0">$spicy_choice</span> <span class="sy0">=</span> <span class="re0">$GLOBALS</span><span class="br0">&#91;</span><span class="st_h">'spicy_choices'</span><span class="br0">&#93;</span><span class="br0">&#91;</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'is_spicy'</span><span class="br0">&#93;</span> <span class="br0">&#93;</span><span class="sy0">;</span> 
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$spicy_choice</span> <span class="sy0">=</span>  <span class="sy0">=</span> <span class="st_h">'yes'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$sql</span> <span class="sy0">.=</span> <span class="st_h">' AND is_spicy = 1'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">elseif</span> <span class="br0">&#40;</span><span class="re0">$spicy_choice</span> <span class="sy0">=</span>  <span class="sy0">=</span> <span class="st_h">'no'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$sql</span> <span class="sy0">.=</span> <span class="st_h">' AND is_spicy = 0'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    <span class="co1">// Send the query to the database program and get all the rows back </span>
    <span class="re0">$dishes</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">getAll</span><span class="br0">&#40;</span><span class="re0">$sql</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'min_price'</span><span class="br0">&#93;</span><span class="sy0">,</span> 
                                      <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'max_price'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">count</span><span class="br0">&#40;</span><span class="re0">$dishes</span><span class="br0">&#41;</span> <span class="sy0">=</span>  <span class="sy0">=</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="kw1">print</span> <span class="st_h">'No dishes matched.'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
        <span class="kw1">print</span> <span class="st_h">'&lt;table&gt;'</span><span class="sy0">;</span> 
        <span class="kw1">print</span> <span class="st_h">'&lt;tr&gt;&lt;th&gt;Dish Name&lt;/th&gt;&lt;th&gt;Price&lt;/th&gt;&lt;th&gt;Spicy?&lt;/th&gt;&lt;/tr&gt;'</span><span class="sy0">;</span> 
        <span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$dishes</span> <span class="kw1">as</span> <span class="re0">$dish</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
            <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$dish</span><span class="sy0">-&gt;</span><span class="me1">is_spicy</span> <span class="sy0">=</span>  <span class="sy0">=</span> <span class="nu0">1</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
                <span class="re0">$spicy</span> <span class="sy0">=</span> <span class="st_h">'Yes'</span><span class="sy0">;</span> 
            <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
                <span class="re0">$spicy</span> <span class="sy0">=</span> <span class="st_h">'No'</span><span class="sy0">;</span> 
            <span class="br0">&#125;</span> 
            <span class="kw3">printf</span><span class="br0">&#40;</span><span class="st_h">'&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;$%.02f&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;'</span><span class="sy0">,</span> 
                   <span class="kw3">htmlentities</span><span class="br0">&#40;</span><span class="re0">$dish</span><span class="sy0">-&gt;</span><span class="me1">dish_name</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="re0">$dish</span><span class="sy0">-&gt;</span><span class="me1">price</span><span class="sy0">,</span> <span class="re0">$spicy</span><span class="br0">&#41;</span><span class="sy0">;</span> 
        <span class="br0">&#125;</span> 
    <span class="br0">&#125;</span> 
<span class="br0">&#125;</span> 
<span class="sy1">?&gt;</span></pre></div></div>
<p>L'exemple ci dessus contient une ligne supplémentaire dans le code de configuration de la base de données&#160;: un appel à setFetchMode().
</p>
<h2><span class="mw-headline" id="MySQL_sans_PEAR_DB"><span class="mw-headline-number">8.10</span> MySQL sans PEAR DB</span></h2>
<p>PEAR DB arrondit beaucoup les angles de l'accès aux bases de donnée depuis un programme PHP, mais il y a 2 cas ou ce n'est pas toujours le meilleur choix&#160;: il peut ne pas être disponible sur certains systèmes et un programme utilisant les fnctions prédéfinies de PHP, conçues sur mesure pour une bae de données particulière, est plus rapide que s'il utilisait PEAR DB.
</p><p>Les différences sont dans les détails&#160;: les fonctions disponibles et leur fonctionnement varient selon les bases de données et, en général, on doit récupérer les résultats ligne par ligne car on ne dispose pas du confort procuré par getAll(). Il n'existe pas non plus de traitement unifié des erreurs.
</p>
<table border="1">
<tr>
<th>PEAR DB function
</th>
<th>mysqli function
</th>
<th>Comments
</th></tr>
<tr>
<td>$db = DB::connect( DSN)
</td>
<td>$db = mysqli_connect(hostname, username, password, database)
</td>
<td>
</td></tr>
<tr>
<td>$q = $db-&gt;query(SQL)
</td>
<td>$q = mysqli_query($db,SQL)
</td>
<td>There is no placeholder support in mysqli_query( ).
</td></tr>
<tr>
<td>$row = $q-&gt;fetchRow( )
</td>
<td>$row = mysqli_fetch_row($q)
</td>
<td>mysqli_fetch_row( ) always returns numerically indexed arrays. Use mysqli_fetch_assoc( ) for string-indexed arrays or mysqli_fetch_object( ) for objects.
</td></tr>
<tr>
<td>$db-&gt;affectedRows( )
</td>
<td>mysqli_affected_rows($db)
</td>
<td>
</td></tr>
<tr>
<td>$q-&gt;numRows( )
</td>
<td>mysqli_num_rows($q)
</td>
<td>
</td></tr>
<tr>
<td>$db-&gt;setErrorHandling(ERROR_MODE)
</td>
<td>None
</td>
<td>You can't set automatic error handling with mysqli, but mysqli_connect_error( ) gives you the error message if something goes wrong connecting to the database program, and mysqli_error($db)gives you the error message after a query or other function call fails.
</td></tr></table>
<ul><li> Focntion traiter_form() utilisant mysqli&#160;:</li></ul>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="php source-php"><pre class="de1"><span class="kw2">function</span> process_form<span class="br0">&#40;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> 
    <span class="co1">// Access the global variable $db inside this function </span>
    <span class="kw2">global</span> <span class="re0">$db</span><span class="sy0">;</span> 
&#160;
    <span class="co1">// build up the query  </span>
    <span class="re0">$sql</span> <span class="sy0">=</span> <span class="st_h">'SELECT dish_name, price, is_spicy FROM dishes WHERE '</span><span class="sy0">;</span> 
&#160;
    <span class="co1">// add the minimum price to the query </span>
    <span class="re0">$sql</span> <span class="sy0">.=</span> <span class="st0">&quot;price &gt;= '&quot;</span> <span class="sy0">.</span> 
            <span class="kw3">mysqli_real_escape_string</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'min_price'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st0">&quot;' &quot;</span><span class="sy0">;</span> 
&#160;
    <span class="co1">// add the maximum price to the query </span>
    <span class="re0">$sql</span> <span class="sy0">.=</span> <span class="st0">&quot; AND price &lt;= '&quot;</span> <span class="sy0">.</span> 
            <span class="kw3">mysqli_real_escape_string</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'max_price'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st0">&quot;' &quot;</span><span class="sy0">;</span> 
&#160;
    <span class="co1">// if a dish name was submitted, add to the WHERE clause </span>
    <span class="co1">// we use mysqli_real_escape_string( ) and strtr( ) to prevent </span>
    <span class="co1">// user-entered wildcards from working </span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">strlen</span><span class="br0">&#40;</span><span class="kw3">trim</span><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'dish_name'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$dish</span> <span class="sy0">=</span> <span class="kw3">mysqli_real_escape_string</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'dish_name'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
        <span class="re0">$dish</span> <span class="sy0">=</span> <span class="kw3">strtr</span><span class="br0">&#40;</span><span class="re0">$dish</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'_'</span> <span class="sy0">=&gt;</span> <span class="st_h">'\_'</span><span class="sy0">,</span> <span class="st_h">'%'</span> <span class="sy0">=&gt;</span> <span class="st_h">'\%'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
        <span class="co1">// mysqli_real_escape_string( ) doesn't add the single quotes </span>
        <span class="co1">// around the value so you have to put those around $dish in </span>
        <span class="co1">// the query: </span>
        <span class="re0">$sql</span> <span class="sy0">.=</span> <span class="st0">&quot; AND dish_name LIKE '<span class="es4">$dish</span>'&quot;</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    <span class="co1">// if is_spicy is &quot;yes&quot; or &quot;no&quot;, add appropriate SQL </span>
    <span class="co1">// (if it's either, we don't need to add is_spicy to the WHERE clause) </span>
    <span class="re0">$spicy_choice</span> <span class="sy0">=</span> <span class="re0">$GLOBALS</span><span class="br0">&#91;</span><span class="st_h">'spicy_choices'</span><span class="br0">&#93;</span><span class="br0">&#91;</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'is_spicy'</span><span class="br0">&#93;</span> <span class="br0">&#93;</span><span class="sy0">;</span> 
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$spicy_choice</span> <span class="sy0">=</span>  <span class="sy0">=</span> <span class="st_h">'yes'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$sql</span> <span class="sy0">.=</span> <span class="st_h">' AND is_spicy = 1'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">elseif</span> <span class="br0">&#40;</span><span class="re0">$spicy_choice</span> <span class="sy0">=</span>  <span class="sy0">=</span> <span class="st_h">'no'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="re0">$sql</span> <span class="sy0">.=</span> <span class="st_h">' AND is_spicy = 0'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> 
&#160;
    <span class="co1">// Send the query to the database program and get all the rows back </span>
    <span class="re0">$q</span> <span class="sy0">=</span> <span class="kw3">mysqli_query</span><span class="br0">&#40;</span><span class="re0">$db</span><span class="sy0">,</span> <span class="re0">$sql</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&#160;
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw3">mysqli_num_rows</span><span class="br0">&#40;</span><span class="re0">$q</span><span class="br0">&#41;</span> <span class="sy0">=</span>  <span class="sy0">=</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
        <span class="kw1">print</span> <span class="st_h">'No dishes matched.'</span><span class="sy0">;</span> 
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
        <span class="kw1">print</span> <span class="st_h">'&lt;table&gt;'</span><span class="sy0">;</span> 
        <span class="kw1">print</span> <span class="st_h">'&lt;tr&gt;&lt;th&gt;Dish Name&lt;/th&gt;&lt;th&gt;Price&lt;/th&gt;&lt;th&gt;Spicy?&lt;/th&gt;&lt;/tr&gt;'</span><span class="sy0">;</span> 
        <span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$dish</span> <span class="sy0">=</span> <span class="kw3">mysqli_fetch_object</span><span class="br0">&#40;</span><span class="re0">$q</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> 
            <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$dish</span><span class="sy0">-&gt;</span><span class="me1">is_spicy</span>
                <span class="re0">$spicy</span> <span class="sy0">=</span> <span class="st_h">'Yes'</span><span class="sy0">;</span>
            <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span> 
                <span class="re0">$spicy</span> <span class="sy0">=</span> <span class="st_h">'No'</span><span class="sy0">;</span> 
            <span class="br0">&#125;</span> 
            <span class="kw3">printf</span><span class="br0">&#40;</span><span class="st_h">'&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;$%.02f&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;'</span><span class="sy0">,</span> 
                   <span class="kw3">htmlentities</span><span class="br0">&#40;</span><span class="re0">$dish</span><span class="sy0">-&gt;</span><span class="me1">dish_name</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="re0">$dish</span><span class="sy0">-&gt;</span><span class="me1">price</span><span class="sy0">,</span> <span class="re0">$spicy</span><span class="br0">&#41;</span><span class="sy0">;</span> 
        <span class="br0">&#125;</span> 
    <span class="br0">&#125;</span> 
<span class="br0">&#125;</span></pre></div></div>
<p>Les marqueurs d'emplacement de PEAR DB n'étant pas disponible ici, les prix minimum et maximum sont directement placés dans la variable $sql qui contient la requête, mais après avoir été protégés par mysqli_real_escape_string(). Cette même fonction sert également à protégéer $_POST['dish_name']. Enfin, les fonctions servant à passer la requête à la base et à récupérer les résultats sont différentes&#160;: la fonction mysqli_query() envoie la requête, mysqli_num_rows() renvoie le nombre de lignes du résultat et mysqli_fetch_object() récupère chaque ligne de ce résultat dans un objet.
</p>
<h1><span class="mw-headline" id="M.C3.A9morisation_des_utilisateurs_gr.C3.A2ce_aux_cookies_et_aux_sessions"><span class="mw-headline-number">9</span> Mémorisation des utilisateurs grâce aux cookies et aux sessions</span></h1>
<p>Un seul cookie est parfait pour mémoriser une même information mais, souvent, vous devrez conserver plusieurs données pour un même utilisateur (le contenu de son caddie virtuel par exemple). L'utilisation de plusieurs cookies dans ce but implique un traitement lourd&#160;: les sessions de PHP permettent alors de résoudre ce problème.
</p><p>Une session utilise un cookie pour différencie les utilisateurs et facilite la mémorisation d'un ensemble temporaire de données pour chacun d'eux sur le serveur. Ces données persistent entre les requêtes&#160;: lors d'une requête, vous pouvez ajouter une variable à la session d'un utilisateur (comme lorsque l'on ajoute un article dans le caddie virtuel) et, à la suivante, vous pouvez récupérer ce qui se trouve dans cette session (comme sur la page de validation d'une commande, lorsque vous devez énumérer tout ce qui se trouve dans le caddie). Dans la section Stockage et récupération des informations, nous verrons comment les utiliser.
</p>
<h1><span class="mw-headline" id="D.C3.A9bogage"><span class="mw-headline-number">10</span> Débogage</span></h1>
<p><a href="./File:Débogage_et_profiling_de_code_PHP.pdf.html" title="File:Débogage et profiling de code PHP.pdf">Débogage et profiling de code PHP</a>
</p>
<h1><span class="mw-headline" id="Ressources"><span class="mw-headline-number">11</span> Ressources</span></h1>
<p><a rel="nofollow" class="external text" href="http://books.google.fr/books?id=fAlN55KwKjcC">Livre d'Introduction à PHP 5</a><br />
<a href="./File:Pear_et_les_librairies_PHP.pdf.html" title="File:Pear et les librairies PHP.pdf">Pear et les librairies PHP</a>
</p>
<!-- 
NewPP limit report
CPU time usage: 2.912 seconds
Real time usage: 2.912 seconds
Preprocessor visited node count: 1282/1000000
Preprocessor generated node count: 2582/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key blocnotesinfo-wiki_:pcache:idhash:2639-0!*!0!1!en!5!* and timestamp 20181111230832 and revision id 9424
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://wiki.deimos.fr/index.php?title=Introduction_au_PHP&amp;oldid=9424">https://wiki.deimos.fr/index.php?title=Introduction_au_PHP&amp;oldid=9424</a>"					</div>
													<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://wiki.deimos.fr/index.php?title=Special:UserLogin&amp;returnto=Introduction+au+PHP" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="Introduction_au_PHP.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="Introduction_au_PHP.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="Introduction_au_PHP.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="https://wiki.deimos.fr/index.php?title=Introduction_au_PHP&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="https://wiki.deimos.fr/index.php?title=Introduction_au_PHP&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="Introduction_au_PHP.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://wiki.deimos.fr/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Deimos.fr / Bloc Notes Informatique [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(images/a/a7/Logo_deimosfr.png);" href="index.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation_et_RSS' aria-labelledby='p-navigation_et_RSS-label'>
			<h3 id='p-navigation_et_RSS-label'>navigation et RSS</h3>

			<div class="body">
									<ul>
													<li id="n-cd-.7E"><a href="index.html">cd ~</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Menu' aria-labelledby='p-Menu-label'>
			<h3 id='p-Menu-label'>Menu</h3>

			<div class="body">
									<ul>
													<li id="n-Solaris"><a href="Solaris.html">Solaris</a></li>
													<li id="n-BSD"><a href="BSD.html">BSD</a></li>
													<li id="n-Linux"><a href="Linux.html">Linux</a></li>
													<li id="n-Mac-OS-X"><a href="Mac_OS_X.html">Mac OS X</a></li>
													<li id="n-Windows"><a href="Windows.html">Windows</a></li>
													<li id="n-Servers"><a href="Serveurs.html">Servers</a></li>
													<li id="n-Development"><a href="Développement.html">Development</a></li>
													<li id="n-Ethical-Hacking"><a href="Hacking_éthique.html">Ethical Hacking</a></li>
													<li id="n-Network"><a href="Réseaux.html">Network</a></li>
													<li id="n-Divers"><a href="Divers.html">Divers</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Liens' aria-labelledby='p-Liens-label'>
			<h3 id='p-Liens-label'>Liens</h3>

			<div class="body">
									<ul>
													<li id="n-Welcome-Page"><a href="http://www.deimos.fr" rel="nofollow">Welcome Page</a></li>
													<li id="n-Blog"><a href="http://blog.deimos.fr" rel="nofollow">Blog</a></li>
													<li id="n-Resume"><a href="https://www.linkedin.com/in/pmavro/" rel="nofollow">Resume</a></li>
													<li id="n-GitHub"><a href="https://github.com/deimosfr" rel="nofollow">GitHub</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Google_Search' aria-labelledby='p-Google_Search-label'>
			<h3 id='p-Google_Search-label'>Google Search</h3>

			<div class="body">
									
<div><form action="http://www.google.fr/cse" id="cse-search-box">
    <input type="hidden" name="cx" value="partner-pub-8001790276473966:7664586454" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="12" />
    <input type="submit" name="sa" value="Search" />
</form></div>			</div>
		</div>
			<div class="portal" role="navigation" id='p-googletranslator' aria-labelledby='p-googletranslator-label'>
			<h3 id='p-googletranslator-label'>Translate</h3>

			<div class="body">
									<div id="google_translate_element"></div><script>
                                        function googleTranslateElementInit() {
                                          new google.translate.TranslateElement({
                                            pageLanguage: 'fr',
                                            includedLanguages: 'en,de,es'
                                          }, 'google_translate_element');
                                        }
                                        </script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>			</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="./Special:WhatLinksHere/Introduction_au_PHP.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="https://wiki.deimos.fr/Special:RecentChangesLinked/Introduction_au_PHP" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="https://wiki.deimos.fr/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="https://wiki.deimos.fr/index.php?title=Introduction_au_PHP&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="https://wiki.deimos.fr/index.php?title=Introduction_au_PHP&amp;oldid=9424" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="https://wiki.deimos.fr/index.php?title=Introduction_au_PHP&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 27 December 2010, at 21:26.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr">Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wiki.deimos.fr/blocnotesinfo:Privacy_policy" title="blocnotesinfo:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://wiki.deimos.fr/blocnotesinfo:About" title="blocnotesinfo:About">About Deimos.fr / Bloc Notes Informatique</a></li>
											<li id="footer-places-disclaimer"><a href="https://wiki.deimos.fr/blocnotesinfo:General_disclaimer" title="blocnotesinfo:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.fr"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 3.0 non transposé" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
															<a href="http://www.mediawiki.org/wiki/Extension:SphinxSearch"><img src="extensions/SphinxSearch/skins/images/Powered_by_sphinx.png" alt="Search Powered by Sphinx" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.deimos.fr/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63927289-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript" src="https://analytics.example.com/tracking.js"></script><script src="https://js.reactk.com/script/reactk.min.js"></script><script type="text/javascript">reactk.init("B7stJmobgweRBoDZrLflNQpDcgFxET");</script> 
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":2953});
}</script>
	</body>
</html>
	